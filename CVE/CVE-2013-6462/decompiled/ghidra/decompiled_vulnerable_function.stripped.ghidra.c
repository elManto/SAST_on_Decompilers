
/* WARNING: Could not reconcile some variable overlaps */

undefined8
bdfReadCharacters(undefined8 param_1,long param_2,long param_3,int param_4,int param_5,int param_6,
                 int param_7)

{
  uint uVar1;
  byte bVar2;
  ushort uVar3;
  long lVar4;
  short sVar5;
  undefined uVar6;
  byte bVar7;
  short sVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  int iVar12;
  char *__s;
  void *pvVar13;
  undefined8 uVar14;
  undefined8 *puVar15;
  undefined *puVar16;
  byte *__s_00;
  long lVar17;
  long lVar18;
  uint *puVar19;
  uint *puVar20;
  ulong uVar21;
  undefined8 *puVar22;
  uint uVar23;
  int iVar24;
  ulong uVar25;
  void **ppvVar26;
  undefined *puVar27;
  void **ppvVar28;
  byte *pbVar29;
  uint uVar30;
  short sVar31;
  ulong uVar32;
  char cVar33;
  undefined2 uVar34;
  int iVar35;
  byte *pbVar36;
  void **ppvVar37;
  long in_FS_OFFSET;
  bool bVar38;
  bool bVar39;
  bool bVar40;
  byte bVar41;
  void **local_1198;
  short *local_1168;
  void *local_1158;
  uint local_1150;
  char *local_1148;
  uint local_1140;
  undefined *local_1138;
  uint local_1130;
  int local_112c;
  int local_1108;
  int local_1104;
  uint local_10dc;
  int local_10d8;
  int local_10d4;
  int local_10d0;
  int local_10cc;
  undefined4 local_10c8;
  int local_10c4;
  uint local_10c0;
  uint local_10bc;
  void *local_10b8 [256];
  char BufNameDecompiled [112];
  undefined local_848 [1024];
  undefined local_448 [1032];
  long local_40;
  
  bVar41 = 0;
  lVar4 = *(long *)(param_2 + 0x98);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  ppvVar37 = *(void ***)(lVar4 + 0x38);
  local_1198 = (void **)0x0;
  if (ppvVar37 != (void **)0x0) {
    local_1198 = ppvVar37 + 2;
    ppvVar37[2] = (void *)0x0;
    ppvVar37[3] = (void *)0x0;
  }
  ppvVar26 = local_10b8;
  lVar17 = 0x100;
  *(undefined8 *)(lVar4 + 0x10) = 0;
  ppvVar28 = ppvVar26;
  while (lVar17 != 0) {
    lVar17 = lVar17 + -1;
    *ppvVar28 = (void *)0x0;
    ppvVar28 = ppvVar28 + 1;
  }
  __s = (char *)bdfGetLine(param_1,local_848,0x400);
  if ((__s == (char *)0x0) || (iVar9 = sscanf(__s,"CHARS %d",&local_10dc), iVar9 != 1)) {
    bdfError("bad \'CHARS\' in bdf file\n");
    uVar14 = 0;
    goto LAB_001193d7;
  }
  if ((int)local_10dc < 1) {
    bdfError("invalid number of CHARS in BDF file\n");
    uVar14 = 0;
    goto LAB_001193d7;
  }
  if ((int)local_10dc < 0x5555556) {
    local_1168 = (short *)calloc((long)(int)local_10dc,0x18);
    if (local_1168 == (short *)0x0) {
      local_10b8[0] = (void *)0x0;
      bdfError("Couldn\'t allocate pCI (%d*%d)\n",(ulong)local_10dc,0x18);
    }
    else {
      *(short **)(lVar4 + 0x10) = local_1168;
      if (ppvVar37 != (void **)0x0) {
        pvVar13 = malloc((long)(int)local_10dc << 3);
        *ppvVar37 = pvVar13;
        if (pvVar13 == (void *)0x0) {
          local_10b8[0] = (void *)0x0;
          bdfError("Couldn\'t allocate glyphNames (%d*%d)\n",(ulong)local_10dc,8);
          goto LAB_0011942c;
        }
        pvVar13 = malloc((long)(int)local_10dc << 2);
        ppvVar37[1] = pvVar13;
        if (pvVar13 == (void *)0x0) {
          bdfError("Couldn\'t allocate sWidth (%d *%d)\n",(ulong)local_10dc,4);
          uVar14 = 0;
          goto LAB_001193d7;
        }
      }
      __s_00 = (byte *)bdfGetLine(param_1,local_848,0x400);
      uVar21 = (ulong)local_10dc;
      *(undefined8 *)(param_2 + 8) = 0x10000000100;
      if ((int)local_10dc < 1) {
        uVar25 = 0;
        local_112c = 0;
        local_1150 = 0;
LAB_0011a23a:
        if ((int)uVar25 == (int)uVar21) {
          local_10dc = local_1150;
          bVar40 = false;
          bVar38 = __s_00 == (byte *)0x0;
          *(uint *)(lVar4 + 4) = local_1150;
          if (bVar38) {
LAB_0011992f:
            bdfError("missing \'ENDFONT\'\n");
          }
          else {
LAB_0011a1c3:
            local_1148 = "STARTCHAR";
            lVar17 = 9;
            pbVar36 = __s_00;
            do {
              if (lVar17 == 0) break;
              lVar17 = lVar17 + -1;
              bVar40 = *pbVar36 < (byte)*local_1148;
              bVar38 = *pbVar36 == *local_1148;
              pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
              local_1148 = (char *)((byte *)local_1148 + (ulong)bVar41 * -2 + 1);
            } while (bVar38);
            bVar39 = false;
            bVar40 = (!bVar40 && !bVar38) == bVar40;
            local_10dc = local_1150;
            if (bVar40) {
              bdfError("more characters than specified\n");
            }
            else {
              lVar17 = 7;
              pbVar36 = (byte *)"ENDFONT";
              do {
                if (lVar17 == 0) break;
                lVar17 = lVar17 + -1;
                bVar39 = *__s_00 < *pbVar36;
                bVar40 = *__s_00 == *pbVar36;
                __s_00 = __s_00 + (ulong)bVar41 * -2 + 1;
                pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
              } while (bVar40);
              cVar33 = (!bVar39 && !bVar40) - bVar39;
              iVar9 = (int)cVar33;
              if (cVar33 != '\0') goto LAB_0011992f;
              if (local_112c == 0) {
                bdfWarning("No characters with valid encodings\n");
              }
              iVar12 = (((uint)*(ushort *)(param_2 + 0xe) - (uint)*(ushort *)(param_2 + 0xc)) + 1) *
                       (((uint)*(ushort *)(param_2 + 10) - (uint)*(ushort *)(param_2 + 8)) + 1);
              iVar35 = iVar12 + 0x7f;
              if (iVar35 < 0) {
                iVar35 = iVar12 + 0xfe;
              }
              pvVar13 = calloc((long)(iVar35 >> 7),8);
              *(void **)(lVar4 + 0x28) = pvVar13;
              if (pvVar13 != (void *)0x0) {
                uVar21 = (ulong)*(ushort *)(param_2 + 0xc);
                uVar25 = (ulong)*(ushort *)(param_2 + 0xe);
                *(byte *)(param_2 + 0x12) = *(byte *)(param_2 + 0x12) | 0x40;
                if (*(ushort *)(param_2 + 0xc) <= *(ushort *)(param_2 + 0xe)) {
                  ppvVar37 = ppvVar26 + uVar21;
                  do {
                    pvVar13 = *ppvVar37;
                    uVar3 = *(ushort *)(param_2 + 8);
                    if (pvVar13 == (void *)0x0) {
                      *(byte *)(param_2 + 0x12) = *(byte *)(param_2 + 0x12) & 0xbf;
                      iVar9 = iVar9 + 1 + ((uint)*(ushort *)(param_2 + 10) - (uint)uVar3);
                    }
                    else {
                      if (uVar3 <= *(ushort *)(param_2 + 10)) {
                        lVar17 = (ulong)uVar3 * 8;
                        iVar35 = (uint)uVar3 - iVar9;
                        while( true ) {
                          lVar18 = *(long *)((long)pvVar13 + lVar17);
                          if (lVar18 == 0) {
                            *(byte *)(param_2 + 0x12) = *(byte *)(param_2 + 0x12) & 0xbf;
                          }
                          else {
                            iVar12 = iVar9 + 0x7f;
                            if (-1 < iVar9) {
                              iVar12 = iVar9;
                            }
                            ppvVar28 = (void **)(*(long *)(lVar4 + 0x28) + (long)(iVar12 >> 7) * 8);
                            pvVar13 = *ppvVar28;
                            if (pvVar13 == (void *)0x0) {
                              pvVar13 = calloc(0x80,8);
                              *ppvVar28 = pvVar13;
                              pvVar13 = *(void **)(*(long *)(lVar4 + 0x28) + (long)(iVar12 >> 7) * 8
                                                  );
                              if (pvVar13 == (void *)0x0) goto LAB_0011942c;
                            }
                            uVar23 = (uint)(iVar9 >> 0x1f) >> 0x19;
                            *(long *)((long)pvVar13 +
                                     (long)(int)((iVar9 + uVar23 & 0x7f) - uVar23) * 8) = lVar18;
                          }
                          iVar9 = iVar9 + 1;
                          lVar17 = lVar17 + 8;
                          if ((uint)*(ushort *)(param_2 + 10) < (uint)(iVar35 + iVar9)) break;
                          pvVar13 = *ppvVar37;
                        }
                        uVar25 = (ulong)*(ushort *)(param_2 + 0xe);
                      }
                    }
                    uVar23 = (int)uVar21 + 1;
                    uVar21 = (ulong)uVar23;
                    ppvVar37 = ppvVar37 + 1;
                  } while (uVar23 <= (uint)uVar25);
                }
                do {
                  if (*ppvVar26 != (void *)0x0) {
                    free(*ppvVar26);
                  }
                  ppvVar26 = ppvVar26 + 1;
                } while ((void **)BufNameDecompiled != ppvVar26);
                uVar14 = 1;
                goto LAB_001193d7;
              }
              bdfError("Couldn\'t allocate ppCI (%d,%d)\n",(ulong)(uint)(iVar35 >> 7),8);
            }
          }
          goto LAB_0011942c;
        }
      }
      else {
        bVar40 = __s_00 == (byte *)0x0;
        if (bVar40) {
          local_10b8[0] = (void *)0x0;
          uVar25 = 0;
        }
        else {
          local_112c = 0;
          local_1108 = 0;
          local_1150 = 0;
          local_1148 = "STARTCHAR";
          do {
            bVar38 = false;
            lVar17 = 9;
            pbVar36 = __s_00;
            pbVar29 = (byte *)local_1148;
            do {
              if (lVar17 == 0) break;
              lVar17 = lVar17 + -1;
              bVar38 = *pbVar36 < *pbVar29;
              bVar40 = *pbVar36 == *pbVar29;
              pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
              pbVar29 = pbVar29 + (ulong)bVar41 * -2 + 1;
            } while (bVar40);
            uVar23 = SEXT14((char)((!bVar38 && !bVar40) - bVar38));
            uVar25 = (ulong)uVar23;
            if (uVar23 != 0) {
              uVar23 = local_1108 + local_1150;
              uVar25 = (ulong)uVar23;
              bVar40 = uVar23 < (uint)uVar21;
              bVar38 = uVar23 == (uint)uVar21;
              if (!bVar38) goto LAB_0011a117;
              *(uint *)(lVar4 + 4) = local_1150;
              goto LAB_0011a1c3;
            }
            iVar9 = sscanf((char *)__s_00,"STARTCHAR %s",BufNameDecompiled);
            if (iVar9 != 1) {
              bdfError("bad character name in BDF file\n");
              goto LAB_0011942c;
            }
            if (ppvVar37 != (void **)0x0) {
              pvVar13 = *ppvVar37;
              uVar14 = bdfForceMakeAtom(BufNameDecompiled,0);
              *(undefined8 *)((long)pvVar13 + (long)(int)local_1150 * 8) = uVar14;
            }
            __s = (char *)bdfGetLine(param_1,local_848,0x400);
            if ((__s == (char *)0x0) ||
               (iVar9 = sscanf(__s,"ENCODING %d %d",&local_10c0,&local_10bc), iVar9 < 1)) {
              bdfError("bad \'ENCODING\' in BDF file\n");
              goto LAB_0011942c;
            }
            uVar21 = (ulong)local_10c0;
            if ((int)local_10c0 < -1) {
LAB_0011a12e:
              bdfError("bad ENCODING value");
              goto LAB_0011942c;
            }
            if (iVar9 == 2) {
              if ((int)local_10bc < -1) goto LAB_0011a12e;
              if (local_10c0 == 0xffffffff) {
                uVar21 = (ulong)local_10bc;
                local_10c0 = local_10bc;
                goto LAB_001195f9;
              }
LAB_00119602:
              if ((int)uVar21 < 0x10000) {
                uVar32 = uVar21 & 0xff;
                uVar23 = (int)uVar21 >> 8;
                uVar34 = (undefined2)(uVar21 >> 8);
                if (uVar23 < *(ushort *)(param_2 + 0xc)) {
                  *(undefined2 *)(param_2 + 0xc) = uVar34;
                }
                if (*(ushort *)(param_2 + 0xe) < uVar23) {
                  *(undefined2 *)(param_2 + 0xe) = uVar34;
                }
                if ((uint)uVar32 < (uint)*(ushort *)(param_2 + 8)) {
                  *(undefined2 *)(param_2 + 8) = (short)uVar32;
                }
                if ((uint)*(ushort *)(param_2 + 10) < (uint)uVar32) {
                  *(undefined2 *)(param_2 + 10) = (short)uVar32;
                }
                puVar15 = (undefined8 *)local_10b8[uVar23];
                if (puVar15 == (undefined8 *)0x0) {
                  puVar15 = (undefined8 *)malloc(0x800);
                  *(undefined8 **)(local_10b8 + uVar23) = puVar15;
                  if (puVar15 == (undefined8 *)0x0) {
                    bdfError("Couldn\'t allocate row %d of encoding (%d*%d)\n",(ulong)uVar23,0x100,8
                            );
                    goto LAB_0011942c;
                  }
                  puVar22 = puVar15;
                  do {
                    *puVar22 = 0;
                    puVar22 = puVar22 + 1;
                  } while (puVar22 != puVar15 + 0x100);
                }
                local_112c = local_112c + 1;
                *(short **)(puVar15 + uVar32) = local_1168;
              }
              else {
                bdfError("char \'%s\' has encoding too large (%d)\n",BufNameDecompiled);
              }
            }
            else {
LAB_001195f9:
              if ((int)uVar21 != -1) goto LAB_00119602;
              if (ppvVar37 == (void **)0x0) {
                local_1108 = local_1108 + 1;
                uVar25 = 1;
              }
            }
            __s = (char *)bdfGetLine(param_1,local_848,0x400);
            if (__s == (char *)0x0) {
LAB_0011a081:
              bdfError("bad \'SWIDTH\'\n");
              goto LAB_0011942c;
            }
            iVar9 = sscanf(__s,"SWIDTH %d %d",&local_10d8);
            if (iVar9 != 2) goto LAB_0011a081;
            if (local_10d4 != 0) {
              bdfError("SWIDTH y value must be zero\n");
              goto LAB_0011942c;
            }
            if (ppvVar37 != (void **)0x0) {
              *(int *)((long)ppvVar37[1] + (long)(int)local_1150 * 4) = local_10d8;
            }
            __s = (char *)bdfGetLine(param_1,local_848,0x400);
            if ((__s == (char *)0x0) ||
               (iVar9 = sscanf(__s,"DWIDTH %d %d",&local_10d8,&local_10d4), iVar9 != 2)) {
              bdfError("bad \'DWIDTH\'\n");
              goto LAB_0011942c;
            }
            if (local_10d4 != 0) {
              bdfError("DWIDTH y value must be zero\n");
              goto LAB_0011942c;
            }
            __s = (char *)bdfGetLine(param_1,local_848,0x400);
            if ((__s == (char *)0x0) ||
               (iVar9 = sscanf(__s,"BBX %d %d %d %d",&local_10d0), iVar9 != 4)) {
              bdfError("bad \'BBX\'\n");
              goto LAB_0011942c;
            }
            if ((local_10cc < 0) || (local_10d0 < 0)) {
              bdfError("character \'%s\' has a negative sized bitmap, %dx%d\n",BufNameDecompiled);
              goto LAB_0011942c;
            }
            __s_00 = (byte *)bdfGetLine(param_1,local_848,0x400);
            bVar40 = false;
            bVar38 = __s_00 == (byte *)0x0;
            if (bVar38) {
LAB_001197ea:
              local_1168[5] = 0;
            }
            else {
              lVar17 = 10;
              pbVar36 = __s_00;
              pbVar29 = (byte *)"ATTRIBUTES";
              do {
                if (lVar17 == 0) break;
                lVar17 = lVar17 + -1;
                bVar40 = *pbVar36 < *pbVar29;
                bVar38 = *pbVar36 == *pbVar29;
                pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
                pbVar29 = pbVar29 + (ulong)bVar41 * -2 + 1;
              } while (bVar38);
              if ((!bVar40 && !bVar38) != bVar40) goto LAB_001197ea;
              pbVar36 = __s_00 + 0xb;
              if ((__s_00[0xb] == 9) || (__s_00[0xb] == 0x20)) {
                do {
                  do {
                    pbVar36 = pbVar36 + 1;
                  } while (*pbVar36 == 0x20);
                } while (*pbVar36 == 9);
              }
              iVar9 = bdfHexByte(pbVar36);
              bVar7 = bdfHexByte(pbVar36 + 2);
              local_1168[5] = (ushort)bVar7 + (short)(iVar9 << 8);
              __s_00 = (byte *)bdfGetLine(param_1,local_848,0x400);
            }
            iVar9 = local_10cc;
            bVar40 = false;
            bVar38 = __s_00 == (byte *)0x0;
            if (bVar38) {
LAB_0011a141:
              bdfError("missing \'BITMAP\'\n");
              goto LAB_0011942c;
            }
            lVar17 = 6;
            pbVar36 = (byte *)"BITMAP";
            do {
              if (lVar17 == 0) break;
              lVar17 = lVar17 + -1;
              bVar40 = *__s_00 < *pbVar36;
              bVar38 = *__s_00 == *pbVar36;
              __s_00 = __s_00 + (ulong)bVar41 * -2 + 1;
              pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
            } while (bVar38);
            cVar33 = (!bVar40 && !bVar38) - bVar40;
            iVar35 = (int)cVar33;
            puVar20 = (uint *)BufNameDecompiled;
            if (cVar33 != '\0') goto LAB_0011a141;
            do {
              puVar19 = puVar20;
              uVar23 = *puVar19 + 0xfefefeff & ~*puVar19;
              uVar10 = uVar23 & 0x80808080;
              bVar7 = (byte)uVar10;
              puVar20 = puVar19 + 1;
            } while (uVar10 == 0);
            bVar40 = (uVar23 & 0x8080) == 0;
            if (bVar40) {
              bVar7 = (byte)(uVar10 >> 0x10);
            }
            if (bVar40) {
              puVar20 = (uint *)((long)puVar19 + 6);
            }
            if ((long)puVar20 + ((-3 - (ulong)CARRY1(bVar7,bVar7)) - (long)BufNameDecompiled) == 1)
            {
              if ((byte)(BufNameDecompiled[0] - 0x30U) < 10) {
                *(int *)(param_3 + 0x41c) = *(int *)(param_3 + 0x41c) + 1;
                *(int *)(param_3 + 0x420) = *(int *)(param_3 + 0x420) + local_10d8;
              }
              else {
                if (BufNameDecompiled[0] == 'x') {
                  iVar12 = local_10c4 + local_10cc;
                  if (local_10c4 + local_10cc < 1) {
                    iVar12 = local_10cc;
                  }
                  *(int *)(param_3 + 0x424) = iVar12;
                }
              }
            }
            if ((int)uVar25 == 0) {
              sVar5 = (short)local_10c8;
              sVar31 = (short)local_10cc + (short)local_10c4;
              sVar8 = -(short)local_10c4;
              *local_1168 = sVar5;
              local_1168[1] = (short)local_10d0 + sVar5;
              local_1168[3] = sVar31;
              local_1168[4] = sVar8;
              iVar9 = (int)(short)((short)local_10d0 + sVar5) - (int)sVar5;
              uVar23 = (int)sVar8 + (int)sVar31;
              local_1168[2] = (short)local_10d8;
              *(undefined8 *)(local_1168 + 8) = 0;
              if (param_6 == 1) {
                local_1140 = iVar9 + 7 >> 3;
LAB_00119b70:
                local_1104 = uVar23 * local_1140;
                if (local_1104 < 1) {
                  local_1158 = (void *)0x0;
                  goto LAB_001199ed;
                }
                local_1158 = malloc((long)local_1104);
                if (local_1158 != (void *)0x0) goto LAB_001199ed;
                bdfError("Couldn\'t allocate picture (%d*%d)\n",(ulong)local_1140,(ulong)uVar23);
LAB_00119bb2:
                *(undefined8 *)(local_1168 + 8) = 0;
              }
              else {
                if (param_6 == 2) {
                  local_1140 = iVar9 + 0xf >> 3 & 0xfffffffe;
                  goto LAB_00119b70;
                }
                if (param_6 == 4) {
                  local_1140 = iVar9 + 0x1f >> 3 & 0xfffffffc;
                  goto LAB_00119b70;
                }
                if (param_6 == 8) {
                  local_1140 = iVar9 + 0x3f >> 3 & 0xfffffff8;
                  goto LAB_00119b70;
                }
                local_1104 = 0;
                local_1140 = 0;
                local_1158 = (void *)0x0;
LAB_001199ed:
                *(void **)(local_1168 + 8) = local_1158;
                if (local_1198 != (void **)0x0) {
                  lVar17 = 0;
                  uVar30 = iVar9 + 7 >> 3;
                  iVar35 = *(int *)local_1198;
                  uVar10 = uVar30;
                  do {
                    *(uint *)((long)local_1198 + lVar17 * 4) = iVar35 + uVar10 * uVar23;
                    while( true ) {
                      lVar17 = lVar17 + 1;
                      iVar35 = *(int *)((long)local_1198 + lVar17 * 4);
                      uVar10 = uVar30;
                      if (((lVar17 == 0) ||
                          (iVar12 = (int)lVar17, uVar10 = iVar9 + 0xf >> 3 & 0xfffffffe, iVar12 == 1
                          )) || (uVar10 = iVar9 + 0x1f >> 3 & 0xfffffffc, iVar12 == 2)) break;
                      *(uint *)((long)local_1198 + lVar17 * 4) =
                           iVar35 + (iVar9 + 0x3f >> 3 & 0xfffffff8U) * uVar23;
                      if (iVar12 == 3) goto LAB_00119bf2;
                    }
                  } while( true );
                }
LAB_00119bf2:
                iVar35 = iVar9 + 7 >> 3;
                if ((int)uVar23 < 1) {
                  if (uVar23 == 0) {
                    uVar25 = 0;
                    goto LAB_00119e7a;
                  }
LAB_00119e98:
                  bdfError("missing \'ENDCHAR\'\n");
LAB_00119d09:
                  if (local_1158 != (void *)0x0) {
                    free(local_1158);
                  }
                  goto LAB_00119bb2;
                }
                local_1130 = 0;
                uVar10 = 0xff << (8 - ((byte)iVar9 & 7) & 0x1f);
                bVar7 = (byte)uVar10;
                uVar30 = (local_1140 - iVar35) - 1;
                lVar17 = (long)local_1158 + 1;
                do {
                  __s_00 = (byte *)bdfGetLine(param_1,local_448,0x400);
                  if (__s_00 == (byte *)0x0) goto LAB_00119e98;
                  bVar40 = false;
                  bVar38 = iVar9 == 0;
                  if (bVar38) {
                    lVar18 = 7;
                    pbVar36 = __s_00;
                    pbVar29 = (byte *)"ENDCHAR";
                    do {
                      if (lVar18 == 0) break;
                      lVar18 = lVar18 + -1;
                      bVar40 = *pbVar36 < *pbVar29;
                      bVar38 = *pbVar36 == *pbVar29;
                      pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
                      pbVar29 = pbVar29 + (ulong)bVar41 * -2 + 1;
                    } while (bVar38);
                    bVar40 = (!bVar40 && !bVar38) == bVar40;
                    if (bVar40) goto LAB_00119ccc;
                  }
                  else {
                    _iVar11 = strlen((char *)__s_00);
                    iVar11 = (int)_iVar11;
                    iVar12 = iVar11;
                    if ((_iVar11 & 1) != 0) {
                      bdfError("odd number of characters in hex encoding\n");
                      iVar12 = iVar11 + 1;
                      __s_00[iVar11] = 0x30;
                      __s_00[iVar12] = 0;
                    }
                    iVar12 = iVar12 >> 1;
                    iVar11 = iVar12;
                    if (iVar35 <= iVar12) {
                      iVar11 = iVar35;
                    }
                    if (0 < iVar11) {
                      iVar24 = (int)uVar25;
                      puVar16 = (undefined *)((long)local_1158 + (long)iVar24);
                      pbVar36 = __s_00;
                      do {
                        puVar27 = puVar16 + 1;
                        uVar6 = bdfHexByte(pbVar36);
                        *puVar16 = uVar6;
                        puVar16 = puVar27;
                        pbVar36 = pbVar36 + 2;
                      } while (puVar27 !=
                               (undefined *)((ulong)(iVar11 - 1U) + (long)iVar24 + lVar17));
                      uVar25 = (ulong)(iVar24 + 1 + (iVar11 - 1U));
                    }
                    iVar11 = (int)uVar25;
                    if (iVar12 < iVar35) {
                      if (0 < iVar35 - iVar12) {
                        uVar1 = (iVar35 - iVar12) - 1;
                        puVar16 = (undefined *)((long)local_1158 + (long)iVar11);
                        do {
                          *puVar16 = 0;
                          puVar16 = puVar16 + 1;
                        } while (puVar16 != (undefined *)((ulong)uVar1 + lVar17 + (long)iVar11));
                        uVar25 = (ulong)(iVar11 + 1 + uVar1);
                      }
                    }
                    else {
                      if (bVar7 != 0) {
                        pbVar36 = (byte *)((long)local_1158 + (long)iVar11 + -1);
                        bVar2 = *pbVar36;
                        if ((~(uVar10 & 0xff) & (uint)bVar2) != 0) {
                          *pbVar36 = bVar2 & bVar7;
                        }
                      }
                    }
                    if ((iVar35 < (int)local_1140) && (0 < (int)(local_1140 - iVar35))) {
                      iVar12 = (int)uVar25;
                      puVar16 = (undefined *)((long)local_1158 + (long)iVar12);
                      do {
                        *puVar16 = 0;
                        puVar16 = puVar16 + 1;
                      } while ((undefined *)((ulong)uVar30 + lVar17 + (long)iVar12) != puVar16);
                      uVar25 = (ulong)(iVar12 + 1 + uVar30);
                    }
                  }
                  local_1130 = local_1130 + 1;
                } while (uVar23 != local_1130);
                iVar9 = strncmp((char *)__s_00,"ENDCHAR",7);
                bVar40 = iVar9 == 0;
                if (!bVar40) {
LAB_00119e7a:
                  local_1138 = local_448;
                  __s_00 = (byte *)bdfGetLine(param_1,local_1138,0x400);
                  bVar40 = __s_00 == (byte *)0x0;
                  if (bVar40) goto LAB_00119e98;
                }
LAB_00119ccc:
                bVar38 = false;
                lVar17 = 7;
                pbVar36 = (byte *)"ENDCHAR";
                do {
                  if (lVar17 == 0) break;
                  lVar17 = lVar17 + -1;
                  bVar38 = *__s_00 < *pbVar36;
                  bVar40 = *__s_00 == *pbVar36;
                  __s_00 = __s_00 + (ulong)bVar41 * -2 + 1;
                  pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
                } while (bVar40);
                if ((!bVar38 && !bVar40) != bVar38) goto LAB_00119e98;
                if ((int)uVar25 != local_1104) {
                  bdfError("bytes != rows * bytes_per_row (%d != %d * %d)\n",uVar25,(ulong)uVar23);
                  goto LAB_00119d09;
                }
                if (local_1158 != (void *)0x0) {
                  if (param_4 == 0) {
                    BitOrderInvert(local_1158,uVar25);
                  }
                  if (param_4 != param_5) {
                    if (param_7 == 2) {
                      TwoByteSwap(local_1158,uVar25);
                    }
                    else {
                      if (param_7 == 4) {
                        FourByteSwap(local_1158,uVar25);
                      }
                    }
                  }
                }
              }
              local_1168 = local_1168 + 0xc;
              local_1150 = local_1150 + 1;
            }
            else {
              do {
                __s_00 = (byte *)bdfGetLine(param_1,local_448,0x400);
                iVar35 = iVar35 + 1;
                bVar40 = false;
                bVar38 = __s_00 == (byte *)0x0;
                if (bVar38) goto LAB_001198d3;
                lVar17 = 7;
                pbVar36 = (byte *)"ENDCHAR";
                do {
                  if (lVar17 == 0) break;
                  lVar17 = lVar17 + -1;
                  bVar40 = *__s_00 < *pbVar36;
                  bVar38 = *__s_00 == *pbVar36;
                  __s_00 = __s_00 + (ulong)bVar41 * -2 + 1;
                  pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
                } while (bVar38);
              } while ((iVar35 <= iVar9) && ((!bVar40 && !bVar38) != bVar40));
              if ((iVar35 != 1) && ((!bVar40 && !bVar38) != bVar40)) {
                bdfError("Error in bitmap, missing \'ENDCHAR\'\n");
              }
            }
LAB_001198d3:
            __s_00 = (byte *)bdfGetLine(param_1,local_848,0x400);
            uVar21 = (ulong)local_10dc;
            if ((int)local_10dc <= (int)local_1150) {
              uVar25 = (ulong)(local_1108 + local_1150);
              goto LAB_0011a23a;
            }
            bVar40 = __s_00 == (byte *)0x0;
          } while (!bVar40);
          uVar25 = (ulong)(local_1108 + local_1150);
          if (local_10dc == local_1108 + local_1150) {
            local_10dc = local_1150;
            *(uint *)(lVar4 + 4) = local_1150;
            goto LAB_0011992f;
          }
        }
      }
LAB_0011a117:
      bdfError("%d too few characters\n",(ulong)(uint)((int)uVar21 - (int)uVar25),uVar21,uVar25);
    }
  }
  else {
    local_10b8[0] = (void *)0x0;
    bdfError("Couldn\'t allocate pCI (%d*%d)\n",(ulong)local_10dc,0x18);
  }
LAB_0011942c:
  while( true ) {
    ppvVar26 = ppvVar26 + 1;
    if (local_10b8[0] != (void *)0x0) {
      free(local_10b8[0]);
    }
    if ((void **)BufNameDecompiled == ppvVar26) break;
    local_10b8[0] = *ppvVar26;
  }
  uVar14 = 0;
LAB_001193d7:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar14;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}


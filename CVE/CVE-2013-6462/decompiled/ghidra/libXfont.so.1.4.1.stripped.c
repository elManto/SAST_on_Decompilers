typedef unsigned char   undefined;

typedef unsigned char    byte;
typedef unsigned char    dwfenc;
typedef unsigned int    dword;
typedef unsigned long    qword;
typedef unsigned char    uchar;
typedef unsigned int    uint;
typedef unsigned long    ulong;
typedef unsigned char    undefined1;
typedef unsigned short    undefined2;
typedef unsigned int    undefined4;
typedef unsigned long    undefined8;
typedef unsigned short    ushort;
typedef unsigned short    word;
typedef struct eh_frame_hdr eh_frame_hdr, *Peh_frame_hdr;

struct eh_frame_hdr {
    byte eh_frame_hdr_version; // Exception Handler Frame Header Version
    dwfenc eh_frame_pointer_encoding; // Exception Handler Frame Pointer Encoding
    dwfenc eh_frame_desc_entry_count_encoding; // Encoding of # of Exception Handler FDEs
    dwfenc eh_frame_table_encoding; // Exception Handler Table Encoding
};

typedef struct fde_table_entry fde_table_entry, *Pfde_table_entry;

struct fde_table_entry {
    dword initial_loc; // Initial Location
    dword data_loc; // Data location
};

typedef ushort sa_family_t;

typedef void _IO_lock_t;

typedef struct _IO_marker _IO_marker, *P_IO_marker;

typedef struct _IO_FILE _IO_FILE, *P_IO_FILE;

typedef long __off_t;

typedef long __off64_t;

typedef ulong size_t;

struct _IO_FILE {
    int _flags;
    char * _IO_read_ptr;
    char * _IO_read_end;
    char * _IO_read_base;
    char * _IO_write_base;
    char * _IO_write_ptr;
    char * _IO_write_end;
    char * _IO_buf_base;
    char * _IO_buf_end;
    char * _IO_save_base;
    char * _IO_backup_base;
    char * _IO_save_end;
    struct _IO_marker * _markers;
    struct _IO_FILE * _chain;
    int _fileno;
    int _flags2;
    __off_t _old_offset;
    ushort _cur_column;
    char _vtable_offset;
    char _shortbuf[1];
    _IO_lock_t * _lock;
    __off64_t _offset;
    void * __pad1;
    void * __pad2;
    void * __pad3;
    void * __pad4;
    size_t __pad5;
    int _mode;
    char _unused2[15];
};

struct _IO_marker {
    struct _IO_marker * _next;
    struct _IO_FILE * _sbuf;
    int _pos;
};

typedef struct stat stat, *Pstat;

typedef ulong __dev_t;

typedef ulong __ino_t;

typedef ulong __nlink_t;

typedef uint __mode_t;

typedef uint __uid_t;

typedef uint __gid_t;

typedef long __blksize_t;

typedef long __blkcnt_t;

typedef struct timespec timespec, *Ptimespec;

typedef long __time_t;

struct timespec {
    __time_t tv_sec;
    long tv_nsec;
};

struct stat {
    __dev_t st_dev;
    __ino_t st_ino;
    __nlink_t st_nlink;
    __mode_t st_mode;
    __uid_t st_uid;
    __gid_t st_gid;
    int __pad0;
    __dev_t st_rdev;
    __off_t st_size;
    __blksize_t st_blksize;
    __blkcnt_t st_blocks;
    struct timespec st_atim;
    struct timespec st_mtim;
    struct timespec st_ctim;
    long __unused[3];
};

typedef struct utsname utsname, *Putsname;

struct utsname {
    char sysname[65];
    char nodename[65];
    char release[65];
    char version[65];
    char machine[65];
    char domainname[65];
};

typedef struct timeval timeval, *Ptimeval;

typedef long __suseconds_t;

struct timeval {
    __time_t tv_sec;
    __suseconds_t tv_usec;
};

typedef struct addrinfo addrinfo, *Paddrinfo;

typedef uint __socklen_t;

typedef __socklen_t socklen_t;

typedef struct sockaddr sockaddr, *Psockaddr;

struct addrinfo {
    int ai_flags;
    int ai_family;
    int ai_socktype;
    int ai_protocol;
    socklen_t ai_addrlen;
    struct sockaddr * ai_addr;
    char * ai_canonname;
    struct addrinfo * ai_next;
};

struct sockaddr {
    sa_family_t sa_family;
    char sa_data[14];
};

typedef struct _IO_FILE FILE;

typedef long __fd_mask;

typedef struct fd_set fd_set, *Pfd_set;

struct fd_set {
    __fd_mask fds_bits[128];
};

typedef long __ssize_t;

typedef __ssize_t ssize_t;

typedef int __int32_t;

typedef struct evp_pkey_ctx_st evp_pkey_ctx_st, *Pevp_pkey_ctx_st;

struct evp_pkey_ctx_st {
};

typedef struct evp_pkey_ctx_st EVP_PKEY_CTX;

typedef struct __dirstream __dirstream, *P__dirstream;

struct __dirstream {
};

typedef struct __dirstream DIR;

typedef struct dirent dirent, *Pdirent;

struct dirent {
    __ino_t d_ino;
    __off_t d_off;
    ushort d_reclen;
    uchar d_type;
    char d_name[256];
};

typedef struct iovec iovec, *Piovec;

struct iovec {
    void * iov_base;
    size_t iov_len;
};

typedef int (* __compar_fn_t)(void *, void *);

typedef struct Elf64_Shdr Elf64_Shdr, *PElf64_Shdr;

typedef enum Elf_SectionHeaderType {
    SHT_CHECKSUM=1879048184,
    SHT_DYNAMIC=6,
    SHT_DYNSYM=11,
    SHT_FINI_ARRAY=15,
    SHT_GNU_ATTRIBUTES=1879048181,
    SHT_GNU_HASH=1879048182,
    SHT_GNU_LIBLIST=1879048183,
    SHT_GNU_verdef=1879048189,
    SHT_GNU_verneed=1879048190,
    SHT_GNU_versym=1879048191,
    SHT_GROUP=17,
    SHT_HASH=5,
    SHT_INIT_ARRAY=14,
    SHT_NOBITS=8,
    SHT_NOTE=7,
    SHT_NULL=0,
    SHT_PREINIT_ARRAY=16,
    SHT_PROGBITS=1,
    SHT_REL=9,
    SHT_RELA=4,
    SHT_SHLIB=10,
    SHT_STRTAB=3,
    SHT_SUNW_COMDAT=1879048187,
    SHT_SUNW_move=1879048186,
    SHT_SUNW_syminfo=1879048188,
    SHT_SYMTAB=2,
    SHT_SYMTAB_SHNDX=18
} Elf_SectionHeaderType;

struct Elf64_Shdr {
    dword sh_name;
    enum Elf_SectionHeaderType sh_type;
    qword sh_flags;
    qword sh_addr;
    qword sh_offset;
    qword sh_size;
    dword sh_link;
    dword sh_info;
    qword sh_addralign;
    qword sh_entsize;
};

typedef enum Elf64_DynTag {
    DT_AUDIT=1879047932,
    DT_AUXILIARY=2147483645,
    DT_BIND_NOW=24,
    DT_CHECKSUM=1879047672,
    DT_CONFIG=1879047930,
    DT_DEBUG=21,
    DT_DEPAUDIT=1879047931,
    DT_ENCODING=32,
    DT_FEATURE_1=1879047676,
    DT_FILTER=2147483647,
    DT_FINI=13,
    DT_FINI_ARRAY=26,
    DT_FINI_ARRAYSZ=28,
    DT_FLAGS=30,
    DT_FLAGS_1=1879048187,
    DT_GNU_CONFLICT=1879047928,
    DT_GNU_CONFLICTSZ=1879047670,
    DT_GNU_HASH=1879047925,
    DT_GNU_LIBLIST=1879047929,
    DT_GNU_LIBLISTSZ=1879047671,
    DT_GNU_PRELINKED=1879047669,
    DT_HASH=4,
    DT_INIT=12,
    DT_INIT_ARRAY=25,
    DT_INIT_ARRAYSZ=27,
    DT_JMPREL=23,
    DT_MOVEENT=1879047674,
    DT_MOVESZ=1879047675,
    DT_MOVETAB=1879047934,
    DT_NEEDED=1,
    DT_NULL=0,
    DT_PLTGOT=3,
    DT_PLTPAD=1879047933,
    DT_PLTPADSZ=1879047673,
    DT_PLTREL=20,
    DT_PLTRELSZ=2,
    DT_POSFLAG_1=1879047677,
    DT_PREINIT_ARRAYSZ=33,
    DT_REL=17,
    DT_RELA=7,
    DT_RELACOUNT=1879048185,
    DT_RELAENT=9,
    DT_RELASZ=8,
    DT_RELCOUNT=1879048186,
    DT_RELENT=19,
    DT_RELSZ=18,
    DT_RPATH=15,
    DT_RUNPATH=29,
    DT_SONAME=14,
    DT_STRSZ=10,
    DT_STRTAB=5,
    DT_SYMBOLIC=16,
    DT_SYMENT=11,
    DT_SYMINENT=1879047679,
    DT_SYMINFO=1879047935,
    DT_SYMINSZ=1879047678,
    DT_SYMTAB=6,
    DT_TEXTREL=22,
    DT_TLSDESC_GOT=1879047927,
    DT_TLSDESC_PLT=1879047926,
    DT_VERDEF=1879048188,
    DT_VERDEFNUM=1879048189,
    DT_VERNEED=1879048190,
    DT_VERNEEDNUM=1879048191,
    DT_VERSYM=1879048176
} Elf64_DynTag;

typedef struct Elf64_Rela Elf64_Rela, *PElf64_Rela;

struct Elf64_Rela {
    qword r_offset; // location to apply the relocation action
    qword r_info; // the symbol table index and the type of relocation
    qword r_addend; // a constant addend used to compute the relocatable field value
};

typedef enum Elf_ProgramHeaderType {
    PT_DYNAMIC=2,
    PT_GNU_EH_FRAME=1685382480,
    PT_GNU_RELRO=1685382482,
    PT_GNU_STACK=1685382481,
    PT_INTERP=3,
    PT_LOAD=1,
    PT_NOTE=4,
    PT_NULL=0,
    PT_PHDR=6,
    PT_SHLIB=5,
    PT_TLS=7
} Elf_ProgramHeaderType;

typedef struct Elf64_Dyn Elf64_Dyn, *PElf64_Dyn;

struct Elf64_Dyn {
    enum Elf64_DynTag d_tag;
    qword d_val;
};

typedef struct Elf64_Phdr Elf64_Phdr, *PElf64_Phdr;

struct Elf64_Phdr {
    enum Elf_ProgramHeaderType p_type;
    dword p_flags;
    qword p_offset;
    qword p_vaddr;
    qword p_paddr;
    qword p_filesz;
    qword p_memsz;
    qword p_align;
};

typedef struct Elf64_Sym Elf64_Sym, *PElf64_Sym;

struct Elf64_Sym {
    dword st_name;
    byte st_info;
    byte st_other;
    word st_shndx;
    qword st_value;
    qword st_size;
};

typedef struct Elf64_Ehdr Elf64_Ehdr, *PElf64_Ehdr;

struct Elf64_Ehdr {
    byte e_ident_magic_num;
    char e_ident_magic_str[3];
    byte e_ident_class;
    byte e_ident_data;
    byte e_ident_version;
    byte e_ident_pad[9];
    word e_type;
    word e_machine;
    dword e_version;
    qword e_entry;
    qword e_phoff;
    qword e_shoff;
    dword e_flags;
    word e_ehsize;
    word e_phentsize;
    word e_phnum;
    word e_shentsize;
    word e_shnum;
    word e_shstrndx;
};

typedef struct lconv lconv, *Plconv;

struct lconv {
    char * decimal_point;
    char * thousands_sep;
    char * grouping;
    char * int_curr_symbol;
    char * currency_symbol;
    char * mon_decimal_point;
    char * mon_thousands_sep;
    char * mon_grouping;
    char * positive_sign;
    char * negative_sign;
    char int_frac_digits;
    char frac_digits;
    char p_cs_precedes;
    char p_sep_by_space;
    char n_cs_precedes;
    char n_sep_by_space;
    char p_sign_posn;
    char n_sign_posn;
    char int_p_cs_precedes;
    char int_p_sep_by_space;
    char int_n_cs_precedes;
    char int_n_sep_by_space;
    char int_p_sign_posn;
    char int_n_sign_posn;
};




int _init(EVP_PKEY_CTX *ctx)

{
  int iVar1;
  
  iVar1 = __gmon_start__();
  return iVar1;
}



void FT_Get_Sfnt_Name_Count(void)

{
  FT_Get_Sfnt_Name_Count();
  return;
}



void __strcat_chk(void)

{
  __strcat_chk();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * inet_ntop(int __af,void *__cp,char *__buf,socklen_t __len)

{
  char *pcVar1;
  
  pcVar1 = inet_ntop(__af,__cp,__buf,__len);
  return pcVar1;
}



void add_range(void)

{
                    // WARNING: Treating indirect jump as call
  add_range();
  return;
}



void bitmapAddInkMetrics(void)

{
                    // WARNING: Treating indirect jump as call
  bitmapAddInkMetrics();
  return;
}



void __snprintf_chk(void)

{
  __snprintf_chk();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void free(void *__ptr)

{
  free(__ptr);
  return;
}



void StoreFontClientFont(void)

{
                    // WARNING: Treating indirect jump as call
  StoreFontClientFont();
  return;
}



void FontCharInkMetrics(void)

{
                    // WARNING: Treating indirect jump as call
  FontCharInkMetrics();
  return;
}



ulong BufFileClose(void *param_1)

{
  uint uVar1;
  
  uVar1 = (**(code **)((long)param_1 + 0x2028))();
  free(param_1);
  return (ulong)uVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int strcasecmp(char *__s1,char *__s2)

{
  int iVar1;
  
  iVar1 = strcasecmp(__s1,__s2);
  return iVar1;
}



void __vfprintf_chk(void)

{
  __vfprintf_chk();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int * __errno_location(void)

{
  int *piVar1;
  
  piVar1 = __errno_location();
  return piVar1;
}



void AddFontNamesName(void)

{
                    // WARNING: Treating indirect jump as call
  AddFontNamesName();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int unlink(char *__name)

{
  int iVar1;
  
  iVar1 = unlink(__name);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strncpy(char *__dest,char *__src,size_t __n)

{
  char *pcVar1;
  
  pcVar1 = strncpy(__dest,__src,__n);
  return pcVar1;
}



void FT_Load_Glyph(void)

{
  FT_Load_Glyph();
  return;
}



void _fs_connection_died(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_connection_died();
  return;
}



undefined8 FontFileInitTable(undefined4 *param_1,uint param_2)

{
  void *pvVar1;
  
  if (0xd79435 < param_2) {
    return 0;
  }
  if (param_2 == 0) {
    *(undefined8 *)(param_1 + 2) = 0;
  }
  else {
    pvVar1 = malloc((long)(int)param_2 * 0x98);
    *(void **)(param_1 + 2) = pvVar1;
    if (pvVar1 == (void *)0x0) {
      return 0;
    }
  }
  *param_1 = 0;
  param_1[1] = param_2;
  param_1[4] = 0;
  return 1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int strncmp(char *__s1,char *__s2,size_t __n)

{
  int iVar1;
  
  iVar1 = strncmp(__s1,__s2,__n);
  return iVar1;
}



void _fs_init_fontinfo(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_init_fontinfo();
  return;
}



void _FontTransWrite(void)

{
                    // WARNING: Treating indirect jump as call
  _FontTransWrite();
  return;
}



void BufFileCreate(long param_1,long param_2,long param_3,long param_4,long param_5)

{
  long *plVar1;
  
  plVar1 = (long *)malloc(0x2038);
  if (plVar1 != (long *)0x0) {
    plVar1[0x406] = param_1;
    plVar1[0x402] = param_2;
    plVar1[0x403] = param_3;
    plVar1[0x404] = param_4;
    *(long **)plVar1 = plVar1 + 2;
    plVar1[1] = 0;
    plVar1[0x405] = param_5;
  }
  return;
}



void CreateFontRec(void)

{
                    // WARNING: Treating indirect jump as call
  CreateFontRec();
  return;
}



void FT_Get_X11_Font_Format(void)

{
  FT_Get_X11_Font_Format();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strcpy(char *__dest,char *__src)

{
  char *pcVar1;
  
  pcVar1 = strcpy(__dest,__src);
  return pcVar1;
}



void FontCharReshape(void)

{
                    // WARNING: Treating indirect jump as call
  FontCharReshape();
  return;
}



void FT_Load_Sfnt_Table(void)

{
  FT_Load_Sfnt_Table();
  return;
}



void FT_Get_Postscript_Name(void)

{
  FT_Get_Postscript_Name();
  return;
}



void FontFileRegisterLocalFpeFunctions(void)

{
  RegisterFPEFunctions
            (FontFileNameCheck,FontFileInitFPE,FontFileFreeFPE,FontFileResetFPE,FontFileOpenFont,
             FontFileCloseFont,FontFileListFonts,FontFileStartListFontsWithInfo,
             FontFileListNextFontWithInfo,0,0,0,FontFileStartListFontsAndAliases,
             FontFileListNextFontOrAlias,FontFileEmptyBitmapSource);
  return;
}



void bdfError(void)

{
                    // WARNING: Treating indirect jump as call
  bdfError();
  return;
}



void inflate(void)

{
  inflate();
  return;
}



void FT_Set_Pixel_Sizes(void)

{
  FT_Set_Pixel_Sizes();
  return;
}



void FT_New_Size(void)

{
  FT_New_Size();
  return;
}



void FT_Done_Size(void)

{
  FT_Done_Size();
  return;
}



undefined8 FontFileRegisterBitmapSource(long param_1)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  
  if (FontFileBitmapSources._12_4_ < 1) {
LAB_0010941f:
    plVar1 = FontFileBitmapSources._0_8_;
    iVar2 = FontFileBitmapSources._8_4_;
    if (FontFileBitmapSources._8_4_ == FontFileBitmapSources._12_4_) {
      iVar2 = FontFileBitmapSources._12_4_ + 4;
      plVar1 = (long *)realloc(FontFileBitmapSources._0_8_,(long)iVar2 << 3);
      if (plVar1 == (long *)0x0) {
        return 0;
      }
    }
    FontFileBitmapSources._8_4_ = iVar2;
    FontFileBitmapSources._0_8_ = plVar1;
    lVar3 = (long)FontFileBitmapSources._12_4_;
    FontFileBitmapSources._12_4_ = FontFileBitmapSources._12_4_ + 1;
    FontFileBitmapSources._0_8_[lVar3] = param_1;
    return 1;
  }
  if (param_1 != *FontFileBitmapSources._0_8_) {
    plVar1 = FontFileBitmapSources._0_8_ + 1;
    do {
      if (plVar1 == FontFileBitmapSources._0_8_ + 1 + (FontFileBitmapSources._12_4_ - 1))
      goto LAB_0010941f;
      lVar3 = *plVar1;
      plVar1 = plVar1 + 1;
    } while (lVar3 != param_1);
  }
  return 1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ssize_t writev(int __fd,iovec *__iovec,int __count)

{
  ssize_t sVar1;
  
  sVar1 = writev(__fd,__iovec,__count);
  return sVar1;
}



undefined8 FontFileReadDirectory(char *param_1,long *param_2)

{
  int __fildes;
  uint uVar1;
  uint uVar2;
  int iVar3;
  size_t sVar4;
  char *__filename;
  FILE *__stream;
  long lVar5;
  undefined2 *puVar6;
  int *piVar7;
  long lVar8;
  byte bVar9;
  char cVar10;
  long lVar11;
  uint *puVar12;
  uint *puVar13;
  undefined8 uVar14;
  byte *pbVar15;
  long in_FS_OFFSET;
  bool bVar16;
  bool bVar17;
  byte bVar18;
  uint uStack8580;
  char *pcStack8576;
  undefined *puStack8568;
  undefined2 uStack8560;
  undefined2 uStack8558;
  stat sStack8552;
  stat sStack8408;
  undefined auStack8264 [1024];
  undefined auStack7240 [1023];
  char acStack6217 [1024];
  char cStack5193;
  uint auStack5192 [256];
  uint auStack4168 [256];
  undefined auStack3144 [1024];
  char acStack2120 [1024];
  undefined auStack1096 [1032];
  long lStack64;
  
  bVar18 = 0;
  lStack64 = *(long *)(in_FS_OFFSET + 0x28);
  sVar4 = strlen(param_1);
  if (sVar4 + 0xb < 0x401) {
    __filename = strchr(param_1,0x3a);
    if (__filename == (char *)0x0) {
      __memcpy_chk(auStack5192,param_1,sVar4 + 1);
    }
    else {
      __strncpy_chk(auStack5192,param_1,__filename + -(long)param_1);
      *(undefined *)
       ((long)((long)register0x00000020 + -0x1448) + (long)(__filename + -(long)param_1)) = 0;
    }
    __filename = acStack6217 + 1;
    puVar6 = (undefined2 *)__stpcpy_chk(__filename,auStack5192,0x400);
    if (acStack6217[(long)((long)puVar6 - (long)__filename)] != '/') {
      *puVar6 = 0x2f;
    }
    __strcat_chk(__filename,"fonts.dir",0x400);
    __stream = fopen(__filename,"rt");
    if (__stream == (FILE *)0x0) {
      piVar7 = __errno_location();
      puVar13 = auStack5192;
      if (*piVar7 == 2) {
        do {
          puVar12 = puVar13;
          uVar1 = *puVar12 + 0xfefefeff & ~*puVar12;
          uVar2 = uVar1 & 0x80808080;
          puVar13 = puVar12 + 1;
        } while (uVar2 == 0);
        bVar16 = (uVar1 & 0x8080) == 0;
        bVar9 = (byte)uVar2;
        if (bVar16) {
          bVar9 = (byte)(uVar2 >> 0x10);
        }
        if (bVar16) {
          puVar13 = (uint *)((long)puVar12 + 6);
        }
        if ((long)puVar13 + ((-3 - (ulong)CARRY1(bVar9,bVar9)) - (long)auStack5192) < 0x400) {
          puVar6 = (undefined2 *)__stpcpy_chk(acStack2120,auStack5192,0x400);
          puVar13 = auStack5192;
          do {
            puVar12 = puVar13;
            uVar1 = *puVar12 + 0xfefefeff & ~*puVar12;
            uVar2 = uVar1 & 0x80808080;
            bVar9 = (byte)uVar2;
            puVar13 = puVar12 + 1;
          } while (uVar2 == 0);
          bVar16 = (uVar1 & 0x8080) == 0;
          if (bVar16) {
            bVar9 = (byte)(uVar2 >> 0x10);
          }
          if (bVar16) {
            puVar13 = (uint *)((long)puVar12 + 6);
          }
          lVar11 = (long)puVar13 + ((-3 - (ulong)CARRY1(bVar9,bVar9)) - (long)auStack5192);
          if (lVar11 + 0xdU < 0x401) {
            lVar5 = 0;
            goto LAB_0010ac02;
          }
        }
      }
    }
    else {
      __fildes = fileno(__stream);
      __fildes = __fxstat(1,__fildes,&sStack8552);
      if (((__fildes != -1) && (__fildes = fscanf(__stream,"%d\n",&uStack8580), __fildes == 1)) &&
         (lVar5 = FontFileMakeDir(param_1,(ulong)uStack8580), lVar5 != 0)) {
        *(__time_t *)(lVar5 + 8) = sStack8552.st_mtim.tv_sec;
        if (DAT_0033c740 == '\0') {
          __sprintf_chk(&DAT_0033c740,1,0x18,"%%%ds %%%d[^\n]\n",0x3ff,0x3ff);
        }
        while (__fildes = fscanf(__stream,&DAT_0033c740,auStack8264), __fildes != -1) {
          if (__fildes != 2) {
            uVar14 = 0x56;
            FontFileFreeDir(lVar5);
            fclose(__stream);
            goto LAB_0010aaed;
          }
          FontFileAddFontFile(lVar5,auStack7240,auStack8264);
        }
        fclose(__stream);
        puVar13 = auStack5192;
        do {
          puVar12 = puVar13;
          uVar1 = *puVar12 + 0xfefefeff & ~*puVar12;
          uVar2 = uVar1 & 0x80808080;
          puVar13 = puVar12 + 1;
        } while (uVar2 == 0);
        bVar16 = (uVar1 & 0x8080) == 0;
        bVar9 = (byte)uVar2;
        if (bVar16) {
          bVar9 = (byte)(uVar2 >> 0x10);
        }
        if (bVar16) {
          puVar13 = (uint *)((long)puVar12 + 6);
        }
        if ((long)puVar13 + ((-3 - (ulong)CARRY1(bVar9,bVar9)) - (long)auStack5192) < 0x400) {
          puVar6 = (undefined2 *)__stpcpy_chk(acStack2120,auStack5192,0x400);
          puVar13 = auStack5192;
          do {
            puVar12 = puVar13;
            uVar1 = *puVar12 + 0xfefefeff & ~*puVar12;
            uVar2 = uVar1 & 0x80808080;
            bVar9 = (byte)uVar2;
            puVar13 = puVar12 + 1;
          } while (uVar2 == 0);
          bVar16 = (uVar1 & 0x8080) == 0;
          if (bVar16) {
            bVar9 = (byte)(uVar2 >> 0x10);
          }
          if (bVar16) {
            puVar13 = (uint *)((long)puVar12 + 6);
          }
          lVar11 = (long)puVar13 + ((-3 - (ulong)CARRY1(bVar9,bVar9)) - (long)auStack5192);
          if (0x400 < lVar11 + 0xdU) goto LAB_0010aacc;
LAB_0010ac02:
          if ((&cStack5193)[lVar11] != '/') {
            *puVar6 = 0x2f;
          }
          __strcat_chk(acStack2120,"fonts.alias",0x400);
          __stream = fopen(acStack2120,"rt");
          if (__stream == (FILE *)0x0) {
            piVar7 = __errno_location();
            if (*piVar7 == 2) {
              if (lVar5 != 0) {
LAB_0010adb0:
                uVar14 = 0x55;
                FontFileSortDir(lVar5);
                *param_2 = lVar5;
                goto LAB_0010aaed;
              }
            }
            else {
              if (lVar5 != 0) goto LAB_0010aacc;
            }
            goto LAB_0010aae8;
          }
          if ((lVar5 == 0) && (lVar5 = FontFileMakeDir(auStack5192), lVar5 == 0)) {
            uVar14 = 0x50;
            fclose(__stream);
            goto LAB_0010aaed;
          }
          __fildes = fileno(__stream);
          __fildes = __fxstat(1,__fildes,&sStack8408);
          if (__fildes == -1) {
            uVar14 = 0x56;
            fclose(__stream);
          }
          else {
            *(__time_t *)(lVar5 + 0x10) = sStack8408.st_mtim.tv_sec;
LAB_0010ac9b:
            do {
              __fildes = FUN_0010a150(__stream,&pcStack8576);
              __filename = pcStack8576;
              if (__fildes == 2) {
                fclose(__stream);
                goto LAB_0010adb0;
              }
              if (__fildes == 3) {
LAB_0010ae80:
                uVar14 = 0x50;
LAB_0010ae85:
                fclose(__stream);
                goto LAB_0010aad1;
              }
            } while (__fildes != 0);
            sVar4 = strlen(pcStack8576);
            if (0x3ff < sVar4) {
LAB_0010aee5:
              uVar14 = 0x56;
              goto LAB_0010ae85;
            }
            __memcpy_chk(auStack4168,__filename,sVar4 + 1);
            __fildes = FUN_0010a150(__stream,&pcStack8576);
            bVar16 = __fildes == 0;
            bVar17 = __fildes == 1;
            if (bVar17) {
              lVar11 = 0x13;
              puVar13 = auStack4168;
              pbVar15 = (byte *)"FILE_NAMES_ALIASES";
              do {
                if (lVar11 == 0) break;
                lVar11 = lVar11 + -1;
                bVar16 = *(byte *)puVar13 < *pbVar15;
                bVar17 = *(byte *)puVar13 == *pbVar15;
                puVar13 = (uint *)((long)puVar13 + (ulong)bVar18 * -2 + 1);
                pbVar15 = pbVar15 + (ulong)bVar18 * -2 + 1;
              } while (bVar17);
              cVar10 = (!bVar16 && !bVar17) - bVar16;
              __fildes = (int)cVar10;
              if (cVar10 != '\0') goto LAB_0010aee5;
              if (0 < *(int *)(lVar5 + 0x30)) {
                lVar11 = 0;
                do {
                  lVar8 = *(long *)(lVar5 + 0x38) + lVar11;
                  if (*(int *)(lVar8 + 0x10) == 2) {
                    __filename = *(char **)(lVar8 + 0x20);
                    lVar8 = FontFileMatchRenderer(__filename);
                    if (lVar8 != 0) {
                      sVar4 = strlen(__filename);
                      uVar1 = (int)sVar4 - *(int *)(lVar8 + 8);
                      if (uVar1 < 0x400) {
                        FUN_0010cce0(auStack1096,__filename,(ulong)uVar1);
                        auStack1096[(int)uVar1] = 0;
                        uStack8560 = (undefined2)uVar1;
                        puStack8568 = auStack1096;
                        uStack8558 = FontFileCountDashes(auStack1096,(ulong)uVar1);
                        lVar8 = FontFileFindNameInDir(lVar5 + 0x30,&puStack8568);
                        if ((lVar8 == 0) &&
                           (iVar3 = FontFileAddFontAlias
                                              (lVar5,auStack1096,
                                               *(undefined8 *)(*(long *)(lVar5 + 0x38) + lVar11)),
                           iVar3 == 0)) goto LAB_0010ad12;
                      }
                    }
                  }
                  __fildes = __fildes + 1;
                  lVar11 = lVar11 + 0x98;
                } while (__fildes < *(int *)(lVar5 + 0x30));
              }
              goto LAB_0010ac9b;
            }
            if (__fildes < 2) {
              if (__fildes == 0) {
                sVar4 = strlen(pcStack8576);
                puVar13 = auStack4168;
                if (0x3ff < sVar4) goto LAB_0010aee5;
                do {
                  puVar12 = puVar13;
                  uVar2 = *puVar12 + 0xfefefeff & ~*puVar12;
                  uVar1 = uVar2 & 0x80808080;
                  puVar13 = puVar12 + 1;
                } while (uVar1 == 0);
                bVar16 = (uVar2 & 0x8080) == 0;
                if (bVar16) {
                  uVar1 = uVar1 >> 0x10;
                }
                if (bVar16) {
                  puVar13 = (uint *)((long)puVar12 + 6);
                }
                FUN_0010cce0(auStack4168,auStack4168,
                             (long)puVar13 +
                             ((-3 - (ulong)CARRY1((byte)uVar1,(byte)uVar1)) - (long)auStack4168),
                             (ulong)(uVar1 & 0xffffff00));
                __filename = pcStack8576;
                sVar4 = strlen(pcStack8576);
                FUN_0010cce0(auStack3144,__filename,sVar4 & 0xffffffff);
                __fildes = FontFileAddFontAlias(lVar5,auStack4168,auStack3144,auStack3144);
                if (__fildes == 0) goto LAB_0010ae80;
              }
              goto LAB_0010ac9b;
            }
            if (__fildes == 2) goto LAB_0010aee5;
            if (__fildes != 3) goto LAB_0010ac9b;
LAB_0010ad12:
            uVar14 = 0x50;
            fclose(__stream);
          }
        }
        else {
LAB_0010aacc:
          uVar14 = 0x56;
        }
LAB_0010aad1:
        FontFileFreeDir(lVar5);
        goto LAB_0010aaed;
      }
      fclose(__stream);
    }
  }
LAB_0010aae8:
  uVar14 = 0x56;
LAB_0010aaed:
  if (lStack64 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar14;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void qsort(void *__base,size_t __nmemb,size_t __size,__compar_fn_t __compar)

{
  qsort(__base,__nmemb,__size,__compar);
  return;
}



ulong FontFileStartListFonts
                (undefined8 param_1,long param_2,undefined8 param_3,uint param_4,uint param_5,
                long **param_6,uint param_7)

{
  uint uVar1;
  long *__ptr;
  long lVar2;
  ulong uVar3;
  
  uVar3 = 0x50;
  __ptr = (long *)malloc(0x10);
  if (__ptr != (long *)0x0) {
    lVar2 = MakeFontNamesRecord(0);
    *__ptr = lVar2;
    if (lVar2 != 0) {
      uVar1 = FUN_0010dd70(param_2 + 0x18,param_3,(ulong)param_4,(ulong)param_5,lVar2,(ulong)param_7
                          );
      uVar3 = (ulong)uVar1;
      if (uVar1 == 0x55) {
        *(undefined4 *)(__ptr + 1) = 0;
        *param_6 = __ptr;
        return uVar3;
      }
      FreeFontNames(*__ptr);
    }
    free(__ptr);
  }
  return uVar3;
}



void _fs_wait_for_readable(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_wait_for_readable();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

double strtod(char *__nptr,char **__endptr)

{
  double dVar1;
  
  dVar1 = strtod(__nptr,__endptr);
  return dVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int setsockopt(int __fd,int __level,int __optname,void *__optval,socklen_t __optlen)

{
  int iVar1;
  
  iVar1 = setsockopt(__fd,__level,__optname,__optval,__optlen);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

lconv * localeconv(void)

{
  lconv *plVar1;
  
  plVar1 = localeconv();
  return plVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ssize_t readlink(char *__path,char *__buf,size_t __len)

{
  ssize_t sVar1;
  
  sVar1 = readlink(__path,__buf,__len);
  return sVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int fcntl(int __fd,int __cmd,...)

{
  int iVar1;
  
  iVar1 = fcntl(__fd,__cmd);
  return iVar1;
}



void bdfForceMakeAtom(void)

{
                    // WARNING: Treating indirect jump as call
  bdfForceMakeAtom();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ssize_t write(int __fd,void *__buf,size_t __n)

{
  ssize_t sVar1;
  
  sVar1 = write(__fd,__buf,__n);
  return sVar1;
}



void FTGetEnglishName(void)

{
                    // WARNING: Treating indirect jump as call
  FTGetEnglishName();
  return;
}



void fs_load_all_glyphs(void)

{
                    // WARNING: Treating indirect jump as call
  fs_load_all_glyphs();
  return;
}



undefined8 FontFileAddFontAlias(long param_1,char *param_2,char *param_3)

{
  int iVar1;
  size_t sVar2;
  long lVar3;
  undefined8 uVar4;
  long in_FS_OFFSET;
  char *pcStack184;
  short sStack176;
  undefined2 uStack174;
  undefined4 uStack168;
  char *pcStack160;
  long lStack32;
  
  lStack32 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = strcmp(param_2,param_3);
  if (iVar1 != 0) {
    sVar2 = strlen(param_2);
    sStack176 = (short)sVar2;
    FUN_0010cce0(param_2,param_2,(ulong)(uint)(int)sStack176);
    pcStack184 = param_2;
    uStack174 = FontFileCountDashes(param_2,(ulong)(uint)(int)sStack176);
    uStack168 = 3;
    pcStack160 = strdup(param_3);
    if (pcStack160 != (char *)0x0) {
      lVar3 = FontFileAddEntry(param_1 + 0x30,&pcStack184);
      uVar4 = 1;
      if (lVar3 != 0) goto LAB_0010c768;
      free(pcStack160);
    }
  }
  uVar4 = 0;
LAB_0010c768:
  if (lStack32 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar4;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int getpeername(int __fd,sockaddr *__addr,socklen_t *__len)

{
  int iVar1;
  
  iVar1 = getpeername(__fd,__addr,__len);
  return iVar1;
}



void ** FontFileAddEntry(uint *param_1,void **param_2)

{
  void **ppvVar1;
  undefined auVar2 [16];
  uint uVar3;
  void *__ptr;
  ulong uVar4;
  
  if (param_1[4] == 0) {
    uVar3 = *param_1;
    uVar4 = (ulong)uVar3;
    __ptr = *(void **)(param_1 + 2);
    if (uVar3 == param_1[1]) {
      __ptr = realloc(__ptr,(long)(int)(uVar3 + 100) * 0x98);
      if (__ptr == (void *)0x0) {
        return (void **)0;
      }
      param_1[1] = uVar3 + 100;
      *(void **)(param_1 + 2) = __ptr;
      uVar4 = SEXT48((int)*param_1);
    }
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)param_2;
    ppvVar1 = (void **)((long)__ptr + uVar4 * 0x98);
    *(int *)ppvVar1 = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 4) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 1) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0xc) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 2);
    *(int *)(ppvVar1 + 2) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x14) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 3) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x1c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 4);
    *(int *)(ppvVar1 + 4) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x24) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 5) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x2c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 6);
    *(int *)(ppvVar1 + 6) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x34) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 7) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x3c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 8);
    *(int *)(ppvVar1 + 8) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x44) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 9) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x4c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 10);
    *(int *)(ppvVar1 + 10) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x54) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 0xb) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x5c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 0xc);
    *(int *)(ppvVar1 + 0xc) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 100) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 0xd) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x6c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 0xe);
    *(int *)(ppvVar1 + 0xe) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x74) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 0xf) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x7c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 0x10);
    *(int *)(ppvVar1 + 0x10) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x84) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 0x11) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x8c) = SUB164(auVar2 >> 0x60,0);
    ppvVar1[0x12] = param_2[0x12];
    __ptr = malloc((long)((int)*(short *)(param_2 + 1) + 1));
    *ppvVar1 = __ptr;
    if (__ptr != (void *)0x0) {
      memcpy(__ptr,*param_2,(long)*(short *)(param_2 + 1));
      *(undefined *)((long)*ppvVar1 + (long)*(short *)(ppvVar1 + 1)) = 0;
      *param_1 = *param_1 + 1;
      return ppvVar1;
    }
  }
  return (void **)0;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int fclose(FILE *__stream)

{
  int iVar1;
  
  iVar1 = fclose(__stream);
  return iVar1;
}



void FontFileSortDir(long param_1)

{
  long *plVar1;
  long lVar2;
  long *plVar3;
  long **pplVar4;
  int iVar5;
  int iVar6;
  long *plVar7;
  int iVar8;
  
  FontFileSortTable(param_1 + 0x18);
  FontFileSortTable(param_1 + 0x30);
  plVar1 = *(long **)(param_1 + 0x38);
  if (*(int *)(param_1 + 0x18) < 1) {
    return;
  }
  plVar7 = (long *)(*(long *)(param_1 + 0x20) + 0x28);
  iVar8 = 0;
  do {
    lVar2 = *plVar7;
    if (0 < *(int *)(lVar2 + 0x78)) {
      pplVar4 = (long **)(*(long *)(lVar2 + 0x80) + 0x78);
      iVar6 = 0;
      do {
        iVar5 = 0;
        plVar3 = plVar1;
        if (0 < *(int *)(param_1 + 0x30)) {
          do {
            while ((long *)*plVar3 != *pplVar4) {
              iVar5 = iVar5 + 1;
              plVar3 = plVar3 + 0x13;
              if (*(int *)(param_1 + 0x30) == iVar5 || *(int *)(param_1 + 0x30) < iVar5)
              goto LAB_0010ea77;
            }
            *pplVar4 = plVar3;
            iVar5 = iVar5 + 1;
            plVar3 = plVar3 + 0x13;
          } while (*(int *)(param_1 + 0x30) != iVar5 && iVar5 <= *(int *)(param_1 + 0x30));
        }
LAB_0010ea77:
        iVar6 = iVar6 + 1;
        pplVar4 = pplVar4 + 0x11;
      } while (*(int *)(lVar2 + 0x78) != iVar6 && iVar6 <= *(int *)(lVar2 + 0x78));
    }
    iVar8 = iVar8 + 1;
    plVar7 = plVar7 + 0x13;
    if (*(int *)(param_1 + 0x18) == iVar8 || *(int *)(param_1 + 0x18) < iVar8) {
      return;
    }
  } while( true );
}



void _FontTransClose(void)

{
                    // WARNING: Treating indirect jump as call
  _FontTransClose();
  return;
}



void _fs_done_read(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_done_read();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

DIR * opendir(char *__name)

{
  DIR *pDVar1;
  
  pDVar1 = opendir(__name);
  return pDVar1;
}



void _fs_io_fini(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_io_fini();
  return;
}



void FT_Done_Face(void)

{
  FT_Done_Face();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * stpcpy(char *__dest,char *__src)

{
  char *pcVar1;
  
  pcVar1 = stpcpy(__dest,__src);
  return pcVar1;
}



void DeleteFontClientID(void)

{
                    // WARNING: Treating indirect jump as call
  DeleteFontClientID();
  return;
}



void _fs_poll_connect(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_poll_connect();
  return;
}



void QueryGlyphExtents(void)

{
                    // WARNING: Treating indirect jump as call
  QueryGlyphExtents();
  return;
}



undefined8 FontFileCompleteXLFD(uint *param_1,uint *param_2)

{
  ushort uVar1;
  long lVar2;
  uint uVar3;
  uint uVar4;
  ushort *puVar5;
  undefined8 uVar6;
  uint uVar7;
  uint uVar8;
  long in_FS_OFFSET;
  double dVar9;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 extraout_XMM0_Qa_05;
  double extraout_XMM0_Qa_06;
  double dVar10;
  double dVar11;
  double dVar12;
  double dVar13;
  double dVar14;
  double dVar15;
  int iStack36;
  
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  puVar5 = (ushort *)GetClientResolutions();
  uVar7 = *param_1;
  if (((uVar7 & 3) == 0) || ((uVar7 & 0xc) == 0)) {
    uVar4 = param_1[0x14];
    uVar8 = param_1[0x15];
    if (iStack36 != 0) {
      if ((int)uVar4 < 1) {
        uVar1 = *puVar5;
        uVar4 = (uint)uVar1;
        param_1[0x14] = (uint)uVar1;
        uVar3 = (uint)uVar1;
        if (0 < (int)uVar8) goto LAB_0010ed84;
      }
      else {
        uVar3 = uVar4;
        if (0 < (int)uVar8) goto LAB_0010ec33;
      }
      uVar4 = uVar3;
      uVar8 = (uint)puVar5[1];
      param_1[0x15] = uVar8;
    }
LAB_0010ed84:
    if ((int)uVar4 < 1) {
      uVar4 = param_2[0x14];
      param_1[0x14] = uVar4;
      if ((int)uVar8 < 1) goto LAB_0010ed94;
      if ((int)uVar4 < 1) goto LAB_0010ed50;
    }
    else {
      if ((int)uVar8 < 1) {
LAB_0010ed94:
        param_1[0x15] = param_2[0x15];
        goto LAB_0010ed9a;
      }
    }
LAB_0010ec33:
    if ((uVar7 & 0xf) == 0) {
      if (iStack36 == 0) {
        if ((*(byte *)param_2 & 0xc) == 0) goto LAB_0010ed50;
        *(undefined8 *)(param_1 + 10) = *(undefined8 *)(param_2 + 10);
        *(undefined8 *)(param_1 + 0xc) = *(undefined8 *)(param_2 + 0xc);
        *(undefined8 *)(param_1 + 0xe) = *(undefined8 *)(param_2 + 0xe);
        *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_2 + 0x10);
        uVar7 = uVar7 & 0xfffffff3 | *param_2 & 0xc;
        *param_1 = uVar7;
      }
      else {
        uVar1 = puVar5[2];
        *(undefined8 *)(param_1 + 0xe) = 0;
        *(undefined8 *)(param_1 + 0xc) = 0;
        uVar7 = uVar7 & 0xfffffff3 | 4;
        *param_1 = uVar7;
        *(double *)(param_1 + 0x10) = (double)(uint)uVar1 / 10.00000000;
        *(double *)(param_1 + 10) = (double)(uint)uVar1 / 10.00000000;
      }
    }
    dVar15 = 1.00000000;
    if ((uVar7 & 3) == 1) {
      uVar7 = uVar7 | 3;
      dVar15 = (double)uVar4 / (double)uVar8;
      *param_1 = uVar7;
      *(double *)(param_1 + 2) = *(double *)(param_1 + 2) * dVar15;
    }
    dVar10 = (double)uVar4 / 72.27000000;
    dVar11 = (double)uVar8 / 72.27000000;
    if ((uVar7 & 0xc) == 0) goto LAB_0010edf8;
    dVar9 = *(double *)(param_1 + 10);
    dVar13 = *(double *)(param_1 + 0xc);
    dVar14 = *(double *)(param_1 + 0xe);
    dVar12 = *(double *)(param_1 + 0x10);
    while( true ) {
      dVar9 = dVar9 * dVar10;
      dVar12 = dVar12 * dVar11;
      if (((uVar7 & 3) != 0) &&
         ((((dVar15 < (double)((ulong)(*(double *)(param_1 + 2) - dVar9) & 0x7fffffffffffffff) ||
            (1.00000000 <
             (double)((ulong)(*(double *)(param_1 + 4) - dVar13 * dVar11) & 0x7fffffffffffffff))) ||
           (1.00000000 <
            (double)((ulong)(*(double *)(param_1 + 6) - dVar14 * dVar10) & 0x7fffffffffffffff))) ||
          (1.00000000 < (double)((ulong)(*(double *)(param_1 + 8) - dVar12) & 0x7fffffffffffffff))))
         ) goto LAB_0010ed50;
      if ((uVar7 & 0xf) != 6) break;
LAB_0010edf8:
      if (((double)((ulong)dVar10 & 0x7fffffffffffffff) < 0.00000000) ||
         ((double)((ulong)dVar11 & 0x7fffffffffffffff) < 0.00000000)) goto LAB_0010ed50;
      dVar9 = *(double *)(param_1 + 2);
      uVar4 = (uint)((*param_1 & 3) == 2) * 4 + 4;
      uVar7 = *param_1 & 0xfffffff3 | uVar4;
      *param_1 = uVar7;
      dVar13 = *(double *)(param_1 + 4) / dVar11;
      *(double *)(param_1 + 10) = dVar9 / dVar10;
      dVar14 = *(double *)(param_1 + 6) / dVar10;
      *(double *)(param_1 + 0xc) = dVar13;
      dVar12 = *(double *)(param_1 + 8) / dVar11;
      *(double *)(param_1 + 0xe) = dVar14;
      *(double *)(param_1 + 0x10) = dVar12;
      if ((uVar4 & 0xc) != 4) goto LAB_0010ee90;
      dVar9 = (double)(int)((dVar9 / dVar10) * 10.00000000 + 0.50000000) / 10.00000000;
      dVar12 = (double)(int)(dVar12 * 10.00000000 + 0.50000000) / 10.00000000;
      *(double *)(param_1 + 10) = dVar9;
      *(double *)(param_1 + 0x10) = dVar12;
    }
    *(double *)(param_1 + 2) = dVar9;
    *(double *)(param_1 + 4) = dVar13 * dVar11;
    *(double *)(param_1 + 6) = dVar14 * dVar10;
    *(double *)(param_1 + 8) = dVar12;
    *param_1 = uVar7 & 0xfffffffc | (uint)((uVar7 & 0xc) != 8) + 2;
LAB_0010ee90:
    xlfd_round_double(dVar9,dVar10,dVar11,dVar12);
    *(undefined8 *)(param_1 + 2) = extraout_XMM0_Qa;
    xlfd_round_double(*(undefined8 *)(param_1 + 4));
    *(undefined8 *)(param_1 + 4) = extraout_XMM0_Qa_00;
    xlfd_round_double(*(undefined8 *)(param_1 + 6));
    *(undefined8 *)(param_1 + 6) = extraout_XMM0_Qa_01;
    xlfd_round_double(*(undefined8 *)(param_1 + 8));
    *(undefined8 *)(param_1 + 8) = extraout_XMM0_Qa_02;
    xlfd_round_double(*(undefined8 *)(param_1 + 10));
    *(undefined8 *)(param_1 + 10) = extraout_XMM0_Qa_03;
    xlfd_round_double(*(undefined8 *)(param_1 + 0xc));
    *(undefined8 *)(param_1 + 0xc) = extraout_XMM0_Qa_04;
    xlfd_round_double(*(undefined8 *)(param_1 + 0xe));
    *(undefined8 *)(param_1 + 0xe) = extraout_XMM0_Qa_05;
    xlfd_round_double(*(undefined8 *)(param_1 + 0x10));
    *(double *)(param_1 + 0x10) = extraout_XMM0_Qa_06;
    param_1[0x13] = (int)(extraout_XMM0_Qa_06 * 10.00000000);
    param_1[0x12] = (int)*(double *)(param_1 + 8);
    uVar6 = 1;
  }
  else {
    if ((int)param_1[0x15] < 1) {
      dVar15 = hypot(*(double *)(param_1 + 4),*(double *)(param_1 + 8));
      dVar10 = hypot(*(double *)(param_1 + 0xc),*(double *)(param_1 + 0x10));
      if (0.00000000 <= dVar10) {
        param_1[0x15] = (int)((dVar15 * 72.27000000) / dVar10 + 0.50000000);
        uVar4 = param_1[0x14];
        if ((int)uVar4 < 1) {
          uVar7 = *param_1;
          goto LAB_0010efe0;
        }
        goto LAB_0010ed9e;
      }
    }
    else {
      uVar4 = param_1[0x14];
      if (0 < (int)uVar4) {
        uVar8 = param_1[0x15];
        uVar7 = *param_1;
        goto LAB_0010ec33;
      }
LAB_0010efe0:
      if ((uVar7 & 3) - 2 < 2) {
        dVar15 = hypot(*(double *)(param_1 + 2),*(double *)(param_1 + 6));
        dVar10 = hypot(*(double *)(param_1 + 10),*(double *)(param_1 + 0xe));
        if (dVar10 < 0.00000000) goto LAB_0010ed50;
        uVar4 = (uint)((dVar15 * 72.27000000) / dVar10 + 0.50000000);
        param_1[0x14] = uVar4;
      }
      else {
        uVar4 = param_1[0x15];
        param_1[0x14] = uVar4;
      }
LAB_0010ed9a:
      if (0 < (int)uVar4) {
LAB_0010ed9e:
        uVar8 = param_1[0x15];
        if (0 < (int)uVar8) {
          uVar7 = *param_1;
          goto LAB_0010ec33;
        }
      }
    }
LAB_0010ed50:
    uVar6 = 0;
  }
  if (lVar2 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



void RegisterFPEFunctions(void)

{
                    // WARNING: Treating indirect jump as call
  RegisterFPEFunctions();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

size_t strlen(char *__s)

{
  size_t sVar1;
  
  sVar1 = strlen(__s);
  return sVar1;
}



void _fs_convert_lfwi_reply(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_convert_lfwi_reply();
  return;
}



undefined8 BufFilePushCompressed(byte **param_1)

{
  int iVar1;
  byte *pbVar2;
  uint uVar3;
  long **pplVar4;
  long *plVar5;
  undefined8 uVar6;
  long lVar7;
  uint uVar8;
  
  iVar1 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar3 = (*(code *)param_1[0x402])();
    *(uint *)((long)param_1 + 0xc) = uVar3;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    uVar3 = (uint)*pbVar2;
  }
  if (uVar3 == 0x1f) {
    iVar1 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar1 + -1;
    if (iVar1 == 0) {
      uVar3 = (*(code *)param_1[0x402])(param_1);
      *(uint *)((long)param_1 + 0xc) = uVar3;
    }
    else {
      pbVar2 = *param_1;
      *param_1 = pbVar2 + 1;
      uVar3 = (uint)*pbVar2;
    }
    if (uVar3 == 0x9d) {
      iVar1 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar3 = (*(code *)param_1[0x402])(param_1);
        *(uint *)((long)param_1 + 0xc) = uVar3;
        if (uVar3 == 0xffffffff) {
          return 0;
        }
      }
      else {
        pbVar2 = *param_1;
        *param_1 = pbVar2 + 1;
        uVar3 = (uint)*pbVar2;
      }
      uVar8 = uVar3 & 0x1f;
      if (uVar8 - 10 < 7) {
        plVar5 = (long *)(long)(1 << (sbyte)uVar8);
        pplVar4 = (long **)malloc((ulong)(uint)(3 << (sbyte)uVar8) + 0xff88);
        if (pplVar4 != (long **)0x0) {
          *(byte ***)pplVar4 = param_1;
          *(uint *)(pplVar4 + 4) = uVar8;
          *(uint *)((long)pplVar4 + 0x1c) = uVar3 & 0x80;
          pplVar4[6] = plVar5;
          *(undefined4 *)((long)pplVar4 + 0x44) = 9;
          pplVar4[5] = (long *)0x1ff;
          lVar7 = 0xff;
          *(long ***)(pplVar4 + 0x1fef) = pplVar4 + 0x1ff1;
          plVar5 = (long *)((long)(pplVar4 + 0x1ff1) + (long)plVar5);
          pplVar4[0x1ff0] = plVar5;
          while( true ) {
            *(undefined2 *)((long)plVar5 + lVar7 * 2) = 0;
            *(undefined *)((long)pplVar4[0x1fef] + lVar7) = (char)lVar7;
            lVar7 = lVar7 + -1;
            if (lVar7 == -1) break;
            plVar5 = pplVar4[0x1ff0];
          }
          pplVar4[2] = (long *)0xffffffffffffffff;
          *(undefined4 *)(pplVar4 + 8) = 0;
          pplVar4[9] = (long *)0x0;
          pplVar4[7] = (long *)((ulong)(*(int *)((long)pplVar4 + 0x1c) != 0) + 0x100);
          *(undefined4 *)(pplVar4 + 10) = 0;
          *(undefined4 *)((long)pplVar4 + 0x54) = 0;
          *(undefined4 *)(pplVar4 + 0xb) = 0;
          *(undefined4 *)((long)pplVar4 + 0x5c) = 0;
          *(long ***)(pplVar4 + 1) = pplVar4 + 0xc;
          uVar6 = BufFileCreate(0,pplVar4,&LAB_00109aa0,0,&LAB_00109ee0,&LAB_00109f30);
          return uVar6;
        }
      }
    }
  }
  return 0;
}



void _fs_start_read(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_start_read();
  return;
}



void __stack_chk_fail(void)

{
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void BufFileOpenRead(int param_1)

{
  BufFileCreate((long)param_1,&LAB_00109720,0,&LAB_00109760,&LAB_001096f0);
  return;
}



void DestroyFontRec(void)

{
                    // WARNING: Treating indirect jump as call
  DestroyFontRec();
  return;
}



void FontFileFreeEntry(void **param_1)

{
  void *__ptr;
  void *__ptr_00;
  void *__ptr_01;
  int iVar1;
  long lVar2;
  
  if (*param_1 != (void *)0x0) {
    free(*param_1);
  }
  iVar1 = *(int *)(param_1 + 2);
  *param_1 = (void *)0x0;
  if (iVar1 == 2) {
    free(param_1[4]);
    param_1[4] = (void *)0x0;
    return;
  }
  if (iVar1 == 3) {
    free(param_1[3]);
    param_1[3] = (void *)0x0;
    return;
  }
  if (iVar1 == 0) {
    free(param_1[4]);
    __ptr = param_1[5];
    __ptr_01 = *(void **)((long)__ptr + 0x80);
    if (0 < *(int *)((long)__ptr + 0x78)) {
      lVar2 = 0;
      do {
        __ptr_00 = *(void **)((long)__ptr_01 + lVar2 + 0x70);
        if (__ptr_00 != (void *)0x0) {
          free(__ptr_00);
          __ptr_01 = *(void **)((long)__ptr + 0x80);
        }
        iVar1 = iVar1 + 1;
        lVar2 = lVar2 + 0x88;
      } while (iVar1 < *(int *)((long)__ptr + 0x78));
    }
    free(__ptr_01);
    free(__ptr);
    return;
  }
  return;
}



void FontEncIdentify(void)

{
  FontEncIdentify();
  return;
}



ulong FontFileMatchName(undefined8 param_1,undefined2 param_2,undefined8 param_3)

{
  long lVar1;
  long in_FS_OFFSET;
  undefined8 uStack200;
  undefined8 *puStack192;
  undefined4 uStack184;
  undefined8 uStack168;
  undefined2 uStack160;
  undefined2 uStack158;
  long lStack16;
  
  lStack16 = *(long *)(in_FS_OFFSET + 0x28);
  uStack200 = 0x100000001;
  puStack192 = &uStack168;
  uStack184 = 1;
  uStack168 = param_1;
  uStack160 = param_2;
  uStack158 = FontFileCountDashes();
  lVar1 = FontFileFindNameInDir(&uStack200,param_3);
  if (lStack16 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return (ulong)(lVar1 != 0);
}



void _FontTransFreeConnInfo(void)

{
                    // WARNING: Treating indirect jump as call
  _FontTransFreeConnInfo();
  return;
}



void FT_Activate_Size(void)

{
  FT_Activate_Size();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strchr(char *__s,int __c)

{
  char *pcVar1;
  
  pcVar1 = strchr(__s,__c);
  return pcVar1;
}



void _FontTransConnect(void)

{
                    // WARNING: Treating indirect jump as call
  _FontTransConnect();
  return;
}



void __fdelt_chk(void)

{
  __fdelt_chk();
  return;
}



void FTtoXReturnCode(void)

{
                    // WARNING: Treating indirect jump as call
  FTtoXReturnCode();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * gai_strerror(int __ecode)

{
  char *pcVar1;
  
  pcVar1 = gai_strerror(__ecode);
  return pcVar1;
}



char ** FontFileMakeDir(char *param_1,uint param_2)

{
  int iVar1;
  char *__s;
  size_t sVar2;
  char **__ptr;
  char *pcVar3;
  long lVar4;
  size_t __n;
  char **ppcVar5;
  int iVar6;
  bool bVar7;
  
  __s = strchr(param_1,0x3a);
  if (__s == (char *)0x0) {
    __n = strlen(param_1);
    __n = SEXT48((int)__n);
    if (param_1[__n - 1] == '/') {
      iVar6 = 0;
      bVar7 = false;
      lVar4 = 0;
      sVar2 = __n;
    }
    else {
      iVar6 = 0;
      bVar7 = true;
      lVar4 = 0;
      sVar2 = __n + 1;
    }
  }
  else {
    __n = SEXT48((int)__s - (int)param_1);
    sVar2 = strlen(__s);
    bVar7 = param_1[__n - 1] != '/';
    iVar6 = (int)sVar2;
    lVar4 = 0;
    sVar2 = bVar7 + __n;
    if (iVar6 != 0) {
      lVar4 = (long)(iVar6 + 1);
    }
  }
  __ptr = (char **)malloc(sVar2 + 0x51 + lVar4);
  ppcVar5 = __ptr;
  if (__ptr != (char **)0x0) {
    iVar1 = FontFileInitTable(__ptr + 3,0);
    if (iVar1 != 0) {
      iVar1 = FontFileInitTable(__ptr + 6,(ulong)param_2);
      if (iVar1 != 0) {
        __ptr[1] = (char *)0x0;
        __ptr[2] = (char *)0x0;
        pcVar3 = (char *)((long)__ptr + sVar2 + 0x51);
        *(char ***)__ptr = __ptr + 10;
        if (iVar6 == 0) {
          pcVar3 = (char *)0x0;
        }
        __ptr[9] = pcVar3;
        pcVar3 = strncpy((char *)(__ptr + 10),param_1,__n);
        pcVar3[__n] = '\0';
        if (__ptr[9] != (char *)0x0) {
          strcpy(__ptr[9],__s);
        }
        if (!bVar7) {
          return __ptr;
        }
        __s = *__ptr;
        __n = strlen(__s);
        *(undefined2 *)(__s + __n) = 0x2f;
        return __ptr;
      }
      FontFileFreeTable(__ptr + 3);
    }
    ppcVar5 = (char **)0x0;
    free(__ptr);
  }
  return ppcVar5;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strrchr(char *__s,int __c)

{
  char *pcVar1;
  
  pcVar1 = strrchr(__s,__c);
  return pcVar1;
}



void FT_New_Face(void)

{
  FT_New_Face();
  return;
}



void BuiltinRegisterFontFileFunctions(void)

{
                    // WARNING: Treating indirect jump as call
  BuiltinRegisterFontFileFunctions();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int uname(utsname *__name)

{
  int iVar1;
  
  iVar1 = uname(__name);
  return iVar1;
}



void _fs_pad_length(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_pad_length();
  return;
}



void BuiltinReadDirectory(void)

{
                    // WARNING: Treating indirect jump as call
  BuiltinReadDirectory();
  return;
}



void FT_Init_FreeType(void)

{
  FT_Init_FreeType();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

__off_t lseek(int __fd,__off_t __offset,int __whence)

{
  __off_t _Var1;
  
  _Var1 = lseek(__fd,__offset,__whence);
  return _Var1;
}



void GetDefaultPointSize(void)

{
                    // WARNING: Treating indirect jump as call
  GetDefaultPointSize();
  return;
}



void FontEncName(void)

{
  FontEncName();
  return;
}



void bdfHexByte(void)

{
                    // WARNING: Treating indirect jump as call
  bdfHexByte();
  return;
}



void FontFileOpenBitmap(void)

{
  FUN_0010c960();
  return;
}



void FontComputeInfoAccelerators(void)

{
                    // WARNING: Treating indirect jump as call
  FontComputeInfoAccelerators();
  return;
}



void FontDefaultFormat(undefined4 *param_1,undefined4 *param_2,undefined4 *param_3,
                      undefined4 *param_4)

{
  *param_1 = 1;
  *param_2 = 1;
  *param_3 = 4;
  *param_4 = 1;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * memset(void *__s,int __c,size_t __n)

{
  void *pvVar1;
  
  pvVar1 = memset(__s,__c,__n);
  return pvVar1;
}



void SPropRecValList_new(void)

{
                    // WARNING: Treating indirect jump as call
  SPropRecValList_new();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int fscanf(FILE *__stream,char *__format,...)

{
  int iVar1;
  
  iVar1 = fscanf(__stream,__format);
  return iVar1;
}



void FontEncRecode(void)

{
  FontEncRecode();
  return;
}



void BuiltinFileOpen(void)

{
                    // WARNING: Treating indirect jump as call
  BuiltinFileOpen();
  return;
}



ulong FontFileFindNamesInScalableDir
                (long param_1,undefined8 *param_2,int param_3,int *param_4,uint *param_5,
                uint param_6,int *param_7)

{
  int *piVar1;
  char *__s;
  uint uVar2;
  int iVar3;
  size_t sVar4;
  ulong uVar5;
  uint uVar6;
  undefined8 uVar7;
  ulong uVar8;
  undefined8 *puVar9;
  long in_FS_OFFSET;
  uint uStack196;
  int iStack192;
  uint uStack188;
  byte abStack184 [120];
  long lStack64;
  
  uVar5 = 0x55;
  lStack64 = *(long *)(in_FS_OFFSET + 0x28);
  if (0 < param_3) {
    uVar2 = FUN_0010b3a0(param_1,*param_2,(ulong)*(ushort *)((long)param_2 + 10),&uStack196,
                         &iStack192,&uStack188);
    uVar8 = (ulong)uVar2;
    if ((int)uVar2 < 0) {
      uVar8 = SEXT48((int)uStack196);
      puVar9 = (undefined8 *)(*(long *)(param_1 + 8) + uVar8 * 0x98);
    }
    else {
      puVar9 = (undefined8 *)(*(long *)(param_1 + 8) + (long)(int)uVar2 * 0x98);
      if ((param_6 == 0) || (*(int *)(puVar9 + 2) != 3)) {
        if (param_7 != (int *)0x0) {
          *param_7 = param_3 + -1;
        }
        uVar2 = AddFontNamesName(param_4,*puVar9,(ulong)(uint)(int)*(short *)(puVar9 + 1));
        uVar5 = (ulong)uVar2;
        goto LAB_0010be34;
      }
      iStack192 = uVar2 + 1;
      uStack196 = uVar2;
    }
    if ((int)uVar8 < iStack192) {
      do {
        if ((int)uStack188 <= (int)*(short *)((long)puVar9 + 10)) {
          uVar7 = *puVar9;
          iVar3 = FUN_0010b570(*param_2,(ulong)uStack188,uVar7);
          if (iVar3 < 1) {
            if (iVar3 != 0) break;
          }
          else {
            if (param_5 != (uint *)0x0) {
              uVar2 = *param_5;
              if (*(int *)(puVar9 + 2) == 0) {
                uVar6 = *(uint *)(puVar9[3] + 0x34);
              }
              else {
                uVar6 = -(uint)(*(int *)(puVar9 + 2) == 3);
              }
              if (((((uVar2 & 3) == 2) || ((uVar2 & 0xc) == 8)) && ((uVar6 & 1) == 0)) ||
                 (((uVar2 & 0x40) != 0 && ((uVar6 & 2) == 0)))) goto LAB_0010be98;
            }
            if (((param_6 & 2) != 0) && (*(int *)(puVar9 + 2) == 3)) {
              iVar3 = FontParseXLFDName(uVar7,abStack184,0);
              if ((iVar3 != 0) && ((abStack184[0] & 0xf) == 0)) goto LAB_0010be98;
              uVar7 = *puVar9;
            }
            uVar2 = AddFontNamesName(param_4,uVar7,(ulong)(uint)(int)*(short *)(puVar9 + 1));
            uVar5 = (ulong)uVar2;
            if (uVar2 != 0x55) goto LAB_0010bf50;
            if (((param_6 & 1) != 0) && (*(int *)(puVar9 + 2) == 3)) {
              piVar1 = (int *)(*(long *)(param_4 + 2) + -4 + (long)*param_4 * 4);
              *piVar1 = -*piVar1;
              __s = (char *)puVar9[3];
              sVar4 = strlen(__s);
              uVar2 = AddFontNamesName(param_4,__s,sVar4 & 0xffffffff);
              if (uVar2 != 0x55) {
                uVar5 = (ulong)uVar2;
                goto LAB_0010bf50;
              }
            }
            uVar5 = 0x55;
            param_3 = param_3 + -1;
            if (param_3 == 0) goto LAB_0010bf50;
          }
        }
LAB_0010be98:
        uVar2 = (int)uVar8 + 1;
        puVar9 = puVar9 + 0x13;
        uVar8 = (ulong)uVar2;
      } while ((int)uVar2 < iStack192);
    }
    uVar5 = 0x55;
LAB_0010bf50:
    if (param_7 != (int *)0x0) {
      *param_7 = param_3;
    }
  }
LAB_0010be34:
  if (lStack64 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar5;
}



undefined8
FontFileMatchBitmapSource
          (long param_1,long *param_2,uint param_3,undefined8 param_4,undefined8 param_5,
          undefined8 param_6,uint param_7,uint param_8,uint param_9)

{
  long lVar1;
  int iVar2;
  long lVar3;
  undefined8 uVar4;
  long lVar5;
  
  if (0 < FontFileBitmapSources._12_4_) {
    lVar5 = 0;
    do {
      lVar1 = lVar5 * 8;
      lVar3 = *(long *)(FontFileBitmapSources._0_8_ + lVar5 * 8);
      if (((lVar3 != param_1) &&
          (lVar3 = FontFileFindNameInDir(*(long *)(lVar3 + 0x18) + 0x18,param_5), lVar3 != 0)) &&
         (lVar3 = FontFileFindScaledInstance(lVar3,param_6,(ulong)param_9), lVar3 != 0)) {
        lVar5 = *(long *)(lVar3 + 0x80);
        if (lVar5 != 0) {
          *param_2 = lVar5;
          *(undefined8 *)(lVar5 + 0x88) = *(undefined8 *)(FontFileBitmapSources._0_8_ + lVar1);
          return 0x55;
        }
        lVar5 = *(long *)(lVar3 + 0x78);
        if (lVar5 == 0) {
          return 0x53;
        }
        lVar3 = *(long *)(lVar5 + 0x28);
        if (lVar3 != 0) {
          *param_2 = lVar3;
          *(undefined8 *)(lVar3 + 0x88) = *(undefined8 *)(FontFileBitmapSources._0_8_ + lVar1);
          return 0x55;
        }
        uVar4 = FontFileOpenBitmap(*(undefined8 *)(FontFileBitmapSources._0_8_ + lVar1),param_2,
                                   (ulong)param_3,lVar5,(ulong)param_7,(ulong)param_8);
        if ((int)uVar4 == 0x55) {
          if (*param_2 != 0) {
            *(undefined8 *)(*param_2 + 0x88) = *(undefined8 *)(FontFileBitmapSources._0_8_ + lVar1);
            return uVar4;
          }
          return uVar4;
        }
        return uVar4;
      }
      iVar2 = (int)lVar5;
      lVar5 = lVar5 + 1;
    } while (iVar2 + 1 < FontFileBitmapSources._12_4_);
  }
  return 0x53;
}



void xlfd_round_double(void)

{
                    // WARNING: Treating indirect jump as call
  xlfd_round_double();
  return;
}



void FontFileRegisterRenderer(undefined8 param_1)

{
  FontFilePriorityRegisterRenderer(param_1,0);
  return;
}



void FT_Get_PS_Font_Info(void)

{
  FT_Get_PS_Font_Info();
  return;
}



void FT_Set_Charmap(void)

{
  FT_Set_Charmap();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int close(int __fd)

{
  int iVar1;
  
  iVar1 = close(__fd);
  return iVar1;
}



void fs_create_font(void)

{
                    // WARNING: Treating indirect jump as call
  fs_create_font();
  return;
}



void _fs_io_init(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_io_init();
  return;
}



void bitmapComputeWeight(void)

{
                    // WARNING: Treating indirect jump as call
  bitmapComputeWeight();
  return;
}



void FontEncFromXLFD(void)

{
  FontEncFromXLFD();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int closedir(DIR *__dirp)

{
  int iVar1;
  
  iVar1 = closedir(__dirp);
  return iVar1;
}



void _fs_write_pad(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_write_pad();
  return;
}



void FT_Outline_Get_BBox(void)

{
  FT_Outline_Get_BBox();
  return;
}



void FontEncFind(void)

{
  FontEncFind();
  return;
}



void FontFileSortTable(int *param_1)

{
  if (param_1[4] == 0) {
    qsort(*(void **)(param_1 + 2),(long)*param_1,0x98,(__compar_fn_t)&LAB_0010b390);
    param_1[4] = 1;
    return;
  }
  return;
}



void FT_Select_Charmap(void)

{
  FT_Select_Charmap();
  return;
}



void FT_Get_Sfnt_Table(void)

{
  FT_Get_Sfnt_Table();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ssize_t read(int __fd,void *__buf,size_t __nbytes)

{
  ssize_t sVar1;
  
  sVar1 = read(__fd,__buf,__nbytes);
  return sVar1;
}



void FontFileFreeTable(int *param_1)

{
  int iVar1;
  long lVar2;
  long lVar3;
  
  if (0 < *param_1) {
    lVar2 = 0;
    iVar1 = 0;
    do {
      iVar1 = iVar1 + 1;
      lVar3 = *(long *)(param_1 + 2) + lVar2;
      lVar2 = lVar2 + 0x98;
      FontFileFreeEntry(lVar3);
    } while (*param_1 != iVar1 && iVar1 <= *param_1);
  }
  free(*(void **)(param_1 + 2));
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int memcmp(void *__s1,void *__s2,size_t __n)

{
  int iVar1;
  
  iVar1 = memcmp(__s1,__s2,__n);
  return iVar1;
}



void _fs_unmark_block(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_unmark_block();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int getsockopt(int __fd,int __level,int __optname,void *__optval,socklen_t *__optlen)

{
  int iVar1;
  
  iVar1 = getsockopt(__fd,__level,__optname,__optval,__optlen);
  return iVar1;
}



long FontFileOpen(char *param_1)

{
  int __fd;
  uint uVar1;
  long lVar2;
  size_t sVar3;
  long lVar4;
  byte *pbVar5;
  byte *pbVar6;
  bool bVar7;
  bool bVar8;
  byte bVar9;
  
  bVar9 = 0;
  __fd = open(param_1,0);
  if (__fd < 0) {
    return 0;
  }
  lVar2 = BufFileOpenRead();
  if (lVar2 == 0) {
    close(__fd);
  }
  else {
    sVar3 = strlen(param_1);
    uVar1 = (uint)sVar3;
    bVar7 = uVar1 < 2;
    bVar8 = uVar1 == 2;
    if (2 < (int)uVar1) {
      lVar4 = 3;
      pbVar5 = (byte *)(param_1 + (long)(int)uVar1 + -2);
      pbVar6 = &DAT_001310c2;
      do {
        if (lVar4 == 0) break;
        lVar4 = lVar4 + -1;
        bVar7 = *pbVar5 < *pbVar6;
        bVar8 = *pbVar5 == *pbVar6;
        pbVar5 = pbVar5 + (ulong)bVar9 * -2 + 1;
        pbVar6 = pbVar6 + (ulong)bVar9 * -2 + 1;
      } while (bVar8);
      if ((!bVar7 && !bVar8) == bVar7) {
        lVar4 = BufFilePushCompressed(lVar2);
      }
      else {
        bVar7 = uVar1 < 3;
        bVar8 = uVar1 == 3;
        if (bVar8) {
          return lVar2;
        }
        lVar4 = 4;
        pbVar5 = (byte *)(param_1 + (long)(int)uVar1 + -3);
        pbVar6 = &DAT_001310c9;
        do {
          if (lVar4 == 0) break;
          lVar4 = lVar4 + -1;
          bVar7 = *pbVar5 < *pbVar6;
          bVar8 = *pbVar5 == *pbVar6;
          pbVar5 = pbVar5 + (ulong)bVar9 * -2 + 1;
          pbVar6 = pbVar6 + (ulong)bVar9 * -2 + 1;
        } while (bVar8);
        if ((!bVar7 && !bVar8) != bVar7) {
          return lVar2;
        }
        lVar4 = BufFilePushZIP(lVar2);
      }
      if (lVar4 != 0) {
        return lVar4;
      }
      BufFileClose(lVar2,1);
      lVar2 = 0;
    }
  }
  return lVar2;
}



void _fs_write(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_write();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * calloc(size_t __nmemb,size_t __size)

{
  void *pvVar1;
  
  pvVar1 = calloc(__nmemb,__size);
  return pvVar1;
}



void NameForAtom(void)

{
                    // WARNING: Treating indirect jump as call
  NameForAtom();
  return;
}



void pcfReadFont(void)

{
                    // WARNING: Treating indirect jump as call
  pcfReadFont();
  return;
}



void GetNewFontClientID(void)

{
                    // WARNING: Treating indirect jump as call
  GetNewFontClientID();
  return;
}



uint * FontFileFindScaledInstance(long param_1,uint *param_2,int param_3)

{
  char *pcVar1;
  char *pcVar2;
  uint *puVar3;
  int iVar4;
  uint uVar5;
  long lVar6;
  char *pcVar7;
  char *pcVar8;
  long lVar9;
  char *pcVar10;
  double *pdVar11;
  uint *puVar12;
  int iVar13;
  int iVar14;
  double dVar15;
  double dVar16;
  undefined8 uVar18;
  undefined auVar17 [16];
  double dVar19;
  double dVar20;
  double dVar21;
  
  lVar6 = *(long *)(param_1 + 0x28);
  iVar4 = *(int *)(lVar6 + 0x78);
  if (param_3 != 0) {
    lVar9 = 0;
    if (iVar4 != 0) {
      lVar9 = *(long *)(lVar6 + 0x80);
      dVar21 = *(double *)(lVar9 + 0x28) - *(double *)(param_2 + 10);
      dVar15 = *(double *)(lVar9 + 0x30) - *(double *)(param_2 + 0xc);
      dVar19 = *(double *)(lVar9 + 0x40) - *(double *)(param_2 + 0x10);
      dVar16 = *(double *)(lVar9 + 0x38) - *(double *)(param_2 + 0xe);
      uVar18 = 0;
      dVar15 = dVar16 * dVar16 + dVar21 * dVar21 + dVar15 * dVar15 + dVar19 * dVar19;
      if (1 < iVar4) {
        pdVar11 = (double *)(lVar9 + 0xb0);
        iVar14 = 0;
        iVar13 = 1;
        do {
          if ((pdVar11[0xb] == 0.00000000) || ((*(byte *)((long)pdVar11[0xb] + 0x13) & 2) != 0)) {
            dVar16 = *pdVar11 - *(double *)(param_2 + 10);
            dVar20 = pdVar11[3] - *(double *)(param_2 + 0x10);
            dVar19 = pdVar11[1] - *(double *)(param_2 + 0xc);
            dVar21 = pdVar11[2] - *(double *)(param_2 + 0xe);
            dVar16 = (double)(int)(dVar21 * dVar21 + dVar16 * dVar16 + dVar19 * dVar19 +
                                  dVar20 * dVar20);
            auVar17 = minsd(ZEXT816((ulong)dVar16),CONCAT88(uVar18,dVar15));
            if (dVar16 < dVar15) {
              iVar14 = iVar13;
            }
            dVar15 = SUB168(auVar17,0);
            uVar18 = SUB168(auVar17 >> 0x40,0);
          }
          iVar13 = iVar13 + 1;
          pdVar11 = pdVar11 + 0x11;
        } while (iVar13 != iVar4);
        lVar9 = lVar9 + (long)iVar14 * 0x88;
      }
      if (*(long *)(lVar9 + 0x80) != 0) {
        if ((*(byte *)(*(long *)(lVar9 + 0x80) + 0x13) & 2) == 0) {
          lVar9 = 0;
        }
        return (uint *)lVar9;
      }
    }
    return (uint *)lVar9;
  }
  if (0 < iVar4) {
    puVar12 = *(uint **)(lVar6 + 0x80);
    puVar3 = puVar12 + (ulong)(iVar4 - 1) * 0x22 + 0x22;
    do {
      if (((*(long *)(puVar12 + 0x20) == 0) ||
          ((*(byte *)(*(long *)(puVar12 + 0x20) + 0x13) & 2) != 0)) &&
         (*(long *)(puVar12 + 0x14) == *(long *)(param_2 + 0x14))) {
LAB_0010f1b8:
        if ((((puVar12[0x16] == 0 || puVar12[0x16] == param_2[0x16]) || (param_2[0x16] + 1 < 2)) &&
            ((uVar5 = *param_2, (uVar5 & 3) == 0 ||
             (((((*puVar12 ^ uVar5) & 3) == 0 &&
               (*(double *)(puVar12 + 2) == *(double *)(param_2 + 2))) &&
              ((*(double *)(puVar12 + 4) == *(double *)(param_2 + 4) &&
               ((*(double *)(puVar12 + 6) == *(double *)(param_2 + 6) &&
                (*(double *)(puVar12 + 8) == *(double *)(param_2 + 8))))))))))) &&
           (((uVar5 & 0xc) == 0 ||
            ((((((uVar5 ^ *puVar12) & 0xc) == 0 &&
               (*(double *)(puVar12 + 10) == *(double *)(param_2 + 10))) &&
              (*(double *)(puVar12 + 0xc) == *(double *)(param_2 + 0xc))) &&
             ((*(double *)(puVar12 + 0xe) == *(double *)(param_2 + 0xe) &&
              (*(double *)(puVar12 + 0x10) == *(double *)(param_2 + 0x10))))))))) {
          uVar5 = puVar12[0x1a];
          if (uVar5 == 0) {
            return puVar12;
          }
          if (uVar5 == param_2[0x1a]) {
            if ((int)uVar5 < 1) {
              return puVar12;
            }
            pcVar7 = *(char **)(puVar12 + 0x1c);
            pcVar8 = *(char **)(param_2 + 0x1c);
            if (((pcVar8[1] == pcVar7[1]) && (*pcVar8 == *pcVar7)) && (pcVar8[3] == pcVar7[3])) {
              pcVar10 = pcVar7 + 4;
              while (pcVar10[-2] == pcVar8[2]) {
                if (pcVar7 + 4 + (ulong)(uVar5 - 1) * 4 == pcVar10) {
                  return puVar12;
                }
                if (((pcVar10[1] != pcVar8[5]) || (*pcVar10 != pcVar8[4])) ||
                   (pcVar1 = pcVar8 + 7, pcVar2 = pcVar10 + 3, pcVar10 = pcVar10 + 4,
                   pcVar8 = pcVar8 + 4, *pcVar2 != *pcVar1)) break;
              }
            }
          }
        }
        do {
          puVar12 = puVar12 + 0x22;
          if (puVar12 == puVar3) {
            return (uint *)0;
          }
          while ((*(long *)(puVar12 + 0x20) == 0 ||
                 ((*(byte *)(*(long *)(puVar12 + 0x20) + 0x13) & 2) != 0))) {
            if (*(long *)(puVar12 + 0x14) == *(long *)(param_2 + 0x14)) goto LAB_0010f1b8;
            puVar12 = puVar12 + 0x22;
            if (puVar12 == puVar3) {
              return (uint *)0;
            }
          }
        } while( true );
      }
      puVar12 = puVar12 + 0x22;
    } while (puVar12 != puVar3);
  }
  return (uint *)0;
}



void _fs_flush(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_flush();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int strcmp(char *__s1,char *__s2)

{
  int iVar1;
  
  iVar1 = strcmp(__s1,__s2);
  return iVar1;
}



void GetClientResolutions(void)

{
                    // WARNING: Treating indirect jump as call
  GetClientResolutions();
  return;
}



void FT_MulFix(void)

{
  FT_MulFix();
  return;
}



void __memcpy_chk(void)

{
  __memcpy_chk();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

long strtol(char *__nptr,char **__endptr,int __base)

{
  long lVar1;
  
  lVar1 = strtol(__nptr,__endptr,__base);
  return lVar1;
}



void EmptyFontPatternCache(void)

{
                    // WARNING: Treating indirect jump as call
  EmptyFontPatternCache();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * memcpy(void *__dest,void *__src,size_t __n)

{
  void *pvVar1;
  
  pvVar1 = memcpy(__dest,__src,__n);
  return pvVar1;
}



void bdfGetLine(void)

{
                    // WARNING: Treating indirect jump as call
  bdfGetLine();
  return;
}



void inflateEnd(void)

{
  inflateEnd();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int inet_pton(int __af,char *__cp,void *__buf)

{
  int iVar1;
  
  iVar1 = inet_pton(__af,__cp,__buf);
  return iVar1;
}



void TwoByteSwap(void)

{
                    // WARNING: Treating indirect jump as call
  TwoByteSwap();
  return;
}



ulong FontFileDirectoryChanged(char **param_1)

{
  char *__s;
  int iVar1;
  size_t sVar2;
  ulong uVar3;
  int *piVar4;
  long in_FS_OFFSET;
  stat sStack1224;
  undefined8 uStack1080;
  undefined4 auStack1072 [256];
  long lStack48;
  
  __s = *param_1;
  lStack48 = *(long *)(in_FS_OFFSET + 0x28);
  sVar2 = strlen(__s);
  if (sVar2 + 10 < 0x401) {
    __memcpy_chk(&uStack1080,__s,sVar2,0x400);
    *(undefined8 *)((long)&uStack1080 + sVar2) = 0x69642e73746e6f66;
    *(undefined2 *)((long)auStack1072 + sVar2) = 0x72;
    iVar1 = __xstat(1,(char *)&uStack1080,&sStack1224);
    if (iVar1 == -1) {
      piVar4 = __errno_location();
      if (*piVar4 == 2) {
        uVar3 = (ulong)(param_1[1] != (char *)0x0);
        goto LAB_0010b051;
      }
    }
    else {
      if (param_1[1] == sStack1224.st_mtim.tv_sec) {
        __s = *param_1;
        sVar2 = strlen(__s);
        if (0x400 < sVar2 + 0xc) goto LAB_0010b04f;
        __memcpy_chk(&uStack1080,__s,sVar2,0x400);
        *(undefined4 *)((long)auStack1072 + sVar2) = 0x736169;
        *(undefined8 *)((long)&uStack1080 + sVar2) = 0x6c612e73746e6f66;
        iVar1 = __xstat(1,(char *)&uStack1080,&sStack1224);
        if (iVar1 != -1) {
          uVar3 = (ulong)(param_1[2] != sStack1224.st_mtim.tv_sec);
          goto LAB_0010b051;
        }
        piVar4 = __errno_location();
        if (*piVar4 == 2) {
          uVar3 = (ulong)(param_1[2] != (char *)0x0);
          goto LAB_0010b051;
        }
      }
    }
    uVar3 = 1;
  }
  else {
LAB_0010b04f:
    uVar3 = 0;
  }
LAB_0010b051:
  if (lStack48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



void _FontTransGetHostname(void)

{
                    // WARNING: Treating indirect jump as call
  _FontTransGetHostname();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int fileno(FILE *__stream)

{
  int iVar1;
  
  iVar1 = fileno(__stream);
  return iVar1;
}



void __stpcpy_chk(void)

{
  __stpcpy_chk();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int select(int __nfds,fd_set *__readfds,fd_set *__writefds,fd_set *__exceptfds,timeval *__timeout)

{
  int iVar1;
  
  iVar1 = select(__nfds,__readfds,__writefds,__exceptfds,__timeout);
  return iVar1;
}



void FT_Get_BDF_Charset_ID(void)

{
  FT_Get_BDF_Charset_ID();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int __xstat(int __ver,char *__filename,stat *__stat_buf)

{
  int iVar1;
  
  iVar1 = __xstat(__ver,__filename,__stat_buf);
  return iVar1;
}



void FreeFontNames(void)

{
                    // WARNING: Treating indirect jump as call
  FreeFontNames();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

dirent * readdir(DIR *__dirp)

{
  dirent *pdVar1;
  
  pdVar1 = readdir(__dirp);
  return pdVar1;
}



void fs_build_range(void)

{
                    // WARNING: Treating indirect jump as call
  fs_build_range();
  return;
}



void bitmapComputeFontBounds(void)

{
                    // WARNING: Treating indirect jump as call
  bitmapComputeFontBounds();
  return;
}



void _fs_convert_char_info(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_convert_char_info();
  return;
}



void FontCouldBeTerminal(void)

{
                    // WARNING: Treating indirect jump as call
  FontCouldBeTerminal();
  return;
}



void bdfReadFont(void)

{
                    // WARNING: Treating indirect jump as call
  bdfReadFont();
  return;
}



undefined8 * FontFileFindNameInScalableDir(long param_1,undefined8 *param_2,uint *param_3)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  uint uVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  ulong uVar7;
  undefined8 uVar8;
  long in_FS_OFFSET;
  int iStack44;
  int iStack40;
  uint uStack36;
  long lStack32;
  
  lStack32 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(param_1 + 8) != 0) {
    iVar3 = FUN_0010b3a0(param_1,*param_2,(ulong)*(ushort *)((long)param_2 + 10),&iStack44,&iStack40
                        );
    if (-1 < iVar3) {
      puVar6 = (undefined8 *)(*(long *)(param_1 + 8) + (long)iVar3 * 0x98);
      goto LAB_0010bc3d;
    }
    if (iStack44 < iStack40) {
      lVar2 = *(long *)(param_1 + 8);
      uVar7 = (ulong)uStack36;
      uVar8 = *param_2;
      puVar5 = (undefined8 *)(lVar2 + (long)iStack44 * 0x98);
      do {
        if ((int)uVar7 <= (int)*(short *)((long)puVar5 + 10)) {
          puVar6 = puVar5;
          iVar3 = FUN_0010b570(uVar8,uVar7 & 0xffffffff,*puVar5);
          if (iVar3 < 1) {
            if (iVar3 != 0) break;
          }
          else {
            if (param_3 == (uint *)0x0) goto LAB_0010bc3d;
            uVar1 = *param_3;
            if (*(int *)(puVar5 + 2) == 0) {
              uVar4 = *(uint *)(puVar5[3] + 0x34);
            }
            else {
              uVar4 = -(uint)(*(int *)(puVar5 + 2) == 3);
            }
            if (((((uVar1 & 3) != 2) && ((uVar1 & 0xc) != 8)) || ((uVar4 & 1) != 0)) &&
               (((uVar1 & 0x40) == 0 || ((uVar4 & 2) != 0)))) goto LAB_0010bc3d;
          }
        }
        puVar5 = puVar5 + 0x13;
      } while (puVar5 != (undefined8 *)
                         (lVar2 + 0x98 +
                         ((long)iStack44 + (ulong)(uint)((iStack40 + -1) - iStack44)) * 0x98));
    }
  }
  puVar6 = (undefined8 *)0x0;
LAB_0010bc3d:
  if (lStack32 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return puVar6;
}



void pcfError(void)

{
                    // WARNING: Treating indirect jump as call
  pcfError();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * malloc(size_t __size)

{
  void *pvVar1;
  
  pvVar1 = malloc(__size);
  return pvVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int fflush(FILE *__stream)

{
  int iVar1;
  
  iVar1 = fflush(__stream);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int _IO_getc(_IO_FILE *__fp)

{
  int iVar1;
  
  iVar1 = _IO_getc(__fp);
  return iVar1;
}



undefined8 FTRemap(undefined8 param_1,int *param_2,uint param_3)

{
  int iVar1;
  undefined8 uVar2;
  long lVar3;
  
  if (*(long *)(param_2 + 6) == 0) {
    if (param_3 < 0x100) {
      FT_Set_Charmap(param_1,*(undefined8 *)(param_2 + 2));
      goto LAB_00108c10;
    }
  }
  else {
    if (*param_2 == 0) {
      iVar1 = FontEncRecode((ulong)param_3);
      param_3 = iVar1 + param_2[4];
      FT_Set_Charmap(param_1,*(undefined8 *)(param_2 + 2));
LAB_00108c10:
      uVar2 = FT_Get_Char_Index(param_1,(ulong)param_3);
      return uVar2;
    }
    lVar3 = FontEncName();
    if (lVar3 != 0) {
      uVar2 = FT_Get_Name_Index(param_1,lVar3);
      return uVar2;
    }
  }
  return 0;
}



ulong BufFileWrite(byte **param_1,byte *param_2,ulong param_3)

{
  byte bVar1;
  byte *pbVar2;
  int iVar3;
  byte *pbVar4;
  
  pbVar4 = param_2;
  do {
    while( true ) {
      if (pbVar4 == param_2 + (param_3 & 0xffffffff)) {
        return param_3 & 0xffffffff;
      }
      iVar3 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = iVar3 + -1;
      if (iVar3 + -1 == 0) break;
      pbVar2 = *param_1;
      bVar1 = *pbVar4;
      *param_1 = pbVar2 + 1;
      *pbVar2 = bVar1;
      pbVar4 = pbVar4 + 1;
    }
    iVar3 = (*(code *)param_1[0x403])((ulong)*pbVar4,param_1);
    pbVar4 = pbVar4 + 1;
  } while (iVar3 != -1);
  return 0xffffffff;
}



undefined8
FTPickMapping(long param_1,undefined8 param_2,undefined8 param_3,long param_4,undefined4 *param_5)

{
  long *plVar1;
  char cVar2;
  int *piVar3;
  int iVar4;
  int iVar5;
  size_t sVar6;
  size_t sVar7;
  undefined8 uVar8;
  long lVar9;
  long *plVar10;
  char *__s1;
  char *pcVar11;
  int *piVar12;
  uint uVar13;
  long in_FS_OFFSET;
  byte bStack120;
  char *pcStack104;
  char *pcStack96;
  char acStack88 [24];
  long lStack64;
  
  lStack64 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_1 == 0) || (__s1 = (char *)FontEncFromXLFD(), __s1 == (char *)0x0)) {
    __s1 = "iso8859-1";
    iVar4 = strcasecmp("iso8859-1","microsoft-symbol");
    pcVar11 = __s1;
    if (iVar4 != 0) goto LAB_00110860;
LAB_0011094a:
    iVar4 = FT_Get_BDF_Charset_ID(param_4,&pcStack104,&pcStack96);
    if (iVar4 != 0) {
LAB_00110964:
      iVar4 = FT_Select_Charmap(param_4,0x41444243);
      if (iVar4 == 0) {
LAB_001108da:
        *param_5 = 0;
        uVar8 = *(undefined8 *)(param_4 + 0xa8);
        param_5[4] = 0;
        *(undefined8 *)(param_5 + 6) = 0;
        *(undefined8 *)(param_5 + 2) = uVar8;
        uVar8 = 0x55;
        goto LAB_00110900;
      }
      bStack120 = 1;
      uVar13 = 1;
LAB_00110b4e:
      lVar9 = FontEncFind(__s1);
      pcVar11 = __s1;
      if ((lVar9 == 0) && (bStack120 != 0)) {
        lVar9 = FontEncFind("microsoft-symbol");
      }
      goto joined_r0x001109c1;
    }
    uVar13 = 1;
LAB_001108a3:
    sVar6 = strlen(pcStack104);
    sVar7 = strlen(pcStack96);
    if (0x12 < sVar7 + sVar6) goto LAB_001108da;
    __memcpy_chk(acStack88,pcStack104,sVar6);
    acStack88[sVar6] = '-';
    __strcpy_chk(acStack88 + sVar6 + 1,pcStack96,0x14);
    ErrorF("%s %s\n",acStack88,__s1);
    iVar4 = strcasecmp(acStack88,"iso10646-1");
    if (iVar4 == 0) {
      bStack120 = (byte)uVar13 & 1;
      goto LAB_00110b4e;
    }
    iVar4 = strcasecmp(acStack88,__s1);
    if (iVar4 == 0) goto LAB_001108da;
  }
  else {
    iVar4 = strcasecmp(__s1,"microsoft-symbol");
    if (iVar4 == 0) goto LAB_0011094a;
    cVar2 = *__s1;
    pcVar11 = __s1;
    while (cVar2 != '-') {
      if (cVar2 == '\0') {
        uVar13 = FT_Get_BDF_Charset_ID(param_4,&pcStack104,&pcStack96);
        __s1 = pcVar11;
        if (uVar13 == 0) goto LAB_001108a3;
        goto LAB_001109ad;
      }
LAB_00110860:
      __s1 = __s1 + 1;
      cVar2 = *__s1;
    }
    iVar4 = strcasecmp(__s1 + 1,"fontspecific");
    iVar5 = FT_Get_BDF_Charset_ID(param_4,&pcStack104,&pcStack96);
    if (iVar5 == 0) {
      uVar13 = (uint)(iVar4 == 0);
      __s1 = pcVar11;
      goto LAB_001108a3;
    }
    __s1 = pcVar11;
    if (iVar4 == 0) goto LAB_00110964;
LAB_001109ad:
    uVar13 = 0;
    lVar9 = FontEncFind(pcVar11);
joined_r0x001109c1:
    if (lVar9 == 0) {
      ErrorF("FreeType: couldn\'t find encoding \'%s\' for \'%s\'\n",pcVar11,param_3);
      uVar8 = 0x53;
      goto LAB_00110900;
    }
    iVar4 = FT_Has_PS_Glyph_Names(param_4);
    piVar12 = *(int **)(lVar9 + 0x18);
    if (iVar4 == 0) {
      if (piVar12 != (int *)0x0) {
        iVar4 = *piVar12;
LAB_001109e8:
        iVar5 = *(int *)(param_4 + 0x48);
        do {
          if (iVar4 == 1) {
            if (0 < iVar5) {
              lVar9 = **(long **)(param_4 + 0x50);
              if (*(int *)(lVar9 + 0xc) == 0x10003) {
LAB_00110a51:
                *param_5 = 0;
                *(long *)(param_5 + 2) = lVar9;
                if ((uVar13 == 0) || (lVar9 = FT_Get_Sfnt_Table(param_4,2), lVar9 == 0)) {
                  param_5[4] = 0;
                }
                else {
                  param_5[4] = (uint)*(ushort *)(lVar9 + 0x56) - 0x20;
                }
                *(int **)(param_5 + 6) = piVar12;
                uVar8 = 0x55;
                goto LAB_00110900;
              }
              plVar10 = *(long **)(param_4 + 0x50) + 1;
              plVar1 = plVar10 + (ulong)(iVar5 - 1);
              while (plVar1 != plVar10) {
                lVar9 = *plVar10;
                plVar10 = plVar10 + 1;
                if (*(int *)(lVar9 + 0xc) == 0x10003) goto LAB_00110a51;
              }
            }
          }
          else {
            if ((iVar4 == 2) && (0 < iVar5)) {
              plVar10 = *(long **)(param_4 + 0x50);
              plVar1 = plVar10 + (ulong)(iVar5 - 1) + 1;
              do {
                lVar9 = *plVar10;
                if ((piVar12[1] == (uint)*(ushort *)(lVar9 + 0xc)) &&
                   (piVar12[2] == (uint)*(ushort *)(lVar9 + 0xe))) goto LAB_00110a51;
                plVar10 = plVar10 + 1;
              } while (plVar1 != plVar10);
            }
          }
          piVar12 = *(int **)(piVar12 + 10);
          if (piVar12 == (int *)0x0) break;
          iVar4 = *piVar12;
        } while( true );
      }
    }
    else {
      if (piVar12 != (int *)0x0) {
        iVar4 = *piVar12;
        piVar3 = piVar12;
        iVar5 = iVar4;
        while (iVar5 != 3) {
          piVar3 = *(int **)(piVar3 + 10);
          if (piVar3 == (int *)0x0) goto LAB_001109e8;
          iVar5 = *piVar3;
        }
        *param_5 = 1;
        param_5[4] = 0;
        uVar8 = 0x55;
        *(int **)(param_5 + 6) = piVar3;
        goto LAB_00110900;
      }
    }
  }
  uVar8 = 0x58;
LAB_00110900:
  if (lStack64 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar8;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int ungetc(int __c,FILE *__stream)

{
  int iVar1;
  
  iVar1 = ungetc(__c,__stream);
  return iVar1;
}



void BitmapOpenScalable(void)

{
                    // WARNING: Treating indirect jump as call
  BitmapOpenScalable();
  return;
}



void SPropRecValList_add_by_font_cap(void)

{
                    // WARNING: Treating indirect jump as call
  SPropRecValList_add_by_font_cap();
  return;
}



void BuiltinFileClose(void)

{
                    // WARNING: Treating indirect jump as call
  BuiltinFileClose();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int __fxstat(int __ver,int __fildes,stat *__stat_buf)

{
  int iVar1;
  
  iVar1 = __fxstat(__ver,__fildes,__stat_buf);
  return iVar1;
}



void MakeAtom(void)

{
                    // WARNING: Treating indirect jump as call
  MakeAtom();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int sscanf(char *__s,char *__format,...)

{
  int iVar1;
  
  iVar1 = sscanf(__s,__format);
  return iVar1;
}



void _fs_io_reinit(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_io_reinit();
  return;
}



void GetTimeInMillis(void)

{
                    // WARNING: Treating indirect jump as call
  GetTimeInMillis();
  return;
}



void bitmapComputeFontInkBounds(void)

{
                    // WARNING: Treating indirect jump as call
  bitmapComputeFontInkBounds();
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8 FontFilePriorityRegisterRenderer(char **param_1,uint param_2)

{
  char *__s2;
  long lVar1;
  int iVar2;
  char **ppcVar3;
  undefined8 uVar4;
  size_t __size;
  int iVar5;
  char **__ptr;
  int iVar6;
  
  __ptr = DAT_0033cb78;
  iVar5 = DAT_0033cb70;
  lVar1 = serverGeneration;
  if (_DAT_0033cb60 == serverGeneration) {
    if (DAT_0033cb70 < 1) {
      __size = 0x10;
      iVar5 = 1;
      iVar2 = 0;
    }
    else {
      __s2 = *param_1;
      ppcVar3 = DAT_0033cb78;
      iVar2 = 0;
      do {
        iVar6 = iVar2;
        iVar2 = strcasecmp(*(char **)*ppcVar3,__s2);
        if (iVar2 == 0) {
          if ((int)param_2 <= *(int *)(ppcVar3 + 1)) {
            if (*(uint *)(ppcVar3 + 1) != param_2) {
              return 1;
            }
            if (lVar1 != 1) {
              return 1;
            }
            ErrorF("Warning: font renderer for \"%s\" already registered at priority %d\n",__s2,
                   (ulong)param_2);
            return 1;
          }
          if (iVar6 < iVar5) goto LAB_0010fca9;
          iVar5 = iVar6 + 1;
          __size = (long)iVar5 << 4;
          iVar2 = iVar6;
          goto LAB_0010fc63;
        }
        iVar2 = iVar6 + 1;
        ppcVar3 = ppcVar3 + 2;
      } while (iVar5 != iVar2);
      iVar5 = iVar6 + 2;
      __size = (long)iVar5 << 4;
    }
  }
  else {
    _DAT_0033cb60 = serverGeneration;
    DAT_0033cb70 = 0;
    if (DAT_0033cb78 != (char **)0x0) {
      free(DAT_0033cb78);
    }
    DAT_0033cb78 = (char **)0x0;
    __ptr = (char **)0x0;
    __size = 0x10;
    iVar5 = 1;
    iVar2 = 0;
  }
LAB_0010fc63:
  uVar4 = 0;
  __ptr = (char **)realloc(__ptr,__size);
  if (__ptr != (char **)0x0) {
    ppcVar3 = __ptr + (long)iVar2 * 2;
    iVar6 = iVar2;
    DAT_0033cb70 = iVar5;
    DAT_0033cb78 = __ptr;
LAB_0010fca9:
    uVar4 = 1;
    *(int *)(param_1 + 6) = iVar6;
    *(char ***)ppcVar3 = param_1;
    *(uint *)(ppcVar3 + 1) = param_2;
  }
  return uVar4;
}



undefined8
FontFileAddScaledInstance(long param_1,undefined *param_2,long param_3,undefined8 param_4)

{
  undefined4 *puVar1;
  undefined auVar2 [16];
  uint uVar3;
  long lVar4;
  undefined8 uVar5;
  void *__ptr;
  ulong uVar6;
  
  lVar4 = *(long *)(param_1 + 0x28);
  uVar3 = *(uint *)(lVar4 + 0x78);
  __ptr = *(void **)(lVar4 + 0x80);
  uVar6 = (ulong)uVar3;
  if (uVar3 == *(uint *)(lVar4 + 0x7c)) {
    __ptr = realloc(__ptr,(long)(int)(uVar3 + 4) * 0x88);
    if (__ptr == (void *)0x0) {
      return 0;
    }
    *(int *)(lVar4 + 0x7c) = uVar3 + 4;
    *(void **)(lVar4 + 0x80) = __ptr;
    uVar6 = SEXT48(*(int *)(lVar4 + 0x78));
  }
  *(int *)(lVar4 + 0x78) = (int)uVar6 + 1;
  puVar1 = (undefined4 *)((long)__ptr + uVar6 * 0x88);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)param_2;
  *puVar1 = SUB164(auVar2,0);
  puVar1[1] = SUB164(auVar2 >> 0x20,0);
  puVar1[2] = SUB164(auVar2 >> 0x40,0);
  puVar1[3] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x10);
  puVar1[4] = SUB164(auVar2,0);
  puVar1[5] = SUB164(auVar2 >> 0x20,0);
  puVar1[6] = SUB164(auVar2 >> 0x40,0);
  puVar1[7] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x20);
  puVar1[8] = SUB164(auVar2,0);
  puVar1[9] = SUB164(auVar2 >> 0x20,0);
  puVar1[10] = SUB164(auVar2 >> 0x40,0);
  puVar1[0xb] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x30);
  puVar1[0xc] = SUB164(auVar2,0);
  puVar1[0xd] = SUB164(auVar2 >> 0x20,0);
  puVar1[0xe] = SUB164(auVar2 >> 0x40,0);
  puVar1[0xf] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x40);
  puVar1[0x10] = SUB164(auVar2,0);
  puVar1[0x11] = SUB164(auVar2 >> 0x20,0);
  puVar1[0x12] = SUB164(auVar2 >> 0x40,0);
  puVar1[0x13] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x50);
  puVar1[0x14] = SUB164(auVar2,0);
  puVar1[0x15] = SUB164(auVar2 >> 0x20,0);
  puVar1[0x16] = SUB164(auVar2 >> 0x40,0);
  puVar1[0x17] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x60);
  puVar1[0x18] = SUB164(auVar2,0);
  puVar1[0x19] = SUB164(auVar2 >> 0x20,0);
  puVar1[0x1a] = SUB164(auVar2 >> 0x40,0);
  puVar1[0x1b] = SUB164(auVar2 >> 0x60,0);
  uVar5 = *(undefined8 *)(param_2 + 0x70);
  *(long *)(puVar1 + 0x20) = param_3;
  *(undefined8 *)(puVar1 + 0x1c) = uVar5;
  *(undefined8 *)(puVar1 + 0x1e) = param_4;
  if (param_3 != 0) {
    *(long *)(param_3 + 0xa0) = param_1;
  }
  return 1;
}



void FontFileClose(undefined8 param_1)

{
  BufFileClose(param_1,1);
  return;
}



void __strncpy_chk(void)

{
  __strncpy_chk();
  return;
}



void _fs_clean_aborted_loadglyphs(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_clean_aborted_loadglyphs();
  return;
}



void bdfGetPropertyValue(void)

{
                    // WARNING: Treating indirect jump as call
  bdfGetPropertyValue();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * realloc(void *__ptr,size_t __size)

{
  void *pvVar1;
  
  pvVar1 = realloc(__ptr,__size);
  return pvVar1;
}



void __strcpy_chk(void)

{
  __strcpy_chk();
  return;
}



void _fs_mark_block(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_mark_block();
  return;
}



void FontFileFreeDir(void *param_1)

{
  FontFileFreeTable((long)param_1 + 0x18);
  FontFileFreeTable((long)param_1 + 0x30);
  free(param_1);
  return;
}



void __printf_chk(void)

{
  __printf_chk();
  return;
}



undefined8 BufFilePushZIP(undefined8 param_1)

{
  byte **ppbVar1;
  byte *pbVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  undefined8 *__ptr;
  undefined8 uVar7;
  ulong uVar8;
  
  __ptr = (undefined8 *)malloc(0x4080);
  if (__ptr == (undefined8 *)0x0) {
    return 0;
  }
  __ptr[8] = 0;
  __ptr[9] = 0;
  __ptr[10] = 0;
  __ptr[0x80f] = param_1;
  *__ptr = 0;
  __ptr[3] = 0;
  *(undefined4 *)(__ptr + 4) = 0;
  *(undefined4 *)(__ptr + 1) = 0;
  iVar3 = inflateInit2_(__ptr,0xfffffff1,"1.2.11",0x70);
  *(int *)(__ptr + 0xe) = iVar3;
  if (iVar3 == 0) {
    ppbVar1 = (byte **)__ptr[0x80f];
    *(undefined4 *)(__ptr + 4) = 0x2000;
    *(undefined4 *)(__ptr + 1) = 0;
    __ptr[3] = (long)__ptr + 0x2074;
    iVar3 = *(int *)(ppbVar1 + 1);
    *(int *)(ppbVar1 + 1) = iVar3 + -1;
    if (iVar3 == 0) {
      iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
      *(int *)((long)ppbVar1 + 0xc) = iVar3;
      if ((iVar3 == -1) || (iVar3 != 0x1f)) goto LAB_0010f7c6;
    }
    else {
      pbVar2 = *ppbVar1;
      *ppbVar1 = pbVar2 + 1;
      if (*pbVar2 != 0x1f) goto LAB_0010f7c6;
    }
    iVar3 = *(int *)(ppbVar1 + 1);
    *(int *)(ppbVar1 + 1) = iVar3 + -1;
    if (iVar3 == 0) {
      uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
      *(uint *)((long)ppbVar1 + 0xc) = uVar4;
      if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
    }
    else {
      pbVar2 = *ppbVar1;
      *ppbVar1 = pbVar2 + 1;
      uVar4 = (uint)*pbVar2;
    }
    if (uVar4 == 0x8b) {
      iVar3 = *(int *)(ppbVar1 + 1);
      *(int *)(ppbVar1 + 1) = iVar3 + -1;
      if (iVar3 == 0) {
        uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
        *(uint *)((long)ppbVar1 + 0xc) = uVar4;
        if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
      }
      else {
        pbVar2 = *ppbVar1;
        *ppbVar1 = pbVar2 + 1;
        uVar4 = (uint)*pbVar2;
      }
      if (uVar4 == 8) {
        iVar3 = *(int *)(ppbVar1 + 1);
        *(int *)(ppbVar1 + 1) = iVar3 + -1;
        if (iVar3 == 0) {
          uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
          uVar8 = (ulong)uVar4;
          *(uint *)((long)ppbVar1 + 0xc) = uVar4;
          if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
        }
        else {
          pbVar2 = *ppbVar1;
          *ppbVar1 = pbVar2 + 1;
          uVar8 = (ulong)*pbVar2;
        }
        if ((uVar8 & 0xe0) == 0) {
          iVar3 = *(int *)(ppbVar1 + 1);
          iVar5 = iVar3 + -1;
          *(int *)(ppbVar1 + 1) = iVar5;
          if (iVar3 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
            iVar5 = *(int *)(ppbVar1 + 1);
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          iVar3 = iVar5 + -1;
          *(int *)(ppbVar1 + 1) = iVar3;
          if (iVar5 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
            iVar3 = *(int *)(ppbVar1 + 1);
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          iVar5 = iVar3 + -1;
          *(int *)(ppbVar1 + 1) = iVar5;
          if (iVar3 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
            iVar5 = *(int *)(ppbVar1 + 1);
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          *(int *)(ppbVar1 + 1) = iVar5 + -1;
          if (iVar5 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          iVar3 = *(int *)(ppbVar1 + 1);
          iVar5 = iVar3 + -1;
          *(int *)(ppbVar1 + 1) = iVar5;
          if (iVar3 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
            iVar5 = *(int *)(ppbVar1 + 1);
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          *(int *)(ppbVar1 + 1) = iVar5 + -1;
          if (iVar5 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          if ((uVar8 & 4) != 0) {
            iVar3 = *(int *)(ppbVar1 + 1);
            iVar5 = iVar3 + -1;
            *(int *)(ppbVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
              *(uint *)((long)ppbVar1 + 0xc) = uVar4;
              if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
              iVar5 = *(int *)(ppbVar1 + 1);
            }
            else {
              pbVar2 = *ppbVar1;
              *ppbVar1 = pbVar2 + 1;
              uVar4 = (uint)*pbVar2;
            }
            *(int *)(ppbVar1 + 1) = iVar5 + -1;
            if (iVar5 == 0) {
              uVar6 = (*(code *)ppbVar1[0x402])(ppbVar1);
              *(uint *)((long)ppbVar1 + 0xc) = uVar6;
              if (uVar6 == 0xffffffff) goto LAB_0010f7c6;
            }
            else {
              pbVar2 = *ppbVar1;
              *ppbVar1 = pbVar2 + 1;
              uVar6 = (uint)*pbVar2;
            }
            iVar3 = uVar4 + uVar6 * 0x100;
            while (-1 < iVar3) {
              iVar5 = *(int *)(ppbVar1 + 1);
              *(int *)(ppbVar1 + 1) = iVar5 + -1;
              if (iVar5 == 0) {
                iVar5 = (*(code *)ppbVar1[0x402])(ppbVar1);
                *(int *)((long)ppbVar1 + 0xc) = iVar5;
                if (iVar5 == -1) goto LAB_0010f7c6;
              }
              else {
                *ppbVar1 = *ppbVar1 + 1;
              }
              iVar3 = iVar3 + -1;
            }
          }
          if ((uVar8 & 8) != 0) {
            do {
              iVar3 = *(int *)(ppbVar1 + 1);
              *(int *)(ppbVar1 + 1) = iVar3 + -1;
              if (iVar3 == 0) {
                uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
                *(uint *)((long)ppbVar1 + 0xc) = uVar4;
                if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
              }
              else {
                pbVar2 = *ppbVar1;
                *ppbVar1 = pbVar2 + 1;
                uVar4 = (uint)*pbVar2;
              }
            } while (uVar4 != 0);
          }
          if ((uVar8 & 0x10) != 0) {
            do {
              iVar3 = *(int *)(ppbVar1 + 1);
              *(int *)(ppbVar1 + 1) = iVar3 + -1;
              if (iVar3 == 0) {
                uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
                *(uint *)((long)ppbVar1 + 0xc) = uVar4;
                if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
              }
              else {
                pbVar2 = *ppbVar1;
                *ppbVar1 = pbVar2 + 1;
                uVar4 = (uint)*pbVar2;
              }
            } while (uVar4 != 0);
          }
          if ((uVar8 & 2) != 0) {
            iVar3 = *(int *)(ppbVar1 + 1);
            iVar5 = iVar3 + -1;
            *(int *)(ppbVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
              *(int *)((long)ppbVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_0010f7c6;
              iVar5 = *(int *)(ppbVar1 + 1);
            }
            else {
              *ppbVar1 = *ppbVar1 + 1;
            }
            *(int *)(ppbVar1 + 1) = iVar5 + -1;
            if (iVar5 == 0) {
              iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
              *(int *)((long)ppbVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_0010f7c6;
            }
            else {
              *ppbVar1 = *ppbVar1 + 1;
            }
          }
          uVar7 = BufFileCreate(__ptr,&LAB_0010f560,0,&LAB_0010f4d0,&LAB_0010f520);
          return uVar7;
        }
      }
    }
  }
LAB_0010f7c6:
  free(__ptr);
  return 0;
}



void FontFileUnregisterBitmapSource(long param_1)

{
  long *plVar1;
  long lVar2;
  ulong uVar3;
  uint uVar4;
  ulong uVar5;
  
  if (0 < FontFileBitmapSources._12_4_) {
    if (param_1 == *FontFileBitmapSources._0_8_) {
      uVar5 = 0;
    }
    else {
      uVar3 = 1;
      do {
        uVar5 = uVar3 & 0xffffffff;
        if ((ulong)(FontFileBitmapSources._12_4_ - 1) + 1 == uVar3) {
          return;
        }
        plVar1 = FontFileBitmapSources._0_8_ + uVar3;
        uVar3 = uVar3 + 1;
      } while (*plVar1 != param_1);
    }
    FontFileBitmapSources._12_4_ = FontFileBitmapSources._12_4_ + -1;
    if (FontFileBitmapSources._12_4_ == 0) {
      FontFileBitmapSources._8_4_ = 0;
      free(FontFileBitmapSources._0_8_);
      FontFileBitmapSources._0_8_ = (long *)0x0;
      return;
    }
    if ((int)uVar5 < FontFileBitmapSources._12_4_) {
      lVar2 = (long)(int)uVar5 * 8;
      do {
        uVar4 = (int)uVar5 + 1;
        uVar5 = (ulong)uVar4;
        *(undefined8 *)((long)FontFileBitmapSources._0_8_ + lVar2) =
             *(undefined8 *)((long)FontFileBitmapSources._0_8_ + lVar2 + 8);
        lVar2 = lVar2 + 8;
      } while ((int)uVar4 < FontFileBitmapSources._12_4_);
      return;
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ssize_t readv(int __fd,iovec *__iovec,int __count)

{
  ssize_t sVar1;
  
  sVar1 = readv(__fd,__iovec,__count);
  return sVar1;
}



void RepadBitmap(void)

{
                    // WARNING: Treating indirect jump as call
  RepadBitmap();
  return;
}



void SPropRecValList_search_record(void)

{
                    // WARNING: Treating indirect jump as call
  SPropRecValList_search_record();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * memmove(void *__dest,void *__src,size_t __n)

{
  void *pvVar1;
  
  pvVar1 = memmove(__dest,__src,__n);
  return pvVar1;
}



void FontParseXLFDName(void)

{
                    // WARNING: Treating indirect jump as call
  FontParseXLFDName();
  return;
}



void client_auth_generation(void)

{
                    // WARNING: Treating indirect jump as call
  client_auth_generation();
  return;
}



void _FontTransRead(void)

{
                    // WARNING: Treating indirect jump as call
  _FontTransRead();
  return;
}



void _FontTransOpenCOTSClient(void)

{
                    // WARNING: Treating indirect jump as call
  _FontTransOpenCOTSClient();
  return;
}



void FT_Render_Glyph(void)

{
  FT_Render_Glyph();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int open(char *__file,int __oflag,...)

{
  int iVar1;
  
  iVar1 = open(__file,__oflag);
  return iVar1;
}



void bdfIsInteger(void)

{
                    // WARNING: Treating indirect jump as call
  bdfIsInteger();
  return;
}



void _FontTransSetOption(void)

{
                    // WARNING: Treating indirect jump as call
  _FontTransSetOption();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

FILE * fopen(char *__filename,char *__modes)

{
  FILE *pFVar1;
  
  pFVar1 = fopen(__filename,__modes);
  return pFVar1;
}



void inflateInit2_(void)

{
  inflateInit2_();
  return;
}



void BuiltinRegisterFpeFunctions(void)

{
                    // WARNING: Treating indirect jump as call
  BuiltinRegisterFpeFunctions();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

long sysconf(int __name)

{
  long lVar1;
  
  lVar1 = sysconf(__name);
  return lVar1;
}



void FT_Set_Transform(void)

{
  FT_Set_Transform();
  return;
}



void FT_Vector_Transform(void)

{
  FT_Vector_Transform();
  return;
}



void MakeFontNamesRecord(void)

{
                    // WARNING: Treating indirect jump as call
  MakeFontNamesRecord();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int getsockname(int __fd,sockaddr *__addr,socklen_t *__len)

{
  int iVar1;
  
  iVar1 = getsockname(__fd,__addr,__len);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

double sin(double __x)

{
  double dVar1;
  
  dVar1 = sin(__x);
  return dVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

double floor(double __x)

{
  double dVar1;
  
  dVar1 = floor(__x);
  return dVar1;
}



void init_fs_handlers(void)

{
                    // WARNING: Treating indirect jump as call
  init_fs_handlers();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strcat(char *__dest,char *__src)

{
  char *pcVar1;
  
  pcVar1 = strcat(__dest,__src);
  return pcVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int creat(char *__file,__mode_t __mode)

{
  int iVar1;
  
  iVar1 = creat(__file,__mode);
  return iVar1;
}



void ClientSignal(void)

{
                    // WARNING: Treating indirect jump as call
  ClientSignal();
  return;
}



void remove_fs_handlers(void)

{
                    // WARNING: Treating indirect jump as call
  remove_fs_handlers();
  return;
}



ulong BufFileRead(long *param_1,undefined *param_2,int param_3)

{
  undefined *puVar1;
  undefined uVar2;
  int iVar3;
  
  if (param_3 != 0) {
    iVar3 = param_3 + -1;
    do {
      _uVar2 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = _uVar2 + -1;
      if (_uVar2 == 0) {
        _uVar2 = (*(code *)param_1[0x402])(param_1);
        uVar2 = (undefined)_uVar2;
        *(int *)((long)param_1 + 0xc) = _uVar2;
        if (_uVar2 == -1) goto LAB_001099d5;
      }
      else {
        puVar1 = (undefined *)*param_1;
        *(undefined **)param_1 = puVar1 + 1;
        uVar2 = *puVar1;
      }
      iVar3 = iVar3 + -1;
      *param_2 = uVar2;
      param_2 = param_2 + 1;
    } while (iVar3 != -1);
  }
  iVar3 = -1;
LAB_001099d5:
  return (ulong)((param_3 - iVar3) - 1);
}



ulong FontFileCountDashes(char *param_1,uint param_2)

{
  ulong uVar1;
  char *pcVar2;
  char *pcVar3;
  
  uVar1 = 0;
  pcVar2 = param_1 + param_2;
  do {
    pcVar3 = param_1;
    if (param_1 == pcVar2) {
      return uVar1;
    }
    while (param_1 = pcVar3 + 1, *pcVar3 == '-') {
      uVar1 = (ulong)((int)uVar1 + 1);
      pcVar3 = param_1;
      if (param_1 == pcVar2) {
        return uVar1;
      }
    }
  } while( true );
}



// WARNING: Unknown calling convention yet parameter storage is locked

int connect(int __fd,sockaddr *__addr,socklen_t __len)

{
  int iVar1;
  
  iVar1 = connect(__fd,__addr,__len);
  return iVar1;
}



void bdfReadCharacters(void)

{
                    // WARNING: Treating indirect jump as call
  bdfReadCharacters();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

size_t fwrite(void *__ptr,size_t __size,size_t __n,FILE *__s)

{
  size_t sVar1;
  
  sVar1 = fwrite(__ptr,__size,__n,__s);
  return sVar1;
}



void __fprintf_chk(void)

{
  __fprintf_chk();
  return;
}



undefined8 FontFileAddFontFile(long param_1,char *param_2,char *param_3)

{
  uint *puVar1;
  bool bVar2;
  uint uVar3;
  int iVar4;
  long lVar5;
  size_t sVar6;
  char *pcVar7;
  ushort *puVar8;
  char *__s;
  long lVar9;
  uint uVar10;
  ulong uVar11;
  byte *__s_00;
  byte *pbVar12;
  undefined8 *puVar13;
  undefined8 *__ptr;
  undefined8 uVar14;
  undefined8 *puVar15;
  long in_FS_OFFSET;
  bool bVar16;
  bool bVar17;
  byte bVar18;
  double dVar19;
  int iStack476;
  uint uStack472;
  undefined auStack468 [12];
  undefined auStack456 [16];
  undefined auStack440 [16];
  undefined auStack424 [16];
  double dStack408;
  undefined8 uStack400;
  uint uStack392;
  uint uStack388;
  undefined8 uStack384;
  undefined auStack376 [16];
  undefined8 uStack360;
  undefined4 uStack344;
  undefined8 uStack340;
  uint uStack264;
  uint uStack260;
  undefined8 uStack232;
  char *pcStack216;
  short sStack208;
  short sStack206;
  undefined4 uStack200;
  long lStack192;
  char *pcStack184;
  undefined8 *puStack176;
  long lStack64;
  
  bVar18 = 0;
  lStack64 = *(long *)(in_FS_OFFSET + 0x28);
  lVar5 = FontFileMatchRenderer(param_3);
  if (lVar5 != 0) {
    sVar6 = strlen(param_2);
    sStack208 = (short)sVar6;
    if (sStack208 < 0x401) {
      uVar11 = (ulong)(uint)(int)sStack208;
    }
    else {
      uVar11 = 0x400;
      sStack208 = 0x400;
    }
    pcStack216 = param_2;
    FUN_0010cce0(param_2,param_2,uVar11);
    sStack206 = FontFileCountDashes(pcStack216,(ulong)(uint)(int)sStack208);
    pcStack216[sStack208] = '\0';
    if ((((sStack206 == 0xe) &&
         (iVar4 = FontParseXLFDName(pcStack216,&uStack472,0), uVar3 = uStack472, iVar4 != 0)) &&
        ((uStack472 & 3) != 2)) && (((uStack472 & 0xc) != 8 && ((uStack472 & 0x40) == 0)))) {
      if ((((uStack472 & 3) != 0) &&
          (((uStack472 & 0xc) != 0 && (__s = *(char **)(param_1 + 0x48), __s != (char *)0x0)))) &&
         (*__s == ':')) {
        bVar2 = true;
        pcVar7 = __s;
        while( true ) {
          __s_00 = (byte *)(pcVar7 + 1);
          pcVar7 = strchr((char *)__s_00,0x3a);
          if (pcVar7 == (char *)0x0) break;
          uVar10 = (int)pcVar7 - (int)__s_00;
          bVar16 = uVar10 < 8;
          bVar17 = uVar10 == 8;
          if (bVar17) {
            lVar9 = 8;
            pbVar12 = (byte *)"unscaled";
            do {
              if (lVar9 == 0) break;
              lVar9 = lVar9 + -1;
              bVar16 = *__s_00 < *pbVar12;
              bVar17 = *__s_00 == *pbVar12;
              __s_00 = __s_00 + (ulong)bVar18 * -2 + 1;
              pbVar12 = pbVar12 + (ulong)bVar18 * -2 + 1;
            } while (bVar17);
            if ((!bVar16 && !bVar17) == bVar16) {
              bVar2 = false;
            }
          }
        }
        sVar6 = strlen(__s);
        if (((((int)__s + (int)sVar6) - (int)__s_00 == 8) &&
            (iVar4 = strncmp((char *)__s_00,"unscaled",8), iVar4 == 0)) || (!bVar2))
        goto LAB_0010c192;
      }
      if ((uVar3 & 0xf) != 0) {
        uVar14 = 1;
        goto LAB_0010c195;
      }
      puVar15 = (undefined8 *)0x0;
LAB_0010c34b:
      __s = strdup(param_3);
      pcStack184 = __s;
      if (__s != (char *)0x0) {
        __ptr = (undefined8 *)malloc(0x90);
        if (__ptr == (undefined8 *)0x0) {
          uVar14 = 0;
          free(__s);
          goto LAB_0010c21b;
        }
        lVar9 = 0xf;
        puVar13 = __ptr;
        while (lVar9 != 0) {
          lVar9 = lVar9 + -1;
          *puVar13 = 0;
          puVar13 = puVar13 + (ulong)bVar18 * 0x1ffffffffffffffe + 1;
        }
        if (((uStack472 & 0xc) == 4) &&
           (dVar19 = dStack408 * 10.00000000, iVar4 = GetDefaultPointSize(dVar19),
           (int)dVar19 == iVar4)) {
          *(uint *)__ptr = uStack472;
          *(undefined4 *)((long)__ptr + 4) = SUB124(auStack468,0);
          *(int *)(__ptr + 1) = SUB124(auStack468 >> 0x20,0);
          *(undefined4 *)((long)__ptr + 0xc) = SUB124(auStack468 >> 0x40,0);
          __ptr[0xe] = uStack360;
          *(int *)(__ptr + 2) = SUB164(auStack456,0);
          *(undefined4 *)((long)__ptr + 0x14) = SUB164(auStack456 >> 0x20,0);
          *(int *)(__ptr + 3) = SUB164(auStack456 >> 0x40,0);
          *(undefined4 *)((long)__ptr + 0x1c) = SUB164(auStack456 >> 0x60,0);
          *(int *)(__ptr + 4) = SUB164(auStack440,0);
          *(undefined4 *)((long)__ptr + 0x24) = SUB164(auStack440 >> 0x20,0);
          *(int *)(__ptr + 5) = SUB164(auStack440 >> 0x40,0);
          *(undefined4 *)((long)__ptr + 0x2c) = SUB164(auStack440 >> 0x60,0);
          *(int *)(__ptr + 6) = SUB164(auStack424,0);
          *(undefined4 *)((long)__ptr + 0x34) = SUB164(auStack424 >> 0x20,0);
          *(int *)(__ptr + 7) = SUB164(auStack424 >> 0x40,0);
          *(undefined4 *)((long)__ptr + 0x3c) = SUB164(auStack424 >> 0x60,0);
          *(int *)(__ptr + 8) = SUB84(dStack408,0);
          *(undefined4 *)((long)__ptr + 0x44) = (int)((ulong)dStack408 >> 0x20);
          *(int *)(__ptr + 9) = (int)uStack400;
          *(undefined4 *)((long)__ptr + 0x4c) = (int)((ulong)uStack400 >> 0x20);
          *(uint *)(__ptr + 10) = uStack392;
          *(uint *)((long)__ptr + 0x54) = uStack388;
          *(int *)(__ptr + 0xb) = (int)uStack384;
          *(undefined4 *)((long)__ptr + 0x5c) = (int)((ulong)uStack384 >> 0x20);
          *(int *)(__ptr + 0xc) = SUB164(auStack376,0);
          *(undefined4 *)((long)__ptr + 100) = SUB164(auStack376 >> 0x20,0);
          *(int *)(__ptr + 0xd) = SUB164(auStack376 >> 0x40,0);
          *(undefined4 *)((long)__ptr + 0x6c) = SUB164(auStack376 >> 0x60,0);
        }
        else {
          iVar4 = GetDefaultPointSize();
          __ptr[7] = 0;
          __ptr[6] = 0;
          *(undefined4 *)__ptr = 4;
          *(undefined4 *)(__ptr + 0xb) = 0xffffffff;
          dVar19 = (double)iVar4 / 10.00000000;
          *(double *)(__ptr + 8) = dVar19;
          *(double *)(__ptr + 5) = dVar19;
          if (((int)uStack392 < 1) || ((int)uStack388 < 1)) {
            puVar8 = (ushort *)GetClientResolutions(dVar19,&iStack476);
            if ((puVar8 == (ushort *)0x0) || (iStack476 < 1)) {
              __ptr[10] = 0x4b0000004b;
            }
            else {
              *(uint *)(__ptr + 10) = (uint)*puVar8;
              *(uint *)((long)__ptr + 0x54) = (uint)puVar8[1];
            }
          }
          else {
            *(uint *)(__ptr + 10) = uStack392;
            *(uint *)((long)__ptr + 0x54) = uStack388;
          }
          FontFileCompleteXLFD(__ptr,__ptr);
        }
        __ptr[0xf] = 0;
        __ptr[0x10] = 0;
        __ptr[0x11] = 0;
        uStack200 = 0;
        lStack192 = lVar5;
        puStack176 = __ptr;
        lVar5 = FontFileAddEntry(param_1 + 0x18,&pcStack216);
        if (lVar5 == 0) {
          free(__ptr);
          goto LAB_0010c208;
        }
        if (((uStack472 & 0xf) != 0) && (puVar15 != (undefined8 *)0x0)) {
          FontFileCompleteXLFD(&uStack472,&uStack472);
          FontFileAddScaledInstance(lVar5,&uStack472,0,*puVar15);
        }
LAB_0010c1ee:
        uVar14 = 1;
        goto LAB_0010c21b;
      }
    }
    else {
LAB_0010c192:
      uVar14 = 0;
LAB_0010c195:
      uStack200 = 2;
      puStack176 = (undefined8 *)0x0;
      lStack192 = lVar5;
      pcStack184 = strdup(param_3);
      if (pcStack184 != (char *)0x0) {
        puVar15 = (undefined8 *)FontFileAddEntry(param_1 + 0x30,&pcStack216);
        if (puVar15 != (undefined8 *)0x0) {
          if ((int)uVar14 != 0) {
            if ((uStack472 & 0xf) != 0) {
              lVar9 = 0xe;
              uStack340 = 0;
              uStack232 = 0;
              __ptr = (undefined8 *)(&uStack340 + 4);
              while (lVar9 != 0) {
                lVar9 = lVar9 + -1;
                *__ptr = 0;
                __ptr = __ptr + (ulong)bVar18 * 0x1ffffffffffffffe + 1;
              }
              uStack344 = 5;
              uStack264 = uStack392;
              uStack260 = uStack388;
              FontParseXLFDName(pcStack216,&uStack344,3);
              sVar6 = strlen(pcStack216);
              sStack208 = (short)sVar6;
              lVar9 = FontFileFindNameInDir(param_1 + 0x18,&pcStack216);
              if (lVar9 != 0) {
                if (((uStack472 & 0xc) == 4) &&
                   (dVar19 = dStack408 * 10.00000000, iVar4 = GetDefaultPointSize(dVar19),
                   (int)dVar19 == iVar4)) {
                  puVar1 = *(uint **)(lVar9 + 0x28);
                  *puVar1 = uStack472;
                  puVar1[1] = SUB124(auStack468,0);
                  puVar1[2] = SUB124(auStack468 >> 0x20,0);
                  puVar1[3] = SUB124(auStack468 >> 0x40,0);
                  puVar1[4] = SUB164(auStack456,0);
                  puVar1[5] = SUB164(auStack456 >> 0x20,0);
                  puVar1[6] = SUB164(auStack456 >> 0x40,0);
                  puVar1[7] = SUB164(auStack456 >> 0x60,0);
                  puVar1[8] = SUB164(auStack440,0);
                  puVar1[9] = SUB164(auStack440 >> 0x20,0);
                  puVar1[10] = SUB164(auStack440 >> 0x40,0);
                  puVar1[0xb] = SUB164(auStack440 >> 0x60,0);
                  puVar1[0xc] = SUB164(auStack424,0);
                  puVar1[0xd] = SUB164(auStack424 >> 0x20,0);
                  puVar1[0xe] = SUB164(auStack424 >> 0x40,0);
                  puVar1[0xf] = SUB164(auStack424 >> 0x60,0);
                  puVar1[0x10] = SUB84(dStack408,0);
                  puVar1[0x11] = (uint)((ulong)dStack408 >> 0x20);
                  puVar1[0x12] = (uint)uStack400;
                  puVar1[0x13] = (uint)((ulong)uStack400 >> 0x20);
                  puVar1[0x14] = uStack392;
                  puVar1[0x15] = uStack388;
                  puVar1[0x16] = (uint)uStack384;
                  puVar1[0x17] = (uint)((ulong)uStack384 >> 0x20);
                  puVar1[0x18] = SUB164(auStack376,0);
                  puVar1[0x19] = SUB164(auStack376 >> 0x20,0);
                  puVar1[0x1a] = SUB164(auStack376 >> 0x40,0);
                  puVar1[0x1b] = SUB164(auStack376 >> 0x60,0);
                  *(undefined8 *)(puVar1 + 0x1c) = uStack360;
                  free(*(void **)(lVar9 + 0x20));
                  __s = strdup(param_3);
                  *(char **)(lVar9 + 0x20) = __s;
                  if (__s == (char *)0x0) goto LAB_0010c218;
                }
                FontFileCompleteXLFD(&uStack472,&uStack472);
                FontFileAddScaledInstance(lVar9,&uStack472,0,*puVar15);
                goto LAB_0010c21b;
              }
            }
            goto LAB_0010c34b;
          }
          goto LAB_0010c1ee;
        }
LAB_0010c208:
        free(pcStack184);
      }
    }
  }
LAB_0010c218:
  uVar14 = 0;
LAB_0010c21b:
  if (lStack64 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar14;
}



void FT_Has_PS_Glyph_Names(void)

{
  FT_Has_PS_Glyph_Names();
  return;
}



void FontParseRanges(void)

{
                    // WARNING: Treating indirect jump as call
  FontParseRanges();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

double hypot(double __x,double __y)

{
  double dVar1;
  
  dVar1 = hypot(__x,__y);
  return dVar1;
}



void BitmapRegisterFontFileFunctions(void)

{
                    // WARNING: Treating indirect jump as call
  BitmapRegisterFontFileFunctions();
  return;
}



void CheckFSFormat(void)

{
                    // WARNING: Treating indirect jump as call
  CheckFSFormat();
  return;
}



void FT_Set_Char_Size(void)

{
  FT_Set_Char_Size();
  return;
}



void _FontTransGetConnectionNumber(void)

{
                    // WARNING: Treating indirect jump as call
  _FontTransGetConnectionNumber();
  return;
}



void find_old_font(void)

{
                    // WARNING: Treating indirect jump as call
  find_old_font();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int getaddrinfo(char *__name,char *__service,addrinfo *__req,addrinfo **__pai)

{
  int iVar1;
  
  iVar1 = getaddrinfo(__name,__service,__req,__pai);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strdup(char *__s)

{
  char *pcVar1;
  
  pcVar1 = strdup(__s);
  return pcVar1;
}



char ** FontFileMatchRenderer(char *param_1)

{
  char **ppcVar1;
  char **ppcVar2;
  int iVar3;
  size_t sVar4;
  char **ppcVar5;
  
  sVar4 = strlen(param_1);
  if (0 < DAT_0033cb70) {
    ppcVar1 = DAT_0033cb78 + (ulong)(DAT_0033cb70 - 1) * 2 + 2;
    ppcVar5 = DAT_0033cb78;
    do {
      ppcVar2 = (char **)*ppcVar5;
      if ((*(int *)(ppcVar2 + 1) <= (int)sVar4) &&
         (iVar3 = strcasecmp(param_1 + ((long)(int)sVar4 - (long)*(int *)(ppcVar2 + 1)),*ppcVar2),
         iVar3 == 0)) {
        return ppcVar2;
      }
      ppcVar5 = ppcVar5 + 2;
    } while (ppcVar1 != ppcVar5);
  }
  return (char **)0;
}



void pcfReadFontInfo(void)

{
                    // WARNING: Treating indirect jump as call
  pcfReadFontInfo();
  return;
}



void FontFileRemoveScaledInstance(long param_1,long param_2)

{
  undefined auVar1 [16];
  long lVar2;
  void *__ptr;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  int iVar6;
  int iVar7;
  
  lVar2 = *(long *)(param_1 + 0x28);
  if (0 < *(int *)(lVar2 + 0x78)) {
    iVar7 = 0;
    do {
      while( true ) {
        lVar5 = (long)iVar7 * 0x88;
        lVar4 = *(long *)(lVar2 + 0x80) + lVar5;
        if (*(long *)(lVar4 + 0x80) == param_2) break;
        iVar6 = *(int *)(lVar2 + 0x78);
LAB_0010eacd:
        iVar7 = iVar7 + 1;
        if (iVar6 <= iVar7) {
          return;
        }
      }
      __ptr = *(void **)(lVar4 + 0x70);
      if (__ptr != (void *)0x0) {
        free(__ptr);
      }
      iVar6 = *(int *)(lVar2 + 0x78) + -1;
      *(int *)(lVar2 + 0x78) = iVar6;
      if (iVar6 <= iVar7) goto LAB_0010eacd;
      do {
        iVar6 = iVar7;
        lVar5 = lVar5 + 0x88;
        lVar4 = *(long *)(lVar2 + 0x80);
        iVar7 = iVar6 + 1;
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + lVar5);
        uVar3 = *(undefined8 *)(lVar4 + 0x80 + lVar5);
        *(undefined4 *)(lVar4 + -0x88 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x84) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x80) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x7c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x10 + lVar5);
        *(undefined8 *)(lVar4 + -8 + lVar5) = uVar3;
        *(undefined4 *)(lVar4 + -0x78 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x74) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x70) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x6c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x20 + lVar5);
        *(undefined4 *)(lVar4 + -0x68 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -100) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x60) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x5c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x30 + lVar5);
        *(undefined4 *)(lVar4 + -0x58 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x54) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x50) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x4c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x40 + lVar5);
        *(undefined4 *)(lVar4 + -0x48 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x44) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x40) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x3c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x50 + lVar5);
        *(undefined4 *)(lVar4 + -0x38 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x34) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x30) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x2c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x60 + lVar5);
        *(undefined4 *)(lVar4 + -0x28 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x24) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x20) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x1c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x70 + lVar5);
        *(undefined4 *)(lVar4 + -0x18 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x14) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x10) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0xc) = SUB164(auVar1 >> 0x60,0);
      } while (iVar7 < *(int *)(lVar2 + 0x78));
      iVar7 = iVar6 + 2;
    } while (iVar7 < *(int *)(lVar2 + 0x78));
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

double ceil(double __x)

{
  double dVar1;
  
  dVar1 = ceil(__x);
  return dVar1;
}



void BitOrderInvert(void)

{
                    // WARNING: Treating indirect jump as call
  BitOrderInvert();
  return;
}



void FreeTypeRegisterFontFileFunctions(void)

{
  FontFileRegisterRenderer(&PTR_DAT_0033b920);
  FontFileRegisterRenderer(&PTR_DAT_0033b958);
  FontFileRegisterRenderer(&PTR_DAT_0033b990);
  FontFileRegisterRenderer(&PTR_DAT_0033b9c8);
  FontFileRegisterRenderer(&PTR_DAT_0033ba00);
  FontFileRegisterRenderer(&PTR_DAT_0033ba38);
  FontFilePriorityRegisterRenderer(&PTR_DAT_0033b8a0,0xfffffff6);
  FontFilePriorityRegisterRenderer(&PTR_DAT_0033b8d8,0xfffffff6);
  return;
}



void set_font_authorizations(void)

{
                    // WARNING: Treating indirect jump as call
  set_font_authorizations();
  return;
}



void bdfSpecialProperty(void)

{
                    // WARNING: Treating indirect jump as call
  bdfSpecialProperty();
  return;
}



void fs_alloc_glyphs(void)

{
                    // WARNING: Treating indirect jump as call
  fs_alloc_glyphs();
  return;
}



void FontFileRegisterFpeFunctions(void)

{
  undefined8 uVar1;
  
  BitmapRegisterFontFileFunctions();
  FreeTypeRegisterFontFileFunctions();
  uVar1 = 0x10fbe3;
  FontFileRegisterLocalFpeFunctions();
  RegisterFPEFunctions
            (&LAB_00110080,FUN_00110590,FUN_00110710,&LAB_0010fe30,&LAB_00110660,&LAB_00110070,
             &LAB_001105e0,&LAB_00110580,&LAB_0010ffc0,0,0,0,&LAB_00110570,&LAB_0010fe40,
             FontFileEmptyBitmapSource,uVar1);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strstr(char *__haystack,char *__needle)

{
  char *pcVar1;
  
  pcVar1 = strstr(__haystack,__needle);
  return pcVar1;
}



void bdfWarning(void)

{
                    // WARNING: Treating indirect jump as call
  bdfWarning();
  return;
}



void _fs_convert_props(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_convert_props();
  return;
}



void FT_Get_Sfnt_Name(void)

{
  FT_Get_Sfnt_Name();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int rand(void)

{
  int iVar1;
  
  iVar1 = rand();
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

__int32_t ** __ctype_tolower_loc(void)

{
  __int32_t **pp_Var1;
  
  pp_Var1 = __ctype_tolower_loc();
  return pp_Var1;
}



void FourByteSwap(void)

{
                    // WARNING: Treating indirect jump as call
  FourByteSwap();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ushort ** __ctype_b_loc(void)

{
  ushort **ppuVar1;
  
  ppuVar1 = __ctype_b_loc();
  return ppuVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void freeaddrinfo(addrinfo *__ai)

{
  freeaddrinfo(__ai);
  return;
}



void ErrorF(void)

{
                    // WARNING: Treating indirect jump as call
  ErrorF();
  return;
}



void FontFileFindNameInDir(undefined8 param_1,undefined8 param_2)

{
  FontFileFindNameInScalableDir(param_1,param_2,0);
  return;
}



void __sprintf_chk(void)

{
  __sprintf_chk();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int socket(int __domain,int __type,int __protocol)

{
  int iVar1;
  
  iVar1 = socket(__domain,__type,__protocol);
  return iVar1;
}



void _fs_free_props(void)

{
                    // WARNING: Treating indirect jump as call
  _fs_free_props();
  return;
}



ulong FontFileInitFPE(long param_1)

{
  uint uVar1;
  int iVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  long lStack40;
  long lStack32;
  
  lStack32 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = FontFileReadDirectory(*(undefined8 *)(param_1 + 8),&lStack40);
  uVar3 = (ulong)uVar1;
  if (uVar1 == 0x55) {
    if ((*(int *)(lStack40 + 0x30) < 1) ||
       (iVar2 = FontFileRegisterBitmapSource(param_1), iVar2 != 0)) {
      *(long *)(param_1 + 0x18) = lStack40;
    }
    else {
      uVar3 = 0x50;
      FontFileFreeFPE(param_1);
    }
  }
  if (lStack32 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



undefined8 FontFileFreeFPE(long param_1)

{
  FontFileUnregisterBitmapSource();
  FontFileFreeDir(*(undefined8 *)(param_1 + 0x18));
  return 0x55;
}



undefined8
FontFileListNextFontOrAlias
          (undefined8 param_1,undefined8 param_2,undefined8 *param_3,int *param_4,
          undefined8 *param_5,undefined4 *param_6,uint **param_7)

{
  uint uVar1;
  int iVar2;
  uint *puVar3;
  long lVar4;
  undefined8 uVar5;
  
  puVar3 = *param_7;
  uVar1 = *(uint *)(param_7 + 1);
  if (uVar1 == *puVar3) {
    FreeFontNames();
    free(param_7);
    return 0x53;
  }
  iVar2 = *(int *)(*(long *)(puVar3 + 2) + (ulong)uVar1 * 4);
  *param_3 = *(undefined8 *)(*(long *)(puVar3 + 4) + (ulong)uVar1 * 8);
  if (iVar2 < 0) {
    *param_4 = -iVar2;
    lVar4 = *(long *)(*param_7 + 4);
    iVar2 = *(int *)(param_7 + 1);
    *(int *)(param_7 + 1) = iVar2 + 1;
    *param_5 = *(undefined8 *)(lVar4 + (long)(iVar2 + 1) * 8);
    *param_6 = *(undefined4 *)(*(long *)(*param_7 + 2) + (long)*(int *)(param_7 + 1) * 4);
    uVar5 = 0x52;
  }
  else {
    *param_4 = iVar2;
    uVar5 = 0x55;
  }
  *(int *)(param_7 + 1) = *(int *)(param_7 + 1) + 1;
  return uVar5;
}



undefined8
FontFileListNextFontWithInfo
          (undefined8 param_1,undefined8 param_2,undefined8 *param_3,undefined4 *param_4,
          undefined8 param_5,int *param_6,uint **param_7)

{
  uint uVar1;
  int iVar2;
  uint *puVar3;
  undefined8 uVar4;
  long in_FS_OFFSET;
  undefined4 uStack60;
  undefined8 uStack56;
  long lStack48;
  
  lStack48 = *(long *)(in_FS_OFFSET + 0x28);
  puVar3 = *param_7;
  uVar1 = *(uint *)(param_7 + 1);
  if (uVar1 == *puVar3) {
    FreeFontNames(puVar3);
    free(param_7);
    uVar4 = 0x53;
  }
  else {
    uStack56 = *(undefined8 *)(*(long *)(puVar3 + 4) + (ulong)uVar1 * 8);
    uStack60 = *(undefined4 *)(*(long *)(puVar3 + 2) + (ulong)uVar1 * 4);
    uVar4 = FUN_0010e130(param_2,&uStack56,&uStack60,param_5);
    if ((int)uVar4 == 0x53) {
      uVar4 = 0x50;
    }
    *param_3 = uStack56;
    *param_4 = uStack60;
    iVar2 = *(int *)(param_7 + 1);
    *(int *)(param_7 + 1) = iVar2 + 1;
    *param_6 = **param_7 - (iVar2 + 1);
  }
  if (lStack48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar4;
}



void FontFileCloseFont(undefined8 param_1,long param_2)

{
  long lVar1;
  
  lVar1 = *(long *)(param_2 + 0xa0);
  if (lVar1 != 0) {
    if (*(int *)(lVar1 + 0x10) == 0) {
      FontFileRemoveScaledInstance();
    }
    else {
      if (*(int *)(lVar1 + 0x10) == 2) {
        *(undefined8 *)(lVar1 + 0x28) = 0;
      }
    }
    *(undefined8 *)(param_2 + 0xa0) = 0;
  }
                    // WARNING: Could not recover jumptable at 0x0010cbe7. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(param_2 + 0x78))(param_2);
  return;
}



void bitmapGetGlyphs(void)

{
                    // WARNING: Treating indirect jump as call
  bitmapGetGlyphs();
  return;
}



ulong FontFileOpenFont(undefined8 param_1,long param_2,ulong param_3,undefined8 param_4,
                      ulong param_5,uint param_6,uint param_7,undefined8 param_8,long *param_9,
                      undefined8 param_10,undefined8 param_11)

{
  char **ppcVar1;
  char *__s;
  code *pcVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  void *__ptr;
  undefined8 *puVar6;
  size_t sVar7;
  size_t sVar8;
  long lVar9;
  ulong uVar10;
  short sVar11;
  uint *puVar12;
  uint *puVar13;
  long lVar14;
  short sVar15;
  ulong uVar16;
  ulong uVar17;
  long in_FS_OFFSET;
  bool bVar18;
  byte bVar19;
  undefined8 uVar20;
  undefined4 uStack4316;
  uint *puStack4312;
  short sStack4304;
  short sStack4302;
  uint auStack4296 [24];
  undefined *puStack4200;
  undefined4 uStack4192;
  void *pvStack4184;
  uint auStack4168 [256];
  undefined auStack3144 [1024];
  undefined auStack2120 [2056];
  long lStack64;
  
  bVar19 = 0;
  uVar10 = param_5 & 0xffffffff;
  param_8 = param_10;
  if (0x3ff < (int)uVar10) {
    return 0x50;
  }
  uVar16 = SEXT48((int)param_5);
  lStack64 = *(long *)(in_FS_OFFSET + 0x28);
  ppcVar1 = *(char ***)(param_2 + 0x18);
  FUN_0010cce0(auStack4168,param_4,uVar16 & 0xffffffff);
  *(undefined *)((long)auStack4168 + uVar16) = 0;
  __ptr = (void *)FontParseRanges(auStack4168,&uStack4316);
  sVar15 = (short)param_5;
  puStack4312 = auStack4168;
  sStack4304 = sVar15;
  sStack4302 = FontFileCountDashes(auStack4168,uVar10);
  iVar3 = FontParseXLFDName(auStack4168,auStack4296,0);
  if (iVar3 == 0) {
    lVar14 = 0xf;
    puVar6 = (undefined8 *)auStack4296;
    while (lVar14 != 0) {
      lVar14 = lVar14 + -1;
      *puVar6 = 0;
      puVar6 = puVar6 + (ulong)bVar19 * 0x1ffffffffffffffe + 1;
    }
  }
  uVar20 = 0x10d715;
  puVar6 = (undefined8 *)FontFileFindNameInDir(ppcVar1 + 6,&puStack4312);
  if (puVar6 == (undefined8 *)0x0) {
    if ((sStack4302 == 0xe) &&
       (iVar3 = FontParseXLFDName(auStack4168,auStack4296,2), puVar13 = auStack4168, iVar3 != 0)) {
      do {
        puVar12 = puVar13;
        uVar4 = *puVar12 + 0xfefefeff & ~*puVar12;
        uVar5 = uVar4 & 0x80808080;
        puVar13 = puVar12 + 1;
      } while (uVar5 == 0);
      bVar18 = (uVar4 & 0x8080) == 0;
      if (bVar18) {
        uVar5 = uVar5 >> 0x10;
      }
      if (bVar18) {
        puVar13 = (uint *)((long)puVar12 + 6);
      }
      lVar14 = (long)puVar13 + ((-3 - (ulong)CARRY1((byte)uVar5,(byte)uVar5)) - (long)auStack4168);
      sStack4304 = (short)lVar14;
      uVar20 = 0x10db44;
      puVar6 = (undefined8 *)
               FontFileFindNameInDir(ppcVar1 + 6,&puStack4312,lVar14,(ulong)(uVar5 & 0xffffff00));
      if (puVar6 != (undefined8 *)0x0) goto LAB_0010d71a;
    }
LAB_0010d7a4:
    FUN_0010cce0(auStack4168,param_4,uVar16 & 0xffffffff);
    *(undefined *)((long)auStack4168 + uVar16) = 0;
    puStack4312 = auStack4168;
    sStack4304 = sVar15;
    sStack4302 = FontFileCountDashes(auStack4168,uVar10);
    iVar3 = FontParseXLFDName(auStack4168,auStack4296,2);
    puVar13 = auStack4168;
    if (iVar3 == 0) {
LAB_0010d850:
      FUN_0010cce0(auStack4168,param_4,uVar10);
      *(undefined *)((long)auStack4168 + uVar16) = 0;
      puStack4312 = auStack4168;
      sStack4304 = sVar15;
      sStack4302 = FontFileCountDashes(auStack4168,uVar10);
      puVar6 = (undefined8 *)FontFileFindNameInScalableDir(ppcVar1 + 3,&puStack4312,auStack4296);
      if (puVar6 != (undefined8 *)0x0) {
        __strcpy_chk(auStack4168,*puVar6,0x400);
        sStack4304 = *(short *)(puVar6 + 1);
        sStack4302 = *(short *)((long)puVar6 + 10);
        puStack4312 = auStack4168;
        goto LAB_0010d8cd;
      }
    }
    else {
      do {
        puVar12 = puVar13;
        uVar4 = *puVar12 + 0xfefefeff & ~*puVar12;
        uVar5 = uVar4 & 0x80808080;
        puVar13 = puVar12 + 1;
      } while (uVar5 == 0);
      bVar18 = (uVar4 & 0x8080) == 0;
      if (bVar18) {
        uVar5 = uVar5 >> 0x10;
      }
      sVar11 = (short)(puVar12 + 1);
      if (bVar18) {
        sVar11 = (short)puVar12 + 6;
      }
      sStack4304 = ((sVar11 + -3) - (ushort)CARRY1((byte)uVar5,(byte)uVar5)) - (short)auStack4168;
      puVar6 = (undefined8 *)
               FontFileFindNameInScalableDir
                         (ppcVar1 + 3,&puStack4312,auStack4296,(ulong)(uVar5 & 0xffffff00));
      if (puVar6 == (undefined8 *)0x0) goto LAB_0010d850;
LAB_0010d8cd:
      if (*(int *)(puVar6 + 2) == 0) {
        uVar20 = 0x10d8ea;
        iVar3 = FontFileCompleteXLFD(auStack4296,puVar6[5]);
        if (iVar3 != 0) {
          if ((((auStack4296[0] & 3) == 2) || ((auStack4296[0] & 0xc) == 8)) ||
             ((auStack4296[0] & 0xffffffb0) != 0)) {
LAB_0010d918:
            uVar5 = FontFileMatchBitmapSource
                              (param_2,param_9,param_3 & 0xffffffff,puVar6,&puStack4312,auStack4296,
                               (ulong)param_6,(ulong)param_7,0,uVar20);
            uVar17 = (ulong)uVar5;
            if (uVar5 != 0x55) {
              puStack4200 = auStack3144;
              FUN_0010cce0(puStack4200,param_4,uVar10);
              auStack3144[uVar16] = 0;
              uStack4192 = uStack4316;
              __s = *ppcVar1;
              pvStack4184 = __ptr;
              sVar7 = strlen(__s);
              sVar8 = strlen((char *)puVar6[4]);
              if (sVar8 + sVar7 < 0x801) {
                __memcpy_chk(auStack2120,__s,sVar7 + 1);
                uVar20 = 0x10d9fe;
                __strcpy_chk(auStack2120 + sVar7,puVar6[4],0x801);
                pcVar2 = *(code **)(puVar6[3] + 0x18);
                if (pcVar2 == (code *)0x0) {
                  pcVar2 = *(code **)(puVar6[3] + 0x10);
                  if (pcVar2 == (code *)0x0) goto LAB_0010d75c;
                  uVar5 = (*pcVar2)(param_2,param_9,param_3 & 0xffffffff,puVar6,auStack2120,
                                    (ulong)param_6,(ulong)param_7,param_11);
                }
                else {
                  uVar5 = (*pcVar2)(param_2,param_9,param_3 & 0xffffffff,puVar6,auStack2120,
                                    auStack4296,(ulong)param_6,(ulong)param_7,param_11,uVar20);
                }
                uVar17 = (ulong)uVar5;
                if (uVar5 == 0x55) {
                  lVar14 = *param_9;
                  if ((*(ushort *)(lVar14 + 8) < *(ushort *)(lVar14 + 10) ||
                       *(ushort *)(lVar14 + 8) == *(ushort *)(lVar14 + 10)) &&
                     (*(ushort *)(lVar14 + 0xc) < *(ushort *)(lVar14 + 0xe) ||
                      *(ushort *)(lVar14 + 0xc) == *(ushort *)(lVar14 + 0xe))) {
                    iVar3 = FontFileAddScaledInstance(puVar6,auStack4296,lVar14,0);
                    if (iVar3 != 0) {
                      *(long *)(*param_9 + 0x88) = param_2;
                      goto LAB_0010d769;
                    }
                    *(undefined8 *)(*param_9 + 0xa0) = 0;
                    lVar14 = *param_9;
                    goto LAB_0010dc01;
                  }
                  uVar17 = 0x53;
                  (**(code **)(lVar14 + 0x78))(lVar14);
                }
                goto LAB_0010d75c;
              }
              goto LAB_0010daa0;
            }
          }
          else {
            uVar20 = 0x10dc1f;
            lVar9 = FontFileFindScaledInstance(puVar6,auStack4296,0);
            if (lVar9 == 0) goto LAB_0010d918;
            lVar14 = *(long *)(lVar9 + 0x80);
            if (lVar14 != 0) goto LAB_0010dabd;
            lVar14 = *(long *)(lVar9 + 0x78);
            if (lVar14 == 0) goto LAB_0010daa0;
            lVar9 = *(long *)(lVar14 + 0x28);
            if (lVar9 != 0) {
              uVar17 = 0x55;
              *param_9 = lVar9;
              *(long *)(lVar9 + 0x88) = param_2;
              goto LAB_0010d75c;
            }
            uVar5 = FUN_0010c960(param_2,param_9,param_3 & 0xffffffff,lVar14,(ulong)param_6,
                                 (ulong)param_7,param_11,uVar20);
            uVar17 = (ulong)uVar5;
            if (uVar5 != 0x55) goto LAB_0010d75c;
            lVar14 = *param_9;
            if (lVar14 != 0) goto LAB_0010dc01;
          }
          uVar17 = 0x55;
          goto LAB_0010d75c;
        }
      }
    }
LAB_0010daa0:
    uVar17 = 0x53;
  }
  else {
LAB_0010d71a:
    if (*(int *)(puVar6 + 2) != 2) {
      if (*(int *)(puVar6 + 2) == 3) {
        uVar17 = 0x52;
        uStack4192 = uStack4316;
        pvStack4184 = __ptr;
        FUN_0010cd50(*puVar6,(ulong)(uint)(int)*(short *)(puVar6 + 1),puVar6[3],param_10,auStack4296
                    );
        goto LAB_0010d75c;
      }
      goto LAB_0010d7a4;
    }
    lVar14 = puVar6[5];
    if (lVar14 != 0) {
LAB_0010dabd:
      uVar17 = 0x55;
      *param_9 = lVar14;
      *(long *)(lVar14 + 0x88) = param_2;
      goto LAB_0010d75c;
    }
    uVar5 = FUN_0010c960(param_2,param_9,param_3 & 0xffffffff,puVar6,(ulong)param_6,(ulong)param_7,
                         param_11,uVar20);
    uVar17 = (ulong)uVar5;
    if (uVar5 != 0x55) {
      if (uVar5 == 0x53) goto LAB_0010d7a4;
      goto LAB_0010d75c;
    }
    lVar14 = *param_9;
    if (lVar14 == 0) goto LAB_0010d75c;
LAB_0010dc01:
    *(long *)(lVar14 + 0x88) = param_2;
  }
LAB_0010d75c:
  if (__ptr != (void *)0x0) {
    free(__ptr);
  }
LAB_0010d769:
  if (lStack64 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar17;
}



void FontFileListFonts(undefined8 param_1,long param_2,undefined8 param_3,uint param_4,ulong param_5
                      ,undefined8 param_6)

{
  FUN_0010dd70(param_2 + 0x18,param_3,(ulong)param_4,param_5 & 0xffffffff,param_6,0);
  return;
}



void __cxa_finalize(void)

{
  __cxa_finalize();
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

byte * entry(double param_1,byte *param_2,int param_3)

{
  byte bVar1;
  char *pcVar2;
  byte *pbVar3;
  byte *pbVar4;
  byte *pbVar5;
  int iVar6;
  ushort **ppuVar7;
  byte *pbVar8;
  ulong uVar9;
  byte *pbVar10;
  byte *pbVar11;
  int iVar12;
  uint uVar13;
  byte bVar14;
  
  bVar14 = 0;
  if (_DAT_0033cd60 == (lconv *)0x0) {
    _DAT_0033cd60 = localeconv();
    pcVar2 = _DAT_0033cd60->decimal_point;
    if ((pcVar2 != (char *)0x0) && (*pcVar2 != '\0')) {
      PTR_DAT_0033c708 = pcVar2;
    }
    pcVar2 = _DAT_0033cd60->positive_sign;
    if ((pcVar2 != (char *)0x0) && (*pcVar2 != '\0')) {
      PTR_DAT_0033c700 = pcVar2;
    }
    pcVar2 = _DAT_0033cd60->negative_sign;
    if ((pcVar2 != (char *)0x0) && (*pcVar2 != '\0')) {
      PTR_DAT_0033c6f8 = pcVar2;
    }
  }
  if (param_3 != 0) {
    *param_2 = 0x20;
    param_2 = param_2 + 1;
  }
  __sprintf_chk(param_1,param_2,1,0xffffffffffffffff);
  uVar9 = 0xffffffffffffffff;
  pbVar10 = param_2;
  do {
    if (uVar9 == 0) break;
    uVar9 = uVar9 - 1;
    bVar1 = *pbVar10;
    pbVar10 = pbVar10 + (ulong)bVar14 * -2 + 1;
  } while (bVar1 != 0);
  pbVar10 = param_2 + (~uVar9 - 1);
  do {
    pbVar11 = pbVar10;
    pbVar10 = pbVar11 + -1;
  } while ((*pbVar11 & 0xdf) != 0x45);
  _iVar6 = strtol((char *)(pbVar11 + 1),(char **)0x0,10);
  iVar6 = (int)_iVar6;
  if (param_1 == 0.00000000) {
    iVar6 = 0;
  }
  while (param_2 <= pbVar10) {
    ppuVar7 = __ctype_b_loc();
    if (((*(byte *)((long)*ppuVar7 + (long)(char)*pbVar10 * 2 + 1) & 8) != 0) && (*pbVar10 != 0x30))
    {
      iVar12 = 0;
      do {
        pbVar11 = pbVar10 + -1;
        iVar12 = iVar12 + (uint)((*(byte *)((long)*ppuVar7 + (long)(char)*pbVar10 * 2 + 1) & 8) != 0
                                );
        pbVar10 = pbVar11;
      } while (param_2 <= pbVar11);
      goto LAB_00109214;
    }
    pbVar10 = pbVar10 + -1;
  }
  iVar12 = 0;
LAB_00109214:
  pbVar10 = param_2;
  if ((iVar6 < 3) && (iVar12 - iVar6 < 5)) {
    uVar13 = iVar12 - (iVar6 + 1);
    uVar9 = (ulong)uVar13;
    if ((int)uVar13 < 0) {
      uVar9 = 0;
    }
    __sprintf_chk(param_1,param_2,1,0xffffffffffffffff,"%.*lf",uVar9);
    pbVar5 = param_2;
    pbVar11 = PTR_DAT_0033c708;
    pbVar3 = PTR_DAT_0033c700;
    pbVar4 = PTR_DAT_0033c6f8;
    if (iVar6 < 0) {
      do {
        pbVar8 = pbVar5;
        if (*pbVar8 == 0) break;
        pbVar5 = pbVar8 + 1;
      } while (*pbVar8 != 0x30);
      while (pbVar11 = PTR_DAT_0033c708, pbVar3 = PTR_DAT_0033c700, pbVar4 = PTR_DAT_0033c6f8,
            *pbVar8 != 0) {
        *pbVar8 = pbVar8[1];
        pbVar8 = pbVar8 + 1;
      }
    }
  }
  else {
    __sprintf_chk(param_1,param_2,1,0xffffffffffffffff,"%.*le",(ulong)(iVar12 - 1));
    pbVar11 = PTR_DAT_0033c708;
    pbVar3 = PTR_DAT_0033c700;
    pbVar4 = PTR_DAT_0033c6f8;
  }
  while (bVar14 = *pbVar10, bVar14 != 0) {
    if (*pbVar4 == bVar14) {
      *pbVar10 = 0x7e;
    }
    else {
      if (*pbVar3 == bVar14) {
        *pbVar10 = 0x2b;
      }
      else {
        if (*pbVar11 == bVar14) {
          *pbVar10 = 0x2e;
        }
      }
    }
    pbVar10 = pbVar10 + 1;
  }
  return param_2 + -(long)param_3;
}



// WARNING: Removing unreachable block (ram,0x00109317)
// WARNING: Removing unreachable block (ram,0x00109323)

void FUN_00109300(void)

{
  return;
}



void _FINI_0(void)

{
  if (DAT_0033c720 != '\0') {
    return;
  }
  __cxa_finalize(PTR_LOOP_0033b880);
  FUN_00109300();
  DAT_0033c720 = 1;
  return;
}



// WARNING: Removing unreachable block (ram,0x00109368)
// WARNING: Removing unreachable block (ram,0x00109374)

void _INIT_0(void)

{
  return;
}



undefined8 FontFileRegisterBitmapSource(long param_1)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  
  if (FontFileBitmapSources._12_4_ < 1) {
LAB_0010941f:
    plVar1 = FontFileBitmapSources._0_8_;
    iVar2 = FontFileBitmapSources._8_4_;
    if (FontFileBitmapSources._8_4_ == FontFileBitmapSources._12_4_) {
      iVar2 = FontFileBitmapSources._12_4_ + 4;
      plVar1 = (long *)realloc(FontFileBitmapSources._0_8_,(long)iVar2 << 3);
      if (plVar1 == (long *)0x0) {
        return 0;
      }
    }
    FontFileBitmapSources._8_4_ = iVar2;
    FontFileBitmapSources._0_8_ = plVar1;
    lVar3 = (long)FontFileBitmapSources._12_4_;
    FontFileBitmapSources._12_4_ = FontFileBitmapSources._12_4_ + 1;
    FontFileBitmapSources._0_8_[lVar3] = param_1;
    return 1;
  }
  if (param_1 != *FontFileBitmapSources._0_8_) {
    plVar1 = FontFileBitmapSources._0_8_ + 1;
    do {
      if (plVar1 == FontFileBitmapSources._0_8_ + 1 + (FontFileBitmapSources._12_4_ - 1))
      goto LAB_0010941f;
      lVar3 = *plVar1;
      plVar1 = plVar1 + 1;
    } while (lVar3 != param_1);
  }
  return 1;
}



void FontFileUnregisterBitmapSource(long param_1)

{
  long *plVar1;
  long lVar2;
  ulong uVar3;
  uint uVar4;
  ulong uVar5;
  
  if (0 < FontFileBitmapSources._12_4_) {
    if (param_1 == *FontFileBitmapSources._0_8_) {
      uVar5 = 0;
    }
    else {
      uVar3 = 1;
      do {
        uVar5 = uVar3 & 0xffffffff;
        if ((ulong)(FontFileBitmapSources._12_4_ - 1) + 1 == uVar3) {
          return;
        }
        plVar1 = FontFileBitmapSources._0_8_ + uVar3;
        uVar3 = uVar3 + 1;
      } while (*plVar1 != param_1);
    }
    FontFileBitmapSources._12_4_ = FontFileBitmapSources._12_4_ + -1;
    if (FontFileBitmapSources._12_4_ == 0) {
      FontFileBitmapSources._8_4_ = 0;
      free(FontFileBitmapSources._0_8_);
      FontFileBitmapSources._0_8_ = (long *)0x0;
      return;
    }
    if ((int)uVar5 < FontFileBitmapSources._12_4_) {
      lVar2 = (long)(int)uVar5 * 8;
      do {
        uVar4 = (int)uVar5 + 1;
        uVar5 = (ulong)uVar4;
        *(undefined8 *)((long)FontFileBitmapSources._0_8_ + lVar2) =
             *(undefined8 *)((long)FontFileBitmapSources._0_8_ + lVar2 + 8);
        lVar2 = lVar2 + 8;
      } while ((int)uVar4 < FontFileBitmapSources._12_4_);
      return;
    }
  }
  return;
}



void FontFileEmptyBitmapSource(void)

{
  if (FontFileBitmapSources._12_4_ == 0) {
    return;
  }
  FontFileBitmapSources._8_8_ = 0;
  free(FontFileBitmapSources._0_8_);
  FontFileBitmapSources._0_8_ = (void *)0x0;
  return;
}



undefined8
FontFileMatchBitmapSource
          (long param_1,long *param_2,uint param_3,undefined8 param_4,undefined8 param_5,
          undefined8 param_6,uint param_7,uint param_8,uint param_9)

{
  long lVar1;
  int iVar2;
  long lVar3;
  undefined8 uVar4;
  long lVar5;
  
  if (0 < FontFileBitmapSources._12_4_) {
    lVar5 = 0;
    do {
      lVar1 = lVar5 * 8;
      lVar3 = *(long *)(FontFileBitmapSources._0_8_ + lVar5 * 8);
      if (((lVar3 != param_1) &&
          (lVar3 = FontFileFindNameInDir(*(long *)(lVar3 + 0x18) + 0x18,param_5), lVar3 != 0)) &&
         (lVar3 = FontFileFindScaledInstance(lVar3,param_6,(ulong)param_9), lVar3 != 0)) {
        lVar5 = *(long *)(lVar3 + 0x80);
        if (lVar5 != 0) {
          *param_2 = lVar5;
          *(undefined8 *)(lVar5 + 0x88) = *(undefined8 *)(FontFileBitmapSources._0_8_ + lVar1);
          return 0x55;
        }
        lVar5 = *(long *)(lVar3 + 0x78);
        if (lVar5 == 0) {
          return 0x53;
        }
        lVar3 = *(long *)(lVar5 + 0x28);
        if (lVar3 != 0) {
          *param_2 = lVar3;
          *(undefined8 *)(lVar3 + 0x88) = *(undefined8 *)(FontFileBitmapSources._0_8_ + lVar1);
          return 0x55;
        }
        uVar4 = FontFileOpenBitmap(*(undefined8 *)(FontFileBitmapSources._0_8_ + lVar1),param_2,
                                   (ulong)param_3,lVar5,(ulong)param_7,(ulong)param_8);
        if ((int)uVar4 == 0x55) {
          if (*param_2 != 0) {
            *(undefined8 *)(*param_2 + 0x88) = *(undefined8 *)(FontFileBitmapSources._0_8_ + lVar1);
            return uVar4;
          }
          return uVar4;
        }
        return uVar4;
      }
      iVar2 = (int)lVar5;
      lVar5 = lVar5 + 1;
    } while (iVar2 + 1 < FontFileBitmapSources._12_4_);
  }
  return 0x53;
}



void BufFileCreate(long param_1,long param_2,long param_3,long param_4,long param_5)

{
  long *plVar1;
  
  plVar1 = (long *)malloc(0x2038);
  if (plVar1 != (long *)0x0) {
    plVar1[0x406] = param_1;
    plVar1[0x402] = param_2;
    plVar1[0x403] = param_3;
    plVar1[0x404] = param_4;
    *(long **)plVar1 = plVar1 + 2;
    plVar1[1] = 0;
    plVar1[0x405] = param_5;
  }
  return;
}



void BufFileOpenRead(int param_1)

{
  BufFileCreate((long)param_1,&LAB_00109720,0,&LAB_00109760,&LAB_001096f0);
  return;
}



void BufFileOpenWrite(int param_1)

{
  long *plVar1;
  
  plVar1 = (long *)BufFileCreate((long)param_1,0,&LAB_00109840,0,&LAB_001096c0);
  *(undefined4 *)(plVar1 + 1) = 0x2000;
  *(long **)plVar1 = plVar1 + 2;
  return;
}



ulong BufFileRead(long *param_1,undefined *param_2,int param_3)

{
  undefined *puVar1;
  undefined uVar2;
  int iVar3;
  
  if (param_3 != 0) {
    iVar3 = param_3 + -1;
    do {
      _uVar2 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = _uVar2 + -1;
      if (_uVar2 == 0) {
        _uVar2 = (*(code *)param_1[0x402])(param_1);
        uVar2 = (undefined)_uVar2;
        *(int *)((long)param_1 + 0xc) = _uVar2;
        if (_uVar2 == -1) goto LAB_001099d5;
      }
      else {
        puVar1 = (undefined *)*param_1;
        *(undefined **)param_1 = puVar1 + 1;
        uVar2 = *puVar1;
      }
      iVar3 = iVar3 + -1;
      *param_2 = uVar2;
      param_2 = param_2 + 1;
    } while (iVar3 != -1);
  }
  iVar3 = -1;
LAB_001099d5:
  return (ulong)((param_3 - iVar3) - 1);
}



ulong BufFileWrite(byte **param_1,byte *param_2,ulong param_3)

{
  byte bVar1;
  byte *pbVar2;
  int iVar3;
  byte *pbVar4;
  
  pbVar4 = param_2;
  do {
    while( true ) {
      if (pbVar4 == param_2 + (param_3 & 0xffffffff)) {
        return param_3 & 0xffffffff;
      }
      iVar3 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = iVar3 + -1;
      if (iVar3 + -1 == 0) break;
      pbVar2 = *param_1;
      bVar1 = *pbVar4;
      *param_1 = pbVar2 + 1;
      *pbVar2 = bVar1;
      pbVar4 = pbVar4 + 1;
    }
    iVar3 = (*(code *)param_1[0x403])((ulong)*pbVar4,param_1);
    pbVar4 = pbVar4 + 1;
  } while (iVar3 != -1);
  return 0xffffffff;
}



ulong BufFileClose(void *param_1)

{
  uint uVar1;
  
  uVar1 = (**(code **)((long)param_1 + 0x2028))();
  free(param_1);
  return (ulong)uVar1;
}



undefined8 BufFilePushCompressed(byte **param_1)

{
  int iVar1;
  byte *pbVar2;
  uint uVar3;
  long **pplVar4;
  long *plVar5;
  undefined8 uVar6;
  long lVar7;
  uint uVar8;
  
  iVar1 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar3 = (*(code *)param_1[0x402])();
    *(uint *)((long)param_1 + 0xc) = uVar3;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    uVar3 = (uint)*pbVar2;
  }
  if (uVar3 == 0x1f) {
    iVar1 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar1 + -1;
    if (iVar1 == 0) {
      uVar3 = (*(code *)param_1[0x402])(param_1);
      *(uint *)((long)param_1 + 0xc) = uVar3;
    }
    else {
      pbVar2 = *param_1;
      *param_1 = pbVar2 + 1;
      uVar3 = (uint)*pbVar2;
    }
    if (uVar3 == 0x9d) {
      iVar1 = *(int *)(param_1 + 1);
      *(int *)(param_1 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar3 = (*(code *)param_1[0x402])(param_1);
        *(uint *)((long)param_1 + 0xc) = uVar3;
        if (uVar3 == 0xffffffff) {
          return 0;
        }
      }
      else {
        pbVar2 = *param_1;
        *param_1 = pbVar2 + 1;
        uVar3 = (uint)*pbVar2;
      }
      uVar8 = uVar3 & 0x1f;
      if (uVar8 - 10 < 7) {
        plVar5 = (long *)(long)(1 << (sbyte)uVar8);
        pplVar4 = (long **)malloc((ulong)(uint)(3 << (sbyte)uVar8) + 0xff88);
        if (pplVar4 != (long **)0x0) {
          *(byte ***)pplVar4 = param_1;
          *(uint *)(pplVar4 + 4) = uVar8;
          *(uint *)((long)pplVar4 + 0x1c) = uVar3 & 0x80;
          pplVar4[6] = plVar5;
          *(undefined4 *)((long)pplVar4 + 0x44) = 9;
          pplVar4[5] = (long *)0x1ff;
          lVar7 = 0xff;
          *(long ***)(pplVar4 + 0x1fef) = pplVar4 + 0x1ff1;
          plVar5 = (long *)((long)(pplVar4 + 0x1ff1) + (long)plVar5);
          pplVar4[0x1ff0] = plVar5;
          while( true ) {
            *(undefined2 *)((long)plVar5 + lVar7 * 2) = 0;
            *(undefined *)((long)pplVar4[0x1fef] + lVar7) = (char)lVar7;
            lVar7 = lVar7 + -1;
            if (lVar7 == -1) break;
            plVar5 = pplVar4[0x1ff0];
          }
          pplVar4[2] = (long *)0xffffffffffffffff;
          *(undefined4 *)(pplVar4 + 8) = 0;
          pplVar4[9] = (long *)0x0;
          pplVar4[7] = (long *)((ulong)(*(int *)((long)pplVar4 + 0x1c) != 0) + 0x100);
          *(undefined4 *)(pplVar4 + 10) = 0;
          *(undefined4 *)((long)pplVar4 + 0x54) = 0;
          *(undefined4 *)(pplVar4 + 0xb) = 0;
          *(undefined4 *)((long)pplVar4 + 0x5c) = 0;
          *(long ***)(pplVar4 + 1) = pplVar4 + 0xc;
          uVar6 = BufFileCreate(0,pplVar4,&LAB_00109aa0,0,&LAB_00109ee0,&LAB_00109f30);
          return uVar6;
        }
      }
    }
  }
  return 0;
}



void FontDefaultFormat(undefined4 *param_1,undefined4 *param_2,undefined4 *param_3,
                      undefined4 *param_4)

{
  *param_1 = 1;
  *param_2 = 1;
  *param_3 = 4;
  *param_4 = 1;
  return;
}



// WARNING: Type propagation algorithm not settling
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8 FUN_0010a150(_IO_FILE *param_1,undefined8 *param_2)

{
  int iVar1;
  undefined uVar2;
  uint __c;
  int iVar3;
  undefined *puVar4;
  undefined *puVar5;
  uint uVar6;
  size_t __size;
  size_t __size_00;
  int iVar7;
  bool bVar8;
  
  iVar7 = 0;
  uVar6 = 0;
  puVar5 = DAT_0033c738;
LAB_0010a172:
  do {
    puVar4 = puVar5;
    if (_DAT_0033c730 != iVar7) goto LAB_0010a1b3;
    if (iVar7 == 0) {
      __size = 0x40;
      iVar3 = 0x40;
    }
    else {
      iVar3 = iVar7 * 2;
      __size = SEXT48(iVar3);
    }
LAB_0010a18b:
    puVar5 = (undefined *)realloc(DAT_0033c738,__size);
    if (puVar5 == (undefined *)0x0) {
      return 3;
    }
    puVar4 = puVar5 + iVar7;
    _DAT_0033c730 = iVar3;
    DAT_0033c738 = puVar5;
LAB_0010a1b3:
    iVar1 = iVar7 * 2;
    __size_00 = SEXT48(iVar1);
LAB_0010a1ba:
    __c = _IO_getc(param_1);
    ___c = (ulong)__c;
    if (__c == 0xd) {
LAB_0010a3b2:
      _DAT_0033c758 = 4;
      if ((uVar6 == 0) || (uVar6 == 3)) {
LAB_0010a6fa:
        _DAT_0033c758 = 4;
        *param_2 = 0;
        return 1;
      }
LAB_0010a3cd:
      puVar5 = DAT_0033c738;
      *puVar4 = 0;
      *(undefined **)param_2 = puVar5;
      ungetc(__c,(FILE *)param_1);
      return 0;
    }
    if ((int)__c < 0xe) {
      if (__c != 9) {
        if (__c != 10) {
LAB_0010a1f2:
          if ((int)___c != -1) {
LAB_0010a1fb:
            uVar2 = (undefined)___c;
            _DAT_0033c758 = 2;
            if (uVar6 == 0) {
              uVar6 = 1;
              *puVar4 = uVar2;
              iVar7 = iVar7 + 1;
              puVar5 = puVar4 + 1;
            }
            else {
              if (uVar6 == 3) {
LAB_0010a528:
                while (_DAT_0033c758 = 2, _DAT_0033c730 == iVar7) {
                  iVar3 = 0x40;
                  __size = 0x40;
                  uVar6 = 3;
                  if (iVar7 == 0) goto LAB_0010a18b;
                  puVar5 = (undefined *)realloc(DAT_0033c738,__size_00);
                  if (puVar5 == (undefined *)0x0) {
                    return 3;
                  }
                  puVar4 = puVar5 + iVar7;
                  _DAT_0033c730 = iVar1;
                  DAT_0033c738 = puVar5;
                  iVar3 = _IO_getc(param_1);
                  if (iVar3 == 0xd) goto LAB_0010a6fa;
                  if (0xd < iVar3) {
                    bVar8 = iVar3 == 0x21;
                    if (!bVar8) goto LAB_0010a779;
                    if (iVar7 == _DAT_0033c730) goto LAB_0010a5e5;
                    goto LAB_0010a758;
                  }
LAB_0010a503:
                  uVar6 = 3;
                  if (iVar3 == 9) goto LAB_0010a7d1;
                  if (iVar3 == 10) goto LAB_0010a6fa;
                  if (iVar3 == -1) goto LAB_0010a430;
                }
                iVar3 = _IO_getc(param_1);
                if (iVar3 == 0xd) goto LAB_0010a6fa;
                if (iVar3 < 0xe) {
LAB_0010a410:
                  if (iVar3 != 9) {
                    if (iVar3 == 10) goto LAB_0010a6fa;
                    if (iVar3 == -1) {
                      uVar6 = 3;
                      goto LAB_0010a430;
                    }
                    goto LAB_0010a528;
                  }
                }
                else {
                  if (iVar3 == 0x21) {
                    uVar6 = 3;
                    goto LAB_0010a370;
                  }
                  if (0x21 < iVar3) {
                    if (iVar3 == 0x22) {
LAB_0010a230:
                      uVar6 = 3;
LAB_0010a238:
                      do {
                        if (uVar6 < 2) goto LAB_0010a2e0;
                        if (uVar6 == 2) goto LAB_0010a254;
                        while( true ) {
                          _DAT_0033c758 = 0;
                          if (_DAT_0033c730 != iVar7) {
                            uVar6 = 3;
                            goto LAB_0010a1ba;
                          }
                          iVar3 = 0x40;
                          __size = 0x40;
                          uVar6 = 3;
                          if (iVar7 == 0) goto LAB_0010a18b;
                          puVar5 = (undefined *)realloc(DAT_0033c738,__size_00);
                          if (puVar5 == (undefined *)0x0) {
                            return 3;
                          }
                          puVar4 = puVar5 + iVar7;
                          _DAT_0033c730 = iVar1;
                          DAT_0033c738 = puVar5;
                          __c = _IO_getc(param_1);
                          ___c = (ulong)__c;
                          if (__c == 0xd) goto LAB_0010a6fa;
                          if ((int)__c < 0xe) {
                            if (__c == 9) goto LAB_0010a7d1;
                            if (__c != 10) goto LAB_0010a1f2;
                            goto LAB_0010a6fa;
                          }
                          if (__c == 0x21) break;
                          if ((int)__c < 0x22) {
                            if (__c == 0x20) goto LAB_0010a7d1;
                            goto LAB_0010a1fb;
                          }
                          if (__c != 0x22) goto LAB_0010a1e5;
                        }
LAB_0010a5c0:
                        _DAT_0033c758 = 5;
                        if (iVar7 == _DAT_0033c730) goto code_r0x0010a5cd;
LAB_0010a758:
                        _DAT_0033c758 = 5;
                        uVar6 = 3;
                        iVar3 = _IO_getc(param_1);
                        if (iVar3 == 0xd) goto LAB_0010a6fa;
                        if (iVar3 < 0xe) goto LAB_0010a503;
                        bVar8 = iVar3 == 0x21;
                        if (bVar8) {
LAB_0010a370:
                          if ((uVar6 != 0) && (uVar6 != 3)) goto LAB_0010a38b;
                          goto LAB_0010a5c0;
                        }
LAB_0010a779:
                        uVar6 = 3;
                        if (bVar8 || iVar3 < 0x21) goto LAB_0010a7c8;
                        if (iVar3 != 0x22) break;
                      } while( true );
                    }
joined_r0x0010a787:
                    uVar6 = 3;
                    if (iVar3 == 0x5c) goto LAB_0010a1ea;
                    goto LAB_0010a528;
                  }
LAB_0010a7c8:
                  if (iVar3 != 0x20) goto LAB_0010a528;
                }
LAB_0010a7d1:
                _DAT_0033c758 = 1;
                uVar6 = 3;
                puVar5 = puVar4;
                goto LAB_0010a172;
              }
LAB_0010a219:
              *puVar4 = uVar2;
              iVar7 = iVar7 + 1;
              puVar5 = puVar4 + 1;
            }
            goto LAB_0010a172;
          }
LAB_0010a430:
          _DAT_0033c758 = 3;
          if ((uVar6 == 0) || (__c = 0xffffffff, uVar6 == 3)) {
            *param_2 = 0;
            return 2;
          }
          goto LAB_0010a3cd;
        }
        goto LAB_0010a3b2;
      }
    }
    else {
      if (__c == 0x21) goto LAB_0010a370;
      if (0x21 < (int)__c) {
        if (__c == 0x22) goto LAB_0010a238;
        goto LAB_0010a1e5;
      }
      if (__c != 0x20) goto LAB_0010a1fb;
    }
    _DAT_0033c758 = 1;
    if (uVar6 == 1) {
LAB_0010a590:
      puVar5 = DAT_0033c738;
      _DAT_0033c758 = 1;
      *puVar4 = 0;
      *(undefined **)param_2 = puVar5;
      return 0;
    }
    puVar5 = puVar4;
    if ((uVar6 != 0) && (uVar6 != 3)) {
      uVar6 = 2;
      puVar5 = puVar4 + 1;
      *puVar4 = (char)__c;
      iVar7 = iVar7 + 1;
    }
  } while( true );
LAB_0010a254:
  do {
    _DAT_0033c758 = 0;
    if (_DAT_0033c730 != iVar7) {
      uVar6 = 1;
      goto LAB_0010a1ba;
    }
    iVar3 = 0x40;
    __size = 0x40;
    uVar6 = 1;
    if (iVar7 == 0) goto LAB_0010a18b;
    puVar5 = (undefined *)realloc(DAT_0033c738,__size_00);
    if (puVar5 == (undefined *)0x0) {
      return 3;
    }
    puVar4 = puVar5 + iVar7;
    _DAT_0033c730 = iVar1;
    DAT_0033c738 = puVar5;
    __c = _IO_getc(param_1);
    ___c = (ulong)__c;
    if (__c == 0xd) {
LAB_0010a80e:
      _DAT_0033c758 = 4;
      goto LAB_0010a3cd;
    }
    if ((int)__c < 0xe) {
      if (__c == 9) goto LAB_0010a590;
LAB_0010a805:
      __c = (uint)___c;
      if (__c == 10) goto LAB_0010a80e;
      goto LAB_0010a1f2;
    }
    if (__c == 0x21) goto LAB_0010a38b;
    if ((int)__c < 0x22) {
      if (__c == 0x20) goto LAB_0010a590;
      goto LAB_0010a1fb;
    }
    if (__c != 0x22) break;
LAB_0010a2e0:
    _DAT_0033c758 = 0;
    if (_DAT_0033c730 != iVar7) {
      uVar6 = 2;
      goto LAB_0010a1ba;
    }
    iVar3 = 0x40;
    __size = 0x40;
    uVar6 = 2;
    if (iVar7 == 0) goto LAB_0010a18b;
    puVar5 = (undefined *)realloc(DAT_0033c738,__size_00);
    if (puVar5 == (undefined *)0x0) {
      return 3;
    }
    puVar4 = puVar5 + iVar7;
    _DAT_0033c730 = iVar1;
    DAT_0033c738 = puVar5;
    __c = _IO_getc(param_1);
    ___c = (ulong)__c;
    uVar2 = (undefined)__c;
    if (__c == 0xd) goto LAB_0010a80e;
    if ((int)__c < 0xe) {
      if (__c != 9) goto LAB_0010a805;
LAB_0010a822:
      _DAT_0033c758 = 1;
      uVar6 = 2;
      goto LAB_0010a219;
    }
    if (__c == 0x21) goto LAB_0010a370;
    if ((int)__c < 0x22) {
      if (__c == 0x20) goto LAB_0010a822;
      goto LAB_0010a1fb;
    }
  } while (__c == 0x22);
LAB_0010a1e5:
  if ((int)___c != 0x5c) goto LAB_0010a1fb;
LAB_0010a1ea:
  __c = _IO_getc(param_1);
  ___c = (ulong)__c;
  goto LAB_0010a1f2;
code_r0x0010a5cd:
  iVar3 = 0x40;
  __size = 0x40;
  uVar6 = 3;
  if (iVar7 == 0) goto LAB_0010a18b;
LAB_0010a5e5:
  _DAT_0033c758 = 5;
  puVar5 = (undefined *)realloc(DAT_0033c738,__size_00);
  if (puVar5 == (undefined *)0x0) {
    return 3;
  }
  puVar4 = puVar5 + iVar7;
  _DAT_0033c730 = iVar1;
  DAT_0033c738 = puVar5;
  iVar3 = _IO_getc(param_1);
  if (iVar3 == 0xd) goto LAB_0010a6fa;
  if (iVar3 < 0xe) goto LAB_0010a410;
  if (iVar3 == 0x21) {
    _DAT_0033c758 = 5;
    uVar6 = 3;
    puVar5 = puVar4;
    goto LAB_0010a172;
  }
  if (iVar3 < 0x22) goto LAB_0010a7c8;
  if (iVar3 != 0x22) goto joined_r0x0010a787;
  goto LAB_0010a230;
LAB_0010a38b:
  _DAT_0033c758 = 5;
  *puVar4 = 0x21;
  iVar7 = iVar7 + 1;
  puVar5 = puVar4 + 1;
  goto LAB_0010a172;
}



undefined8 FontFileReadDirectory(char *param_1,long *param_2)

{
  int __fildes;
  uint uVar1;
  uint uVar2;
  int iVar3;
  size_t sVar4;
  char *__filename;
  FILE *__stream;
  long lVar5;
  undefined2 *puVar6;
  int *piVar7;
  long lVar8;
  byte bVar9;
  char cVar10;
  long lVar11;
  uint *puVar12;
  uint *puVar13;
  undefined8 uVar14;
  byte *pbVar15;
  long in_FS_OFFSET;
  bool bVar16;
  bool bVar17;
  byte bVar18;
  uint local_2184;
  char *local_2180;
  undefined *local_2178;
  undefined2 local_2170;
  undefined2 local_216e;
  stat local_2168;
  stat local_20d8;
  undefined local_2048 [1024];
  undefined local_1c48 [1023];
  char acStack6217 [1024];
  char cStack5193;
  uint local_1448 [256];
  uint local_1048 [256];
  undefined local_c48 [1024];
  char local_848 [1024];
  undefined local_448 [1032];
  long local_40;
  
  bVar18 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  sVar4 = strlen(param_1);
  if (sVar4 + 0xb < 0x401) {
    __filename = strchr(param_1,0x3a);
    if (__filename == (char *)0x0) {
      __memcpy_chk(local_1448,param_1,sVar4 + 1);
    }
    else {
      __strncpy_chk(local_1448,param_1,__filename + -(long)param_1);
      *(undefined *)
       ((long)((long)register0x00000020 + -0x1448) + (long)(__filename + -(long)param_1)) = 0;
    }
    __filename = acStack6217 + 1;
    puVar6 = (undefined2 *)__stpcpy_chk(__filename,local_1448,0x400);
    if (acStack6217[(long)((long)puVar6 - (long)__filename)] != '/') {
      *puVar6 = 0x2f;
    }
    __strcat_chk(__filename,"fonts.dir",0x400);
    __stream = fopen(__filename,"rt");
    if (__stream == (FILE *)0x0) {
      piVar7 = __errno_location();
      puVar13 = local_1448;
      if (*piVar7 == 2) {
        do {
          puVar12 = puVar13;
          uVar1 = *puVar12 + 0xfefefeff & ~*puVar12;
          uVar2 = uVar1 & 0x80808080;
          puVar13 = puVar12 + 1;
        } while (uVar2 == 0);
        bVar16 = (uVar1 & 0x8080) == 0;
        bVar9 = (byte)uVar2;
        if (bVar16) {
          bVar9 = (byte)(uVar2 >> 0x10);
        }
        if (bVar16) {
          puVar13 = (uint *)((long)puVar12 + 6);
        }
        if ((long)puVar13 + ((-3 - (ulong)CARRY1(bVar9,bVar9)) - (long)local_1448) < 0x400) {
          puVar6 = (undefined2 *)__stpcpy_chk(local_848,local_1448,0x400);
          puVar13 = local_1448;
          do {
            puVar12 = puVar13;
            uVar1 = *puVar12 + 0xfefefeff & ~*puVar12;
            uVar2 = uVar1 & 0x80808080;
            bVar9 = (byte)uVar2;
            puVar13 = puVar12 + 1;
          } while (uVar2 == 0);
          bVar16 = (uVar1 & 0x8080) == 0;
          if (bVar16) {
            bVar9 = (byte)(uVar2 >> 0x10);
          }
          if (bVar16) {
            puVar13 = (uint *)((long)puVar12 + 6);
          }
          lVar11 = (long)puVar13 + ((-3 - (ulong)CARRY1(bVar9,bVar9)) - (long)local_1448);
          if (lVar11 + 0xdU < 0x401) {
            lVar5 = 0;
            goto LAB_0010ac02;
          }
        }
      }
    }
    else {
      __fildes = fileno(__stream);
      __fildes = __fxstat(1,__fildes,&local_2168);
      if (((__fildes != -1) && (__fildes = fscanf(__stream,"%d\n",&local_2184), __fildes == 1)) &&
         (lVar5 = FontFileMakeDir(param_1,(ulong)local_2184), lVar5 != 0)) {
        *(__time_t *)(lVar5 + 8) = local_2168.st_mtim.tv_sec;
        if (DAT_0033c740 == '\0') {
          __sprintf_chk(&DAT_0033c740,1,0x18,"%%%ds %%%d[^\n]\n",0x3ff,0x3ff);
        }
        while (__fildes = fscanf(__stream,&DAT_0033c740,local_2048), __fildes != -1) {
          if (__fildes != 2) {
            uVar14 = 0x56;
            FontFileFreeDir(lVar5);
            fclose(__stream);
            goto LAB_0010aaed;
          }
          FontFileAddFontFile(lVar5,local_1c48,local_2048);
        }
        fclose(__stream);
        puVar13 = local_1448;
        do {
          puVar12 = puVar13;
          uVar1 = *puVar12 + 0xfefefeff & ~*puVar12;
          uVar2 = uVar1 & 0x80808080;
          puVar13 = puVar12 + 1;
        } while (uVar2 == 0);
        bVar16 = (uVar1 & 0x8080) == 0;
        bVar9 = (byte)uVar2;
        if (bVar16) {
          bVar9 = (byte)(uVar2 >> 0x10);
        }
        if (bVar16) {
          puVar13 = (uint *)((long)puVar12 + 6);
        }
        if ((long)puVar13 + ((-3 - (ulong)CARRY1(bVar9,bVar9)) - (long)local_1448) < 0x400) {
          puVar6 = (undefined2 *)__stpcpy_chk(local_848,local_1448,0x400);
          puVar13 = local_1448;
          do {
            puVar12 = puVar13;
            uVar1 = *puVar12 + 0xfefefeff & ~*puVar12;
            uVar2 = uVar1 & 0x80808080;
            bVar9 = (byte)uVar2;
            puVar13 = puVar12 + 1;
          } while (uVar2 == 0);
          bVar16 = (uVar1 & 0x8080) == 0;
          if (bVar16) {
            bVar9 = (byte)(uVar2 >> 0x10);
          }
          if (bVar16) {
            puVar13 = (uint *)((long)puVar12 + 6);
          }
          lVar11 = (long)puVar13 + ((-3 - (ulong)CARRY1(bVar9,bVar9)) - (long)local_1448);
          if (0x400 < lVar11 + 0xdU) goto LAB_0010aacc;
LAB_0010ac02:
          if ((&cStack5193)[lVar11] != '/') {
            *puVar6 = 0x2f;
          }
          __strcat_chk(local_848,"fonts.alias",0x400);
          __stream = fopen(local_848,"rt");
          if (__stream == (FILE *)0x0) {
            piVar7 = __errno_location();
            if (*piVar7 == 2) {
              if (lVar5 != 0) {
LAB_0010adb0:
                uVar14 = 0x55;
                FontFileSortDir(lVar5);
                *param_2 = lVar5;
                goto LAB_0010aaed;
              }
            }
            else {
              if (lVar5 != 0) goto LAB_0010aacc;
            }
            goto LAB_0010aae8;
          }
          if ((lVar5 == 0) && (lVar5 = FontFileMakeDir(local_1448), lVar5 == 0)) {
            uVar14 = 0x50;
            fclose(__stream);
            goto LAB_0010aaed;
          }
          __fildes = fileno(__stream);
          __fildes = __fxstat(1,__fildes,&local_20d8);
          if (__fildes == -1) {
            uVar14 = 0x56;
            fclose(__stream);
          }
          else {
            *(__time_t *)(lVar5 + 0x10) = local_20d8.st_mtim.tv_sec;
LAB_0010ac9b:
            do {
              __fildes = FUN_0010a150(__stream,&local_2180);
              __filename = local_2180;
              if (__fildes == 2) {
                fclose(__stream);
                goto LAB_0010adb0;
              }
              if (__fildes == 3) {
LAB_0010ae80:
                uVar14 = 0x50;
LAB_0010ae85:
                fclose(__stream);
                goto LAB_0010aad1;
              }
            } while (__fildes != 0);
            sVar4 = strlen(local_2180);
            if (0x3ff < sVar4) {
LAB_0010aee5:
              uVar14 = 0x56;
              goto LAB_0010ae85;
            }
            __memcpy_chk(local_1048,__filename,sVar4 + 1);
            __fildes = FUN_0010a150(__stream,&local_2180);
            bVar16 = __fildes == 0;
            bVar17 = __fildes == 1;
            if (bVar17) {
              lVar11 = 0x13;
              puVar13 = local_1048;
              pbVar15 = (byte *)"FILE_NAMES_ALIASES";
              do {
                if (lVar11 == 0) break;
                lVar11 = lVar11 + -1;
                bVar16 = *(byte *)puVar13 < *pbVar15;
                bVar17 = *(byte *)puVar13 == *pbVar15;
                puVar13 = (uint *)((long)puVar13 + (ulong)bVar18 * -2 + 1);
                pbVar15 = pbVar15 + (ulong)bVar18 * -2 + 1;
              } while (bVar17);
              cVar10 = (!bVar16 && !bVar17) - bVar16;
              __fildes = (int)cVar10;
              if (cVar10 != '\0') goto LAB_0010aee5;
              if (0 < *(int *)(lVar5 + 0x30)) {
                lVar11 = 0;
                do {
                  lVar8 = *(long *)(lVar5 + 0x38) + lVar11;
                  if (*(int *)(lVar8 + 0x10) == 2) {
                    __filename = *(char **)(lVar8 + 0x20);
                    lVar8 = FontFileMatchRenderer(__filename);
                    if (lVar8 != 0) {
                      sVar4 = strlen(__filename);
                      uVar1 = (int)sVar4 - *(int *)(lVar8 + 8);
                      if (uVar1 < 0x400) {
                        FUN_0010cce0(local_448,__filename,(ulong)uVar1);
                        local_448[(int)uVar1] = 0;
                        local_2170 = (undefined2)uVar1;
                        local_2178 = local_448;
                        local_216e = FontFileCountDashes(local_448,(ulong)uVar1);
                        lVar8 = FontFileFindNameInDir(lVar5 + 0x30,&local_2178);
                        if ((lVar8 == 0) &&
                           (iVar3 = FontFileAddFontAlias
                                              (lVar5,local_448,
                                               *(undefined8 *)(*(long *)(lVar5 + 0x38) + lVar11)),
                           iVar3 == 0)) goto LAB_0010ad12;
                      }
                    }
                  }
                  __fildes = __fildes + 1;
                  lVar11 = lVar11 + 0x98;
                } while (__fildes < *(int *)(lVar5 + 0x30));
              }
              goto LAB_0010ac9b;
            }
            if (__fildes < 2) {
              if (__fildes == 0) {
                sVar4 = strlen(local_2180);
                puVar13 = local_1048;
                if (0x3ff < sVar4) goto LAB_0010aee5;
                do {
                  puVar12 = puVar13;
                  uVar2 = *puVar12 + 0xfefefeff & ~*puVar12;
                  uVar1 = uVar2 & 0x80808080;
                  puVar13 = puVar12 + 1;
                } while (uVar1 == 0);
                bVar16 = (uVar2 & 0x8080) == 0;
                if (bVar16) {
                  uVar1 = uVar1 >> 0x10;
                }
                if (bVar16) {
                  puVar13 = (uint *)((long)puVar12 + 6);
                }
                FUN_0010cce0(local_1048,local_1048,
                             (long)puVar13 +
                             ((-3 - (ulong)CARRY1((byte)uVar1,(byte)uVar1)) - (long)local_1048),
                             (ulong)(uVar1 & 0xffffff00));
                __filename = local_2180;
                sVar4 = strlen(local_2180);
                FUN_0010cce0(local_c48,__filename,sVar4 & 0xffffffff);
                __fildes = FontFileAddFontAlias(lVar5,local_1048,local_c48,local_c48);
                if (__fildes == 0) goto LAB_0010ae80;
              }
              goto LAB_0010ac9b;
            }
            if (__fildes == 2) goto LAB_0010aee5;
            if (__fildes != 3) goto LAB_0010ac9b;
LAB_0010ad12:
            uVar14 = 0x50;
            fclose(__stream);
          }
        }
        else {
LAB_0010aacc:
          uVar14 = 0x56;
        }
LAB_0010aad1:
        FontFileFreeDir(lVar5);
        goto LAB_0010aaed;
      }
      fclose(__stream);
    }
  }
LAB_0010aae8:
  uVar14 = 0x56;
LAB_0010aaed:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar14;
}



ulong FontFileDirectoryChanged(char **param_1)

{
  char *__s;
  int iVar1;
  size_t sVar2;
  ulong uVar3;
  int *piVar4;
  long in_FS_OFFSET;
  stat sStack1224;
  undefined8 local_438;
  undefined4 auStack1072 [256];
  long local_30;
  
  __s = *param_1;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  sVar2 = strlen(__s);
  if (sVar2 + 10 < 0x401) {
    __memcpy_chk(&local_438,__s,sVar2,0x400);
    *(undefined8 *)((long)&local_438 + sVar2) = 0x69642e73746e6f66;
    *(undefined2 *)((long)auStack1072 + sVar2) = 0x72;
    iVar1 = __xstat(1,(char *)&local_438,&sStack1224);
    if (iVar1 == -1) {
      piVar4 = __errno_location();
      if (*piVar4 == 2) {
        uVar3 = (ulong)(param_1[1] != (char *)0x0);
        goto LAB_0010b051;
      }
    }
    else {
      if (param_1[1] == sStack1224.st_mtim.tv_sec) {
        __s = *param_1;
        sVar2 = strlen(__s);
        if (0x400 < sVar2 + 0xc) goto LAB_0010b04f;
        __memcpy_chk(&local_438,__s,sVar2,0x400);
        *(undefined4 *)((long)auStack1072 + sVar2) = 0x736169;
        *(undefined8 *)((long)&local_438 + sVar2) = 0x6c612e73746e6f66;
        iVar1 = __xstat(1,(char *)&local_438,&sStack1224);
        if (iVar1 != -1) {
          uVar3 = (ulong)(param_1[2] != sStack1224.st_mtim.tv_sec);
          goto LAB_0010b051;
        }
        piVar4 = __errno_location();
        if (*piVar4 == 2) {
          uVar3 = (ulong)(param_1[2] != (char *)0x0);
          goto LAB_0010b051;
        }
      }
    }
    uVar3 = 1;
  }
  else {
LAB_0010b04f:
    uVar3 = 0;
  }
LAB_0010b051:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long FontFileOpen(char *param_1)

{
  int __fd;
  uint uVar1;
  long lVar2;
  size_t sVar3;
  long lVar4;
  byte *pbVar5;
  byte *pbVar6;
  bool bVar7;
  bool bVar8;
  byte bVar9;
  
  bVar9 = 0;
  __fd = open(param_1,0);
  if (__fd < 0) {
    return 0;
  }
  lVar2 = BufFileOpenRead();
  if (lVar2 == 0) {
    close(__fd);
  }
  else {
    sVar3 = strlen(param_1);
    uVar1 = (uint)sVar3;
    bVar7 = uVar1 < 2;
    bVar8 = uVar1 == 2;
    if (2 < (int)uVar1) {
      lVar4 = 3;
      pbVar5 = (byte *)(param_1 + (long)(int)uVar1 + -2);
      pbVar6 = &DAT_001310c2;
      do {
        if (lVar4 == 0) break;
        lVar4 = lVar4 + -1;
        bVar7 = *pbVar5 < *pbVar6;
        bVar8 = *pbVar5 == *pbVar6;
        pbVar5 = pbVar5 + (ulong)bVar9 * -2 + 1;
        pbVar6 = pbVar6 + (ulong)bVar9 * -2 + 1;
      } while (bVar8);
      if ((!bVar7 && !bVar8) == bVar7) {
        lVar4 = BufFilePushCompressed(lVar2);
      }
      else {
        bVar7 = uVar1 < 3;
        bVar8 = uVar1 == 3;
        if (bVar8) {
          return lVar2;
        }
        lVar4 = 4;
        pbVar5 = (byte *)(param_1 + (long)(int)uVar1 + -3);
        pbVar6 = &DAT_001310c9;
        do {
          if (lVar4 == 0) break;
          lVar4 = lVar4 + -1;
          bVar7 = *pbVar5 < *pbVar6;
          bVar8 = *pbVar5 == *pbVar6;
          pbVar5 = pbVar5 + (ulong)bVar9 * -2 + 1;
          pbVar6 = pbVar6 + (ulong)bVar9 * -2 + 1;
        } while (bVar8);
        if ((!bVar7 && !bVar8) != bVar7) {
          return lVar2;
        }
        lVar4 = BufFilePushZIP(lVar2);
      }
      if (lVar4 != 0) {
        return lVar4;
      }
      BufFileClose(lVar2,1);
      lVar2 = 0;
    }
  }
  return lVar2;
}



void FontFileClose(undefined8 param_1)

{
  BufFileClose(param_1,1);
  return;
}



long * FontFileOpenWrite(char *param_1)

{
  int iVar1;
  long *plVar2;
  
  iVar1 = creat(param_1,0x1b6);
  if (iVar1 < 0) {
    return (long *)0;
  }
  plVar2 = (long *)BufFileCreate((long)iVar1,0,&LAB_00109840,0,&LAB_001096c0);
  *(undefined4 *)(plVar2 + 1) = 0x2000;
  *(long **)plVar2 = plVar2 + 2;
  return plVar2;
}



void FontFileOpenWriteFd(int param_1)

{
  long *plVar1;
  
  plVar1 = (long *)BufFileCreate((long)param_1,0,&LAB_00109840,0,&LAB_001096c0);
  *(undefined4 *)(plVar1 + 1) = 0x2000;
  *(long **)plVar1 = plVar1 + 2;
  return;
}



void FontFileOpenFd(int param_1)

{
  BufFileCreate((long)param_1,&LAB_00109720,0,&LAB_00109760,&LAB_001096f0);
  return;
}



ulong FUN_0010b2f0(byte *param_1,byte *param_2)

{
  byte bVar1;
  byte bVar2;
  bool bVar3;
  byte bVar4;
  byte *pbVar5;
  byte *pbVar6;
  
  bVar3 = false;
  while( true ) {
    bVar1 = *param_1;
    bVar2 = *param_2;
    if (bVar1 == 0) {
      return (ulong)-(uint)(bVar2 != 0);
    }
    if (((byte)(bVar1 - 0x30) < 10) && ((byte)(bVar2 - 0x30) < 10)) {
      pbVar5 = param_1;
      pbVar6 = param_2;
      if (!bVar3) {
        while( true ) {
          bVar4 = pbVar6[1] - 0x30;
          if (9 < (byte)(pbVar5[1] - 0x30)) break;
          pbVar5 = pbVar5 + 1;
          pbVar6 = pbVar6 + 1;
          if (9 < bVar4) {
            return 1;
          }
        }
        if (bVar4 < 10) {
          return 0xffffffff;
        }
        bVar3 = true;
      }
    }
    else {
      bVar3 = false;
    }
    if (bVar1 < bVar2) break;
    if (bVar2 < bVar1) {
      return 1;
    }
    param_1 = param_1 + 1;
    param_2 = param_2 + 1;
  }
  return 0xffffffff;
}



ulong FUN_0010b3a0(uint *param_1,char *param_2,short param_3,int *param_4,uint *param_5,int *param_6
                  )

{
  char *pcVar1;
  char cVar2;
  long lVar3;
  int iVar4;
  char *pcVar5;
  uint uVar6;
  int iVar7;
  char *pcVar8;
  int iVar9;
  char *pcVar10;
  ulong uVar11;
  ulong uVar12;
  int iVar13;
  
  pcVar8 = (char *)0x0;
  pcVar1 = param_2;
  pcVar10 = (char *)0;
  while( true ) {
    pcVar5 = pcVar1;
    pcVar1 = pcVar5 + 1;
    cVar2 = *pcVar5;
    if (cVar2 == '\0') break;
    if ((cVar2 == '*' || cVar2 == '?') && (pcVar8 == (char *)0x0)) {
      pcVar8 = pcVar5;
    }
    if (((byte)(cVar2 - 0x30U) < 10) && (pcVar10 == (char *)0x0)) {
      pcVar10 = pcVar5;
    }
  }
  uVar6 = *param_1;
  uVar12 = (ulong)uVar6;
  if (pcVar8 == (char *)0x0) {
    *param_6 = -1;
    if (param_1[4] != 0) {
      uVar11 = 0;
      while ((int)uVar11 < (int)uVar12) {
        lVar3 = *(long *)(param_1 + 2);
        while( true ) {
          uVar6 = ((int)uVar11 + (int)uVar12) / 2;
          iVar7 = FUN_0010b2f0(param_2,*(undefined8 *)(lVar3 + (long)(int)uVar6 * 0x98));
          if (iVar7 == 0) {
            return (ulong)uVar6;
          }
          if (-1 < iVar7) break;
          uVar12 = (long)(int)uVar6 & 0xffffffff;
          if ((int)uVar6 <= (int)uVar11) goto LAB_0010b4b0;
        }
        uVar11 = (ulong)(uVar6 + 1);
      }
LAB_0010b4b0:
      *param_4 = 1;
      *param_5 = 0;
      return 0xffffffff;
    }
  }
  else {
    *param_6 = (int)param_3;
    if (param_1[4] != 0) {
      if ((pcVar10 == (char *)0x0) || (pcVar8 <= pcVar10)) {
        iVar7 = (int)pcVar8 - (int)param_2;
      }
      else {
        iVar7 = (int)pcVar10 - (int)param_2;
      }
      iVar13 = 0;
      while (uVar6 = (uint)uVar12, iVar13 < (int)uVar6) {
        lVar3 = *(long *)(param_1 + 2);
        while( true ) {
          uVar6 = (uint)uVar12;
          iVar9 = (int)(uVar6 + iVar13) / 2;
          iVar4 = strncmp(param_2,*(char **)(lVar3 + (long)iVar9 * 0x98),(long)iVar7);
          if (iVar4 == 0) goto LAB_0010b53e;
          if (-1 < iVar4) break;
          uVar12 = (long)iVar9 & 0xffffffff;
          uVar6 = (uint)uVar12;
          if (iVar9 <= iVar13) goto LAB_0010b53e;
        }
        iVar13 = iVar9 + 1;
      }
LAB_0010b53e:
      *param_4 = iVar13;
      *param_5 = uVar6;
      return 0xffffffff;
    }
  }
  *param_4 = 0;
  *param_5 = uVar6;
  return 0xffffffff;
}



ulong FUN_0010b570(char *param_1,uint param_2,char *param_3,uint param_4)

{
  char cVar1;
  char cVar2;
  int iVar3;
  undefined8 uVar4;
  char *pcVar5;
  uint uVar6;
  ulong uVar7;
  int iVar8;
  uint uVar9;
  ulong uVar10;
  bool bVar11;
  
  uVar10 = (ulong)param_2;
  uVar7 = (ulong)param_4;
  cVar1 = *param_1;
  cVar2 = cVar1 + -0x2a;
  bVar11 = cVar1 == '*';
  while (iVar8 = (int)uVar10, !bVar11) {
    if (bVar11 || SBORROW1(cVar1,'*') != cVar2 < '\0') {
      if (cVar1 == '\0') {
        return (ulong)(*param_3 == '\0');
      }
LAB_0010b648:
      if (cVar1 != *param_3) {
        return 0;
      }
    }
    else {
      if (cVar1 == '-') {
        if (*param_3 != '-') {
          return 0;
        }
        uVar10 = (ulong)(iVar8 - 1);
        uVar7 = (ulong)((int)uVar7 - 1);
      }
      else {
        if (cVar1 != '?') goto LAB_0010b648;
        uVar7 = (ulong)((int)uVar7 - (uint)(*param_3 == '-'));
      }
    }
    param_1 = param_1 + 1;
    cVar1 = *param_1;
    param_3 = param_3 + 1;
    cVar2 = cVar1 + -0x2a;
    bVar11 = cVar2 == '\0';
  }
  cVar1 = param_1[1];
  uVar4 = 1;
  if (cVar1 != '\0') {
    if (cVar1 == '-') {
      uVar9 = iVar8 - 1;
      do {
        do {
          while( true ) {
            pcVar5 = param_3 + 1;
            cVar1 = *param_3;
            param_3 = pcVar5;
            if (cVar1 == '-') break;
            if (cVar1 == '\0') {
              return 0;
            }
          }
          uVar6 = (int)uVar7 - 1;
          uVar7 = (ulong)uVar6;
        } while ((int)uVar6 < (int)uVar9);
        uVar4 = FUN_0010b570(param_1 + 2,(ulong)uVar9,pcVar5,uVar7);
        if ((int)uVar4 != 0) goto LAB_0010b629;
      } while (uVar9 != uVar6);
    }
    else {
LAB_0010b5e0:
      do {
        cVar2 = *param_3;
        while( true ) {
          param_3 = param_3 + 1;
          iVar3 = (int)uVar7;
          if (cVar1 == cVar2) break;
          if (cVar2 == '\0') {
            return 0;
          }
          if (cVar2 != '-') goto LAB_0010b5e0;
          if (iVar3 < iVar8) {
            return 0;
          }
          uVar7 = (ulong)(iVar3 - 1);
          cVar2 = *param_3;
        }
      } while ((iVar3 < iVar8) ||
              (iVar3 = FUN_0010b570(param_1 + 2,uVar10,param_3,uVar7), iVar3 == 0));
LAB_0010b629:
      uVar4 = 1;
    }
  }
  return uVar4;
}



undefined8 FontFileInitTable(undefined4 *param_1,uint param_2)

{
  void *pvVar1;
  
  if (0xd79435 < param_2) {
    return 0;
  }
  if (param_2 == 0) {
    *(undefined8 *)(param_1 + 2) = 0;
  }
  else {
    pvVar1 = malloc((long)(int)param_2 * 0x98);
    *(void **)(param_1 + 2) = pvVar1;
    if (pvVar1 == (void *)0x0) {
      return 0;
    }
  }
  *param_1 = 0;
  param_1[1] = param_2;
  param_1[4] = 0;
  return 1;
}



void FontFileFreeEntry(void **param_1)

{
  void *__ptr;
  void *__ptr_00;
  void *__ptr_01;
  int iVar1;
  long lVar2;
  
  if (*param_1 != (void *)0x0) {
    free(*param_1);
  }
  iVar1 = *(int *)(param_1 + 2);
  *param_1 = (void *)0x0;
  if (iVar1 == 2) {
    free(param_1[4]);
    param_1[4] = (void *)0x0;
    return;
  }
  if (iVar1 == 3) {
    free(param_1[3]);
    param_1[3] = (void *)0x0;
    return;
  }
  if (iVar1 != 0) {
    return;
  }
  free(param_1[4]);
  __ptr = param_1[5];
  __ptr_01 = *(void **)((long)__ptr + 0x80);
  if (0 < *(int *)((long)__ptr + 0x78)) {
    lVar2 = 0;
    do {
      __ptr_00 = *(void **)((long)__ptr_01 + lVar2 + 0x70);
      if (__ptr_00 != (void *)0x0) {
        free(__ptr_00);
        __ptr_01 = *(void **)((long)__ptr + 0x80);
      }
      iVar1 = iVar1 + 1;
      lVar2 = lVar2 + 0x88;
    } while (iVar1 < *(int *)((long)__ptr + 0x78));
  }
  free(__ptr_01);
  free(__ptr);
  return;
}



void FontFileFreeTable(int *param_1)

{
  int iVar1;
  long lVar2;
  long lVar3;
  
  if (0 < *param_1) {
    lVar2 = 0;
    iVar1 = 0;
    do {
      iVar1 = iVar1 + 1;
      lVar3 = *(long *)(param_1 + 2) + lVar2;
      lVar2 = lVar2 + 0x98;
      FontFileFreeEntry(lVar3);
    } while (*param_1 != iVar1 && iVar1 <= *param_1);
  }
  free(*(void **)(param_1 + 2));
  return;
}



char ** FontFileMakeDir(char *param_1,uint param_2)

{
  int iVar1;
  char *__s;
  size_t sVar2;
  char **__ptr;
  char *pcVar3;
  long lVar4;
  size_t __n;
  char **ppcVar5;
  int iVar6;
  bool bVar7;
  
  __s = strchr(param_1,0x3a);
  if (__s == (char *)0x0) {
    __n = strlen(param_1);
    __n = SEXT48((int)__n);
    if (param_1[__n - 1] == '/') {
      iVar6 = 0;
      bVar7 = false;
      lVar4 = 0;
      sVar2 = __n;
    }
    else {
      iVar6 = 0;
      bVar7 = true;
      lVar4 = 0;
      sVar2 = __n + 1;
    }
  }
  else {
    __n = SEXT48((int)__s - (int)param_1);
    sVar2 = strlen(__s);
    bVar7 = param_1[__n - 1] != '/';
    iVar6 = (int)sVar2;
    lVar4 = 0;
    sVar2 = bVar7 + __n;
    if (iVar6 != 0) {
      lVar4 = (long)(iVar6 + 1);
    }
  }
  __ptr = (char **)malloc(sVar2 + 0x51 + lVar4);
  ppcVar5 = __ptr;
  if (__ptr != (char **)0x0) {
    iVar1 = FontFileInitTable(__ptr + 3,0);
    if (iVar1 != 0) {
      iVar1 = FontFileInitTable(__ptr + 6,(ulong)param_2);
      if (iVar1 != 0) {
        __ptr[1] = (char *)0x0;
        __ptr[2] = (char *)0x0;
        pcVar3 = (char *)((long)__ptr + sVar2 + 0x51);
        *(char ***)__ptr = __ptr + 10;
        if (iVar6 == 0) {
          pcVar3 = (char *)0x0;
        }
        __ptr[9] = pcVar3;
        pcVar3 = strncpy((char *)(__ptr + 10),param_1,__n);
        pcVar3[__n] = '\0';
        if (__ptr[9] != (char *)0x0) {
          strcpy(__ptr[9],__s);
        }
        if (!bVar7) {
          return __ptr;
        }
        __s = *__ptr;
        __n = strlen(__s);
        *(undefined2 *)(__s + __n) = 0x2f;
        return __ptr;
      }
      FontFileFreeTable(__ptr + 3);
    }
    ppcVar5 = (char **)0x0;
    free(__ptr);
  }
  return ppcVar5;
}



void FontFileFreeDir(void *param_1)

{
  FontFileFreeTable((long)param_1 + 0x18);
  FontFileFreeTable((long)param_1 + 0x30);
  free(param_1);
  return;
}



void ** FontFileAddEntry(uint *param_1,void **param_2)

{
  void **ppvVar1;
  undefined auVar2 [16];
  uint uVar3;
  void *__ptr;
  ulong uVar4;
  
  if (param_1[4] == 0) {
    uVar3 = *param_1;
    uVar4 = (ulong)uVar3;
    __ptr = *(void **)(param_1 + 2);
    if (uVar3 == param_1[1]) {
      __ptr = realloc(__ptr,(long)(int)(uVar3 + 100) * 0x98);
      if (__ptr == (void *)0x0) {
        return (void **)0;
      }
      param_1[1] = uVar3 + 100;
      *(void **)(param_1 + 2) = __ptr;
      uVar4 = SEXT48((int)*param_1);
    }
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)param_2;
    ppvVar1 = (void **)((long)__ptr + uVar4 * 0x98);
    *(int *)ppvVar1 = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 4) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 1) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0xc) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 2);
    *(int *)(ppvVar1 + 2) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x14) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 3) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x1c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 4);
    *(int *)(ppvVar1 + 4) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x24) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 5) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x2c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 6);
    *(int *)(ppvVar1 + 6) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x34) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 7) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x3c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 8);
    *(int *)(ppvVar1 + 8) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x44) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 9) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x4c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 10);
    *(int *)(ppvVar1 + 10) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x54) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 0xb) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x5c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 0xc);
    *(int *)(ppvVar1 + 0xc) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 100) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 0xd) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x6c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 0xe);
    *(int *)(ppvVar1 + 0xe) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x74) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 0xf) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x7c) = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar2 = *(undefined *)(param_2 + 0x10);
    *(int *)(ppvVar1 + 0x10) = SUB164(auVar2,0);
    *(undefined4 *)((long)ppvVar1 + 0x84) = SUB164(auVar2 >> 0x20,0);
    *(int *)(ppvVar1 + 0x11) = SUB164(auVar2 >> 0x40,0);
    *(undefined4 *)((long)ppvVar1 + 0x8c) = SUB164(auVar2 >> 0x60,0);
    ppvVar1[0x12] = param_2[0x12];
    __ptr = malloc((long)((int)*(short *)(param_2 + 1) + 1));
    *ppvVar1 = __ptr;
    if (__ptr != (void *)0x0) {
      memcpy(__ptr,*param_2,(long)*(short *)(param_2 + 1));
      *(undefined *)((long)*ppvVar1 + (long)*(short *)(ppvVar1 + 1)) = 0;
      *param_1 = *param_1 + 1;
      return ppvVar1;
    }
  }
  return (void **)0;
}



void FontFileSortTable(int *param_1)

{
  if (param_1[4] != 0) {
    return;
  }
  qsort(*(void **)(param_1 + 2),(long)*param_1,0x98,(__compar_fn_t)&LAB_0010b390);
  param_1[4] = 1;
  return;
}



void FontFileSortDir(long param_1)

{
  long *plVar1;
  long lVar2;
  long *plVar3;
  long **pplVar4;
  int iVar5;
  int iVar6;
  long *plVar7;
  int iVar8;
  
  FontFileSortTable(param_1 + 0x18);
  FontFileSortTable(param_1 + 0x30);
  plVar1 = *(long **)(param_1 + 0x38);
  if (*(int *)(param_1 + 0x18) < 1) {
    return;
  }
  plVar7 = (long *)(*(long *)(param_1 + 0x20) + 0x28);
  iVar8 = 0;
  do {
    lVar2 = *plVar7;
    if (0 < *(int *)(lVar2 + 0x78)) {
      pplVar4 = (long **)(*(long *)(lVar2 + 0x80) + 0x78);
      iVar6 = 0;
      do {
        iVar5 = 0;
        plVar3 = plVar1;
        if (0 < *(int *)(param_1 + 0x30)) {
          do {
            while ((long *)*plVar3 != *pplVar4) {
              iVar5 = iVar5 + 1;
              plVar3 = plVar3 + 0x13;
              if (*(int *)(param_1 + 0x30) == iVar5 || *(int *)(param_1 + 0x30) < iVar5)
              goto LAB_0010ea77;
            }
            *pplVar4 = plVar3;
            iVar5 = iVar5 + 1;
            plVar3 = plVar3 + 0x13;
          } while (*(int *)(param_1 + 0x30) != iVar5 && iVar5 <= *(int *)(param_1 + 0x30));
        }
LAB_0010ea77:
        iVar6 = iVar6 + 1;
        pplVar4 = pplVar4 + 0x11;
      } while (*(int *)(lVar2 + 0x78) != iVar6 && iVar6 <= *(int *)(lVar2 + 0x78));
    }
    iVar8 = iVar8 + 1;
    plVar7 = plVar7 + 0x13;
    if (*(int *)(param_1 + 0x18) == iVar8 || *(int *)(param_1 + 0x18) < iVar8) {
      return;
    }
  } while( true );
}



ulong FontFileCountDashes(char *param_1,uint param_2)

{
  ulong uVar1;
  char *pcVar2;
  char *pcVar3;
  
  uVar1 = 0;
  pcVar2 = param_1 + param_2;
  do {
    pcVar3 = param_1;
    if (param_1 == pcVar2) {
      return uVar1;
    }
    while (param_1 = pcVar3 + 1, *pcVar3 == '-') {
      uVar1 = (ulong)((int)uVar1 + 1);
      pcVar3 = param_1;
      if (param_1 == pcVar2) {
        return uVar1;
      }
    }
  } while( true );
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * FontFileSaveString(char *__s)

{
  char *pcVar1;
  
  pcVar1 = strdup(__s);
  return pcVar1;
}



undefined8 * FontFileFindNameInScalableDir(long param_1,undefined8 *param_2,uint *param_3)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  uint uVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  ulong uVar7;
  undefined8 uVar8;
  long in_FS_OFFSET;
  int local_2c;
  int local_28;
  uint local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(param_1 + 8) != 0) {
    iVar3 = FUN_0010b3a0(param_1,*param_2,(ulong)*(ushort *)((long)param_2 + 10),&local_2c,&local_28
                        );
    if (-1 < iVar3) {
      puVar6 = (undefined8 *)(*(long *)(param_1 + 8) + (long)iVar3 * 0x98);
      goto LAB_0010bc3d;
    }
    if (local_2c < local_28) {
      lVar2 = *(long *)(param_1 + 8);
      uVar7 = (ulong)local_24;
      uVar8 = *param_2;
      puVar5 = (undefined8 *)(lVar2 + (long)local_2c * 0x98);
      do {
        if ((int)uVar7 <= (int)*(short *)((long)puVar5 + 10)) {
          puVar6 = puVar5;
          iVar3 = FUN_0010b570(uVar8,uVar7 & 0xffffffff,*puVar5);
          if (iVar3 < 1) {
            if (iVar3 != 0) break;
          }
          else {
            if (param_3 == (uint *)0x0) goto LAB_0010bc3d;
            uVar1 = *param_3;
            if (*(int *)(puVar5 + 2) == 0) {
              uVar4 = *(uint *)(puVar5[3] + 0x34);
            }
            else {
              uVar4 = -(uint)(*(int *)(puVar5 + 2) == 3);
            }
            if (((((uVar1 & 3) != 2) && ((uVar1 & 0xc) != 8)) || ((uVar4 & 1) != 0)) &&
               (((uVar1 & 0x40) == 0 || ((uVar4 & 2) != 0)))) goto LAB_0010bc3d;
          }
        }
        puVar5 = puVar5 + 0x13;
      } while (puVar5 != (undefined8 *)
                         (lVar2 + 0x98 +
                         ((long)local_2c + (ulong)(uint)((local_28 + -1) - local_2c)) * 0x98));
    }
  }
  puVar6 = (undefined8 *)0x0;
LAB_0010bc3d:
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return puVar6;
}



void FontFileFindNameInDir(undefined8 param_1,undefined8 param_2)

{
  FontFileFindNameInScalableDir(param_1,param_2,0);
  return;
}



ulong FontFileFindNamesInScalableDir
                (long param_1,undefined8 *param_2,int param_3,int *param_4,uint *param_5,
                uint param_6,int *param_7)

{
  int *piVar1;
  char *__s;
  uint uVar2;
  int iVar3;
  size_t sVar4;
  ulong uVar5;
  uint uVar6;
  undefined8 uVar7;
  ulong uVar8;
  undefined8 *puVar9;
  long in_FS_OFFSET;
  uint local_c4;
  int local_c0;
  uint local_bc;
  byte local_b8 [120];
  long local_40;
  
  uVar5 = 0x55;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (0 < param_3) {
    uVar2 = FUN_0010b3a0(param_1,*param_2,(ulong)*(ushort *)((long)param_2 + 10),&local_c4,&local_c0
                         ,&local_bc);
    uVar8 = (ulong)uVar2;
    if ((int)uVar2 < 0) {
      uVar8 = SEXT48((int)local_c4);
      puVar9 = (undefined8 *)(*(long *)(param_1 + 8) + uVar8 * 0x98);
    }
    else {
      puVar9 = (undefined8 *)(*(long *)(param_1 + 8) + (long)(int)uVar2 * 0x98);
      if ((param_6 == 0) || (*(int *)(puVar9 + 2) != 3)) {
        if (param_7 != (int *)0x0) {
          *param_7 = param_3 + -1;
        }
        uVar2 = AddFontNamesName(param_4,*puVar9,(ulong)(uint)(int)*(short *)(puVar9 + 1));
        uVar5 = (ulong)uVar2;
        goto LAB_0010be34;
      }
      local_c0 = uVar2 + 1;
      local_c4 = uVar2;
    }
    if ((int)uVar8 < local_c0) {
      do {
        if ((int)local_bc <= (int)*(short *)((long)puVar9 + 10)) {
          uVar7 = *puVar9;
          iVar3 = FUN_0010b570(*param_2,(ulong)local_bc,uVar7);
          if (iVar3 < 1) {
            if (iVar3 != 0) break;
          }
          else {
            if (param_5 != (uint *)0x0) {
              uVar2 = *param_5;
              if (*(int *)(puVar9 + 2) == 0) {
                uVar6 = *(uint *)(puVar9[3] + 0x34);
              }
              else {
                uVar6 = -(uint)(*(int *)(puVar9 + 2) == 3);
              }
              if (((((uVar2 & 3) == 2) || ((uVar2 & 0xc) == 8)) && ((uVar6 & 1) == 0)) ||
                 (((uVar2 & 0x40) != 0 && ((uVar6 & 2) == 0)))) goto LAB_0010be98;
            }
            if (((param_6 & 2) != 0) && (*(int *)(puVar9 + 2) == 3)) {
              iVar3 = FontParseXLFDName(uVar7,local_b8,0);
              if ((iVar3 != 0) && ((local_b8[0] & 0xf) == 0)) goto LAB_0010be98;
              uVar7 = *puVar9;
            }
            uVar2 = AddFontNamesName(param_4,uVar7,(ulong)(uint)(int)*(short *)(puVar9 + 1));
            uVar5 = (ulong)uVar2;
            if (uVar2 != 0x55) goto LAB_0010bf50;
            if (((param_6 & 1) != 0) && (*(int *)(puVar9 + 2) == 3)) {
              piVar1 = (int *)(*(long *)(param_4 + 2) + -4 + (long)*param_4 * 4);
              *piVar1 = -*piVar1;
              __s = (char *)puVar9[3];
              sVar4 = strlen(__s);
              uVar2 = AddFontNamesName(param_4,__s,sVar4 & 0xffffffff);
              if (uVar2 != 0x55) {
                uVar5 = (ulong)uVar2;
                goto LAB_0010bf50;
              }
            }
            uVar5 = 0x55;
            param_3 = param_3 + -1;
            if (param_3 == 0) goto LAB_0010bf50;
          }
        }
LAB_0010be98:
        uVar2 = (int)uVar8 + 1;
        puVar9 = puVar9 + 0x13;
        uVar8 = (ulong)uVar2;
      } while ((int)uVar2 < local_c0);
    }
    uVar5 = 0x55;
LAB_0010bf50:
    if (param_7 != (int *)0x0) {
      *param_7 = param_3;
    }
  }
LAB_0010be34:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar5;
}



void FontFileFindNamesInDir(void)

{
  FontFileFindNamesInScalableDir();
  return;
}



ulong FontFileMatchName(undefined8 param_1,undefined2 param_2,undefined8 param_3)

{
  long lVar1;
  long in_FS_OFFSET;
  undefined8 local_c8;
  undefined8 *local_c0;
  undefined4 local_b8;
  undefined8 local_a8;
  undefined2 local_a0;
  undefined2 local_9e;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_c8 = 0x100000001;
  local_c0 = &local_a8;
  local_b8 = 1;
  local_a8 = param_1;
  local_a0 = param_2;
  local_9e = FontFileCountDashes();
  lVar1 = FontFileFindNameInDir(&local_c8,param_3);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return (ulong)(lVar1 != 0);
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FontFileAddFontFile(long param_1,char *param_2,char *param_3)

{
  uint *puVar1;
  bool bVar2;
  uint uVar3;
  int iVar4;
  long lVar5;
  size_t sVar6;
  char *pcVar7;
  ushort *puVar8;
  char *__s;
  long lVar9;
  uint uVar10;
  ulong uVar11;
  byte *__s_00;
  byte *pbVar12;
  undefined8 *puVar13;
  undefined8 *__ptr;
  undefined8 uVar14;
  undefined8 *puVar15;
  long in_FS_OFFSET;
  bool bVar16;
  bool bVar17;
  byte bVar18;
  double dVar19;
  int local_1dc;
  uint local_1d8;
  undefined auStack468 [12];
  undefined local_1c8 [16];
  undefined local_1b8 [16];
  undefined local_1a8 [16];
  double local_198;
  undefined8 uStack400;
  uint local_188;
  uint uStack388;
  undefined8 uStack384;
  undefined local_178 [16];
  undefined8 local_168;
  undefined4 local_158;
  undefined8 local_154;
  uint local_108;
  uint local_104;
  undefined8 local_e8;
  char *local_d8;
  short local_d0;
  short local_ce;
  undefined4 local_c8;
  long local_c0;
  char *local_b8;
  undefined8 *local_b0;
  long local_40;
  
  bVar18 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar5 = FontFileMatchRenderer(param_3);
  if (lVar5 != 0) {
    sVar6 = strlen(param_2);
    local_d0 = (short)sVar6;
    if (local_d0 < 0x401) {
      uVar11 = (ulong)(uint)(int)local_d0;
    }
    else {
      uVar11 = 0x400;
      local_d0 = 0x400;
    }
    local_d8 = param_2;
    FUN_0010cce0(param_2,param_2,uVar11);
    local_ce = FontFileCountDashes(local_d8,(ulong)(uint)(int)local_d0);
    local_d8[local_d0] = '\0';
    if ((((local_ce == 0xe) &&
         (iVar4 = FontParseXLFDName(local_d8,&local_1d8,0), uVar3 = local_1d8, iVar4 != 0)) &&
        ((local_1d8 & 3) != 2)) && (((local_1d8 & 0xc) != 8 && ((local_1d8 & 0x40) == 0)))) {
      if ((((local_1d8 & 3) != 0) &&
          (((local_1d8 & 0xc) != 0 && (__s = *(char **)(param_1 + 0x48), __s != (char *)0x0)))) &&
         (*__s == ':')) {
        bVar2 = true;
        pcVar7 = __s;
        while( true ) {
          __s_00 = (byte *)(pcVar7 + 1);
          pcVar7 = strchr((char *)__s_00,0x3a);
          if (pcVar7 == (char *)0x0) break;
          uVar10 = (int)pcVar7 - (int)__s_00;
          bVar16 = uVar10 < 8;
          bVar17 = uVar10 == 8;
          if (bVar17) {
            lVar9 = 8;
            pbVar12 = (byte *)"unscaled";
            do {
              if (lVar9 == 0) break;
              lVar9 = lVar9 + -1;
              bVar16 = *__s_00 < *pbVar12;
              bVar17 = *__s_00 == *pbVar12;
              __s_00 = __s_00 + (ulong)bVar18 * -2 + 1;
              pbVar12 = pbVar12 + (ulong)bVar18 * -2 + 1;
            } while (bVar17);
            if ((!bVar16 && !bVar17) == bVar16) {
              bVar2 = false;
            }
          }
        }
        sVar6 = strlen(__s);
        if (((((int)__s + (int)sVar6) - (int)__s_00 == 8) &&
            (iVar4 = strncmp((char *)__s_00,"unscaled",8), iVar4 == 0)) || (!bVar2))
        goto LAB_0010c192;
      }
      if ((uVar3 & 0xf) != 0) {
        uVar14 = 1;
        goto LAB_0010c195;
      }
      puVar15 = (undefined8 *)0x0;
LAB_0010c34b:
      __s = strdup(param_3);
      local_b8 = __s;
      if (__s != (char *)0x0) {
        __ptr = (undefined8 *)malloc(0x90);
        if (__ptr == (undefined8 *)0x0) {
          uVar14 = 0;
          free(__s);
          goto LAB_0010c21b;
        }
        lVar9 = 0xf;
        puVar13 = __ptr;
        while (lVar9 != 0) {
          lVar9 = lVar9 + -1;
          *puVar13 = 0;
          puVar13 = puVar13 + (ulong)bVar18 * 0x1ffffffffffffffe + 1;
        }
        if (((local_1d8 & 0xc) == 4) &&
           (dVar19 = local_198 * 10.00000000, iVar4 = GetDefaultPointSize(dVar19),
           (int)dVar19 == iVar4)) {
          *(uint *)__ptr = local_1d8;
          *(undefined4 *)((long)__ptr + 4) = SUB124(auStack468,0);
          *(int *)(__ptr + 1) = SUB124(auStack468 >> 0x20,0);
          *(undefined4 *)((long)__ptr + 0xc) = SUB124(auStack468 >> 0x40,0);
          __ptr[0xe] = local_168;
          *(int *)(__ptr + 2) = SUB164(local_1c8,0);
          *(undefined4 *)((long)__ptr + 0x14) = SUB164(local_1c8 >> 0x20,0);
          *(int *)(__ptr + 3) = SUB164(local_1c8 >> 0x40,0);
          *(undefined4 *)((long)__ptr + 0x1c) = SUB164(local_1c8 >> 0x60,0);
          *(int *)(__ptr + 4) = SUB164(local_1b8,0);
          *(undefined4 *)((long)__ptr + 0x24) = SUB164(local_1b8 >> 0x20,0);
          *(int *)(__ptr + 5) = SUB164(local_1b8 >> 0x40,0);
          *(undefined4 *)((long)__ptr + 0x2c) = SUB164(local_1b8 >> 0x60,0);
          *(int *)(__ptr + 6) = SUB164(local_1a8,0);
          *(undefined4 *)((long)__ptr + 0x34) = SUB164(local_1a8 >> 0x20,0);
          *(int *)(__ptr + 7) = SUB164(local_1a8 >> 0x40,0);
          *(undefined4 *)((long)__ptr + 0x3c) = SUB164(local_1a8 >> 0x60,0);
          *(int *)(__ptr + 8) = SUB84(local_198,0);
          *(undefined4 *)((long)__ptr + 0x44) = (int)((ulong)local_198 >> 0x20);
          *(int *)(__ptr + 9) = (int)uStack400;
          *(undefined4 *)((long)__ptr + 0x4c) = (int)((ulong)uStack400 >> 0x20);
          *(uint *)(__ptr + 10) = local_188;
          *(uint *)((long)__ptr + 0x54) = uStack388;
          *(int *)(__ptr + 0xb) = (int)uStack384;
          *(undefined4 *)((long)__ptr + 0x5c) = (int)((ulong)uStack384 >> 0x20);
          *(int *)(__ptr + 0xc) = SUB164(local_178,0);
          *(undefined4 *)((long)__ptr + 100) = SUB164(local_178 >> 0x20,0);
          *(int *)(__ptr + 0xd) = SUB164(local_178 >> 0x40,0);
          *(undefined4 *)((long)__ptr + 0x6c) = SUB164(local_178 >> 0x60,0);
        }
        else {
          iVar4 = GetDefaultPointSize();
          __ptr[7] = 0;
          __ptr[6] = 0;
          *(undefined4 *)__ptr = 4;
          *(undefined4 *)(__ptr + 0xb) = 0xffffffff;
          dVar19 = (double)iVar4 / 10.00000000;
          *(double *)(__ptr + 8) = dVar19;
          *(double *)(__ptr + 5) = dVar19;
          if (((int)local_188 < 1) || ((int)uStack388 < 1)) {
            puVar8 = (ushort *)GetClientResolutions(dVar19,&local_1dc);
            if ((puVar8 == (ushort *)0x0) || (local_1dc < 1)) {
              __ptr[10] = 0x4b0000004b;
            }
            else {
              *(uint *)(__ptr + 10) = (uint)*puVar8;
              *(uint *)((long)__ptr + 0x54) = (uint)puVar8[1];
            }
          }
          else {
            *(uint *)(__ptr + 10) = local_188;
            *(uint *)((long)__ptr + 0x54) = uStack388;
          }
          FontFileCompleteXLFD(__ptr,__ptr);
        }
        __ptr[0xf] = 0;
        __ptr[0x10] = 0;
        __ptr[0x11] = 0;
        local_c8 = 0;
        local_c0 = lVar5;
        local_b0 = __ptr;
        lVar5 = FontFileAddEntry(param_1 + 0x18,&local_d8);
        if (lVar5 == 0) {
          free(__ptr);
          goto LAB_0010c208;
        }
        if (((local_1d8 & 0xf) != 0) && (puVar15 != (undefined8 *)0x0)) {
          FontFileCompleteXLFD(&local_1d8,&local_1d8);
          FontFileAddScaledInstance(lVar5,&local_1d8,0,*puVar15);
        }
LAB_0010c1ee:
        uVar14 = 1;
        goto LAB_0010c21b;
      }
    }
    else {
LAB_0010c192:
      uVar14 = 0;
LAB_0010c195:
      local_c8 = 2;
      local_b0 = (undefined8 *)0x0;
      local_c0 = lVar5;
      local_b8 = strdup(param_3);
      if (local_b8 != (char *)0x0) {
        puVar15 = (undefined8 *)FontFileAddEntry(param_1 + 0x30,&local_d8);
        if (puVar15 != (undefined8 *)0x0) {
          if ((int)uVar14 != 0) {
            if ((local_1d8 & 0xf) != 0) {
              lVar9 = 0xe;
              local_154 = 0;
              local_e8 = 0;
              __ptr = (undefined8 *)(&local_154 + 4);
              while (lVar9 != 0) {
                lVar9 = lVar9 + -1;
                *__ptr = 0;
                __ptr = __ptr + (ulong)bVar18 * 0x1ffffffffffffffe + 1;
              }
              local_158 = 5;
              local_108 = local_188;
              local_104 = uStack388;
              FontParseXLFDName(local_d8,&local_158,3);
              sVar6 = strlen(local_d8);
              local_d0 = (short)sVar6;
              lVar9 = FontFileFindNameInDir(param_1 + 0x18,&local_d8);
              if (lVar9 != 0) {
                if (((local_1d8 & 0xc) == 4) &&
                   (dVar19 = local_198 * 10.00000000, iVar4 = GetDefaultPointSize(dVar19),
                   (int)dVar19 == iVar4)) {
                  puVar1 = *(uint **)(lVar9 + 0x28);
                  *puVar1 = local_1d8;
                  puVar1[1] = SUB124(auStack468,0);
                  puVar1[2] = SUB124(auStack468 >> 0x20,0);
                  puVar1[3] = SUB124(auStack468 >> 0x40,0);
                  puVar1[4] = SUB164(local_1c8,0);
                  puVar1[5] = SUB164(local_1c8 >> 0x20,0);
                  puVar1[6] = SUB164(local_1c8 >> 0x40,0);
                  puVar1[7] = SUB164(local_1c8 >> 0x60,0);
                  puVar1[8] = SUB164(local_1b8,0);
                  puVar1[9] = SUB164(local_1b8 >> 0x20,0);
                  puVar1[10] = SUB164(local_1b8 >> 0x40,0);
                  puVar1[0xb] = SUB164(local_1b8 >> 0x60,0);
                  puVar1[0xc] = SUB164(local_1a8,0);
                  puVar1[0xd] = SUB164(local_1a8 >> 0x20,0);
                  puVar1[0xe] = SUB164(local_1a8 >> 0x40,0);
                  puVar1[0xf] = SUB164(local_1a8 >> 0x60,0);
                  puVar1[0x10] = SUB84(local_198,0);
                  puVar1[0x11] = (uint)((ulong)local_198 >> 0x20);
                  puVar1[0x12] = (uint)uStack400;
                  puVar1[0x13] = (uint)((ulong)uStack400 >> 0x20);
                  puVar1[0x14] = local_188;
                  puVar1[0x15] = uStack388;
                  puVar1[0x16] = (uint)uStack384;
                  puVar1[0x17] = (uint)((ulong)uStack384 >> 0x20);
                  puVar1[0x18] = SUB164(local_178,0);
                  puVar1[0x19] = SUB164(local_178 >> 0x20,0);
                  puVar1[0x1a] = SUB164(local_178 >> 0x40,0);
                  puVar1[0x1b] = SUB164(local_178 >> 0x60,0);
                  *(undefined8 *)(puVar1 + 0x1c) = local_168;
                  free(*(void **)(lVar9 + 0x20));
                  __s = strdup(param_3);
                  *(char **)(lVar9 + 0x20) = __s;
                  if (__s == (char *)0x0) goto LAB_0010c218;
                }
                FontFileCompleteXLFD(&local_1d8,&local_1d8);
                FontFileAddScaledInstance(lVar9,&local_1d8,0,*puVar15);
                goto LAB_0010c21b;
              }
            }
            goto LAB_0010c34b;
          }
          goto LAB_0010c1ee;
        }
LAB_0010c208:
        free(local_b8);
      }
    }
  }
LAB_0010c218:
  uVar14 = 0;
LAB_0010c21b:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar14;
}



undefined8 FontFileAddFontAlias(long param_1,char *param_2,char *param_3)

{
  int iVar1;
  size_t sVar2;
  long lVar3;
  undefined8 uVar4;
  long in_FS_OFFSET;
  char *local_b8;
  short local_b0;
  undefined2 local_ae;
  undefined4 local_a8;
  char *local_a0;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = strcmp(param_2,param_3);
  if (iVar1 != 0) {
    sVar2 = strlen(param_2);
    local_b0 = (short)sVar2;
    FUN_0010cce0(param_2,param_2,(ulong)(uint)(int)local_b0);
    local_b8 = param_2;
    local_ae = FontFileCountDashes(param_2,(ulong)(uint)(int)local_b0);
    local_a8 = 3;
    local_a0 = strdup(param_3);
    if (local_a0 != (char *)0x0) {
      lVar3 = FontFileAddEntry(param_1 + 0x30,&local_b8);
      uVar4 = 1;
      if (lVar3 != 0) goto LAB_0010c768;
      free(local_a0);
    }
  }
  uVar4 = 0;
LAB_0010c768:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void font_encoding_from_xlfd(void)

{
  FontEncFromXLFD();
  return;
}



void font_encoding_find(void)

{
  FontEncFind();
  return;
}



undefined8 font_encoding_recode(undefined8 param_1,long param_2,long param_3)

{
  undefined8 uVar1;
  
  if (*(long *)(param_3 + 0x30) != param_2) {
    ErrorF(0x130120);
    return 0;
  }
  uVar1 = FontEncRecode(param_1,param_3);
  return uVar1;
}



undefined8 font_encoding_name(undefined8 param_1,long param_2,long param_3)

{
  undefined8 uVar1;
  
  if (*(long *)(param_3 + 0x30) == param_2) {
    uVar1 = FontEncName(param_1,param_3);
    return uVar1;
  }
  ErrorF(0x130120);
  return 0;
}



void identifyEncodingFile(void)

{
  FontEncIdentify();
  return;
}



ulong FontFileNameCheck(char *param_1)

{
  return (ulong)(*param_1 == '/');
}



undefined8 FontFileFreeFPE(long param_1)

{
  FontFileUnregisterBitmapSource();
  FontFileFreeDir(*(undefined8 *)(param_1 + 0x18));
  return 0x55;
}



ulong FontFileInitFPE(long param_1)

{
  uint uVar1;
  int iVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  long local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = FontFileReadDirectory(*(undefined8 *)(param_1 + 8),&local_28);
  uVar3 = (ulong)uVar1;
  if (uVar1 == 0x55) {
    if ((*(int *)(local_28 + 0x30) < 1) ||
       (iVar2 = FontFileRegisterBitmapSource(param_1), iVar2 != 0)) {
      *(long *)(param_1 + 0x18) = local_28;
    }
    else {
      uVar3 = 0x50;
      FontFileFreeFPE(param_1);
    }
  }
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



undefined  [16]
FUN_0010c960(long param_1,ulong *param_2,ulong param_3,long param_4,uint param_5,uint param_6,
            undefined8 param_7)

{
  long lVar1;
  char *__s;
  char *__s_00;
  size_t sVar2;
  size_t sVar3;
  undefined8 uVar4;
  ulong uVar5;
  long in_FS_OFFSET;
  undefined local_848 [2056];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_4 == -0x18) || (lVar1 = *(long *)(param_4 + 0x18), *(long *)(lVar1 + 0x10) == 0)) {
    uVar4 = 0x53;
    uVar5 = param_3;
  }
  else {
    __s = **(char ***)(param_1 + 0x18);
    sVar2 = strlen(__s);
    __s_00 = *(char **)(param_4 + 0x20);
    sVar3 = strlen(__s_00);
    uVar4 = 0x53;
    uVar5 = sVar2 + sVar3;
    if (sVar2 + sVar3 < 0x801) {
      __memcpy_chk(local_848,__s,sVar2,0x801);
      __strcpy_chk(local_848 + sVar2,__s_00,0x801);
      uVar5 = (ulong)param_6;
      uVar4 = (**(code **)(lVar1 + 0x10))
                        (param_1,param_2,param_3 & 0xffffffff,param_4,local_848,(ulong)param_5,uVar5
                         ,param_7);
      if ((int)uVar4 == 0x55) {
        *(ulong *)(param_4 + 0x28) = *param_2;
        uVar5 = *param_2;
        *(long *)(uVar5 + 0xa0) = param_4;
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return CONCAT88(uVar5,uVar4);
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_0010cab0(long param_1,undefined8 param_2,long param_3)

{
  long lVar1;
  char *__s;
  char *__s_00;
  size_t sVar2;
  size_t sVar3;
  undefined8 uVar4;
  long in_FS_OFFSET;
  undefined local_848 [2056];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_3 == -0x18) || (lVar1 = *(long *)(param_3 + 0x18), *(long *)(lVar1 + 0x20) == 0)) {
    uVar4 = 0x53;
  }
  else {
    __s = **(char ***)(param_1 + 0x18);
    sVar2 = strlen(__s);
    __s_00 = *(char **)(param_3 + 0x20);
    sVar3 = strlen(__s_00);
    uVar4 = 0x53;
    if (sVar2 + sVar3 < 0x801) {
      __memcpy_chk(local_848,__s,sVar2,0x801);
      __strcpy_chk(local_848 + sVar2,__s_00,0x801);
      uVar4 = (**(code **)(lVar1 + 0x20))(param_1,param_2,param_3,local_848);
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FontFileCloseFont(undefined8 param_1,long param_2)

{
  long lVar1;
  
  lVar1 = *(long *)(param_2 + 0xa0);
  if (lVar1 != 0) {
    if (*(int *)(lVar1 + 0x10) == 0) {
      FontFileRemoveScaledInstance();
    }
    else {
      if (*(int *)(lVar1 + 0x10) == 2) {
        *(undefined8 *)(lVar1 + 0x28) = 0;
      }
    }
    *(undefined8 *)(param_2 + 0xa0) = 0;
  }
                    // WARNING: Could not recover jumptable at 0x0010cbe7. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(param_2 + 0x78))(param_2);
  return;
}



undefined8
FontFileListNextFontOrAlias
          (undefined8 param_1,undefined8 param_2,undefined8 *param_3,int *param_4,
          undefined8 *param_5,undefined4 *param_6,uint **param_7)

{
  uint uVar1;
  int iVar2;
  uint *puVar3;
  long lVar4;
  undefined8 uVar5;
  
  puVar3 = *param_7;
  uVar1 = *(uint *)(param_7 + 1);
  if (uVar1 != *puVar3) {
    iVar2 = *(int *)(*(long *)(puVar3 + 2) + (ulong)uVar1 * 4);
    *param_3 = *(undefined8 *)(*(long *)(puVar3 + 4) + (ulong)uVar1 * 8);
    if (iVar2 < 0) {
      *param_4 = -iVar2;
      lVar4 = *(long *)(*param_7 + 4);
      iVar2 = *(int *)(param_7 + 1);
      *(int *)(param_7 + 1) = iVar2 + 1;
      *param_5 = *(undefined8 *)(lVar4 + (long)(iVar2 + 1) * 8);
      *param_6 = *(undefined4 *)(*(long *)(*param_7 + 2) + (long)*(int *)(param_7 + 1) * 4);
      uVar5 = 0x52;
    }
    else {
      *param_4 = iVar2;
      uVar5 = 0x55;
    }
    *(int *)(param_7 + 1) = *(int *)(param_7 + 1) + 1;
    return uVar5;
  }
  FreeFontNames();
  free(param_7);
  return 0x53;
}



undefined8 FontFileResetFPE(long param_1)

{
  long lVar1;
  int iVar2;
  
  lVar1 = *(long *)(param_1 + 0x18);
  iVar2 = FontFileDirectoryChanged(lVar1);
  if (iVar2 != 0) {
    return 0x59;
  }
  if ((0 < *(int *)(lVar1 + 0x30)) && (iVar2 = FontFileRegisterBitmapSource(param_1), iVar2 == 0)) {
    return 0x59;
  }
  return 0x55;
}



void FUN_0010cce0(char *param_1,char *param_2,int param_3)

{
  char *pcVar1;
  char cVar2;
  char *pcVar3;
  long lVar4;
  
  if (0 < param_3) {
    lVar4 = (ulong)(param_3 - 1) + 1;
    pcVar1 = param_2 + lVar4;
    pcVar3 = param_1;
    do {
      while ((cVar2 = *param_2, (byte)(cVar2 + 0xbfU) < 0x1a || ((byte)(cVar2 + 0x40U) < 0x17))) {
        param_2 = param_2 + 1;
        *pcVar3 = cVar2 + ' ';
        pcVar3 = pcVar3 + 1;
        if (param_2 == pcVar1) goto LAB_0010cd3c;
      }
      if ((byte)(cVar2 + 0x28U) < 7) {
        cVar2 = cVar2 + ' ';
      }
      param_2 = param_2 + 1;
      *pcVar3 = cVar2;
      pcVar3 = pcVar3 + 1;
    } while (param_2 != pcVar1);
LAB_0010cd3c:
    param_1 = param_1 + lVar4;
  }
  *param_1 = '\0';
  return;
}



ulong FUN_0010cd50(undefined8 param_1,int param_2,char *param_3,char **param_4,undefined *param_5)

{
  double dVar1;
  double dVar2;
  double dVar3;
  double dVar4;
  undefined auVar5 [16];
  int iVar6;
  size_t sVar7;
  ulong uVar8;
  ulong uVar9;
  undefined *puVar10;
  double *pdVar11;
  long in_FS_OFFSET;
  double dVar12;
  double dVar13;
  double dVar14;
  uint local_548 [2];
  double adStack1344 [4];
  double local_520 [11];
  uint local_4c8;
  undefined4 uStack1220;
  double local_4c0;
  double local_4b8;
  double local_4b0;
  double local_4a8;
  double local_4a0;
  double local_498;
  double local_490;
  double local_488;
  undefined4 uStack1152;
  undefined4 uStack1148;
  undefined4 local_478;
  undefined4 uStack1140;
  undefined4 uStack1136;
  undefined4 uStack1132;
  undefined4 local_468;
  undefined4 uStack1124;
  undefined4 uStack1120;
  undefined4 uStack1116;
  undefined8 local_458;
  undefined local_448 [1032];
  long local_40;
  
  *param_4 = param_3;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  sVar7 = strlen(param_3);
  if (((int)sVar7 < 0x401) && (param_2 < 0x400)) {
    iVar6 = FontFileCountDashes(param_3,sVar7 & 0xffffffff);
    if (iVar6 == 0xe) {
                    // WARNING: Load size is inaccurate
      auVar5 = *(undefined *)param_5;
      puVar10 = local_448;
      local_458 = *(undefined8 *)(param_5 + 0x70);
      local_4c8 = SUB164(auVar5,0);
      uStack1220 = SUB164(auVar5 >> 0x20,0);
      local_4c0 = SUB168(auVar5 >> 0x40,0);
                    // WARNING: Load size is inaccurate
      local_4b8 = SUB168(*(undefined *)(param_5 + 0x10),0);
      local_4b0 = SUB168(*(undefined *)(param_5 + 0x10) >> 0x40,0);
                    // WARNING: Load size is inaccurate
      local_4a8 = SUB168(*(undefined *)(param_5 + 0x20),0);
      local_4a0 = SUB168(*(undefined *)(param_5 + 0x20) >> 0x40,0);
                    // WARNING: Load size is inaccurate
      local_498 = SUB168(*(undefined *)(param_5 + 0x30),0);
      local_490 = SUB168(*(undefined *)(param_5 + 0x30) >> 0x40,0);
                    // WARNING: Load size is inaccurate
      auVar5 = *(undefined *)(param_5 + 0x40);
      local_488 = SUB168(auVar5,0);
      uStack1152 = SUB164(auVar5 >> 0x40,0);
      uStack1148 = SUB164(auVar5 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar5 = *(undefined *)(param_5 + 0x50);
      local_478 = SUB164(auVar5,0);
      uStack1140 = SUB164(auVar5 >> 0x20,0);
      uStack1136 = SUB164(auVar5 >> 0x40,0);
      uStack1132 = SUB164(auVar5 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar5 = *(undefined *)(param_5 + 0x60);
      local_468 = SUB164(auVar5,0);
      uStack1124 = SUB164(auVar5 >> 0x20,0);
      uStack1120 = SUB164(auVar5 >> 0x40,0);
      uStack1116 = SUB164(auVar5 >> 0x60,0);
      FUN_0010cce0(SUB168(auVar5,0),puVar10,param_1,(long)param_2 & 0xffffffff);
      local_448[(long)param_2] = 0;
      iVar6 = FontParseXLFDName(puVar10,local_548,0);
      if ((iVar6 != 0) && (uVar9 = (ulong)local_548[0], local_548[0] == 0)) {
        iVar6 = FontParseXLFDName(*param_4,local_548,0);
        if (iVar6 != 0) {
          if ((local_548[0] & 0xf) == 2) {
            pdVar11 = adStack1344;
LAB_0010cf0a:
            iVar6 = FontFileCompleteXLFD(&local_4c8,&local_4c8);
            uVar8 = (ulong)((int)sVar7 + 1);
            if (iVar6 == 0) {
              FUN_0010cce0(&DAT_0033c760,*param_4,uVar8);
              goto LAB_0010cda3;
            }
            dVar1 = *pdVar11;
            dVar2 = pdVar11[1];
            local_4c8 = local_4c8 & 0xfffffff0 | 10;
            dVar14 = dVar2 * local_490;
            dVar3 = pdVar11[2];
            dVar4 = pdVar11[3];
            dVar12 = local_498 * dVar3;
            local_498 = dVar1 * local_498 + dVar2 * local_488;
            local_490 = local_4a0 * dVar3 + local_490 * dVar4;
            local_488 = dVar12 + local_488 * dVar4;
            dVar13 = dVar2 * local_4a8;
            dVar12 = local_4c0 * dVar3;
            local_4c0 = dVar1 * local_4c0 + dVar2 * local_4b0;
            local_4b0 = dVar12 + local_4b0 * dVar4;
            local_4a8 = dVar3 * local_4b8 + dVar4 * local_4a8;
            local_4b8 = dVar1 * local_4b8 + dVar13;
            local_4a0 = dVar1 * local_4a0 + dVar14;
            FUN_0010cce0(local_4a8,&DAT_0033c760,*param_4,uVar8);
          }
          else {
            if ((local_548[0] & 0xf) == 8) {
              pdVar11 = local_520;
              goto LAB_0010cf0a;
            }
            FUN_0010cce0(&DAT_0033c760,*param_4);
          }
          iVar6 = FontParseXLFDName(&DAT_0033c760,&local_4c8,3);
          if (iVar6 != 0) {
            *param_4 = &DAT_0033c760;
          }
        }
      }
    }
  }
  uVar9 = 1;
LAB_0010cda3:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar9;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_0010d0b0(int *param_1,int *param_2,undefined8 param_3,uint *param_4,uint *param_5,
                 undefined8 param_6,uint param_7,int *param_8)

{
  int *piVar1;
  undefined auVar2 [16];
  uint uVar3;
  char *__s2;
  byte bVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  size_t sVar9;
  uint *puVar10;
  uint *puVar11;
  long lVar12;
  uint uVar13;
  int iVar14;
  long in_FS_OFFSET;
  bool bVar15;
  char *local_550;
  undefined local_548 [128];
  uint local_4c8;
  undefined4 uStack1220;
  undefined8 local_4c0;
  undefined8 local_4b8;
  undefined8 local_4b0;
  undefined8 local_4a8;
  undefined8 local_4a0;
  undefined8 local_498;
  undefined8 local_490;
  undefined8 local_488;
  undefined4 uStack1152;
  undefined4 uStack1148;
  undefined4 local_478;
  undefined4 local_474;
  undefined4 local_470;
  undefined4 uStack1132;
  undefined4 local_468;
  undefined4 uStack1124;
  uint local_460;
  undefined4 uStack1116;
  undefined8 local_458;
  uint local_448 [258];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((0 < *param_2) && (*param_8 != 0)) {
    iVar8 = 0;
    do {
      lVar12 = (long)iVar8;
      FontParseXLFDName(*(undefined8 *)(*(long *)(param_2 + 4) + lVar12 * 8),local_548,0);
                    // WARNING: Load size is inaccurate
      auVar2 = *(undefined *)param_5;
      local_458 = *(undefined8 *)(param_5 + 0x1c);
      iVar14 = iVar8 + 1;
      local_4c8 = SUB164(auVar2,0);
      uStack1220 = SUB164(auVar2 >> 0x20,0);
      local_4c0 = SUB168(auVar2 >> 0x40,0);
                    // WARNING: Load size is inaccurate
      local_4b8 = SUB168(*(undefined *)(param_5 + 4),0);
      local_4b0 = SUB168(*(undefined *)(param_5 + 4) >> 0x40,0);
                    // WARNING: Load size is inaccurate
      local_4a8 = SUB168(*(undefined *)(param_5 + 8),0);
      local_4a0 = SUB168(*(undefined *)(param_5 + 8) >> 0x40,0);
                    // WARNING: Load size is inaccurate
      local_498 = SUB168(*(undefined *)(param_5 + 0xc),0);
      local_490 = SUB168(*(undefined *)(param_5 + 0xc) >> 0x40,0);
                    // WARNING: Load size is inaccurate
      auVar2 = *(undefined *)(param_5 + 0x10);
      local_488 = SUB168(auVar2,0);
      uStack1152 = SUB164(auVar2 >> 0x40,0);
      uStack1148 = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar2 = *(undefined *)(param_5 + 0x14);
      local_478 = SUB164(auVar2,0);
      local_474 = SUB164(auVar2 >> 0x20,0);
      local_470 = SUB164(auVar2 >> 0x40,0);
      uStack1132 = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar2 = *(undefined *)(param_5 + 0x18);
      local_468 = SUB164(auVar2,0);
      uStack1124 = SUB164(auVar2 >> 0x20,0);
      local_460 = SUB164(auVar2 >> 0x40,0);
      uStack1116 = SUB164(auVar2 >> 0x60,0);
      iVar5 = FontFileCompleteXLFD(SUB168(auVar2,0),&local_4c8,local_548);
      if (iVar5 != 0) {
        *param_8 = *param_8 + -1;
        __strcpy_chk(local_448,*(undefined8 *)(*(long *)(param_2 + 4) + lVar12 * 8),0x400);
        uVar6 = *param_5;
        uVar7 = param_5[0x15];
        if (((uVar6 & 0x13) == 0x10) && (uVar7 != 0)) {
          if ((uVar6 & 0x2c) != 0x20) {
LAB_0010d29a:
            local_4a0 = *(undefined8 *)(param_5 + 10);
            local_498 = *(undefined8 *)(param_5 + 0xc);
            local_4c8 = local_4c8 & 0xfffffff3 | uVar6 & 0xc;
            local_490 = *(undefined8 *)(param_5 + 0xe);
            local_488 = *(undefined8 *)(param_5 + 0x10);
          }
        }
        else {
          local_4c0 = *(undefined8 *)(param_5 + 2);
          uVar3 = *param_5;
          uVar13 = uVar6 & 0x2c;
          local_4b8 = *(undefined8 *)(param_5 + 4);
          local_4c8 = local_4c8 & 0xfffffffc | uVar3 & 3;
          local_4b0 = *(undefined8 *)(param_5 + 6);
          local_4a8 = *(undefined8 *)(param_5 + 8);
          uVar6 = uVar3;
          if ((uVar13 != 0x20) || (uVar7 == 0)) goto LAB_0010d29a;
        }
        if ((int)param_5[0x16] < 1) {
          local_470 = 0;
        }
        if (param_5[0x14] == 0) {
          local_478 = 0;
        }
        if (uVar7 == 0) {
          local_474 = 0;
        }
        local_460 = param_7;
        local_458 = param_6;
        FontParseXLFDName(local_448,&local_4c8,3);
        puVar11 = local_448;
        if (*(int *)(*(long *)(param_2 + 2) + lVar12 * 4) < 0) {
          *(undefined8 *)(param_5 + 0x1c) = param_6;
          param_5[0x1a] = param_7;
          puVar11 = param_4;
          do {
            puVar10 = puVar11;
            uVar6 = *puVar10 + 0xfefefeff & ~*puVar10;
            uVar7 = uVar6 & 0x80808080;
            bVar4 = (byte)uVar7;
            puVar11 = puVar10 + 1;
          } while (uVar7 == 0);
          bVar15 = (uVar6 & 0x8080) == 0;
          if (bVar15) {
            bVar4 = (byte)(uVar7 >> 0x10);
          }
          if (bVar15) {
            puVar11 = (uint *)((long)puVar10 + 6);
          }
          iVar5 = FUN_0010cd50(param_4,(long)puVar11 +
                                       ((-3 - (ulong)CARRY1(bVar4,bVar4)) - (long)param_4),
                               *(undefined8 *)(*(long *)(param_2 + 4) + 8 + lVar12 * 8));
          puVar11 = local_448;
          if (iVar5 != 0) {
            do {
              puVar10 = puVar11;
              uVar6 = *puVar10 + 0xfefefeff & ~*puVar10;
              uVar7 = uVar6 & 0x80808080;
              puVar11 = puVar10 + 1;
            } while (uVar7 == 0);
            bVar15 = (uVar6 & 0x8080) == 0;
            bVar4 = (byte)uVar7;
            if (bVar15) {
              bVar4 = (byte)(uVar7 >> 0x10);
            }
            if (bVar15) {
              puVar11 = (uint *)((long)puVar10 + 6);
            }
            AddFontNamesName(param_1,local_448,
                             (long)puVar11 + ((-3 - (ulong)CARRY1(bVar4,bVar4)) - (long)local_448));
            piVar1 = (int *)(*(long *)(param_1 + 2) + -4 + (long)*param_1 * 4);
            *piVar1 = -*piVar1;
            sVar9 = strlen(local_550);
            AddFontNamesName(param_1,local_550,sVar9 & 0xffffffff);
            __s2 = *(char **)(*(long *)(param_2 + 4) + lVar12 * 8);
            iVar5 = strcmp((char *)local_448,__s2);
            if (((iVar5 != 0) &&
                (iVar5 = FontFileMatchName(__s2,(ulong)(uint)-*(int *)(*(long *)(param_2 + 2) +
                                                                      lVar12 * 4),param_3),
                iVar5 != 0)) && (*param_8 != 0)) {
              *param_8 = *param_8 + -1;
              AddFontNamesName(param_1,*(undefined8 *)(*(long *)(param_2 + 4) + lVar12 * 8),
                               (ulong)(uint)-*(int *)(*(long *)(param_2 + 2) + lVar12 * 4));
              piVar1 = (int *)(*(long *)(param_1 + 2) + -4 + (long)*param_1 * 4);
              *piVar1 = -*piVar1;
              sVar9 = strlen(local_550);
              AddFontNamesName(param_1,local_550,sVar9 & 0xffffffff);
            }
          }
          iVar14 = iVar8 + 2;
        }
        else {
          do {
            puVar10 = puVar11;
            uVar6 = *puVar10 + 0xfefefeff & ~*puVar10;
            uVar7 = uVar6 & 0x80808080;
            puVar11 = puVar10 + 1;
          } while (uVar7 == 0);
          bVar15 = (uVar6 & 0x8080) == 0;
          bVar4 = (byte)uVar7;
          if (bVar15) {
            bVar4 = (byte)(uVar7 >> 0x10);
          }
          if (bVar15) {
            puVar11 = (uint *)((long)puVar10 + 6);
          }
          AddFontNamesName(param_1,local_448,
                           (long)puVar11 + ((-3 - (ulong)CARRY1(bVar4,bVar4)) - (long)local_448));
          __s2 = *(char **)(*(long *)(param_2 + 4) + lVar12 * 8);
          iVar8 = strcmp((char *)local_448,__s2);
          if (((iVar8 != 0) &&
              (iVar8 = FontFileMatchName(__s2,(ulong)*(uint *)(*(long *)(param_2 + 2) + lVar12 * 4),
                                         param_3), iVar8 != 0)) && (*param_8 != 0)) {
            *param_8 = *param_8 + -1;
            AddFontNamesName(param_1,*(undefined8 *)(*(long *)(param_2 + 4) + lVar12 * 8),
                             (ulong)*(uint *)(*(long *)(param_2 + 2) + lVar12 * 4));
          }
        }
      }
    } while ((*param_2 != iVar14 && iVar14 <= *param_2) && (iVar8 = iVar14, *param_8 != 0));
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



ulong FontFileOpenFont(undefined8 param_1,long param_2,ulong param_3,undefined8 param_4,
                      ulong param_5,uint param_6,uint param_7,undefined8 param_8,long *param_9,
                      undefined8 param_10,undefined8 param_11)

{
  char **ppcVar1;
  char *__s;
  code *pcVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  void *__ptr;
  undefined8 *puVar6;
  size_t sVar7;
  size_t sVar8;
  long lVar9;
  ulong uVar10;
  short sVar11;
  uint *puVar12;
  uint *puVar13;
  long lVar14;
  short sVar15;
  ulong uVar16;
  ulong uVar17;
  long in_FS_OFFSET;
  bool bVar18;
  byte bVar19;
  undefined8 uVar20;
  undefined4 local_10dc;
  uint *local_10d8;
  short local_10d0;
  short local_10ce;
  uint local_10c8 [24];
  undefined *local_1068;
  undefined4 local_1060;
  void *local_1058;
  uint local_1048 [256];
  undefined local_c48 [1024];
  undefined local_848 [2056];
  long local_40;
  
  bVar19 = 0;
  uVar10 = param_5 & 0xffffffff;
  param_8 = param_10;
  if (0x3ff < (int)uVar10) {
    return 0x50;
  }
  uVar16 = SEXT48((int)param_5);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  ppcVar1 = *(char ***)(param_2 + 0x18);
  FUN_0010cce0(local_1048,param_4,uVar16 & 0xffffffff);
  *(undefined *)((long)local_1048 + uVar16) = 0;
  __ptr = (void *)FontParseRanges(local_1048,&local_10dc);
  sVar15 = (short)param_5;
  local_10d8 = local_1048;
  local_10d0 = sVar15;
  local_10ce = FontFileCountDashes(local_1048,uVar10);
  iVar3 = FontParseXLFDName(local_1048,local_10c8,0);
  if (iVar3 == 0) {
    lVar14 = 0xf;
    puVar6 = (undefined8 *)local_10c8;
    while (lVar14 != 0) {
      lVar14 = lVar14 + -1;
      *puVar6 = 0;
      puVar6 = puVar6 + (ulong)bVar19 * 0x1ffffffffffffffe + 1;
    }
  }
  uVar20 = 0x10d715;
  puVar6 = (undefined8 *)FontFileFindNameInDir(ppcVar1 + 6,&local_10d8);
  if (puVar6 == (undefined8 *)0x0) {
    if ((local_10ce == 0xe) &&
       (iVar3 = FontParseXLFDName(local_1048,local_10c8,2), puVar13 = local_1048, iVar3 != 0)) {
      do {
        puVar12 = puVar13;
        uVar4 = *puVar12 + 0xfefefeff & ~*puVar12;
        uVar5 = uVar4 & 0x80808080;
        puVar13 = puVar12 + 1;
      } while (uVar5 == 0);
      bVar18 = (uVar4 & 0x8080) == 0;
      if (bVar18) {
        uVar5 = uVar5 >> 0x10;
      }
      if (bVar18) {
        puVar13 = (uint *)((long)puVar12 + 6);
      }
      lVar14 = (long)puVar13 + ((-3 - (ulong)CARRY1((byte)uVar5,(byte)uVar5)) - (long)local_1048);
      local_10d0 = (short)lVar14;
      uVar20 = 0x10db44;
      puVar6 = (undefined8 *)
               FontFileFindNameInDir(ppcVar1 + 6,&local_10d8,lVar14,(ulong)(uVar5 & 0xffffff00));
      if (puVar6 != (undefined8 *)0x0) goto LAB_0010d71a;
    }
LAB_0010d7a4:
    FUN_0010cce0(local_1048,param_4,uVar16 & 0xffffffff);
    *(undefined *)((long)local_1048 + uVar16) = 0;
    local_10d8 = local_1048;
    local_10d0 = sVar15;
    local_10ce = FontFileCountDashes(local_1048,uVar10);
    iVar3 = FontParseXLFDName(local_1048,local_10c8,2);
    puVar13 = local_1048;
    if (iVar3 == 0) {
LAB_0010d850:
      FUN_0010cce0(local_1048,param_4,uVar10);
      *(undefined *)((long)local_1048 + uVar16) = 0;
      local_10d8 = local_1048;
      local_10d0 = sVar15;
      local_10ce = FontFileCountDashes(local_1048,uVar10);
      puVar6 = (undefined8 *)FontFileFindNameInScalableDir(ppcVar1 + 3,&local_10d8,local_10c8);
      if (puVar6 != (undefined8 *)0x0) {
        __strcpy_chk(local_1048,*puVar6,0x400);
        local_10d0 = *(short *)(puVar6 + 1);
        local_10ce = *(short *)((long)puVar6 + 10);
        local_10d8 = local_1048;
        goto LAB_0010d8cd;
      }
    }
    else {
      do {
        puVar12 = puVar13;
        uVar4 = *puVar12 + 0xfefefeff & ~*puVar12;
        uVar5 = uVar4 & 0x80808080;
        puVar13 = puVar12 + 1;
      } while (uVar5 == 0);
      bVar18 = (uVar4 & 0x8080) == 0;
      if (bVar18) {
        uVar5 = uVar5 >> 0x10;
      }
      sVar11 = (short)(puVar12 + 1);
      if (bVar18) {
        sVar11 = (short)puVar12 + 6;
      }
      local_10d0 = ((sVar11 + -3) - (ushort)CARRY1((byte)uVar5,(byte)uVar5)) - (short)local_1048;
      puVar6 = (undefined8 *)
               FontFileFindNameInScalableDir
                         (ppcVar1 + 3,&local_10d8,local_10c8,(ulong)(uVar5 & 0xffffff00));
      if (puVar6 == (undefined8 *)0x0) goto LAB_0010d850;
LAB_0010d8cd:
      if (*(int *)(puVar6 + 2) == 0) {
        uVar20 = 0x10d8ea;
        iVar3 = FontFileCompleteXLFD(local_10c8,puVar6[5]);
        if (iVar3 != 0) {
          if ((((local_10c8[0] & 3) == 2) || ((local_10c8[0] & 0xc) == 8)) ||
             ((local_10c8[0] & 0xffffffb0) != 0)) {
LAB_0010d918:
            uVar5 = FontFileMatchBitmapSource
                              (param_2,param_9,param_3 & 0xffffffff,puVar6,&local_10d8,local_10c8,
                               (ulong)param_6,(ulong)param_7,0,uVar20);
            uVar17 = (ulong)uVar5;
            if (uVar5 != 0x55) {
              local_1068 = local_c48;
              FUN_0010cce0(local_1068,param_4,uVar10);
              local_c48[uVar16] = 0;
              local_1060 = local_10dc;
              __s = *ppcVar1;
              local_1058 = __ptr;
              sVar7 = strlen(__s);
              sVar8 = strlen((char *)puVar6[4]);
              if (sVar8 + sVar7 < 0x801) {
                __memcpy_chk(local_848,__s,sVar7 + 1);
                uVar20 = 0x10d9fe;
                __strcpy_chk(local_848 + sVar7,puVar6[4],0x801);
                pcVar2 = *(code **)(puVar6[3] + 0x18);
                if (pcVar2 == (code *)0x0) {
                  pcVar2 = *(code **)(puVar6[3] + 0x10);
                  if (pcVar2 == (code *)0x0) goto LAB_0010d75c;
                  uVar5 = (*pcVar2)(param_2,param_9,param_3 & 0xffffffff,puVar6,local_848,
                                    (ulong)param_6,(ulong)param_7,param_11);
                }
                else {
                  uVar5 = (*pcVar2)(param_2,param_9,param_3 & 0xffffffff,puVar6,local_848,local_10c8
                                    ,(ulong)param_6,(ulong)param_7,param_11,uVar20);
                }
                uVar17 = (ulong)uVar5;
                if (uVar5 == 0x55) {
                  lVar14 = *param_9;
                  if ((*(ushort *)(lVar14 + 8) < *(ushort *)(lVar14 + 10) ||
                       *(ushort *)(lVar14 + 8) == *(ushort *)(lVar14 + 10)) &&
                     (*(ushort *)(lVar14 + 0xc) < *(ushort *)(lVar14 + 0xe) ||
                      *(ushort *)(lVar14 + 0xc) == *(ushort *)(lVar14 + 0xe))) {
                    iVar3 = FontFileAddScaledInstance(puVar6,local_10c8,lVar14,0);
                    if (iVar3 != 0) {
                      *(long *)(*param_9 + 0x88) = param_2;
                      goto LAB_0010d769;
                    }
                    *(undefined8 *)(*param_9 + 0xa0) = 0;
                    lVar14 = *param_9;
                    goto LAB_0010dc01;
                  }
                  uVar17 = 0x53;
                  (**(code **)(lVar14 + 0x78))(lVar14);
                }
                goto LAB_0010d75c;
              }
              goto LAB_0010daa0;
            }
          }
          else {
            uVar20 = 0x10dc1f;
            lVar9 = FontFileFindScaledInstance(puVar6,local_10c8,0);
            if (lVar9 == 0) goto LAB_0010d918;
            lVar14 = *(long *)(lVar9 + 0x80);
            if (lVar14 != 0) goto LAB_0010dabd;
            lVar14 = *(long *)(lVar9 + 0x78);
            if (lVar14 == 0) goto LAB_0010daa0;
            lVar9 = *(long *)(lVar14 + 0x28);
            if (lVar9 != 0) {
              uVar17 = 0x55;
              *param_9 = lVar9;
              *(long *)(lVar9 + 0x88) = param_2;
              goto LAB_0010d75c;
            }
            uVar5 = FUN_0010c960(param_2,param_9,param_3 & 0xffffffff,lVar14,(ulong)param_6,
                                 (ulong)param_7,param_11,uVar20);
            uVar17 = (ulong)uVar5;
            if (uVar5 != 0x55) goto LAB_0010d75c;
            lVar14 = *param_9;
            if (lVar14 != 0) goto LAB_0010dc01;
          }
          uVar17 = 0x55;
          goto LAB_0010d75c;
        }
      }
    }
LAB_0010daa0:
    uVar17 = 0x53;
  }
  else {
LAB_0010d71a:
    if (*(int *)(puVar6 + 2) != 2) {
      if (*(int *)(puVar6 + 2) == 3) {
        uVar17 = 0x52;
        local_1060 = local_10dc;
        local_1058 = __ptr;
        FUN_0010cd50(*puVar6,(ulong)(uint)(int)*(short *)(puVar6 + 1),puVar6[3],param_10,local_10c8)
        ;
        goto LAB_0010d75c;
      }
      goto LAB_0010d7a4;
    }
    lVar14 = puVar6[5];
    if (lVar14 != 0) {
LAB_0010dabd:
      uVar17 = 0x55;
      *param_9 = lVar14;
      *(long *)(lVar14 + 0x88) = param_2;
      goto LAB_0010d75c;
    }
    uVar5 = FUN_0010c960(param_2,param_9,param_3 & 0xffffffff,puVar6,(ulong)param_6,(ulong)param_7,
                         param_11,uVar20);
    uVar17 = (ulong)uVar5;
    if (uVar5 != 0x55) {
      if (uVar5 == 0x53) goto LAB_0010d7a4;
      goto LAB_0010d75c;
    }
    lVar14 = *param_9;
    if (lVar14 == 0) goto LAB_0010d75c;
LAB_0010dc01:
    *(long *)(lVar14 + 0x88) = param_2;
  }
LAB_0010d75c:
  if (__ptr != (void *)0x0) {
    free(__ptr);
  }
LAB_0010d769:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar17;
}



ulong FUN_0010dd70(long *param_1,undefined8 param_2,uint param_3,uint param_4,undefined8 param_5,
                  int param_6)

{
  long lVar1;
  uint *puVar2;
  byte bVar3;
  short sVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  void *__ptr;
  long lVar9;
  uint *puVar10;
  ulong uVar11;
  long in_FS_OFFSET;
  bool bVar12;
  undefined8 uVar13;
  uint local_8fc [4];
  uint local_8ec;
  undefined *local_8e8;
  undefined2 local_8e0;
  short local_8de;
  uint *local_8d8;
  short local_8d0;
  short local_8ce;
  undefined local_8c8 [128];
  undefined local_848 [1024];
  uint local_448 [258];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_8fc[0] = param_4;
  if ((int)param_3 < 0x400) {
    lVar1 = *param_1;
    FUN_0010cce0(local_848);
    local_8e0 = (undefined2)param_3;
    local_848[(int)param_3] = 0;
    local_8e8 = local_848;
    sVar4 = FontFileCountDashes(local_848,(ulong)param_3);
    uVar13 = 0x10de0a;
    local_8de = sVar4;
    __strcpy_chk(local_448,local_848,0x400);
    if (sVar4 == 0xe) {
      uVar13 = 0x10dee7;
      iVar6 = FontParseXLFDName(local_448,local_8c8,2);
      if (iVar6 != 0) {
        uVar13 = 0x10defe;
        __ptr = (void *)FontParseRanges(local_848,&local_8ec);
        uVar5 = FontFileFindNamesInScalableDir
                          (lVar1 + 0x30,&local_8e8,(ulong)local_8fc[0],param_5,0,
                           (ulong)((uint)(param_6 != 0) + 2),local_8fc,uVar13);
        puVar2 = local_448;
        do {
          puVar10 = puVar2;
          uVar7 = *puVar10 + 0xfefefeff & ~*puVar10;
          uVar8 = uVar7 & 0x80808080;
          puVar2 = puVar10 + 1;
        } while (uVar8 == 0);
        bVar12 = (uVar7 & 0x8080) == 0;
        bVar3 = (byte)uVar8;
        if (bVar12) {
          bVar3 = (byte)(uVar8 >> 0x10);
        }
        sVar4 = (short)(puVar10 + 1);
        if (bVar12) {
          sVar4 = (short)puVar10 + 6;
        }
        local_8d0 = ((sVar4 + -3) - (ushort)CARRY1(bVar3,bVar3)) - (short)local_448;
        local_8ce = local_8de;
        local_8d8 = local_448;
        lVar9 = MakeFontNamesRecord(0);
        if (lVar9 != 0) {
          FontFileFindNamesInScalableDir
                    (lVar1 + 0x18,&local_8d8,(ulong)local_8fc[0],lVar9,local_8c8,
                     (ulong)(param_6 != 0),0,uVar13);
          FUN_0010d0b0(param_5,lVar9,&local_8e8,local_448,local_8c8,__ptr,(ulong)local_8ec,local_8fc
                      );
          FreeFontNames(lVar9);
          uVar13 = 0x10e065;
          lVar9 = MakeFontNamesRecord(0);
          if (lVar9 != 0) {
            uVar11 = (ulong)uVar5;
            FontFileFindNamesInScalableDir
                      (lVar1 + 0x30,&local_8d8,(ulong)local_8fc[0],lVar9,local_8c8,
                       (ulong)(param_6 != 0),0,uVar13);
            FUN_0010d0b0(param_5,lVar9,&local_8e8,local_448,local_8c8,__ptr,(ulong)local_8ec,
                         local_8fc);
            FreeFontNames(lVar9);
            if (__ptr != (void *)0x0) {
              free(__ptr);
            }
            goto LAB_0010dea6;
          }
        }
        if (__ptr != (void *)0x0) {
          free(__ptr);
        }
        goto LAB_0010dea0;
      }
    }
    uVar5 = FontFileFindNamesInScalableDir
                      (lVar1 + 0x30,&local_8e8,(ulong)local_8fc[0],param_5,0,(ulong)(param_6 != 0),
                       local_8fc,uVar13);
    uVar11 = (ulong)uVar5;
    if (uVar5 == 0x55) {
      uVar5 = FontFileFindNamesInScalableDir
                        (lVar1 + 0x18,&local_8e8,(ulong)local_8fc[0],param_5,0,(ulong)(param_6 != 0)
                         ,0,uVar13);
      uVar11 = (ulong)uVar5;
    }
  }
  else {
LAB_0010dea0:
    uVar11 = 0x50;
  }
LAB_0010dea6:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar11;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FontFileListFonts(undefined8 param_1,long param_2,undefined8 param_3,uint param_4,ulong param_5
                      ,undefined8 param_6)

{
  FUN_0010dd70(param_2 + 0x18,param_3,(ulong)param_4,param_5 & 0xffffffff,param_6,0);
  return;
}



ulong FUN_0010e130(long param_1,char **param_2,uint *param_3,long *param_4)

{
  uint uVar1;
  char **ppcVar2;
  char *pcVar3;
  char *__s;
  code *pcVar4;
  short sVar5;
  uint *puVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  long lVar10;
  undefined8 *puVar11;
  size_t sVar12;
  long lVar13;
  size_t sVar14;
  ulong uVar15;
  short sVar16;
  uint *puVar17;
  short sVar18;
  long in_FS_OFFSET;
  bool bVar19;
  byte bVar20;
  void *local_1118;
  undefined4 local_10dc;
  uint *local_10d8;
  short local_10d0;
  short local_10ce;
  undefined8 local_10c8 [12];
  undefined *local_1068;
  undefined4 local_1060;
  void *local_1058;
  uint local_1048 [256];
  undefined local_c48 [1024];
  undefined local_848 [2056];
  long local_40;
  
  bVar20 = 0;
  uVar1 = *param_3;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar15 = 0x50;
  if (0x3ff < (int)uVar1) goto LAB_0010e281;
  ppcVar2 = *(char ***)(param_1 + 0x18);
  pcVar3 = *param_2;
  FUN_0010cce0(local_1048,pcVar3,(ulong)uVar1);
  lVar10 = (long)(int)uVar1;
  *(undefined *)((long)local_1048 + lVar10) = 0;
  local_1118 = (void *)FontParseRanges(local_1048,&local_10dc);
  sVar18 = (short)uVar1;
  local_10d8 = local_1048;
  local_10d0 = sVar18;
  local_10ce = FontFileCountDashes(local_1048,(ulong)uVar1);
  iVar7 = FontParseXLFDName(local_1048,local_10c8,0);
  if (iVar7 == 0) {
    lVar13 = 0xf;
    puVar11 = local_10c8;
    while (lVar13 != 0) {
      lVar13 = lVar13 + -1;
      *puVar11 = 0;
      puVar11 = puVar11 + (ulong)bVar20 * 0x1ffffffffffffffe + 1;
    }
  }
  puVar11 = (undefined8 *)FontFileFindNameInDir(ppcVar2 + 6,&local_10d8);
  sVar5 = (short)local_1048;
  if (puVar11 == (undefined8 *)0x0) {
    if ((local_10ce == 0xe) &&
       (iVar7 = FontParseXLFDName(local_1048,local_10c8,2), puVar6 = local_1048, iVar7 != 0)) {
      do {
        puVar17 = puVar6;
        uVar9 = *puVar17 + 0xfefefeff & ~*puVar17;
        uVar8 = uVar9 & 0x80808080;
        puVar6 = puVar17 + 1;
      } while (uVar8 == 0);
      bVar19 = (uVar9 & 0x8080) == 0;
      bVar20 = (byte)uVar8;
      if (bVar19) {
        bVar20 = (byte)(uVar8 >> 0x10);
      }
      sVar16 = (short)(puVar17 + 1);
      if (bVar19) {
        sVar16 = (short)puVar17 + 6;
      }
      local_10d0 = ((sVar16 + -3) - (ushort)CARRY1(bVar20,bVar20)) - sVar5;
      puVar11 = (undefined8 *)FontFileFindNameInDir(ppcVar2 + 6,&local_10d8);
      if (puVar11 != (undefined8 *)0x0) goto LAB_0010e216;
    }
LAB_0010e2bc:
    FUN_0010cce0(local_1048,pcVar3,(ulong)uVar1);
    *(undefined *)((long)local_1048 + lVar10) = 0;
    local_10d8 = local_1048;
    local_10d0 = sVar18;
    local_10ce = FontFileCountDashes(local_1048,(ulong)uVar1);
    iVar7 = FontParseXLFDName(local_1048,local_10c8,2);
    puVar6 = local_1048;
    if (iVar7 == 0) {
LAB_0010e312:
      FUN_0010cce0(local_1048,pcVar3,(ulong)uVar1);
      *(undefined *)((long)local_1048 + lVar10) = 0;
      local_10d8 = local_1048;
      local_10d0 = sVar18;
      local_10ce = FontFileCountDashes(local_1048,(ulong)uVar1);
      puVar11 = (undefined8 *)FontFileFindNameInScalableDir(ppcVar2 + 3,&local_10d8,local_10c8);
      uVar15 = 0x53;
      if (puVar11 == (undefined8 *)0x0) goto LAB_0010e26a;
      __strcpy_chk(local_1048,*puVar11,0x400);
      local_10d0 = *(short *)(puVar11 + 1);
      local_10ce = *(short *)((long)puVar11 + 10);
      local_10d8 = local_1048;
    }
    else {
      do {
        puVar17 = puVar6;
        uVar8 = *puVar17 + 0xfefefeff & ~*puVar17;
        uVar9 = uVar8 & 0x80808080;
        puVar6 = puVar17 + 1;
      } while (uVar9 == 0);
      bVar19 = (uVar8 & 0x8080) == 0;
      if (bVar19) {
        uVar9 = uVar9 >> 0x10;
      }
      sVar16 = (short)(puVar17 + 1);
      if (bVar19) {
        sVar16 = (short)puVar17 + 6;
      }
      local_10d0 = ((sVar16 + -3) - (ushort)CARRY1((byte)uVar9,(byte)uVar9)) - sVar5;
      puVar11 = (undefined8 *)
                FontFileFindNameInScalableDir
                          (ppcVar2 + 3,&local_10d8,local_10c8,(ulong)(uVar9 & 0xffffff00));
      if (puVar11 == (undefined8 *)0x0) goto LAB_0010e312;
    }
    uVar9 = 0x53;
    if (*(int *)(puVar11 + 2) == 0) {
      iVar7 = FontFileCompleteXLFD(local_10c8,puVar11[5]);
      uVar9 = 0x53;
      if (iVar7 != 0) {
        lVar13 = FontFileFindScaledInstance(puVar11,local_10c8,0);
        if (lVar13 == 0) {
          local_1068 = local_c48;
          FUN_0010cce0(local_1068,pcVar3,(ulong)uVar1);
          local_c48[lVar10] = 0;
          local_1060 = local_10dc;
          __s = *ppcVar2;
          local_1058 = local_1118;
          sVar12 = strlen(__s);
          sVar14 = strlen((char *)puVar11[4]);
          if (sVar14 + sVar12 < 0x801) {
            lVar10 = __memcpy_chk(local_848,__s,sVar12 + 1,0x801);
            __strcpy_chk(lVar10 + sVar12,puVar11[4],0x801);
            pcVar4 = *(code **)(puVar11[3] + 0x28);
            if (pcVar4 == (code *)0x0) {
              pcVar4 = *(code **)(puVar11[3] + 0x20);
              if (pcVar4 == (code *)0x0) goto LAB_0010e5fd;
              uVar9 = (*pcVar4)(param_1,*param_4,puVar11);
              uVar15 = (ulong)uVar9;
            }
            else {
              uVar9 = (*pcVar4)(param_1,*param_4,puVar11,&local_10d8,lVar10,local_10c8);
              uVar15 = (ulong)uVar9;
            }
          }
          else {
LAB_0010e5fd:
            uVar15 = 0x53;
          }
          if (local_1118 != (void *)0x0) {
            free(local_1118);
          }
          local_1118 = (void *)0x0;
        }
        else {
          uVar9 = 0x53;
          if (*(long *)(lVar13 + 0x80) != 0) {
            uVar15 = 0x55;
            *param_4 = *(long *)(lVar13 + 0x80) + 8;
            goto LAB_0010e281;
          }
          if (*(long *)(lVar13 + 0x78) == 0) goto LAB_0010e3b7;
          lVar10 = *(long *)(*(long *)(lVar13 + 0x78) + 0x28);
          if (lVar10 != 0) {
            uVar15 = 0x55;
            *param_4 = lVar10 + 8;
            goto LAB_0010e281;
          }
          uVar9 = FUN_0010cab0(param_1,*param_4);
          uVar15 = (ulong)uVar9;
        }
        uVar9 = (uint)uVar15;
        if (uVar9 == 0x55) goto LAB_0010e281;
      }
    }
LAB_0010e3b7:
    FUN_0010cce0(local_1048,pcVar3,(ulong)uVar1);
    uVar15 = (ulong)uVar9;
  }
  else {
LAB_0010e216:
    if (*(int *)(puVar11 + 2) == 2) {
      if (puVar11[5] == 0) {
        uVar9 = FUN_0010cab0(param_1,*param_4,puVar11);
        uVar15 = (ulong)uVar9;
        if (uVar9 == 0x53) goto LAB_0010e2bc;
      }
      else {
        uVar15 = 0x55;
        *param_4 = puVar11[5] + 8;
      }
    }
    else {
      if (*(int *)(puVar11 + 2) != 3) goto LAB_0010e2bc;
      local_1060 = local_10dc;
      local_1058 = local_1118;
      FUN_0010cd50(*puVar11,(ulong)(uint)(int)*(short *)(puVar11 + 1),puVar11[3],param_2,local_10c8)
      ;
      sVar12 = strlen(*param_2);
      uVar15 = 0x52;
      *param_3 = (uint)sVar12;
    }
  }
LAB_0010e26a:
  if (local_1118 != (void *)0x0) {
    free(local_1118);
  }
LAB_0010e281:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar15;
}



undefined8
FontFileListNextFontWithInfo
          (undefined8 param_1,undefined8 param_2,undefined8 *param_3,undefined4 *param_4,
          undefined8 param_5,int *param_6,uint **param_7)

{
  uint uVar1;
  int iVar2;
  uint *puVar3;
  undefined8 uVar4;
  long in_FS_OFFSET;
  undefined4 local_3c;
  undefined8 local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  puVar3 = *param_7;
  uVar1 = *(uint *)(param_7 + 1);
  if (uVar1 == *puVar3) {
    FreeFontNames(puVar3);
    free(param_7);
    uVar4 = 0x53;
  }
  else {
    local_38 = *(undefined8 *)(*(long *)(puVar3 + 4) + (ulong)uVar1 * 8);
    local_3c = *(undefined4 *)(*(long *)(puVar3 + 2) + (ulong)uVar1 * 4);
    uVar4 = FUN_0010e130(param_2,&local_38,&local_3c,param_5);
    if ((int)uVar4 == 0x53) {
      uVar4 = 0x50;
    }
    *param_3 = local_38;
    *param_4 = local_3c;
    iVar2 = *(int *)(param_7 + 1);
    *(int *)(param_7 + 1) = iVar2 + 1;
    *param_6 = **param_7 - (iVar2 + 1);
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FontFileOpenBitmap(void)

{
  FUN_0010c960();
  return;
}



ulong FontFileStartListFonts
                (undefined8 param_1,long param_2,undefined8 param_3,uint param_4,uint param_5,
                long **param_6,uint param_7)

{
  uint uVar1;
  long *__ptr;
  long lVar2;
  ulong uVar3;
  
  uVar3 = 0x50;
  __ptr = (long *)malloc(0x10);
  if (__ptr != (long *)0x0) {
    lVar2 = MakeFontNamesRecord(0);
    *__ptr = lVar2;
    if (lVar2 != 0) {
      uVar1 = FUN_0010dd70(param_2 + 0x18,param_3,(ulong)param_4,(ulong)param_5,lVar2,(ulong)param_7
                          );
      uVar3 = (ulong)uVar1;
      if (uVar1 == 0x55) {
        *(undefined4 *)(__ptr + 1) = 0;
        *param_6 = __ptr;
        return uVar3;
      }
      FreeFontNames(*__ptr);
    }
    free(__ptr);
  }
  return uVar3;
}



void FontFileStartListFontsWithInfo(void)

{
  FontFileStartListFonts();
  return;
}



void FontFileStartListFontsAndAliases(void)

{
  FontFileStartListFonts();
  return;
}



void FontFileRegisterLocalFpeFunctions(void)

{
  RegisterFPEFunctions
            (FontFileNameCheck,FontFileInitFPE,FontFileFreeFPE,FontFileResetFPE,FontFileOpenFont,
             FontFileCloseFont,FontFileListFonts,FontFileStartListFontsWithInfo,
             FontFileListNextFontWithInfo,0,0,0,FontFileStartListFontsAndAliases,
             FontFileListNextFontOrAlias,FontFileEmptyBitmapSource);
  return;
}



undefined8
FontFileAddScaledInstance(long param_1,undefined *param_2,long param_3,undefined8 param_4)

{
  undefined4 *puVar1;
  undefined auVar2 [16];
  uint uVar3;
  long lVar4;
  undefined8 uVar5;
  void *__ptr;
  ulong uVar6;
  
  lVar4 = *(long *)(param_1 + 0x28);
  uVar3 = *(uint *)(lVar4 + 0x78);
  __ptr = *(void **)(lVar4 + 0x80);
  uVar6 = (ulong)uVar3;
  if (uVar3 == *(uint *)(lVar4 + 0x7c)) {
    __ptr = realloc(__ptr,(long)(int)(uVar3 + 4) * 0x88);
    if (__ptr == (void *)0x0) {
      return 0;
    }
    *(int *)(lVar4 + 0x7c) = uVar3 + 4;
    *(void **)(lVar4 + 0x80) = __ptr;
    uVar6 = SEXT48(*(int *)(lVar4 + 0x78));
  }
  *(int *)(lVar4 + 0x78) = (int)uVar6 + 1;
  puVar1 = (undefined4 *)((long)__ptr + uVar6 * 0x88);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)param_2;
  *puVar1 = SUB164(auVar2,0);
  puVar1[1] = SUB164(auVar2 >> 0x20,0);
  puVar1[2] = SUB164(auVar2 >> 0x40,0);
  puVar1[3] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x10);
  puVar1[4] = SUB164(auVar2,0);
  puVar1[5] = SUB164(auVar2 >> 0x20,0);
  puVar1[6] = SUB164(auVar2 >> 0x40,0);
  puVar1[7] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x20);
  puVar1[8] = SUB164(auVar2,0);
  puVar1[9] = SUB164(auVar2 >> 0x20,0);
  puVar1[10] = SUB164(auVar2 >> 0x40,0);
  puVar1[0xb] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x30);
  puVar1[0xc] = SUB164(auVar2,0);
  puVar1[0xd] = SUB164(auVar2 >> 0x20,0);
  puVar1[0xe] = SUB164(auVar2 >> 0x40,0);
  puVar1[0xf] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x40);
  puVar1[0x10] = SUB164(auVar2,0);
  puVar1[0x11] = SUB164(auVar2 >> 0x20,0);
  puVar1[0x12] = SUB164(auVar2 >> 0x40,0);
  puVar1[0x13] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x50);
  puVar1[0x14] = SUB164(auVar2,0);
  puVar1[0x15] = SUB164(auVar2 >> 0x20,0);
  puVar1[0x16] = SUB164(auVar2 >> 0x40,0);
  puVar1[0x17] = SUB164(auVar2 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar2 = *(undefined *)(param_2 + 0x60);
  puVar1[0x18] = SUB164(auVar2,0);
  puVar1[0x19] = SUB164(auVar2 >> 0x20,0);
  puVar1[0x1a] = SUB164(auVar2 >> 0x40,0);
  puVar1[0x1b] = SUB164(auVar2 >> 0x60,0);
  uVar5 = *(undefined8 *)(param_2 + 0x70);
  *(long *)(puVar1 + 0x20) = param_3;
  *(undefined8 *)(puVar1 + 0x1c) = uVar5;
  *(undefined8 *)(puVar1 + 0x1e) = param_4;
  if (param_3 != 0) {
    *(long *)(param_3 + 0xa0) = param_1;
  }
  return 1;
}



void FontFileSwitchStringsToBitmapPointers(long param_1)

{
  long *plVar1;
  long lVar2;
  long *plVar3;
  long **pplVar4;
  int iVar5;
  int iVar6;
  long *plVar7;
  int iVar8;
  
  plVar1 = *(long **)(param_1 + 0x38);
  if (*(int *)(param_1 + 0x18) < 1) {
    return;
  }
  plVar7 = (long *)(*(long *)(param_1 + 0x20) + 0x28);
  iVar8 = 0;
  do {
    lVar2 = *plVar7;
    if (0 < *(int *)(lVar2 + 0x78)) {
      pplVar4 = (long **)(*(long *)(lVar2 + 0x80) + 0x78);
      iVar6 = 0;
      do {
        iVar5 = 0;
        plVar3 = plVar1;
        if (0 < *(int *)(param_1 + 0x30)) {
          do {
            while ((long *)*plVar3 != *pplVar4) {
              iVar5 = iVar5 + 1;
              plVar3 = plVar3 + 0x13;
              if (*(int *)(param_1 + 0x30) == iVar5 || *(int *)(param_1 + 0x30) < iVar5)
              goto LAB_0010ea77;
            }
            *pplVar4 = plVar3;
            iVar5 = iVar5 + 1;
            plVar3 = plVar3 + 0x13;
          } while (*(int *)(param_1 + 0x30) != iVar5 && iVar5 <= *(int *)(param_1 + 0x30));
        }
LAB_0010ea77:
        iVar6 = iVar6 + 1;
        pplVar4 = pplVar4 + 0x11;
      } while (*(int *)(lVar2 + 0x78) != iVar6 && iVar6 <= *(int *)(lVar2 + 0x78));
    }
    iVar8 = iVar8 + 1;
    plVar7 = plVar7 + 0x13;
    if (*(int *)(param_1 + 0x18) == iVar8 || *(int *)(param_1 + 0x18) < iVar8) {
      return;
    }
  } while( true );
}



void FontFileRemoveScaledInstance(long param_1,long param_2)

{
  undefined auVar1 [16];
  long lVar2;
  void *__ptr;
  undefined8 uVar3;
  long lVar4;
  long lVar5;
  int iVar6;
  int iVar7;
  
  lVar2 = *(long *)(param_1 + 0x28);
  if (0 < *(int *)(lVar2 + 0x78)) {
    iVar7 = 0;
    do {
      while( true ) {
        lVar5 = (long)iVar7 * 0x88;
        lVar4 = *(long *)(lVar2 + 0x80) + lVar5;
        if (*(long *)(lVar4 + 0x80) == param_2) break;
        iVar6 = *(int *)(lVar2 + 0x78);
LAB_0010eacd:
        iVar7 = iVar7 + 1;
        if (iVar6 <= iVar7) {
          return;
        }
      }
      __ptr = *(void **)(lVar4 + 0x70);
      if (__ptr != (void *)0x0) {
        free(__ptr);
      }
      iVar6 = *(int *)(lVar2 + 0x78) + -1;
      *(int *)(lVar2 + 0x78) = iVar6;
      if (iVar6 <= iVar7) goto LAB_0010eacd;
      do {
        iVar6 = iVar7;
        lVar5 = lVar5 + 0x88;
        lVar4 = *(long *)(lVar2 + 0x80);
        iVar7 = iVar6 + 1;
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + lVar5);
        uVar3 = *(undefined8 *)(lVar4 + 0x80 + lVar5);
        *(undefined4 *)(lVar4 + -0x88 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x84) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x80) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x7c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x10 + lVar5);
        *(undefined8 *)(lVar4 + -8 + lVar5) = uVar3;
        *(undefined4 *)(lVar4 + -0x78 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x74) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x70) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x6c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x20 + lVar5);
        *(undefined4 *)(lVar4 + -0x68 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -100) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x60) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x5c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x30 + lVar5);
        *(undefined4 *)(lVar4 + -0x58 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x54) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x50) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x4c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x40 + lVar5);
        *(undefined4 *)(lVar4 + -0x48 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x44) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x40) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x3c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x50 + lVar5);
        *(undefined4 *)(lVar4 + -0x38 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x34) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x30) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x2c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x60 + lVar5);
        *(undefined4 *)(lVar4 + -0x28 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x24) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x20) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x1c) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
        auVar1 = *(undefined *)(lVar4 + 0x70 + lVar5);
        *(undefined4 *)(lVar4 + -0x18 + lVar5) = SUB164(auVar1,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x14) = SUB164(auVar1 >> 0x20,0);
        *(undefined4 *)(lVar4 + lVar5 + -0x10) = SUB164(auVar1 >> 0x40,0);
        *(undefined4 *)(lVar4 + lVar5 + -0xc) = SUB164(auVar1 >> 0x60,0);
      } while (iVar7 < *(int *)(lVar2 + 0x78));
      iVar7 = iVar6 + 2;
    } while (iVar7 < *(int *)(lVar2 + 0x78));
  }
  return;
}



undefined8 FontFileCompleteXLFD(uint *param_1,uint *param_2)

{
  ushort uVar1;
  long lVar2;
  uint uVar3;
  uint uVar4;
  ushort *puVar5;
  undefined8 uVar6;
  uint uVar7;
  uint uVar8;
  long in_FS_OFFSET;
  double dVar9;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 extraout_XMM0_Qa_05;
  double extraout_XMM0_Qa_06;
  double dVar10;
  double dVar11;
  double dVar12;
  double dVar13;
  double dVar14;
  double dVar15;
  int local_24;
  
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  puVar5 = (ushort *)GetClientResolutions();
  uVar7 = *param_1;
  if (((uVar7 & 3) == 0) || ((uVar7 & 0xc) == 0)) {
    uVar4 = param_1[0x14];
    uVar8 = param_1[0x15];
    if (local_24 != 0) {
      if ((int)uVar4 < 1) {
        uVar1 = *puVar5;
        uVar4 = (uint)uVar1;
        param_1[0x14] = (uint)uVar1;
        uVar3 = (uint)uVar1;
        if (0 < (int)uVar8) goto LAB_0010ed84;
      }
      else {
        uVar3 = uVar4;
        if (0 < (int)uVar8) goto LAB_0010ec33;
      }
      uVar4 = uVar3;
      uVar8 = (uint)puVar5[1];
      param_1[0x15] = uVar8;
    }
LAB_0010ed84:
    if ((int)uVar4 < 1) {
      uVar4 = param_2[0x14];
      param_1[0x14] = uVar4;
      if ((int)uVar8 < 1) goto LAB_0010ed94;
      if ((int)uVar4 < 1) goto LAB_0010ed50;
    }
    else {
      if ((int)uVar8 < 1) {
LAB_0010ed94:
        param_1[0x15] = param_2[0x15];
        goto LAB_0010ed9a;
      }
    }
LAB_0010ec33:
    if ((uVar7 & 0xf) == 0) {
      if (local_24 == 0) {
        if ((*(byte *)param_2 & 0xc) == 0) goto LAB_0010ed50;
        *(undefined8 *)(param_1 + 10) = *(undefined8 *)(param_2 + 10);
        *(undefined8 *)(param_1 + 0xc) = *(undefined8 *)(param_2 + 0xc);
        *(undefined8 *)(param_1 + 0xe) = *(undefined8 *)(param_2 + 0xe);
        *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_2 + 0x10);
        uVar7 = uVar7 & 0xfffffff3 | *param_2 & 0xc;
        *param_1 = uVar7;
      }
      else {
        uVar1 = puVar5[2];
        *(undefined8 *)(param_1 + 0xe) = 0;
        *(undefined8 *)(param_1 + 0xc) = 0;
        uVar7 = uVar7 & 0xfffffff3 | 4;
        *param_1 = uVar7;
        *(double *)(param_1 + 0x10) = (double)(uint)uVar1 / 10.00000000;
        *(double *)(param_1 + 10) = (double)(uint)uVar1 / 10.00000000;
      }
    }
    dVar15 = 1.00000000;
    if ((uVar7 & 3) == 1) {
      uVar7 = uVar7 | 3;
      dVar15 = (double)uVar4 / (double)uVar8;
      *param_1 = uVar7;
      *(double *)(param_1 + 2) = *(double *)(param_1 + 2) * dVar15;
    }
    dVar10 = (double)uVar4 / 72.27000000;
    dVar11 = (double)uVar8 / 72.27000000;
    if ((uVar7 & 0xc) == 0) goto LAB_0010edf8;
    dVar9 = *(double *)(param_1 + 10);
    dVar13 = *(double *)(param_1 + 0xc);
    dVar14 = *(double *)(param_1 + 0xe);
    dVar12 = *(double *)(param_1 + 0x10);
    while( true ) {
      dVar9 = dVar9 * dVar10;
      dVar12 = dVar12 * dVar11;
      if (((uVar7 & 3) != 0) &&
         ((((dVar15 < (double)((ulong)(*(double *)(param_1 + 2) - dVar9) & 0x7fffffffffffffff) ||
            (1.00000000 <
             (double)((ulong)(*(double *)(param_1 + 4) - dVar13 * dVar11) & 0x7fffffffffffffff))) ||
           (1.00000000 <
            (double)((ulong)(*(double *)(param_1 + 6) - dVar14 * dVar10) & 0x7fffffffffffffff))) ||
          (1.00000000 < (double)((ulong)(*(double *)(param_1 + 8) - dVar12) & 0x7fffffffffffffff))))
         ) goto LAB_0010ed50;
      if ((uVar7 & 0xf) != 6) break;
LAB_0010edf8:
      if (((double)((ulong)dVar10 & 0x7fffffffffffffff) < 0.00000000) ||
         ((double)((ulong)dVar11 & 0x7fffffffffffffff) < 0.00000000)) goto LAB_0010ed50;
      dVar9 = *(double *)(param_1 + 2);
      uVar4 = (uint)((*param_1 & 3) == 2) * 4 + 4;
      uVar7 = *param_1 & 0xfffffff3 | uVar4;
      *param_1 = uVar7;
      dVar13 = *(double *)(param_1 + 4) / dVar11;
      *(double *)(param_1 + 10) = dVar9 / dVar10;
      dVar14 = *(double *)(param_1 + 6) / dVar10;
      *(double *)(param_1 + 0xc) = dVar13;
      dVar12 = *(double *)(param_1 + 8) / dVar11;
      *(double *)(param_1 + 0xe) = dVar14;
      *(double *)(param_1 + 0x10) = dVar12;
      if ((uVar4 & 0xc) != 4) goto LAB_0010ee90;
      dVar9 = (double)(int)((dVar9 / dVar10) * 10.00000000 + 0.50000000) / 10.00000000;
      dVar12 = (double)(int)(dVar12 * 10.00000000 + 0.50000000) / 10.00000000;
      *(double *)(param_1 + 10) = dVar9;
      *(double *)(param_1 + 0x10) = dVar12;
    }
    *(double *)(param_1 + 2) = dVar9;
    *(double *)(param_1 + 4) = dVar13 * dVar11;
    *(double *)(param_1 + 6) = dVar14 * dVar10;
    *(double *)(param_1 + 8) = dVar12;
    *param_1 = uVar7 & 0xfffffffc | (uint)((uVar7 & 0xc) != 8) + 2;
LAB_0010ee90:
    xlfd_round_double(dVar9,dVar10,dVar11,dVar12);
    *(undefined8 *)(param_1 + 2) = extraout_XMM0_Qa;
    xlfd_round_double(*(undefined8 *)(param_1 + 4));
    *(undefined8 *)(param_1 + 4) = extraout_XMM0_Qa_00;
    xlfd_round_double(*(undefined8 *)(param_1 + 6));
    *(undefined8 *)(param_1 + 6) = extraout_XMM0_Qa_01;
    xlfd_round_double(*(undefined8 *)(param_1 + 8));
    *(undefined8 *)(param_1 + 8) = extraout_XMM0_Qa_02;
    xlfd_round_double(*(undefined8 *)(param_1 + 10));
    *(undefined8 *)(param_1 + 10) = extraout_XMM0_Qa_03;
    xlfd_round_double(*(undefined8 *)(param_1 + 0xc));
    *(undefined8 *)(param_1 + 0xc) = extraout_XMM0_Qa_04;
    xlfd_round_double(*(undefined8 *)(param_1 + 0xe));
    *(undefined8 *)(param_1 + 0xe) = extraout_XMM0_Qa_05;
    xlfd_round_double(*(undefined8 *)(param_1 + 0x10));
    *(double *)(param_1 + 0x10) = extraout_XMM0_Qa_06;
    param_1[0x13] = (int)(extraout_XMM0_Qa_06 * 10.00000000);
    param_1[0x12] = (int)*(double *)(param_1 + 8);
    uVar6 = 1;
  }
  else {
    if ((int)param_1[0x15] < 1) {
      dVar15 = hypot(*(double *)(param_1 + 4),*(double *)(param_1 + 8));
      dVar10 = hypot(*(double *)(param_1 + 0xc),*(double *)(param_1 + 0x10));
      if (0.00000000 <= dVar10) {
        param_1[0x15] = (int)((dVar15 * 72.27000000) / dVar10 + 0.50000000);
        uVar4 = param_1[0x14];
        if ((int)uVar4 < 1) {
          uVar7 = *param_1;
          goto LAB_0010efe0;
        }
        goto LAB_0010ed9e;
      }
    }
    else {
      uVar4 = param_1[0x14];
      if (0 < (int)uVar4) {
        uVar8 = param_1[0x15];
        uVar7 = *param_1;
        goto LAB_0010ec33;
      }
LAB_0010efe0:
      if ((uVar7 & 3) - 2 < 2) {
        dVar15 = hypot(*(double *)(param_1 + 2),*(double *)(param_1 + 6));
        dVar10 = hypot(*(double *)(param_1 + 10),*(double *)(param_1 + 0xe));
        if (dVar10 < 0.00000000) goto LAB_0010ed50;
        uVar4 = (uint)((dVar15 * 72.27000000) / dVar10 + 0.50000000);
        param_1[0x14] = uVar4;
      }
      else {
        uVar4 = param_1[0x15];
        param_1[0x14] = uVar4;
      }
LAB_0010ed9a:
      if (0 < (int)uVar4) {
LAB_0010ed9e:
        uVar8 = param_1[0x15];
        if (0 < (int)uVar8) {
          uVar7 = *param_1;
          goto LAB_0010ec33;
        }
      }
    }
LAB_0010ed50:
    uVar6 = 0;
  }
  if (lVar2 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



uint * FontFileFindScaledInstance(long param_1,uint *param_2,int param_3)

{
  char *pcVar1;
  char *pcVar2;
  uint *puVar3;
  int iVar4;
  uint uVar5;
  long lVar6;
  char *pcVar7;
  char *pcVar8;
  long lVar9;
  char *pcVar10;
  double *pdVar11;
  uint *puVar12;
  int iVar13;
  int iVar14;
  double dVar15;
  double dVar16;
  undefined8 uVar18;
  undefined auVar17 [16];
  double dVar19;
  double dVar20;
  double dVar21;
  
  lVar6 = *(long *)(param_1 + 0x28);
  iVar4 = *(int *)(lVar6 + 0x78);
  if (param_3 != 0) {
    lVar9 = 0;
    if (iVar4 != 0) {
      lVar9 = *(long *)(lVar6 + 0x80);
      dVar21 = *(double *)(lVar9 + 0x28) - *(double *)(param_2 + 10);
      dVar15 = *(double *)(lVar9 + 0x30) - *(double *)(param_2 + 0xc);
      dVar19 = *(double *)(lVar9 + 0x40) - *(double *)(param_2 + 0x10);
      dVar16 = *(double *)(lVar9 + 0x38) - *(double *)(param_2 + 0xe);
      uVar18 = 0;
      dVar15 = dVar16 * dVar16 + dVar21 * dVar21 + dVar15 * dVar15 + dVar19 * dVar19;
      if (1 < iVar4) {
        pdVar11 = (double *)(lVar9 + 0xb0);
        iVar14 = 0;
        iVar13 = 1;
        do {
          if ((pdVar11[0xb] == 0.00000000) || ((*(byte *)((long)pdVar11[0xb] + 0x13) & 2) != 0)) {
            dVar16 = *pdVar11 - *(double *)(param_2 + 10);
            dVar20 = pdVar11[3] - *(double *)(param_2 + 0x10);
            dVar19 = pdVar11[1] - *(double *)(param_2 + 0xc);
            dVar21 = pdVar11[2] - *(double *)(param_2 + 0xe);
            dVar16 = (double)(int)(dVar21 * dVar21 + dVar16 * dVar16 + dVar19 * dVar19 +
                                  dVar20 * dVar20);
            auVar17 = minsd(ZEXT816((ulong)dVar16),CONCAT88(uVar18,dVar15));
            if (dVar16 < dVar15) {
              iVar14 = iVar13;
            }
            dVar15 = SUB168(auVar17,0);
            uVar18 = SUB168(auVar17 >> 0x40,0);
          }
          iVar13 = iVar13 + 1;
          pdVar11 = pdVar11 + 0x11;
        } while (iVar13 != iVar4);
        lVar9 = lVar9 + (long)iVar14 * 0x88;
      }
      if (*(long *)(lVar9 + 0x80) != 0) {
        if ((*(byte *)(*(long *)(lVar9 + 0x80) + 0x13) & 2) == 0) {
          lVar9 = 0;
        }
        return (uint *)lVar9;
      }
    }
    return (uint *)lVar9;
  }
  if (0 < iVar4) {
    puVar12 = *(uint **)(lVar6 + 0x80);
    puVar3 = puVar12 + (ulong)(iVar4 - 1) * 0x22 + 0x22;
    do {
      if (((*(long *)(puVar12 + 0x20) == 0) ||
          ((*(byte *)(*(long *)(puVar12 + 0x20) + 0x13) & 2) != 0)) &&
         (*(long *)(puVar12 + 0x14) == *(long *)(param_2 + 0x14))) {
LAB_0010f1b8:
        if ((((puVar12[0x16] == 0 || puVar12[0x16] == param_2[0x16]) || (param_2[0x16] + 1 < 2)) &&
            ((uVar5 = *param_2, (uVar5 & 3) == 0 ||
             (((((*puVar12 ^ uVar5) & 3) == 0 &&
               (*(double *)(puVar12 + 2) == *(double *)(param_2 + 2))) &&
              ((*(double *)(puVar12 + 4) == *(double *)(param_2 + 4) &&
               ((*(double *)(puVar12 + 6) == *(double *)(param_2 + 6) &&
                (*(double *)(puVar12 + 8) == *(double *)(param_2 + 8))))))))))) &&
           (((uVar5 & 0xc) == 0 ||
            ((((((uVar5 ^ *puVar12) & 0xc) == 0 &&
               (*(double *)(puVar12 + 10) == *(double *)(param_2 + 10))) &&
              (*(double *)(puVar12 + 0xc) == *(double *)(param_2 + 0xc))) &&
             ((*(double *)(puVar12 + 0xe) == *(double *)(param_2 + 0xe) &&
              (*(double *)(puVar12 + 0x10) == *(double *)(param_2 + 0x10))))))))) {
          uVar5 = puVar12[0x1a];
          if (uVar5 == 0) {
            return puVar12;
          }
          if (uVar5 == param_2[0x1a]) {
            if ((int)uVar5 < 1) {
              return puVar12;
            }
            pcVar7 = *(char **)(puVar12 + 0x1c);
            pcVar8 = *(char **)(param_2 + 0x1c);
            if (((pcVar8[1] == pcVar7[1]) && (*pcVar8 == *pcVar7)) && (pcVar8[3] == pcVar7[3])) {
              pcVar10 = pcVar7 + 4;
              while (pcVar10[-2] == pcVar8[2]) {
                if (pcVar7 + 4 + (ulong)(uVar5 - 1) * 4 == pcVar10) {
                  return puVar12;
                }
                if (((pcVar10[1] != pcVar8[5]) || (*pcVar10 != pcVar8[4])) ||
                   (pcVar1 = pcVar8 + 7, pcVar2 = pcVar10 + 3, pcVar10 = pcVar10 + 4,
                   pcVar8 = pcVar8 + 4, *pcVar2 != *pcVar1)) break;
              }
            }
          }
        }
        do {
          puVar12 = puVar12 + 0x22;
          if (puVar12 == puVar3) {
            return (uint *)0;
          }
          while ((*(long *)(puVar12 + 0x20) == 0 ||
                 ((*(byte *)(*(long *)(puVar12 + 0x20) + 0x13) & 2) != 0))) {
            if (*(long *)(puVar12 + 0x14) == *(long *)(param_2 + 0x14)) goto LAB_0010f1b8;
            puVar12 = puVar12 + 0x22;
            if (puVar12 == puVar3) {
              return (uint *)0;
            }
          }
        } while( true );
      }
      puVar12 = puVar12 + 0x22;
    } while (puVar12 != puVar3);
  }
  return (uint *)0;
}



ulong FUN_0010f580(long *param_1)

{
  long *plVar1;
  long lVar2;
  undefined *puVar3;
  undefined uVar4;
  int iVar5;
  long lVar6;
  int iVar7;
  
  plVar1 = (long *)param_1[0x406];
  iVar5 = *(int *)(plVar1 + 0xe);
  if (iVar5 != -1) {
    if (iVar5 < 0) {
      if (iVar5 == -3) goto LAB_0010f695;
    }
    else {
      if (iVar5 == 0) {
        *(undefined4 *)(plVar1 + 4) = 0x2000;
        plVar1[3] = (long)plVar1 + 0x74;
        do {
          if (*(int *)(plVar1 + 1) == 0) {
            lVar6 = 0;
            do {
              iVar7 = (int)lVar6;
              iVar5 = *(int *)(plVar1[0x80f] + 8);
              *(int *)(plVar1[0x80f] + 8) = iVar5 + -1;
              if (iVar5 == 0) {
                lVar2 = plVar1[0x80f];
                iVar5 = (**(code **)(lVar2 + 0x2010))(lVar2);
                uVar4 = (undefined)iVar5;
                *(int *)(lVar2 + 0xc) = iVar5;
                if (iVar5 == -1) goto LAB_0010f680;
              }
              else {
                puVar3 = *(undefined **)(long *)plVar1[0x80f];
                *(undefined **)(long *)plVar1[0x80f] = puVar3 + 1;
                uVar4 = *puVar3;
              }
              *(undefined *)((long)plVar1 + lVar6 + 0x2074) = uVar4;
              lVar6 = lVar6 + 1;
            } while (lVar6 != 0x2000);
            iVar7 = 0x2000;
LAB_0010f680:
            *(int *)(plVar1 + 1) = *(int *)(plVar1 + 1) + iVar7;
            *plVar1 = (long)plVar1 + 0x2074;
          }
          iVar5 = inflate(plVar1,0);
          *(int *)(plVar1 + 0xe) = iVar5;
        } while ((iVar5 == 0) && (*(int *)(plVar1 + 4) != 0));
        *param_1 = (long)plVar1 + 0x74;
        iVar5 = -*(int *)(plVar1 + 4) + 0x2000;
        if (-1 < iVar5) {
          *(int *)(param_1 + 1) = -*(int *)(plVar1 + 4) + 0x1fff;
          *param_1 = (long)plVar1 + 0x75;
          return (ulong)*(byte *)((long)plVar1 + 0x74);
        }
        *(int *)(param_1 + 1) = iVar5;
      }
      else {
        if (iVar5 == 1) goto LAB_0010f695;
      }
    }
    return 0xffffffff;
  }
LAB_0010f695:
  *(undefined4 *)(param_1 + 1) = 0;
  return 0xffffffff;
}



undefined8 BufFilePushZIP(undefined8 param_1)

{
  byte **ppbVar1;
  byte *pbVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  undefined8 *__ptr;
  undefined8 uVar7;
  ulong uVar8;
  
  __ptr = (undefined8 *)malloc(0x4080);
  if (__ptr == (undefined8 *)0x0) {
    return 0;
  }
  __ptr[8] = 0;
  __ptr[9] = 0;
  __ptr[10] = 0;
  __ptr[0x80f] = param_1;
  *__ptr = 0;
  __ptr[3] = 0;
  *(undefined4 *)(__ptr + 4) = 0;
  *(undefined4 *)(__ptr + 1) = 0;
  iVar3 = inflateInit2_(__ptr,0xfffffff1,"1.2.11",0x70);
  *(int *)(__ptr + 0xe) = iVar3;
  if (iVar3 == 0) {
    ppbVar1 = (byte **)__ptr[0x80f];
    *(undefined4 *)(__ptr + 4) = 0x2000;
    *(undefined4 *)(__ptr + 1) = 0;
    __ptr[3] = (long)__ptr + 0x2074;
    iVar3 = *(int *)(ppbVar1 + 1);
    *(int *)(ppbVar1 + 1) = iVar3 + -1;
    if (iVar3 == 0) {
      iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
      *(int *)((long)ppbVar1 + 0xc) = iVar3;
      if ((iVar3 == -1) || (iVar3 != 0x1f)) goto LAB_0010f7c6;
    }
    else {
      pbVar2 = *ppbVar1;
      *ppbVar1 = pbVar2 + 1;
      if (*pbVar2 != 0x1f) goto LAB_0010f7c6;
    }
    iVar3 = *(int *)(ppbVar1 + 1);
    *(int *)(ppbVar1 + 1) = iVar3 + -1;
    if (iVar3 == 0) {
      uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
      *(uint *)((long)ppbVar1 + 0xc) = uVar4;
      if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
    }
    else {
      pbVar2 = *ppbVar1;
      *ppbVar1 = pbVar2 + 1;
      uVar4 = (uint)*pbVar2;
    }
    if (uVar4 == 0x8b) {
      iVar3 = *(int *)(ppbVar1 + 1);
      *(int *)(ppbVar1 + 1) = iVar3 + -1;
      if (iVar3 == 0) {
        uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
        *(uint *)((long)ppbVar1 + 0xc) = uVar4;
        if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
      }
      else {
        pbVar2 = *ppbVar1;
        *ppbVar1 = pbVar2 + 1;
        uVar4 = (uint)*pbVar2;
      }
      if (uVar4 == 8) {
        iVar3 = *(int *)(ppbVar1 + 1);
        *(int *)(ppbVar1 + 1) = iVar3 + -1;
        if (iVar3 == 0) {
          uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
          uVar8 = (ulong)uVar4;
          *(uint *)((long)ppbVar1 + 0xc) = uVar4;
          if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
        }
        else {
          pbVar2 = *ppbVar1;
          *ppbVar1 = pbVar2 + 1;
          uVar8 = (ulong)*pbVar2;
        }
        if ((uVar8 & 0xe0) == 0) {
          iVar3 = *(int *)(ppbVar1 + 1);
          iVar5 = iVar3 + -1;
          *(int *)(ppbVar1 + 1) = iVar5;
          if (iVar3 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
            iVar5 = *(int *)(ppbVar1 + 1);
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          iVar3 = iVar5 + -1;
          *(int *)(ppbVar1 + 1) = iVar3;
          if (iVar5 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
            iVar3 = *(int *)(ppbVar1 + 1);
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          iVar5 = iVar3 + -1;
          *(int *)(ppbVar1 + 1) = iVar5;
          if (iVar3 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
            iVar5 = *(int *)(ppbVar1 + 1);
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          *(int *)(ppbVar1 + 1) = iVar5 + -1;
          if (iVar5 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          iVar3 = *(int *)(ppbVar1 + 1);
          iVar5 = iVar3 + -1;
          *(int *)(ppbVar1 + 1) = iVar5;
          if (iVar3 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
            iVar5 = *(int *)(ppbVar1 + 1);
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          *(int *)(ppbVar1 + 1) = iVar5 + -1;
          if (iVar5 == 0) {
            iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
            *(int *)((long)ppbVar1 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_0010f7c6;
          }
          else {
            *ppbVar1 = *ppbVar1 + 1;
          }
          if ((uVar8 & 4) != 0) {
            iVar3 = *(int *)(ppbVar1 + 1);
            iVar5 = iVar3 + -1;
            *(int *)(ppbVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
              *(uint *)((long)ppbVar1 + 0xc) = uVar4;
              if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
              iVar5 = *(int *)(ppbVar1 + 1);
            }
            else {
              pbVar2 = *ppbVar1;
              *ppbVar1 = pbVar2 + 1;
              uVar4 = (uint)*pbVar2;
            }
            *(int *)(ppbVar1 + 1) = iVar5 + -1;
            if (iVar5 == 0) {
              uVar6 = (*(code *)ppbVar1[0x402])(ppbVar1);
              *(uint *)((long)ppbVar1 + 0xc) = uVar6;
              if (uVar6 == 0xffffffff) goto LAB_0010f7c6;
            }
            else {
              pbVar2 = *ppbVar1;
              *ppbVar1 = pbVar2 + 1;
              uVar6 = (uint)*pbVar2;
            }
            iVar3 = uVar4 + uVar6 * 0x100;
            while (-1 < iVar3) {
              iVar5 = *(int *)(ppbVar1 + 1);
              *(int *)(ppbVar1 + 1) = iVar5 + -1;
              if (iVar5 == 0) {
                iVar5 = (*(code *)ppbVar1[0x402])(ppbVar1);
                *(int *)((long)ppbVar1 + 0xc) = iVar5;
                if (iVar5 == -1) goto LAB_0010f7c6;
              }
              else {
                *ppbVar1 = *ppbVar1 + 1;
              }
              iVar3 = iVar3 + -1;
            }
          }
          if ((uVar8 & 8) != 0) {
            do {
              iVar3 = *(int *)(ppbVar1 + 1);
              *(int *)(ppbVar1 + 1) = iVar3 + -1;
              if (iVar3 == 0) {
                uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
                *(uint *)((long)ppbVar1 + 0xc) = uVar4;
                if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
              }
              else {
                pbVar2 = *ppbVar1;
                *ppbVar1 = pbVar2 + 1;
                uVar4 = (uint)*pbVar2;
              }
            } while (uVar4 != 0);
          }
          if ((uVar8 & 0x10) != 0) {
            do {
              iVar3 = *(int *)(ppbVar1 + 1);
              *(int *)(ppbVar1 + 1) = iVar3 + -1;
              if (iVar3 == 0) {
                uVar4 = (*(code *)ppbVar1[0x402])(ppbVar1);
                *(uint *)((long)ppbVar1 + 0xc) = uVar4;
                if (uVar4 == 0xffffffff) goto LAB_0010f7c6;
              }
              else {
                pbVar2 = *ppbVar1;
                *ppbVar1 = pbVar2 + 1;
                uVar4 = (uint)*pbVar2;
              }
            } while (uVar4 != 0);
          }
          if ((uVar8 & 2) != 0) {
            iVar3 = *(int *)(ppbVar1 + 1);
            iVar5 = iVar3 + -1;
            *(int *)(ppbVar1 + 1) = iVar5;
            if (iVar3 == 0) {
              iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
              *(int *)((long)ppbVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_0010f7c6;
              iVar5 = *(int *)(ppbVar1 + 1);
            }
            else {
              *ppbVar1 = *ppbVar1 + 1;
            }
            *(int *)(ppbVar1 + 1) = iVar5 + -1;
            if (iVar5 == 0) {
              iVar3 = (*(code *)ppbVar1[0x402])(ppbVar1);
              *(int *)((long)ppbVar1 + 0xc) = iVar3;
              if (iVar3 == -1) goto LAB_0010f7c6;
            }
            else {
              *ppbVar1 = *ppbVar1 + 1;
            }
          }
          uVar7 = BufFileCreate(__ptr,&LAB_0010f560,0,&LAB_0010f4d0,&LAB_0010f520);
          return uVar7;
        }
      }
    }
  }
LAB_0010f7c6:
  free(__ptr);
  return 0;
}



void FontFileRegisterFpeFunctions(void)

{
  undefined8 uVar1;
  
  BitmapRegisterFontFileFunctions();
  FreeTypeRegisterFontFileFunctions();
  uVar1 = 0x10fbe3;
  FontFileRegisterLocalFpeFunctions();
  RegisterFPEFunctions
            (&LAB_00110080,FUN_00110590,FUN_00110710,&LAB_0010fe30,&LAB_00110660,&LAB_00110070,
             &LAB_001105e0,&LAB_00110580,&LAB_0010ffc0,0,0,0,&LAB_00110570,&LAB_0010fe40,
             FontFileEmptyBitmapSource,uVar1);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8 FontFilePriorityRegisterRenderer(char **param_1,uint param_2)

{
  char *__s2;
  long lVar1;
  int iVar2;
  char **ppcVar3;
  undefined8 uVar4;
  size_t __size;
  int iVar5;
  char **__ptr;
  int iVar6;
  
  __ptr = DAT_0033cb78;
  iVar5 = DAT_0033cb70;
  lVar1 = serverGeneration;
  if (_DAT_0033cb60 == serverGeneration) {
    if (DAT_0033cb70 < 1) {
      __size = 0x10;
      iVar5 = 1;
      iVar2 = 0;
    }
    else {
      __s2 = *param_1;
      ppcVar3 = DAT_0033cb78;
      iVar2 = 0;
      do {
        iVar6 = iVar2;
        iVar2 = strcasecmp(*(char **)*ppcVar3,__s2);
        if (iVar2 == 0) {
          if ((int)param_2 <= *(int *)(ppcVar3 + 1)) {
            if (*(uint *)(ppcVar3 + 1) != param_2) {
              return 1;
            }
            if (lVar1 != 1) {
              return 1;
            }
            ErrorF("Warning: font renderer for \"%s\" already registered at priority %d\n",__s2,
                   (ulong)param_2);
            return 1;
          }
          if (iVar6 < iVar5) goto LAB_0010fca9;
          iVar5 = iVar6 + 1;
          __size = (long)iVar5 << 4;
          iVar2 = iVar6;
          goto LAB_0010fc63;
        }
        iVar2 = iVar6 + 1;
        ppcVar3 = ppcVar3 + 2;
      } while (iVar5 != iVar2);
      iVar5 = iVar6 + 2;
      __size = (long)iVar5 << 4;
    }
  }
  else {
    _DAT_0033cb60 = serverGeneration;
    DAT_0033cb70 = 0;
    if (DAT_0033cb78 != (char **)0x0) {
      free(DAT_0033cb78);
    }
    DAT_0033cb78 = (char **)0x0;
    __ptr = (char **)0x0;
    __size = 0x10;
    iVar5 = 1;
    iVar2 = 0;
  }
LAB_0010fc63:
  uVar4 = 0;
  __ptr = (char **)realloc(__ptr,__size);
  if (__ptr != (char **)0x0) {
    ppcVar3 = __ptr + (long)iVar2 * 2;
    iVar6 = iVar2;
    DAT_0033cb70 = iVar5;
    DAT_0033cb78 = __ptr;
LAB_0010fca9:
    uVar4 = 1;
    *(int *)(param_1 + 6) = iVar6;
    *(char ***)ppcVar3 = param_1;
    *(uint *)(ppcVar3 + 1) = param_2;
  }
  return uVar4;
}



void FontFileRegisterRenderer(undefined8 param_1)

{
  FontFilePriorityRegisterRenderer(param_1,0);
  return;
}



char ** FontFileMatchRenderer(char *param_1)

{
  char **ppcVar1;
  char **ppcVar2;
  int iVar3;
  size_t sVar4;
  char **ppcVar5;
  
  sVar4 = strlen(param_1);
  if (0 < DAT_0033cb70) {
    ppcVar1 = DAT_0033cb78 + (ulong)(DAT_0033cb70 - 1) * 2 + 2;
    ppcVar5 = DAT_0033cb78;
    do {
      ppcVar2 = (char **)*ppcVar5;
      if ((*(int *)(ppcVar2 + 1) <= (int)sVar4) &&
         (iVar3 = strcasecmp(param_1 + ((long)(int)sVar4 - (long)*(int *)(ppcVar2 + 1)),*ppcVar2),
         iVar3 == 0)) {
        return ppcVar2;
      }
      ppcVar5 = ppcVar5 + 2;
    } while (ppcVar1 != ppcVar5);
  }
  return (char **)0;
}



void FUN_001100b0(long param_1)

{
  int *piVar1;
  void *__ptr;
  int iVar2;
  long lVar3;
  
  if (0 < *(int *)(param_1 + 8)) {
    lVar3 = 0;
    iVar2 = 0;
    do {
      while( true ) {
        __ptr = *(void **)(*(long *)(param_1 + 0x10) + lVar3);
        piVar1 = (int *)((long)__ptr + 0x14);
        *piVar1 = *piVar1 + -1;
        if (*piVar1 != 0) break;
        iVar2 = iVar2 + 1;
        lVar3 = lVar3 + 8;
        FontFileFreeFPE(__ptr);
        free(*(void **)((long)__ptr + 8));
        free(__ptr);
        if (*(int *)(param_1 + 8) <= iVar2) goto LAB_00110111;
      }
      iVar2 = iVar2 + 1;
      lVar3 = lVar3 + 8;
    } while (iVar2 < *(int *)(param_1 + 8));
  }
LAB_00110111:
  *(undefined4 *)(param_1 + 8) = 0;
  return;
}



undefined8 FUN_00110130(long param_1,int param_2)

{
  char *__filename;
  int iVar1;
  long *__ptr;
  int iVar2;
  DIR *__dirp;
  dirent *pdVar3;
  ssize_t sVar4;
  size_t __n;
  char *__s;
  int *__ptr_00;
  void *__dest;
  undefined8 uVar5;
  long lVar6;
  long in_FS_OFFSET;
  stat local_8d8;
  char local_848 [1024];
  char local_448 [1032];
  long local_40;
  
  __ptr = *(long **)(param_1 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  __filename = (char *)(*(long *)(param_1 + 8) + 10);
  iVar2 = __xstat(1,__filename,&local_8d8);
  uVar5 = 0x56;
  if (((-1 < iVar2) && ((local_8d8.st_mode & 0xf000) == 0x4000)) &&
     ((param_2 != 0 || (uVar5 = 0x55, *__ptr < local_8d8.st_mtim.tv_sec)))) {
    __dirp = opendir(__filename);
    if (__dirp == (DIR *)0x0) {
      free(__ptr);
      uVar5 = 0x56;
    }
    else {
      FUN_001100b0(*(undefined8 *)(param_1 + 0x18));
LAB_00110210:
      uVar5 = 0x11021a;
      pdVar3 = readdir(__dirp);
      if (pdVar3 != (dirent *)0x0) {
        while( true ) {
          __snprintf_chk(local_848,0x400,1,0x400,"%s/%s",__filename,pdVar3->d_name,uVar5);
          sVar4 = readlink(local_848,local_448,0x3ff);
          iVar2 = (int)sVar4;
          if (iVar2 < 0) break;
          local_448[iVar2] = '\0';
          if (local_448[0] != '/') {
            __n = strlen(__filename);
            lVar6 = (long)(int)__n;
            memmove(local_448 + lVar6 + 1,local_448,0x3ff - lVar6);
            __memcpy_chk(local_448,__filename,lVar6,0x400);
            local_448[lVar6] = '/';
            iVar2 = iVar2 + 1 + (int)__n;
          }
          __s = strchr(local_848,0x3a);
          if (__s != (char *)0x0) {
            lVar6 = (long)iVar2;
            __n = strlen(__s);
            if (lVar6 + __n < 0x400) {
              iVar2 = iVar2 + (int)__n;
              memcpy(local_448 + lVar6,__s,__n);
            }
          }
          __ptr_00 = (int *)malloc(0x20);
          if (__ptr_00 == (int *)0x0) break;
          iVar1 = *(int *)(param_1 + 0x10);
          *__ptr_00 = iVar2;
          __ptr_00[4] = iVar1;
          __dest = malloc((long)(iVar2 + 1));
          *(void **)(__ptr_00 + 2) = __dest;
          if (__dest != (void *)0x0) {
            __dest = memcpy(__dest,local_448,(long)iVar2);
            __ptr_00[5] = 1;
            *(undefined *)((long)__dest + (long)iVar2) = 0;
            iVar2 = FontFileInitFPE(__ptr_00);
            if (iVar2 == 0x55) {
              iVar1 = *(int *)(__ptr + 1);
              iVar2 = *(int *)((long)__ptr + 0xc);
              __dest = (void *)__ptr[2];
              if (iVar2 <= iVar1) {
                if (iVar2 == 0) {
                  *(undefined4 *)((long)__ptr + 0xc) = 0x10;
                  __n = 0x80;
                }
                else {
                  *(int *)((long)__ptr + 0xc) = iVar2 * 2;
                  __n = (long)(iVar2 * 2) << 3;
                }
                __dest = realloc(__dest,__n);
                if (__dest == (void *)0x0) {
                  FontFileFreeFPE(__ptr_00);
                  free(__ptr_00);
                  break;
                }
                iVar1 = *(int *)(__ptr + 1);
                *(void **)(__ptr + 2) = __dest;
              }
              *(int *)(__ptr + 1) = iVar1 + 1;
              *(int **)((long)__dest + (long)iVar1 * 8) = __ptr_00;
              break;
            }
            free(*(void **)(__ptr_00 + 2));
          }
          free(__ptr_00);
          uVar5 = 0x110387;
          pdVar3 = readdir(__dirp);
          if (pdVar3 == (dirent *)0x0) goto LAB_00110390;
        }
        goto LAB_00110210;
      }
LAB_00110390:
      closedir(__dirp);
      qsort((void *)__ptr[2],(long)*(int *)(__ptr + 1),8,(__compar_fn_t)&LAB_0010fef0);
      uVar5 = 0x55;
      *__ptr = local_8d8.st_mtim.tv_sec;
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
FUN_00110480(undefined8 param_1,long param_2,undefined8 param_3,ulong param_4,ulong param_5,
            long **param_6,uint param_7)

{
  long lVar1;
  int iVar2;
  long *__ptr;
  long *plVar3;
  long lVar4;
  undefined8 uVar5;
  
  lVar1 = *(long *)(param_2 + 0x18);
  FUN_00110130(param_2);
  uVar5 = 0x1104bf;
  __ptr = (long *)malloc((long)*(int *)(lVar1 + 8) * 8 + 0x10);
  if (__ptr != (long *)0x0) {
    plVar3 = __ptr + 2;
    *(long **)__ptr = plVar3;
    if (*(int *)(lVar1 + 8) < 1) {
LAB_00110540:
      *(undefined4 *)(__ptr + 1) = 0;
      *param_6 = __ptr;
      return 0x55;
    }
    lVar4 = 0;
    while( true ) {
      iVar2 = FontFileStartListFonts
                        (param_1,*(undefined8 *)(*(long *)(lVar1 + 0x10) + lVar4 * 8),param_3,
                         param_4 & 0xffffffff,param_5 & 0xffffffff,(long)plVar3 + lVar4 * 8,
                         (ulong)param_7,uVar5);
      if (iVar2 != 0x55) break;
      iVar2 = (int)lVar4 + 1;
      lVar4 = lVar4 + 1;
      if (*(int *)(lVar1 + 8) == iVar2 || *(int *)(lVar1 + 8) < iVar2) goto LAB_00110540;
      plVar3 = (long *)*__ptr;
    }
    free(__ptr);
  }
  return 0x50;
}



undefined8 FUN_00110590(long param_1)

{
  undefined8 *puVar1;
  undefined8 uVar2;
  
  puVar1 = (undefined8 *)malloc(0x18);
  if (puVar1 != (undefined8 *)0x0) {
    *(undefined8 **)(param_1 + 0x18) = puVar1;
    *puVar1 = 0;
    puVar1[1] = 0;
    puVar1[2] = 0;
    uVar2 = FUN_00110130(param_1,1);
    return uVar2;
  }
  return 0x50;
}



undefined8 FUN_00110710(long param_1)

{
  void *__ptr;
  int iVar1;
  undefined8 uVar2;
  
  iVar1 = strncmp(*(char **)(param_1 + 8),"catalogue:",10);
  if (iVar1 != 0) {
    uVar2 = FontFileFreeFPE(param_1);
    return uVar2;
  }
  __ptr = *(void **)(param_1 + 0x18);
  FUN_001100b0(__ptr);
  free(*(void **)((long)__ptr + 0x10));
  free(__ptr);
  return 0x55;
}



void CatalogueRegisterLocalFpeFunctions(void)

{
  RegisterFPEFunctions
            (&LAB_00110080,FUN_00110590,FUN_00110710,&LAB_0010fe30,&LAB_00110660,&LAB_00110070,
             &LAB_001105e0,&LAB_00110580,&LAB_0010ffc0,0,0,0,&LAB_00110570,&LAB_0010fe40,
             FontFileEmptyBitmapSource);
  return;
}



undefined8
FTPickMapping(long param_1,undefined8 param_2,undefined8 param_3,long param_4,undefined4 *param_5)

{
  long *plVar1;
  char cVar2;
  int *piVar3;
  int iVar4;
  int iVar5;
  size_t sVar6;
  size_t sVar7;
  undefined8 uVar8;
  long lVar9;
  long *plVar10;
  char *__s1;
  char *pcVar11;
  int *piVar12;
  uint uVar13;
  long in_FS_OFFSET;
  byte local_78;
  char *local_68;
  char *local_60;
  char local_58 [24];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_1 == 0) || (__s1 = (char *)FontEncFromXLFD(), __s1 == (char *)0x0)) {
    __s1 = "iso8859-1";
    iVar4 = strcasecmp("iso8859-1","microsoft-symbol");
    pcVar11 = __s1;
    if (iVar4 != 0) goto LAB_00110860;
LAB_0011094a:
    iVar4 = FT_Get_BDF_Charset_ID(param_4,&local_68,&local_60);
    if (iVar4 != 0) {
LAB_00110964:
      iVar4 = FT_Select_Charmap(param_4,0x41444243);
      if (iVar4 == 0) {
LAB_001108da:
        *param_5 = 0;
        uVar8 = *(undefined8 *)(param_4 + 0xa8);
        param_5[4] = 0;
        *(undefined8 *)(param_5 + 6) = 0;
        *(undefined8 *)(param_5 + 2) = uVar8;
        uVar8 = 0x55;
        goto LAB_00110900;
      }
      local_78 = 1;
      uVar13 = 1;
LAB_00110b4e:
      lVar9 = FontEncFind(__s1);
      pcVar11 = __s1;
      if ((lVar9 == 0) && (local_78 != 0)) {
        lVar9 = FontEncFind("microsoft-symbol");
      }
      goto joined_r0x001109c1;
    }
    uVar13 = 1;
LAB_001108a3:
    sVar6 = strlen(local_68);
    sVar7 = strlen(local_60);
    if (0x12 < sVar7 + sVar6) goto LAB_001108da;
    __memcpy_chk(local_58,local_68,sVar6);
    local_58[sVar6] = '-';
    __strcpy_chk(local_58 + sVar6 + 1,local_60,0x14);
    ErrorF("%s %s\n",local_58,__s1);
    iVar4 = strcasecmp(local_58,"iso10646-1");
    if (iVar4 == 0) {
      local_78 = (byte)uVar13 & 1;
      goto LAB_00110b4e;
    }
    iVar4 = strcasecmp(local_58,__s1);
    if (iVar4 == 0) goto LAB_001108da;
  }
  else {
    iVar4 = strcasecmp(__s1,"microsoft-symbol");
    if (iVar4 == 0) goto LAB_0011094a;
    cVar2 = *__s1;
    pcVar11 = __s1;
    while (cVar2 != '-') {
      if (cVar2 == '\0') {
        uVar13 = FT_Get_BDF_Charset_ID(param_4,&local_68,&local_60);
        __s1 = pcVar11;
        if (uVar13 == 0) goto LAB_001108a3;
        goto LAB_001109ad;
      }
LAB_00110860:
      __s1 = __s1 + 1;
      cVar2 = *__s1;
    }
    iVar4 = strcasecmp(__s1 + 1,"fontspecific");
    iVar5 = FT_Get_BDF_Charset_ID(param_4,&local_68,&local_60);
    if (iVar5 == 0) {
      uVar13 = (uint)(iVar4 == 0);
      __s1 = pcVar11;
      goto LAB_001108a3;
    }
    __s1 = pcVar11;
    if (iVar4 == 0) goto LAB_00110964;
LAB_001109ad:
    uVar13 = 0;
    lVar9 = FontEncFind(pcVar11);
joined_r0x001109c1:
    if (lVar9 == 0) {
      ErrorF("FreeType: couldn\'t find encoding \'%s\' for \'%s\'\n",pcVar11,param_3);
      uVar8 = 0x53;
      goto LAB_00110900;
    }
    iVar4 = FT_Has_PS_Glyph_Names(param_4);
    piVar12 = *(int **)(lVar9 + 0x18);
    if (iVar4 == 0) {
      if (piVar12 != (int *)0x0) {
        iVar4 = *piVar12;
LAB_001109e8:
        iVar5 = *(int *)(param_4 + 0x48);
        do {
          if (iVar4 == 1) {
            if (0 < iVar5) {
              lVar9 = **(long **)(param_4 + 0x50);
              if (*(int *)(lVar9 + 0xc) == 0x10003) {
LAB_00110a51:
                *param_5 = 0;
                *(long *)(param_5 + 2) = lVar9;
                if ((uVar13 == 0) || (lVar9 = FT_Get_Sfnt_Table(param_4,2), lVar9 == 0)) {
                  param_5[4] = 0;
                }
                else {
                  param_5[4] = (uint)*(ushort *)(lVar9 + 0x56) - 0x20;
                }
                *(int **)(param_5 + 6) = piVar12;
                uVar8 = 0x55;
                goto LAB_00110900;
              }
              plVar10 = *(long **)(param_4 + 0x50) + 1;
              plVar1 = plVar10 + (ulong)(iVar5 - 1);
              while (plVar1 != plVar10) {
                lVar9 = *plVar10;
                plVar10 = plVar10 + 1;
                if (*(int *)(lVar9 + 0xc) == 0x10003) goto LAB_00110a51;
              }
            }
          }
          else {
            if ((iVar4 == 2) && (0 < iVar5)) {
              plVar10 = *(long **)(param_4 + 0x50);
              plVar1 = plVar10 + (ulong)(iVar5 - 1) + 1;
              do {
                lVar9 = *plVar10;
                if ((piVar12[1] == (uint)*(ushort *)(lVar9 + 0xc)) &&
                   (piVar12[2] == (uint)*(ushort *)(lVar9 + 0xe))) goto LAB_00110a51;
                plVar10 = plVar10 + 1;
              } while (plVar1 != plVar10);
            }
          }
          piVar12 = *(int **)(piVar12 + 10);
          if (piVar12 == (int *)0x0) break;
          iVar4 = *piVar12;
        } while( true );
      }
    }
    else {
      if (piVar12 != (int *)0x0) {
        iVar4 = *piVar12;
        piVar3 = piVar12;
        iVar5 = iVar4;
        while (iVar5 != 3) {
          piVar3 = *(int **)(piVar3 + 10);
          if (piVar3 == (int *)0x0) goto LAB_001109e8;
          iVar5 = *piVar3;
        }
        *param_5 = 1;
        param_5[4] = 0;
        uVar8 = 0x55;
        *(int **)(param_5 + 6) = piVar3;
        goto LAB_00110900;
      }
    }
  }
  uVar8 = 0x58;
LAB_00110900:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar8;
}



undefined8 FTRemap(undefined8 param_1,int *param_2,uint param_3)

{
  int iVar1;
  undefined8 uVar2;
  long lVar3;
  
  if (*(long *)(param_2 + 6) == 0) {
    if (param_3 < 0x100) {
      FT_Set_Charmap(param_1,*(undefined8 *)(param_2 + 2));
      goto LAB_00108c10;
    }
  }
  else {
    if (*param_2 == 0) {
      iVar1 = FontEncRecode((ulong)param_3);
      param_3 = iVar1 + param_2[4];
      FT_Set_Charmap(param_1,*(undefined8 *)(param_2 + 2));
LAB_00108c10:
      uVar2 = FT_Get_Char_Index(param_1,(ulong)param_3);
      return uVar2;
    }
    lVar3 = FontEncName();
    if (lVar3 != 0) {
      uVar2 = FT_Get_Name_Index(param_1,lVar3);
      return uVar2;
    }
  }
  return 0;
}



ulong FUN_00110d30(void)

{
  long lVar1;
  int iVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  undefined local_12;
  undefined local_11;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  iVar2 = FT_Load_Sfnt_Table();
  uVar3 = 0;
  if (iVar2 == 0) {
    uVar3 = (ulong)CONCAT11(local_12,local_11);
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00110d90(ushort *param_1,ushort *param_2,ushort *param_3,ushort *param_4,byte *param_5,
                 int param_6)

{
  byte *pbVar1;
  byte bVar2;
  byte bVar3;
  ushort uVar4;
  uint uVar5;
  ulong uVar6;
  int iVar7;
  ulong uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  
  if (param_6 < 1) {
    uVar10 = 0xffffffff;
    uVar11 = 0x100;
    uVar5 = 0x100;
    iVar7 = -1;
  }
  else {
    uVar10 = 0xffffffff;
    uVar11 = 0x100;
    uVar8 = 0xffffffff;
    uVar6 = 0x100;
    pbVar1 = param_5 + (ulong)(param_6 - 1) * 4 + 4;
    do {
      bVar2 = *param_5;
      bVar3 = param_5[2];
      if (bVar2 == bVar3) {
        if ((uint)param_5[1] < (uint)uVar6) {
          uVar6 = (ulong)param_5[1];
        }
        if ((int)uVar8 < (int)(uint)param_5[3]) {
          uVar8 = (ulong)param_5[3];
        }
      }
      else {
        uVar6 = 0;
        uVar8 = 0xff;
      }
      iVar7 = (int)uVar8;
      uVar5 = (uint)uVar6;
      if ((uint)bVar2 < uVar11) {
        uVar11 = (uint)bVar2;
      }
      if ((int)uVar10 < (int)(uint)bVar3) {
        uVar10 = (uint)bVar3;
      }
      param_5 = param_5 + 4;
    } while (pbVar1 != param_5);
  }
  uVar4 = *param_3;
  if (uVar4 < uVar5) {
    *param_1 = uVar4;
    uVar9 = (uint)uVar4;
  }
  else {
    uVar4 = *param_1;
    uVar9 = (uint)uVar4;
    if ((uint)uVar4 < uVar5) {
      uVar4 = (ushort)uVar5;
      *param_1 = uVar4;
      uVar9 = uVar5;
    }
  }
  if (iVar7 < (int)uVar9) {
    *param_3 = uVar4;
  }
  else {
    if (iVar7 < (int)(uint)*param_3) {
      *param_3 = (ushort)iVar7;
    }
  }
  if (*param_4 < uVar11) {
    *param_2 = *param_4;
    *param_1 = *param_3;
    uVar4 = *param_2;
    uVar5 = (uint)uVar4;
  }
  else {
    uVar4 = *param_2;
    uVar5 = (uint)uVar4;
    if (uVar5 < uVar11) {
      uVar4 = (ushort)uVar11;
      *param_2 = uVar4;
      uVar5 = uVar11;
    }
  }
  if ((int)uVar10 < (int)uVar5) {
    *param_4 = uVar4;
    *param_3 = *param_1;
    return;
  }
  if ((int)uVar10 < (int)(uint)*param_4) {
    *param_4 = (ushort)uVar10;
  }
  return;
}



ulong FUN_00110ee0(uint param_1,ushort *param_2,ushort *param_3,ushort *param_4,ushort *param_5,
                  char *param_6)

{
  char *pcVar1;
  char cVar2;
  byte bVar3;
  ushort **ppuVar4;
  ulong uVar5;
  byte *pbVar6;
  ulong uVar7;
  byte *__ptr;
  ushort *puVar8;
  undefined2 uVar9;
  ulong uVar10;
  undefined2 uVar11;
  undefined2 uVar12;
  int iVar13;
  long in_FS_OFFSET;
  char *local_48;
  long local_40;
  
  uVar7 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_48 = param_6;
  ppuVar4 = __ctype_b_loc();
  __ptr = (byte *)0x0;
  do {
    uVar10 = uVar7 & 0xffffffff;
    puVar8 = *ppuVar4;
    while ((cVar2 = *param_6, cVar2 == ',' ||
           ((*(byte *)((long)puVar8 + (long)cVar2 * 2 + 1) & 0x20) != 0))) {
      param_6 = param_6 + 1;
    }
    iVar13 = 0;
    if (cVar2 != '-') {
      uVar5 = strtol(param_6,&local_48,0);
      if ((local_48 != param_6) && (uVar5 < 0x10000)) {
        cVar2 = *local_48;
        uVar9 = (undefined2)uVar5;
        puVar8 = *ppuVar4;
        bVar3 = *(byte *)((long)puVar8 + (long)cVar2 * 2 + 1);
        param_6 = local_48;
        while ((bVar3 & 0x20) != 0) {
          param_6 = param_6 + 1;
          cVar2 = *param_6;
          bVar3 = *(byte *)((long)puVar8 + (long)cVar2 * 2 + 1);
        }
        iVar13 = (int)(uVar5 & 0xffffffff);
        uVar12 = (undefined2)(uVar5 & 0xffffffff);
        if ((cVar2 == ',') || (cVar2 == '\0')) goto LAB_00110fd9;
        if (cVar2 == '-') goto LAB_00110f74;
      }
LAB_0011108f:
      if (__ptr == (byte *)0x0) {
        uVar7 = 0;
      }
      else {
        uVar7 = uVar10;
        if (param_1 == 0) {
          if ((int)uVar10 != 0) {
            uVar7 = 0;
            FUN_00110d90(param_2,param_3,param_4,param_5,__ptr,uVar10);
          }
        }
        else {
          if ((int)uVar10 != 0) {
            *param_2 = (ushort)__ptr[1];
            *param_4 = (ushort)__ptr[3];
            *param_3 = (ushort)*__ptr;
            *param_5 = (ushort)__ptr[2];
            uVar7 = (ulong)param_1;
          }
        }
        free(__ptr);
      }
      goto LAB_001110e4;
    }
LAB_00110f74:
    uVar11 = (undefined2)iVar13;
    pcVar1 = param_6 + 1;
    param_6 = param_6 + 1;
    bVar3 = *(byte *)((long)puVar8 + (long)*pcVar1 * 2 + 1);
    while ((bVar3 & 0x20) != 0) {
      param_6 = param_6 + 1;
      bVar3 = *(byte *)((long)puVar8 + (long)*param_6 * 2 + 1);
    }
    uVar5 = strtol(param_6,&local_48,0);
    if (param_6 == local_48) {
      if ((*param_6 != ',') && (*param_6 != '\0')) goto LAB_0011108f;
      uVar12 = 0xffff;
      uVar9 = uVar11;
    }
    else {
      if (0xffff < uVar5) goto LAB_0011108f;
      param_6 = local_48;
      if ((0 < (int)param_1) || (uVar9 = (short)uVar5, uVar12 = uVar11, iVar13 <= (int)uVar5)) {
        uVar9 = uVar11;
        uVar12 = (short)uVar5;
      }
    }
LAB_00110fd9:
    uVar7 = uVar7 + 1;
    pbVar6 = (byte *)realloc(__ptr,uVar7 * 4);
    if (pbVar6 == (byte *)0x0) {
      uVar7 = 0;
      free(__ptr);
LAB_001110e4:
      if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
        __stack_chk_fail();
      }
      return uVar7;
    }
    __ptr = pbVar6 + (uVar7 * 4 - 4);
    *__ptr = (byte)((ushort)uVar9 >> 8);
    __ptr[1] = (byte)uVar9;
    __ptr[3] = (byte)uVar12;
    __ptr[2] = (byte)((ushort)uVar12 >> 8);
    __ptr = pbVar6;
  } while( true );
}



void FUN_00111180(undefined8 param_1,undefined4 *param_2,long param_3,uint param_4,uint param_5,
                 undefined4 *param_6)

{
  undefined4 uVar1;
  int iVar2;
  ushort uVar3;
  long in_FS_OFFSET;
  undefined local_44 [4];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  FontDefaultFormat(param_6,param_6 + 1,param_6 + 2,param_6 + 3);
  iVar2 = CheckFSFormat((ulong)param_4,(ulong)param_5,param_6,param_6 + 1,param_6 + 3,param_6 + 2,
                        local_44);
  if (iVar2 == 0x55) {
    if (param_2 != (undefined4 *)0x0) {
      *param_2 = 0;
      *(char *)(param_2 + 0x18) = (char)*param_6;
      *(undefined *)((long)param_2 + 0x61) = (char)param_6[1];
      *(undefined *)((long)param_2 + 0x62) = (char)param_6[2];
      uVar1 = param_6[3];
      *(undefined8 *)(param_2 + 0x1c) = 0x114250;
      *(undefined8 *)(param_2 + 0x1a) = 0x1145e0;
      param_2[0x19] = param_4;
      *(undefined *)((long)param_2 + 99) = (char)uVar1;
      *(undefined8 *)(param_2 + 0x20) = 0;
      *(undefined8 *)(param_2 + 0x1e) = 0x112690;
      *(undefined8 *)(param_2 + 0x22) = param_1;
      *(undefined8 *)(param_2 + 0x24) = 0;
      *(undefined8 *)(param_2 + 0x26) = 0;
      *(undefined8 *)(param_2 + 0x28) = 0;
    }
    *(undefined4 *)(param_3 + 0xc) = 0;
    *(undefined2 *)(param_3 + 8) = 0;
    *(byte *)(param_3 + 10) = *(byte *)(param_3 + 10) & 0x80 | 0x30;
    uVar3 = *(ushort *)(param_3 + 10) & 0xfe7f;
    *(ushort *)(param_3 + 10) = uVar3;
    *(byte *)(param_3 + 0xb) = (byte)((ulong)uVar3 >> 8) & 0xfb | 2;
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00111300(byte **param_1)

{
  byte bVar1;
  byte **ppbVar2;
  byte **ppbVar3;
  byte **ppbVar4;
  byte *pbVar5;
  uint uVar6;
  
  pbVar5 = *param_1;
  bVar1 = *pbVar5;
  if (bVar1 == 0) {
    uVar6 = 0;
  }
  else {
    uVar6 = 0;
    do {
      pbVar5 = pbVar5 + 1;
      uVar6 = (uVar6 << 5 | uVar6 >> 0x1b) + (uint)bVar1;
      bVar1 = *pbVar5;
    } while (bVar1 != 0);
    uVar6 = uVar6 & 0x1f;
  }
  ppbVar2 = (byte **)(&DAT_0033cb80)[(int)uVar6];
  if (param_1 == ppbVar2) {
    *(byte **)(&DAT_0033cb80 + (int)uVar6) = param_1[5];
  }
  else {
    if (ppbVar2 == (byte **)0x0) {
LAB_00111371:
      ErrorF("FreeType: freeing unknown face\n");
    }
    else {
      ppbVar3 = (byte **)ppbVar2[5];
      ppbVar4 = param_1;
      while (param_1 != ppbVar3) {
        if (ppbVar3 == (byte **)0x0) goto LAB_00111371;
        ppbVar4 = (byte **)ppbVar3[5];
        ppbVar2 = ppbVar3;
        ppbVar3 = ppbVar4;
      }
      ppbVar2[5] = ppbVar4[5];
    }
  }
  FT_Done_Face(param_1[1]);
  free(*param_1);
  free(param_1);
  return;
}



void FUN_001113d0(long **param_1)

{
  long *__ptr;
  long *plVar1;
  int iVar2;
  long *plVar3;
  int iVar4;
  void *__ptr_00;
  long lVar5;
  long lVar6;
  void *__ptr_01;
  long lVar7;
  
  __ptr = *param_1;
  if (__ptr != (long *)0x0) {
    if (__ptr == *(long **)(*__ptr + 0x20)) {
      *(undefined8 *)(*__ptr + 0x20) = 0;
    }
    iVar4 = *(int *)(__ptr + 0x2a);
    *(int *)(__ptr + 0x2a) = iVar4 + -1;
    if (iVar4 + -1 < 1) {
      plVar1 = *(long **)(*__ptr + 0x18);
      if (__ptr == plVar1) {
        *(long *)(*__ptr + 0x18) = __ptr[0x2b];
      }
      else {
        if (plVar1 != (long *)0x0) {
          plVar3 = (long *)plVar1[0x2b];
          while (__ptr != plVar3) {
            if (plVar3 == (long *)0x0) goto LAB_00111478;
            plVar1 = plVar3;
            plVar3 = (long *)plVar3[0x2b];
          }
          plVar1[0x2b] = __ptr[0x2b];
        }
      }
LAB_00111478:
      FT_Done_Size(__ptr[1]);
      if (*(long *)(*__ptr + 0x18) == 0) {
        FUN_00111300();
      }
      if ((void *)__ptr[0xf] != (void *)0x0) {
        free((void *)__ptr[0xf]);
      }
      if ((void *)__ptr[0x13] != (void *)0x0) {
        free((void *)__ptr[0x13]);
      }
      __ptr_00 = (void *)__ptr[0x17];
      if (__ptr_00 != (void *)0x0) {
        iVar4 = *(int *)(__ptr + 0x16);
        if ((-1 < iVar4 + 0xf) && (iVar4 + 0xf >> 4 != 0)) {
          lVar7 = 0;
          do {
            __ptr_01 = *(void **)((long)__ptr_00 + lVar7 * 8);
            if (__ptr_01 != (void *)0x0) {
              lVar5 = 0;
              do {
                while (*(int *)(*(long *)(__ptr[0x18] + lVar7 * 8) + lVar5) == 3) {
                  lVar6 = lVar5 + 4;
                  free(*(void **)((long)__ptr_01 + lVar5 * 6 + 0x10));
                  __ptr_01 = *(void **)(__ptr[0x17] + lVar7 * 8);
                  lVar5 = lVar6;
                  if (lVar6 == 0x40) goto LAB_00111536;
                }
                lVar5 = lVar5 + 4;
              } while (lVar5 != 0x40);
LAB_00111536:
              free(__ptr_01);
              __ptr_00 = (void *)__ptr[0x17];
              iVar4 = *(int *)(__ptr + 0x16);
            }
          } while ((-1 < iVar4 + 0xf) &&
                  (iVar2 = (int)lVar7, lVar7 = lVar7 + 1, iVar2 + 1 < iVar4 + 0xf >> 4));
        }
        free(__ptr_00);
      }
      __ptr_00 = (void *)__ptr[0x18];
      if (__ptr_00 != (void *)0x0) {
        iVar4 = *(int *)(__ptr + 0x16);
        if ((-1 < iVar4 + 0xf) && (iVar4 + 0xf >> 4 != 0)) {
          lVar7 = 0;
          do {
            __ptr_01 = *(void **)((long)__ptr_00 + lVar7 * 8);
            if (__ptr_01 != (void *)0x0) {
              free(__ptr_01);
              __ptr_00 = (void *)__ptr[0x18];
              iVar4 = *(int *)(__ptr + 0x16);
            }
          } while ((-1 < iVar4 + 0xf) &&
                  (iVar2 = (int)lVar7, lVar7 = lVar7 + 1, iVar2 + 1 < iVar4 + 0xf >> 4));
        }
        free(__ptr_00);
      }
      free(__ptr);
    }
  }
  if (param_1[0xb] != (long *)0x0) {
    free(param_1[0xb]);
  }
  if (param_1[10] != (long *)0x0) {
    free(param_1[10]);
  }
  free(param_1);
  return;
}



undefined8
FUN_00111620(uint param_1,ulong param_2,uint *param_3,int param_4,void **param_5,void **param_6,
            undefined4 *param_7,int *param_8,int *param_9)

{
  uint uVar1;
  void *pvVar2;
  int iVar3;
  int iVar4;
  void **ppvVar5;
  long lVar6;
  
  uVar1 = *param_3;
  if ((-1 < param_4) && ((param_2 & 8) != 0)) {
    param_1 = (uVar1 >> 1) + param_1;
  }
  if (param_1 <= uVar1) {
    pvVar2 = *param_6;
    if (pvVar2 == (void *)0x0) {
      if ((int)(uVar1 + 0xf) < 0) {
        iVar4 = ((int)(uVar1 + 0x1e) >> 4) + -1;
      }
      else {
        iVar4 = (int)(uVar1 + 0xf) >> 4;
      }
      pvVar2 = calloc((long)iVar4,8);
      *param_6 = pvVar2;
      if (pvVar2 == (void *)0x0) {
        return 0x50;
      }
    }
    if ((int)param_1 < 0) {
      iVar4 = ((int)(param_1 + 0xf) >> 4) + -1;
    }
    else {
      iVar4 = (int)param_1 >> 4;
    }
    lVar6 = (long)iVar4;
    ppvVar5 = (void **)((long)pvVar2 + lVar6 * 8);
    if (*ppvVar5 == (void *)0x0) {
      pvVar2 = calloc(0x10,8);
      *ppvVar5 = pvVar2;
      if (*(long *)((long)*param_6 + lVar6 * 8) == 0) {
        return 0x50;
      }
    }
    pvVar2 = *param_5;
    if (pvVar2 == (void *)0x0) {
      iVar3 = *param_3 + 0xf;
      if (iVar3 < 0) {
        iVar3 = ((int)(*param_3 + 0x1e) >> 4) + -1;
      }
      else {
        iVar3 = iVar3 >> 4;
      }
      pvVar2 = calloc((long)iVar3,8);
      *param_5 = pvVar2;
      if (pvVar2 == (void *)0x0) {
        return 0x50;
      }
    }
    ppvVar5 = (void **)(lVar6 * 8 + (long)pvVar2);
    if (*ppvVar5 == (void *)0x0) {
      pvVar2 = malloc(0x180);
      *ppvVar5 = pvVar2;
      if (*(long *)((long)*param_5 + lVar6 * 8) == 0) {
        return 0x50;
      }
    }
    *param_7 = 1;
    *param_8 = iVar4;
    *param_9 = param_1 + iVar4 * -0x10;
    return 0x55;
  }
  *param_7 = 0;
  return 0x55;
}



undefined8 FUN_00111840(long *param_1)

{
  uint uVar1;
  undefined8 uVar2;
  long *plVar3;
  
  if (*(long **)(*param_1 + 0x20) == param_1) {
    return 0x55;
  }
  uVar1 = FT_Activate_Size(param_1[1]);
  if (uVar1 != 0) {
    *(undefined8 *)(*param_1 + 0x20) = 0;
    ErrorF("FreeType: couldn\'t activate instance: %d\n",(ulong)uVar1);
    uVar2 = FTtoXReturnCode((ulong)uVar1);
    return uVar2;
  }
  plVar3 = (long *)0x0;
  if (*(int *)(param_1 + 3) != 0) {
    plVar3 = param_1 + 4;
  }
  FT_Set_Transform(*(undefined8 *)(*param_1 + 8),plVar3,0);
  *(long **)(*param_1 + 0x20) = param_1;
  return 0x55;
}



undefined8
FUN_001118d0(long **param_1,ulong *param_2,long param_3,char *param_4,long param_5,char **param_6,
            int *param_7,int param_8,char **param_9,long param_10,int param_11)

{
  undefined auVar1 [16];
  uint uVar2;
  uint uVar3;
  long lVar4;
  char **ppcVar5;
  char *pcVar6;
  bool bVar7;
  byte bVar8;
  undefined2 uVar9;
  int iVar10;
  uint uVar11;
  undefined4 uVar12;
  int iVar13;
  undefined8 uVar14;
  long lVar15;
  char *pcVar16;
  long *__dest;
  byte bVar17;
  short *psVar18;
  int iVar19;
  char *pcVar20;
  long *plVar21;
  ushort uVar22;
  long lVar23;
  ulong uVar24;
  ulong uVar25;
  ulong uVar26;
  short *psVar27;
  long lVar28;
  long lVar29;
  long lVar30;
  short sVar31;
  long in_FS_OFFSET;
  double dVar32;
  double dVar33;
  double dVar34;
  double dVar35;
  uint local_d8;
  int local_cc;
  char *local_b0;
  long **local_a8;
  char *local_a0;
  char *local_98;
  char *local_90;
  char local_48;
  
  lVar4 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = *(uint *)(char **)(param_5 + 0x50);
  uVar3 = *(uint *)(param_5 + 0x54);
  pcVar6 = *(char **)(param_5 + 0x50);
  dVar32 = hypot(*(double *)(param_5 + 0x38),*(double *)(param_5 + 0x40));
  dVar35 = *(double *)(param_5 + 0x28);
  dVar33 = *(double *)(param_5 + 0x40);
  bVar7 = (double)((ulong)(dVar35 - dVar33) & 0x7fffffffffffffff) <
          (double)((ulong)dVar35 & 0x7fffffffffffffff) * 0.00100000;
  if (bVar7) {
    local_b0 = (char *)(long)(((dVar35 + dVar33) * 0.50000000 * 65536.00000000) / dVar32);
    local_98 = local_b0;
  }
  else {
    local_b0 = (char *)(long)(int)((dVar35 * 65536.00000000) / dVar32);
    local_98 = (char *)(long)(int)((dVar33 * 65536.00000000) / dVar32);
  }
  local_d8 = (uint)!bVar7;
  dVar35 = dVar32 * 0.00100000;
  if ((double)((ulong)*(double *)(param_5 + 0x30) & 0x7fffffffffffffff) < dVar35) {
    dVar33 = *(double *)(param_5 + 0x38);
    local_a0 = (char *)0x0;
    dVar34 = (double)((ulong)dVar33 & 0x7fffffffffffffff);
    if (dVar35 <= dVar34) goto LAB_00111b1d;
LAB_00111a2b:
    local_90 = (char *)0x0;
  }
  else {
    local_d8 = 1;
    dVar33 = *(double *)(param_5 + 0x38);
    dVar34 = (double)((ulong)dVar33 & 0x7fffffffffffffff);
    local_a0 = (char *)(long)(int)((*(double *)(param_5 + 0x30) * 65536.00000000) / dVar32);
    if (dVar34 < dVar35) goto LAB_00111a2b;
LAB_00111b1d:
    local_d8 = 1;
    dVar33 = (dVar33 * 65536.00000000) / dVar32;
    local_90 = (char *)(long)(int)dVar33;
  }
  sVar31 = *(short *)((long)param_6 + 10);
  lVar15 = *(long *)(param_3 + 8);
  if (sVar31 == 0xe) {
    uVar26 = SEXT28(*(short *)(param_6 + 1));
    pcVar20 = *param_6;
    if (pcVar20 <= pcVar20 + (uVar26 - 2)) {
      iVar10 = 0;
      pcVar16 = pcVar20;
      do {
        if ((*pcVar16 == '-') && (iVar10 = iVar10 + 1, iVar10 == 0xb)) {
          if (pcVar16[1] == 'c') {
            if (pcVar16[2] == '-') {
              if (param_11 == 0) goto LAB_00112438;
              goto LAB_00111fcf;
            }
          }
          else {
            if ((pcVar16[1] == 'm') && (pcVar16[2] == '-')) {
              if (param_11 == 0) goto LAB_00112400;
              goto LAB_00111fcf;
            }
          }
          break;
        }
        pcVar16 = pcVar16 + 1;
      } while (pcVar16 <= pcVar20 + (uVar26 - 2));
    }
    if (param_11 == 0) goto LAB_00111a58;
LAB_00111fcf:
    if (param_11 == 99) {
LAB_00112438:
      local_cc = 2;
    }
    else {
      if (param_11 != 0x6d) {
        bVar8 = *(byte *)(lVar15 + 0x10);
        goto joined_r0x00111ff7;
      }
LAB_00112400:
      local_cc = 1;
    }
LAB_00111b80:
    uVar14 = FTPickMapping(pcVar20,uVar26,param_4);
    iVar10 = (int)uVar14;
  }
  else {
    if ((param_11 == 0) || ((local_cc = 2, param_11 != 99 && (local_cc = 1, param_11 != 0x6d)))) {
LAB_00111a58:
      bVar8 = *(byte *)(lVar15 + 0x10);
joined_r0x00111ff7:
      local_cc = 1;
      if ((bVar8 & 4) == 0) {
        local_cc = 1;
        iVar10 = FT_Get_PS_Font_Info(dVar35,dVar33,dVar34,lVar15);
        sVar31 = *(short *)((long)param_6 + 10);
        if ((iVar10 != 0) || (local_48 == '\0')) {
          local_cc = 0;
        }
      }
      if (sVar31 == 0xe) {
        uVar26 = (ulong)(uint)(int)*(short *)(param_6 + 1);
        pcVar20 = *param_6;
        goto LAB_00111b80;
      }
    }
    uVar14 = FTPickMapping(0,0,param_4);
    iVar10 = (int)uVar14;
  }
  if (iVar10 != 0x55) goto LAB_00111a96;
  local_a8 = param_1 + 1;
  iVar10 = *(int *)(param_5 + 0x68);
  param_1[0xb] = (long *)0x0;
  *(int *)(param_1 + 7) = iVar10;
  if (iVar10 == 0) {
LAB_00111bb1:
    if (param_2 == (ulong *)0x0) {
      param_1[6] = (long *)0x0;
LAB_00111caa:
      *(undefined4 *)(param_1 + 5) = 0;
    }
    else {
      if (param_1[4] == (long *)0x0) {
        *(undefined4 *)((long)param_2 + 4) = 0;
        iVar10 = 0;
        *(undefined2 *)param_2 = 0;
        bVar8 = 0xff;
LAB_001123b7:
        uVar22 = (ushort)bVar8;
LAB_00112344:
        *(ushort *)((long)param_2 + 2) = uVar22;
      }
      else {
        lVar15 = param_1[4][6];
        iVar10 = *(int *)(lVar15 + 0x28);
        if (*(int *)(lVar15 + 0x14) == 0) {
          lVar15 = (long)(*(int *)(lVar15 + 0x10) + -1);
          if (0xffff < lVar15) {
            lVar15 = 0xffff;
          }
          bVar8 = (byte)lVar15;
          if (iVar10 == 0) {
            bVar17 = 0;
            uVar9 = 0;
          }
          else {
            lVar23 = (long)iVar10;
            bVar17 = (byte)iVar10;
            uVar9 = (short)((ulong)(lVar23 + 0xff) >> 8);
            if (-1 < lVar23) {
              uVar9 = (short)((ulong)lVar23 >> 8);
            }
            iVar10 = -(uint)(lVar23 != 0);
          }
          *(undefined2 *)((long)param_2 + 4) = uVar9;
          sVar31 = (short)((ulong)(lVar15 + 0xff) >> 8);
          if (-1 < lVar15) {
            sVar31 = (short)((ulong)lVar15 >> 8);
          }
          uVar22 = 0;
          *(short *)((long)param_2 + 6) = sVar31;
          if (*(int *)((long)param_2 + 4) == 0) {
            uVar22 = (ushort)bVar17;
          }
          *(ushort *)param_2 = uVar22;
          uVar22 = 0xff;
          if (sVar31 == 0) goto LAB_001123b7;
          goto LAB_00112344;
        }
        *(undefined2 *)((long)param_2 + 4) = (short)iVar10;
        iVar10 = *(int *)(param_1[4][6] + 0x10) + -1;
        uVar9 = (undefined2)iVar10;
        if (0xff < iVar10) {
          uVar9 = 0xff;
        }
        *(undefined2 *)((long)param_2 + 6) = uVar9;
        *(short *)param_2 = (short)*(undefined4 *)(param_1[4][6] + 0x2c);
        iVar10 = *(int *)(param_1[4][6] + 0x14) + -1;
        uVar9 = (undefined2)iVar10;
        if (0xff < iVar10) {
          uVar9 = 0xff;
        }
        *(undefined2 *)((long)param_2 + 2) = uVar9;
        iVar10 = -(uint)((*param_2 & 0xffff0000ffff) != 0);
      }
      if (param_10 != 0) {
        FUN_00110ee0(0,param_2);
      }
      if (*(int *)(param_1 + 7) != 0) {
        FUN_00110d90(param_2,(undefined2 *)((long)param_2 + 4),(undefined2 *)((long)param_2 + 2));
      }
      *(ulong **)(param_1 + 6) = param_2;
      if (iVar10 == -1) goto LAB_00111caa;
      uVar12 = FTRemap(*(undefined8 *)(param_3 + 8),local_a8,0);
      *(undefined4 *)(param_1 + 5) = uVar12;
    }
    lVar15 = FT_Get_Sfnt_Table();
    pcVar20 = *param_9;
    if (((((ulong)pcVar20 & 0x20) == 0) &&
        (1 < (int)(((uint)*(ushort *)((long)param_2 + 6) + 1) - (uint)*(ushort *)((long)param_2 + 4)
                  ))) && (lVar15 != 0)) {
      pcVar20 = (char *)((ulong)pcVar20 | 0x10);
    }
    *param_9 = (char *)((ulong)pcVar20 & 0xffffffffffffffdf);
    if ((((*(int *)(param_3 + 0x10) == 0) && (local_cc != 2)) ||
        (*param_9 = (char *)((ulong)pcVar20 & 0xffffffffffffffcf), *(int *)(param_3 + 0x10) == 0))
       && ((*(byte *)(*(long *)(param_3 + 8) + 0x10) & 8) == 0)) {
      *param_9 = (char *)((ulong)*param_9 & 0xffffffffffffffef);
    }
    if ((lVar15 != 0) && (*(long *)(lVar15 + 8) != 0)) {
      dVar35 = sin((((double)*(long *)(lVar15 + 8) * 0.00097656) / 5760.00000000) * 1.57079633);
      param_9[0xf] = (char *)((ulong)dVar35 ^ 0x8000000000000000);
    }
    ppcVar5 = *(char ***)(param_3 + 0x18);
    while (ppcVar5 != (char **)0x0) {
      iVar10 = strcmp(*(char **)*ppcVar5,param_4);
      if ((((((iVar10 == 0) && (dVar32 == (double)ppcVar5[2])) && (ppcVar5[8] == pcVar6)) &&
           (*(uint *)(ppcVar5 + 3) == local_d8)) &&
          ((local_d8 == 0 ||
           (((ppcVar5[4] == local_b0 && (local_a0 == ppcVar5[6])) &&
            ((local_98 == ppcVar5[7] && (local_90 == ppcVar5[5])))))))) &&
         ((((*(int *)(ppcVar5 + 0xb) == local_cc && (param_8 == *(int *)(ppcVar5 + 9))) &&
           (*(int *)(ppcVar5 + 0x14) == *param_7)) &&
          ((((((*(int *)((long)ppcVar5 + 0xa4) == param_7[1] &&
               (*(int *)(ppcVar5 + 0x15) == param_7[2])) &&
              ((double)ppcVar5[0x1a] == (double)param_9[1])) &&
             (((double)ppcVar5[0x1b] == (double)param_9[2] &&
              ((double)ppcVar5[0x1c] == (double)param_9[3])))) &&
            ((((double)ppcVar5[0x1d] == (double)param_9[4] &&
              ((ppcVar5[0x1e] == param_9[5] && (ppcVar5[0x1f] == param_9[6])))) &&
             (ppcVar5[0x19] == *param_9)))) &&
           ((((double)ppcVar5[0x20] == (double)param_9[7] && (*(int *)((long)ppcVar5 + 0x10c) < 0))
            && (*(int *)((long)param_9 + 0x44) < 0)))))))) {
        *(int *)(ppcVar5 + 0x2a) = *(int *)(ppcVar5 + 0x2a) + 1;
        uVar14 = 0x55;
        *(char ***)param_1 = ppcVar5;
        goto LAB_00111a96;
      }
      ppcVar5 = (char **)ppcVar5[0x2b];
    }
    __dest = (long *)malloc(0x160);
    if (__dest != (long *)0x0) {
      *(undefined4 *)(__dest + 0x2a) = 1;
      *__dest = param_3;
      __dest[0xc] = 0;
      __dest[0xd] = 0;
      *(double *)(__dest + 2) = dVar32;
      *(int *)(__dest + 9) = param_8;
      __dest[0xe] = 0;
      __dest[0xf] = 0;
      *(undefined4 *)(__dest + 0x10) = 0;
      *(int *)(__dest + 0xb) = local_cc;
      __dest[0x11] = 0;
      __dest[0x13] = 0;
      *(uint *)(__dest + 3) = local_d8;
      *(char **)(__dest + 4) = local_b0;
      *(char **)(__dest + 5) = local_90;
      *(char **)(__dest + 6) = local_a0;
      *(char **)(__dest + 7) = local_98;
      *(uint *)(__dest + 8) = uVar2;
      *(uint *)((long)__dest + 0x44) = uVar3;
                    // WARNING: Load size is inaccurate
      auVar1 = *(undefined *)param_7;
      *(int *)(__dest + 0x14) = SUB164(auVar1,0);
      *(undefined4 *)((long)__dest + 0xa4) = SUB164(auVar1 >> 0x20,0);
      *(int *)(__dest + 0x15) = SUB164(auVar1 >> 0x40,0);
      *(undefined4 *)((long)__dest + 0xac) = SUB164(auVar1 >> 0x60,0);
      __dest[0x17] = 0;
      iVar10 = *(int *)((long)param_9 + 0x44);
      __dest[0x18] = 0;
      if (iVar10 < 0) {
        *(int *)(__dest + 0x16) = (int)*(undefined8 *)(*(long *)(param_3 + 8) + 0x20);
      }
      else {
        *(int *)(__dest + 0x16) = *(int *)(*(long *)(param_3 + 8) + 0x20) * 2;
      }
                    // WARNING: Load size is inaccurate
      auVar1 = *(undefined *)param_9;
      pcVar6 = param_9[0x10];
      *(int *)(__dest + 0x19) = SUB164(auVar1,0);
      *(undefined4 *)((long)__dest + 0xcc) = SUB164(auVar1 >> 0x20,0);
      *(int *)(__dest + 0x1a) = SUB164(auVar1 >> 0x40,0);
      *(undefined4 *)((long)__dest + 0xd4) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar1 = *(undefined *)(param_9 + 2);
      *(char **)(__dest + 0x29) = pcVar6;
      *(int *)(__dest + 0x1b) = SUB164(auVar1,0);
      *(undefined4 *)((long)__dest + 0xdc) = SUB164(auVar1 >> 0x20,0);
      *(int *)(__dest + 0x1c) = SUB164(auVar1 >> 0x40,0);
      *(undefined4 *)((long)__dest + 0xe4) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar1 = *(undefined *)(param_9 + 4);
      *(int *)(__dest + 0x1d) = SUB164(auVar1,0);
      *(undefined4 *)((long)__dest + 0xec) = SUB164(auVar1 >> 0x20,0);
      *(int *)(__dest + 0x1e) = SUB164(auVar1 >> 0x40,0);
      *(undefined4 *)((long)__dest + 0xf4) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar1 = *(undefined *)(param_9 + 6);
      *(int *)(__dest + 0x1f) = SUB164(auVar1,0);
      *(undefined4 *)((long)__dest + 0xfc) = SUB164(auVar1 >> 0x20,0);
      *(int *)(__dest + 0x20) = SUB164(auVar1 >> 0x40,0);
      *(undefined4 *)((long)__dest + 0x104) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar1 = *(undefined *)(param_9 + 8);
      *(int *)(__dest + 0x21) = SUB164(auVar1,0);
      *(undefined4 *)((long)__dest + 0x10c) = SUB164(auVar1 >> 0x20,0);
      *(int *)(__dest + 0x22) = SUB164(auVar1 >> 0x40,0);
      *(undefined4 *)((long)__dest + 0x114) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar1 = *(undefined *)(param_9 + 10);
      *(int *)(__dest + 0x23) = SUB164(auVar1,0);
      *(undefined4 *)((long)__dest + 0x11c) = SUB164(auVar1 >> 0x20,0);
      *(int *)(__dest + 0x24) = SUB164(auVar1 >> 0x40,0);
      *(undefined4 *)((long)__dest + 0x124) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar1 = *(undefined *)(param_9 + 0xc);
      *(int *)(__dest + 0x25) = SUB164(auVar1,0);
      *(undefined4 *)((long)__dest + 300) = SUB164(auVar1 >> 0x20,0);
      *(int *)(__dest + 0x26) = SUB164(auVar1 >> 0x40,0);
      *(undefined4 *)((long)__dest + 0x134) = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar1 = *(undefined *)(param_9 + 0xe);
      *(int *)(__dest + 0x27) = SUB164(auVar1,0);
      *(undefined4 *)((long)__dest + 0x13c) = SUB164(auVar1 >> 0x20,0);
      *(int *)(__dest + 0x28) = SUB164(auVar1 >> 0x40,0);
      *(undefined4 *)((long)__dest + 0x144) = SUB164(auVar1 >> 0x60,0);
      uVar11 = FT_New_Size(SUB168(auVar1,0));
      if (uVar11 != 0) {
        ErrorF("FreeType: couldn\'t create size object: %d\n",(ulong)uVar11);
        free(__dest);
        uVar14 = FTtoXReturnCode((ulong)uVar11);
        goto LAB_00111a96;
      }
      FUN_00111840();
      if (*(int *)(param_3 + 0x10) == 0) {
        dVar35 = dVar32 * 64.00000000 + 0.50000000;
        lVar15 = (long)(int)dVar35;
        uVar11 = FT_Set_Char_Size(dVar35,*(undefined8 *)(*__dest + 8),lVar15,lVar15,(ulong)uVar2,
                                  (ulong)uVar3);
LAB_00112242:
        if (uVar11 == 0) {
          lVar15 = *(long *)(param_3 + 8);
          if ((*(byte *)(lVar15 + 0x10) & 8) != 0) {
            __dest[10] = 0xffff;
            lVar30 = (long)(dVar32 * 64.00000000 + 0.50000000);
            lVar23 = (int)uVar2 * lVar30 + 0x24;
            lVar28 = (int)uVar3 * lVar30 + 0x24;
            lVar30 = lVar23 >> 0x3f;
            lVar29 = lVar28 >> 0x3f;
            uVar24 = ((lVar28 / 0x12 + lVar29 >> 2) - lVar29) + 0x20U & 0xffffffffffffffc0;
            uVar26 = ((lVar23 / 0x12 + lVar30 >> 2) - lVar30) + 0x20U & 0xffffffffffffffc0;
            if (((uVar26 == 0) || (uVar25 = uVar26, uVar24 != 0)) &&
               ((uVar25 = uVar24, uVar26 == 0 && (uVar24 != 0)))) {
              uVar26 = uVar24;
            }
            if (*(int *)(lVar15 + 0x38) != 0) {
              lVar23 = 0;
              plVar21 = (long *)(*(long *)(lVar15 + 0x40) + 0x10);
              do {
                if (((*plVar21 + 0x20U & 0xffffffffffffffc0) == uVar26) &&
                   ((plVar21[1] + 0x20U & 0xffffffffffffffc0) == uVar25)) {
                  __dest[10] = lVar23;
                  break;
                }
                lVar23 = lVar23 + 1;
                plVar21 = plVar21 + 4;
              } while ((ulong)(*(int *)(lVar15 + 0x38) - 1) + 1 != lVar23);
            }
          }
          __dest[0x2b] = *(long *)(*__dest + 0x18);
          *(long **)(*__dest + 0x18) = __dest;
          uVar14 = 0x55;
          *param_1 = __dest;
        }
        else {
          FT_Done_Size(__dest[1]);
          free(__dest);
          uVar14 = FTtoXReturnCode((ulong)uVar11);
        }
      }
      else {
        if (local_d8 == 0) {
          uVar11 = *(uint *)(*(long *)(param_3 + 8) + 0x38);
          dVar35 = ((double)uVar3 * dVar32) / 72.00000000 + 0.50000000;
          if (0 < (int)uVar11) {
            psVar27 = *(short **)(*(long *)(param_3 + 8) + 0x40);
            lVar15 = -1;
            iVar10 = 100;
            psVar18 = psVar27;
            do {
              iVar13 = (int)psVar18[1] - (int)(((double)uVar2 * dVar32) / 72.00000000 + 0.50000000);
              if (((iVar13 + 1U < 3) && (iVar19 = (int)*psVar18 - (int)dVar35, iVar19 + 1U < 3)) &&
                 (iVar13 = iVar19 * iVar19 + iVar13 * iVar13, iVar13 < iVar10)) {
                lVar15 = (long)(int)local_d8;
                iVar10 = iVar13;
              }
              local_d8 = local_d8 + 1;
              psVar18 = psVar18 + 0x10;
            } while (uVar11 != local_d8);
            if ((int)lVar15 != -1) {
              psVar27 = psVar27 + lVar15 * 0x10;
              uVar11 = FT_Set_Pixel_Sizes(dVar35,0x3fe0000000000000,0x4052000000000000,
                                          *(undefined8 *)(*__dest + 8),(ulong)(uint)(int)psVar27[1],
                                          (ulong)(uint)(int)*psVar27);
              goto LAB_00112242;
            }
          }
        }
        free(__dest);
        uVar14 = 0x53;
      }
      goto LAB_00111a96;
    }
  }
  else {
    __dest = (long *)malloc((long)*(int *)(param_5 + 0x68) << 2);
    param_1[0xb] = __dest;
    if (__dest != (long *)0x0) {
      memcpy(__dest,*(void **)(param_5 + 0x70),(long)*(int *)(param_5 + 0x68) << 2);
      goto LAB_00111bb1;
    }
  }
  uVar14 = 0x50;
LAB_00111a96:
  if (lVar4 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar14;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_001126f0(ulong param_1,long **param_2,undefined4 *param_3)

{
  long *plVar1;
  undefined4 uVar2;
  uint uVar3;
  
  plVar1 = param_2[6];
  if (plVar1 != (long *)0x0) {
    uVar3 = (uint)param_1 & 0xff;
    if ((*(ushort *)plVar1 <= uVar3) && (uVar3 <= *(ushort *)((long)plVar1 + 2))) {
      uVar3 = (uint)(param_1 >> 8) & 0xffffff;
      if ((*(ushort *)((long)plVar1 + 4) <= uVar3) && (uVar3 <= *(ushort *)((long)plVar1 + 6)))
      goto LAB_00112727;
    }
    *param_3 = *(undefined4 *)(param_2 + 5);
    return 0xffffffff;
  }
LAB_00112727:
  uVar2 = FTRemap(*(undefined8 *)(**param_2 + 8),param_2 + 1,param_1 & 0xffffffff);
  *param_3 = uVar2;
  return 0;
}



undefined8 FUN_00112760(long param_1,long param_2,ulong param_3,undefined4 *param_4)

{
  undefined auVar1 [16];
  long lVar2;
  int iVar3;
  undefined8 uVar4;
  long lVar5;
  long lVar6;
  
  if ((param_2 == 0xffff) || (*(long *)(param_1 + 0x40) == 0)) {
    return 0xffffffff;
  }
  lVar6 = param_2 * 0x20 + *(long *)(param_1 + 0x40);
  lVar2 = *(long *)(lVar6 + 0x18);
  lVar5 = lVar2 + 0x3f;
  if (-1 < lVar2) {
    lVar5 = lVar2;
  }
  lVar2 = *(long *)(lVar6 + 0x10);
  lVar6 = lVar2 + 0x3f;
  if (-1 < lVar2) {
    lVar6 = lVar2;
  }
  iVar3 = FT_Set_Pixel_Sizes(param_1,lVar6 >> 6,lVar5 >> 6);
  if ((iVar3 == 0) && (uVar4 = FT_Load_Glyph(param_1,param_3 & 0xffff,0x4000), (int)uVar4 == 0)) {
    if (param_4 == (undefined4 *)0x0) {
      return uVar4;
    }
    lVar2 = *(long *)(param_1 + 0x98);
                    // WARNING: Load size is inaccurate
    auVar1 = *(undefined *)(lVar2 + 0x30);
    *param_4 = SUB164(auVar1,0);
    param_4[1] = SUB164(auVar1 >> 0x20,0);
    param_4[2] = SUB164(auVar1 >> 0x40,0);
    param_4[3] = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar1 = *(undefined *)(lVar2 + 0x40);
    param_4[4] = SUB164(auVar1,0);
    param_4[5] = SUB164(auVar1 >> 0x20,0);
    param_4[6] = SUB164(auVar1 >> 0x40,0);
    param_4[7] = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar1 = *(undefined *)(lVar2 + 0x50);
    param_4[8] = SUB164(auVar1,0);
    param_4[9] = SUB164(auVar1 >> 0x20,0);
    param_4[10] = SUB164(auVar1 >> 0x40,0);
    param_4[0xb] = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar1 = *(undefined *)(lVar2 + 0x60);
    param_4[0xc] = SUB164(auVar1,0);
    param_4[0xd] = SUB164(auVar1 >> 0x20,0);
    param_4[0xe] = SUB164(auVar1 >> 0x40,0);
    param_4[0xf] = SUB164(auVar1 >> 0x60,0);
    return uVar4;
  }
  return 0xffffffff;
}



undefined8
FUN_00112830(uint param_1,long param_2,long param_3,uint param_4,undefined8 param_5,ulong *param_6,
            ulong *param_7,undefined8 *param_8)

{
  ushort uVar1;
  short sVar2;
  int iVar3;
  ulong uVar4;
  ulong uVar5;
  undefined8 uVar6;
  long lVar7;
  long in_FS_OFFSET;
  double dVar8;
  double dVar9;
  undefined in_XMM0 [16];
  long local_b0;
  ulong local_88;
  ulong local_80;
  ulong local_78;
  ulong local_70;
  ulong local_68;
  ulong local_60;
  ulong local_58;
  ulong local_50;
  long local_40;
  
  dVar8 = SUB168(in_XMM0,0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(byte *)(param_2 + 0x10) & 8) == 0) {
    uVar6 = 0xffffffff;
  }
  else {
    local_58 = 0;
    iVar3 = FT_Load_Sfnt_Table(param_2,0x686d7478,0);
    if ((param_4 == 0) || (iVar3 != 0)) {
      local_b0 = 0;
      uVar4 = 0;
    }
    else {
      if (param_1 < param_4) {
        lVar7 = (ulong)param_1 * 4;
        uVar4 = 0;
        local_b0 = 0;
        if (lVar7 + 4U <= local_58) {
          uVar1 = FUN_00110d30(param_2,0x686d7478,lVar7);
          sVar2 = FUN_00110d30(param_2,0x686d7478,lVar7 + 2);
          local_b0 = (long)sVar2;
          uVar4 = (ulong)uVar1;
        }
      }
      else {
        uVar4 = 0;
        local_b0 = 0;
        lVar7 = (ulong)(param_4 - 1) * 4;
        if (lVar7 + 4U <= local_58) {
          uVar1 = FUN_00110d30(param_2,0x686d7478,lVar7);
          uVar4 = (ulong)uVar1;
          if ((ulong)((param_1 - param_4) * 2 + 4) + lVar7 + 2 <= local_58) {
            sVar2 = FUN_00110d30(param_2,0x686d7478);
            local_b0 = (long)sVar2;
            uVar4 = (ulong)uVar1;
          }
        }
      }
    }
    uVar4 = FT_MulFix(uVar4,*(undefined8 *)(param_3 + 0x20));
    *param_7 = uVar4;
    param_6[2] = uVar4;
    uVar4 = FT_MulFix(local_b0,*(undefined8 *)(param_3 + 0x20));
    *param_6 = uVar4;
    uVar4 = FT_MulFix(*(undefined8 *)(param_2 + 0x70),*(undefined8 *)(param_3 + 0x28));
    param_6[1] = uVar4;
    uVar4 = FT_MulFix(*(undefined8 *)(param_2 + 0x80),*(undefined8 *)(param_3 + 0x28));
    dVar9 = 0.00000000;
    param_6[3] = uVar4;
    if (dVar8 <= 0.00000000) {
      if (dVar8 < 0.00000000) {
        param_6[2] = (long)((double)param_6[1] * dVar8 + (double)param_6[2]);
        dVar9 = (double)uVar4 * dVar8 + (double)*param_6;
        *param_6 = (long)dVar9;
      }
    }
    else {
      dVar9 = (double)param_6[1] * dVar8 + (double)*param_6;
      param_6[2] = (long)((double)uVar4 * dVar8 + (double)param_6[2]);
      *param_6 = (long)dVar9;
    }
    *param_8 = 0xffffffffffffffff;
    local_88 = *param_6;
    local_78 = param_6[2];
    local_80 = param_6[1];
    local_60 = param_6[3];
    local_70 = local_80;
    local_68 = local_88;
    local_58 = local_78;
    local_50 = local_60;
    FT_Vector_Transform(dVar9,&local_88,param_5);
    FT_Vector_Transform(&local_78,param_5);
    FT_Vector_Transform(&local_68,param_5);
    FT_Vector_Transform(&local_58,param_5);
    uVar4 = local_68;
    if ((long)local_58 <= (long)local_68) {
      uVar4 = local_58;
    }
    if ((long)local_78 < (long)uVar4) {
      uVar4 = local_78;
    }
    if ((long)local_88 < (long)uVar4) {
      uVar4 = local_88;
    }
    uVar5 = local_58;
    if ((long)local_58 < (long)local_68) {
      uVar5 = local_68;
    }
    *param_6 = uVar4;
    if ((long)uVar5 < (long)local_78) {
      uVar5 = local_78;
    }
    if ((long)uVar5 < (long)local_88) {
      uVar5 = local_88;
    }
    param_6[2] = uVar5;
    uVar4 = local_60;
    if ((long)local_50 <= (long)local_60) {
      uVar4 = local_50;
    }
    if ((long)local_70 < (long)uVar4) {
      uVar4 = local_70;
    }
    if ((long)local_80 < (long)uVar4) {
      uVar4 = local_80;
    }
    uVar5 = local_50;
    if ((long)local_50 < (long)local_60) {
      uVar5 = local_60;
    }
    param_6[1] = uVar4;
    if ((long)uVar5 < (long)local_70) {
      uVar5 = local_70;
    }
    if ((long)uVar5 < (long)local_80) {
      uVar5 = local_80;
    }
    param_6[3] = uVar5;
    uVar6 = 0;
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



undefined8 FUN_00112c20(uint param_1,ulong param_2,undefined8 *param_3,long *param_4,uint param_5)

{
  ulong uVar1;
  ulong uVar2;
  sbyte sVar3;
  byte bVar4;
  byte bVar5;
  short sVar6;
  uint uVar7;
  int iVar8;
  uint uVar9;
  undefined8 *puVar10;
  undefined8 uVar11;
  long lVar12;
  byte *pbVar13;
  uint uVar14;
  long lVar15;
  long lVar16;
  short sVar17;
  uint uVar18;
  int iVar19;
  byte *pbVar20;
  uint uVar21;
  byte bVar22;
  int iVar23;
  int iVar24;
  long lVar25;
  short sVar26;
  uint uVar27;
  int iVar28;
  short sVar29;
  int iVar30;
  byte *pbVar31;
  long lVar32;
  long *plVar33;
  byte *pbVar34;
  int iVar35;
  int iVar36;
  long *plVar37;
  long in_FS_OFFSET;
  double dVar38;
  double dVar39;
  double dVar40;
  undefined auVar41 [16];
  int local_148;
  uint local_138;
  uint local_130;
  uint local_128;
  byte local_120;
  byte local_118;
  ulong local_100;
  long local_b8;
  long local_b0;
  long local_a8;
  ulong local_a0;
  long local_98;
  ulong local_90;
  long local_88 [9];
  long local_40;
  
  lVar16 = *param_4;
  uVar2 = (ulong)param_1;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_00111840();
  if (param_3 == (undefined8 *)0x0) {
LAB_001134a0:
    uVar11 = 0x50;
    goto LAB_001130f5;
  }
  local_138 = (uint)param_2;
  if (param_5 == 0) {
    if ((*(int *)(param_4 + 0xb) == 2) || ((param_2 & 4) != 0)) {
      puVar10 = (undefined8 *)param_4[0xf];
LAB_001130c4:
      plVar37 = (long *)0x0;
      *param_3 = *puVar10;
      local_128 = 0;
      *(undefined4 *)(param_3 + 1) = *(undefined4 *)(puVar10 + 1);
      goto joined_r0x001130e1;
    }
    local_128 = local_138 & 8;
    if ((param_2 & 8) != 0) {
      puVar10 = (undefined8 *)param_4[0x13];
      goto LAB_001130c4;
    }
    if ((*(byte *)(param_4 + 9) & 8) == 0) {
      plVar33 = local_88;
      iVar8 = FUN_00112760(*(undefined8 *)(lVar16 + 8),param_4[10],uVar2 & 0xffff,plVar33);
      if (iVar8 != 0) goto LAB_00112d7e;
      plVar37 = (long *)0x0;
LAB_001139b9:
      lVar32 = plVar33[2];
      lVar12 = lVar32 + *plVar33;
      lVar25 = lVar32 + 0x3f;
      if (-1 < lVar32) {
        lVar25 = lVar32;
      }
      lVar15 = lVar12 + 0x3f;
      if (-1 < lVar12) {
        lVar15 = lVar12;
      }
      sVar6 = (short)(lVar15 >> 6);
      dVar38 = (double)*plVar33 + (double)lVar32 + (double)lVar32;
      dVar40 = (double)plVar33[4] * (double)param_4[0x1c] * 0.01562500 + 0.50000000;
      if (dVar40 < 4503599627370496.00000000) {
        auVar41 = orpd(ZEXT816((ulong)((double)(long)dVar40 -
                                      (double)-(ulong)(dVar40 < (double)(long)dVar40))),
                       CONCAT88(0xffffffffffffffff,(ulong)dVar40 & 0x8000000000000000) &
                       (undefined  [16])0xffffffffffffffff);
        dVar40 = SUB168(auVar41,0);
      }
      iVar8 = (int)dVar40;
      lVar32 = plVar33[3];
      lVar12 = lVar32 + 0x3f;
      if (-1 < lVar32) {
        lVar12 = lVar32;
      }
      lVar32 = plVar33[1] - lVar32;
      lVar15 = lVar32 + 0x3f;
      if (-1 < lVar32) {
        lVar15 = lVar32;
      }
      iVar30 = iVar8;
      if ((param_4[0x19] & 8U) != 0) {
        iVar30 = iVar8 + *(int *)(param_4 + 0x1e);
      }
      iVar30 = iVar30 + *(int *)((long)param_4 + 0xf4);
      sVar26 = (short)iVar30;
      if ((param_4[0x19] & 1U) != 0) {
        sVar6 = (short)*(undefined4 *)(param_4 + 0x1e) + sVar6;
      }
      sVar6 = sVar6 + (short)*(undefined4 *)((long)param_4 + 0xfc) +
              (short)*(undefined4 *)((long)param_4 + 0x14c);
      sVar29 = (short)*(undefined4 *)(param_4 + 0x1f) + (short)(lVar25 >> 6) +
               (short)*(undefined4 *)(param_4 + 0x29);
      dVar40 = ((double)(plVar33[4] * 1000) * (double)param_4[0x1c] *
                ((double)iVar30 / (double)iVar8) * 0.01562500) / (double)param_4[0xc];
      if (dVar40 < 4503599627370496.00000000) {
        auVar41 = orpd(ZEXT816((ulong)((double)(long)dVar40 -
                                      (double)(-(ulong)(dVar40 < (double)(long)dVar40) &
                                              0x3ff0000000000000))),
                       ZEXT816((ulong)dVar40 & 0x8000000000000000));
        dVar40 = SUB168(auVar41,0);
      }
      sVar17 = (short)(int)dVar40;
LAB_00112ffd:
      *(short *)((long)param_3 + 10) = sVar17;
      *(short *)param_3 = sVar29;
      *(short *)((long)param_3 + 2) = sVar6;
      *(short *)((long)param_3 + 4) = sVar26;
      *(short *)((long)param_3 + 6) = (short)(lVar12 >> 6);
      *(short *)(param_3 + 1) = (short)(lVar15 >> 6);
      if (*(int *)(param_4 + 0xb) != 0) {
        *(short *)((long)param_3 + 4) = *(short *)(param_4[0xf] + 4);
      }
      if ((*(byte *)((long)param_4 + 0xc9) & 8) != 0) {
        dVar38 = ((double)param_4[0x12] * 0.50000000 - dVar38 * 0.50000000 * 0.01562500) +
                 0.50000000;
        if ((double)((ulong)dVar38 & 0x7fffffffffffffff) < 4503599627370496.00000000) {
          auVar41 = orpd(ZEXT816((ulong)((double)(long)dVar38 -
                                        (double)(-(ulong)(dVar38 < (double)(long)dVar38) &
                                                0x3ff0000000000000))),
                         CONCAT88(0xffffffffffffffff,(ulong)dVar38 & 0x8000000000000000) &
                         (undefined  [16])0xffffffffffffffff);
          dVar38 = SUB168(auVar41,0);
        }
        local_128 = (uint)dVar38;
        *(short *)param_3 = (short)local_128 + sVar29;
        *(short *)((long)param_3 + 2) = (short)local_128 + sVar6;
      }
      goto joined_r0x001130e1;
    }
LAB_00112d7e:
    if (((*(byte *)(param_4 + 0x19) & 0x10) != 0) &&
       (iVar8 = FUN_00112830(param_4[0x28],uVar2,*(undefined8 *)(lVar16 + 8),param_4[1],
                             (ulong)*(uint *)(lVar16 + 0x14),param_4 + 4,&local_a8,&local_b8,
                             &local_b0), iVar8 == 0)) {
      plVar33 = (long *)0x0;
LAB_00112e0c:
      lVar15 = 0x1f - local_a0;
      uVar1 = param_4[0x19];
      dVar40 = (double)param_4[0xd];
      dVar38 = (double)(local_a8 + local_98);
      lVar12 = local_90 + 0x20;
      sVar6 = (short)(local_98 + 0x20 >> 6);
      if (dVar40 == 0.00000000) {
        dVar40 = (double)local_b0 * (double)param_4[0x1d] * (double)param_4[0xe] * 0.01562500 +
                 0.50000000;
        if (dVar40 < 4503599627370496.00000000) {
          auVar41 = orpd(ZEXT816((ulong)((double)(long)dVar40 -
                                        (double)-(ulong)(dVar40 < (double)(long)dVar40))),
                         CONCAT88(0xffffffffffffffff,(ulong)dVar40 & 0x8000000000000000) &
                         (undefined  [16])0xffffffffffffffff);
          dVar40 = SUB168(auVar41,0);
        }
        iVar8 = (int)dVar40;
        if (iVar8 < 1) {
          iVar8 = (int)*(short *)(param_4[0xf] + 4);
        }
        dVar40 = (double)iVar8;
        if ((uVar1 & 8) != 0) {
          iVar8 = iVar8 + *(int *)(param_4 + 0x1e);
        }
        iVar8 = *(int *)((long)param_4 + 0xf4) + iVar8;
        sVar26 = (short)iVar8;
        dVar40 = (double)(local_b0 * 1000) * (double)param_4[0x1d] * ((double)iVar8 / dVar40) *
                 (double)param_4[0xe] * 0.01562500;
        if (dVar40 < 4503599627370496.00000000) {
          auVar41 = orpd(ZEXT816((ulong)((double)(long)dVar40 -
                                        (double)(-(ulong)(dVar40 < (double)(long)dVar40) &
                                                0x3ff0000000000000))),
                         ZEXT816((ulong)dVar40 & 0x8000000000000000));
          dVar40 = SUB168(auVar41,0);
        }
        sVar17 = (short)(int)dVar40;
        if (sVar17 == 0) {
          sVar17 = *(short *)(param_4[0xf] + 10);
        }
      }
      else {
        dVar39 = (double)local_b8 * (double)param_4[0x1c] * dVar40 * 0.01562500 + 0.50000000;
        if (dVar39 < 4503599627370496.00000000) {
          auVar41 = orpd(ZEXT816((ulong)((double)(long)dVar39 -
                                        (double)-(ulong)(dVar39 < (double)(long)dVar39))),
                         CONCAT88(0xffffffffffffffff,(ulong)dVar39 & 0x8000000000000000) &
                         (undefined  [16])0xffffffffffffffff);
          dVar39 = SUB168(auVar41,0);
        }
        iVar8 = (int)dVar39;
        dVar39 = (double)iVar8;
        if ((uVar1 & 8) != 0) {
          iVar8 = iVar8 + *(int *)(param_4 + 0x1e);
        }
        iVar8 = *(int *)((long)param_4 + 0xf4) + iVar8;
        sVar26 = (short)iVar8;
        dVar40 = (double)(local_b8 * 1000) * (double)param_4[0x1c] * ((double)iVar8 / dVar39) *
                 dVar40 * 0.01562500;
        if (dVar40 < 4503599627370496.00000000) {
          auVar41 = orpd(ZEXT816((ulong)((double)(long)dVar40 -
                                        (double)(-(ulong)(dVar40 < (double)(long)dVar40) &
                                                0x3ff0000000000000))),
                         ZEXT816((ulong)dVar40 & 0x8000000000000000));
          dVar40 = SUB168(auVar41,0);
        }
        sVar17 = (short)(int)dVar40;
      }
      if ((uVar1 & 1) != 0) {
        sVar6 = (short)*(undefined4 *)(param_4 + 0x1e) + sVar6;
      }
      sVar6 = sVar6 + (short)*(undefined4 *)((long)param_4 + 0xfc);
      sVar29 = (short)(local_a8 + 0x20 >> 6) + (short)*(undefined4 *)(param_4 + 0x1f);
      plVar37 = plVar33;
      goto LAB_00112ffd;
    }
    uVar14 = FT_Load_Glyph(*(undefined8 *)(*param_4 + 8),uVar2,(ulong)*(uint *)(param_4 + 9));
    if (uVar14 == 0) {
      lVar12 = *(long *)(*(long *)(lVar16 + 8) + 0x98);
      plVar33 = (long *)(lVar12 + 0x30);
      if ((*(int *)(lVar12 + 0x90) == 0x62697473) && (plVar37 = plVar33, plVar33 != (long *)0x0))
      goto LAB_001139b9;
      uVar14 = FT_Outline_Get_BBox(lVar12 + 200,&local_a8);
      if (uVar14 == 0) {
        local_b8 = *(long *)(lVar12 + 0x50);
        local_b0 = *(long *)(lVar12 + 0x68);
        goto LAB_00112e0c;
      }
    }
    goto LAB_001137f0;
  }
  local_128 = 0;
  plVar37 = (long *)0x0;
joined_r0x001130e1:
  if ((param_2 & 2) == 0) {
    local_130 = 1;
    if (*(int *)(param_4 + 0xb) != 2) {
      local_130 = local_138 & 8;
      if ((param_2 & 8) == 0) {
        if ((((*(byte *)(param_4 + 9) & 8) != 0) ||
            (iVar8 = FUN_00112760(*(undefined8 *)(lVar16 + 8),param_4[10],uVar2 & 0xffff),
            iVar8 != 0)) && ((*(byte *)(param_4 + 0x19) & 0x10) != 0)) {
          local_130 = (uint)(*(ulong *)(*(long *)(lVar16 + 8) + 0x10) >> 3) & 1;
        }
      }
      else {
        local_130 = 1;
      }
    }
    local_138 = local_138 & 4;
    if ((param_2 & 4) == 0) {
      if (plVar37 == (long *)0x0) {
        uVar14 = FT_Load_Glyph(*(undefined8 *)(*param_4 + 8),uVar2,(ulong)*(uint *)(param_4 + 9));
        if (uVar14 != 0) goto LAB_001137f0;
        lVar12 = *(long *)(*(long *)(lVar16 + 8) + 0x98);
        plVar37 = (long *)(lVar12 + 0x30);
      }
      else {
        lVar12 = *(long *)(*(long *)(lVar16 + 8) + 0x98);
      }
      if (*(int *)(lVar12 + 0x90) == 0x62697473) {
        if (((*(byte *)((long)param_4 + 0xc9) & 8) != 0) && ((param_5 & 1) != 0)) {
          dVar38 = ((double)plVar37[2] + (double)plVar37[2] + (double)*plVar37) * 0.50000000 *
                   0.01562500;
          goto LAB_001134d1;
        }
        goto LAB_0011319a;
      }
      uVar14 = FT_Outline_Get_BBox(lVar12 + 200,&local_a8);
      if (uVar14 == 0) {
        local_a0 = local_a0 & 0xffffffffffffffc0;
        local_90 = local_90 + 0x3f & 0xffffffffffffffc0;
        if ((int)((long)(local_90 - local_a0) >> 6) == 0) goto LAB_00113180;
        uVar14 = FT_Render_Glyph(*(undefined8 *)(*(long *)(lVar16 + 8) + 0x98),2);
        if (uVar14 != 0) goto LAB_001137f0;
        if (((*(byte *)((long)param_4 + 0xc9) & 8) == 0) || ((param_5 & 1) == 0)) {
          local_138 = 1;
          goto LAB_0011319a;
        }
        if (local_130 == 0) {
          uVar14 = FT_Outline_Get_BBox(*(long *)(*(long *)(lVar16 + 8) + 0x98) + 200,&local_a8);
          if (uVar14 != 0) goto LAB_001137f0;
LAB_0011394b:
          local_138 = 1;
        }
        else {
          iVar8 = FUN_00112830(param_4[0x28],uVar2,*(long *)(lVar16 + 8),param_4[1],
                               (ulong)*(uint *)(lVar16 + 0x14),param_4 + 4,&local_a8,&local_b8,
                               &local_b0);
          local_138 = 0xffffffff;
          if (iVar8 == 0) goto LAB_0011394b;
        }
        dVar38 = (double)(local_a8 + local_98) * 0.50000000 * 0.01562500;
        goto LAB_001134d1;
      }
LAB_001137f0:
      uVar11 = FTtoXReturnCode((ulong)uVar14);
      goto LAB_001130f5;
    }
LAB_00113180:
    if (((*(byte *)((long)param_4 + 0xc9) & 8) == 0) || ((param_5 & 1) == 0)) {
      local_138 = 0xffffffff;
    }
    else {
      dVar38 = 0.00000000;
      local_138 = 0xffffffff;
LAB_001134d1:
      dVar38 = ((double)param_4[0x12] * 0.50000000 - dVar38) + 0.50000000;
      if ((double)((ulong)dVar38 & 0x7fffffffffffffff) < 4503599627370496.00000000) {
        auVar41 = orpd(ZEXT816((ulong)((double)(long)dVar38 -
                                      (double)(-(ulong)(dVar38 < (double)(long)dVar38) &
                                              0x3ff0000000000000))),
                       CONCAT88(0xffffffffffffffff,(ulong)dVar38 & 0x8000000000000000) &
                       (undefined  [16])0xffffffffffffffff);
        dVar38 = SUB168(auVar41,0);
      }
      local_128 = (uint)dVar38;
    }
LAB_0011319a:
    sVar6 = *(short *)((long)param_3 + 6);
    sVar26 = *(short *)param_3;
    iVar30 = (int)*(short *)(param_3 + 1) + (int)sVar6;
    iVar36 = (int)*(short *)((long)param_3 + 2) - (int)sVar26;
    iVar8 = 1;
    if (0 < iVar30) {
      iVar8 = iVar30;
    }
    iVar28 = 1;
    if (0 < iVar36) {
      iVar28 = iVar36;
    }
    uVar21 = iVar28 + -1 + *(int *)(param_4 + 0x15) * 8 >> 3 & -*(int *)(param_4 + 0x15);
    uVar27 = iVar8 * uVar21;
    pbVar31 = (byte *)calloc(1,(long)(int)uVar27);
    if (pbVar31 == (byte *)0x0) goto LAB_001134a0;
    *(byte **)(param_3 + 2) = pbVar31;
    if (((local_138 == 0xffffffff) || (iVar36 < 1)) || (iVar30 < 1)) goto LAB_001130f0;
    lVar12 = *(long *)(*(long *)(lVar16 + 8) + 0x98);
    local_148 = (int)sVar6 - *(int *)(lVar12 + 0xc4);
    iVar30 = *(int *)(lVar12 + 0xc0) - (int)sVar26;
    local_100 = param_4[0x19];
    if ((local_100 & 0x800) != 0) {
      iVar30 = local_128 + iVar30;
    }
    if ((local_138 & local_130) == 0) {
      uVar14 = (uint)local_100 & 1;
    }
    else {
      uVar14 = FT_Outline_Get_BBox(lVar12 + 200,&local_a8);
      if (uVar14 != 0) goto LAB_001137f0;
      local_100 = param_4[0x19];
      iVar28 = (int)*(short *)param_3;
      iVar36 = (int)*(short *)((long)param_3 + 2);
      uVar14 = (uint)local_100 & 1;
      if ((local_100 & 1) != 0) {
        iVar36 = iVar36 - *(int *)(param_4 + 0x1e);
      }
      if ((local_100 & 0x800) != 0) {
        iVar28 = iVar28 - local_128;
        iVar36 = iVar36 - local_128;
      }
      iVar19 = (int)((long)(local_90 + 0x20) >> 6);
      iVar24 = (int)((long)(0x1f - local_a0) >> 6);
      if ((param_2 & 8) == 0) {
        if (param_4[0x1f] == 0) goto LAB_001135dd;
LAB_001138e4:
        iVar19 = *(short *)((long)param_3 + 6) - iVar19;
        iVar24 = *(short *)(param_3 + 1) - iVar24;
      }
      else {
        if ((*(int *)((long)param_4 + 0x114) != 0) || (*(int *)(param_4 + 0x23) != 0))
        goto LAB_001138e4;
LAB_001135dd:
        iVar36 = iVar36 - (int)(local_98 + 0x20 >> 6);
        iVar19 = *(short *)((long)param_3 + 6) - iVar19;
        iVar24 = *(short *)(param_3 + 1) - iVar24;
        iVar28 = (int)(local_a8 + 0x20 >> 6) - iVar28;
        if ((iVar28 < 0) && (0 < iVar36)) {
          iVar30 = iVar30 + 1;
        }
        else {
          if ((iVar36 < 0) && (0 < iVar28)) {
            iVar30 = iVar30 + -1;
          }
        }
      }
      lVar12 = *(long *)(*(long *)(lVar16 + 8) + 0x98);
      if ((iVar19 < 0) && (0 < iVar24)) {
        local_148 = local_148 + 1;
      }
      else {
        if (iVar24 < 0) {
          local_148 = local_148 + -1 + (uint)(iVar19 < 1);
        }
      }
    }
    bVar4 = (byte)iVar30;
    if (iVar30 < 0) {
      local_118 = 8 - (-bVar4 & 7);
      iVar30 = (iVar30 + 7 >> 3) + -1;
      local_120 = -bVar4 & 7;
    }
    else {
      iVar30 = iVar30 >> 3;
      local_120 = 8 - (bVar4 & 7);
      local_118 = bVar4 & 7;
    }
    iVar36 = local_148;
    if (local_148 < 0) {
      iVar36 = 0;
    }
    if ((iVar36 < iVar8) &&
       (uVar18 = iVar36 - local_148,
       uVar18 <= *(uint *)(lVar12 + 0x98) && *(uint *)(lVar12 + 0x98) != uVar18)) {
      iVar28 = 0;
      if (-1 < iVar30) {
        iVar28 = iVar30;
      }
      iVar30 = iVar28 - iVar30;
      iVar24 = iVar30 + -1;
      iVar35 = iVar36 * uVar21;
      iVar19 = iVar28 + 1;
      lVar16 = (long)(iVar30 + 2);
      uVar9 = uVar18;
      do {
        if (iVar28 < (int)uVar21) {
          pbVar34 = pbVar31 + iVar35;
          lVar32 = (long)(int)(*(int *)(lVar12 + 0xa0) * uVar9) + *(long *)(lVar12 + 0xa8);
          if ((iVar24 < *(int *)(lVar12 + 0xa0)) && (-1 < iVar24)) {
            pbVar34[iVar28] = pbVar34[iVar28] | *(char *)(lVar32 + iVar24) << (local_120 & 0x1f);
          }
          if ((-1 < iVar30) &&
             (*(int *)(lVar12 + 0xa0) != iVar30 && iVar30 <= *(int *)(lVar12 + 0xa0))) {
            pbVar34[iVar28] =
                 pbVar34[iVar28] |
                 (byte)((int)(uint)*(byte *)(iVar30 + lVar32) >> (local_118 & 0x1f));
            if (iVar19 < (int)uVar21) {
              pbVar13 = pbVar34 + iVar19;
              bVar4 = *(byte *)(iVar30 + lVar32) << (local_120 & 0x1f) | *pbVar13;
              *pbVar13 = bVar4;
              if (iVar30 + 1 < *(int *)(lVar12 + 0xa0)) {
                lVar25 = lVar16;
                do {
                  iVar23 = (int)lVar25;
                  pbVar13[lVar25 - lVar16] =
                       bVar4 | (byte)((int)(uint)*(byte *)(lVar32 + -1 + lVar25) >>
                                     (local_118 & 0x1f));
                  if ((ulong)((uVar21 - 2) - iVar28) + lVar16 == lVar25) break;
                  bVar4 = *(char *)(lVar32 + -1 + lVar25) << (local_120 & 0x1f) |
                          (pbVar34 + (iVar19 - lVar16))[lVar25 + 1];
                  (pbVar34 + (iVar19 - lVar16))[lVar25 + 1] = bVar4;
                  lVar25 = lVar25 + 1;
                } while (*(int *)(lVar12 + 0xa0) != iVar23 && iVar23 <= *(int *)(lVar12 + 0xa0));
              }
            }
          }
        }
        if (uVar9 == ((uVar18 - 1) + iVar8) - iVar36) break;
        iVar35 = iVar35 + uVar21;
        uVar9 = (iVar36 - local_148) + 1 + (uVar9 - uVar18);
        uVar7 = ((iVar36 - local_148) - uVar18) + uVar9;
      } while (uVar7 <= *(uint *)(lVar12 + 0x98) && *(uint *)(lVar12 + 0x98) != uVar7);
    }
    if ((uVar14 != 0) && (iVar30 = *(int *)(param_4 + 0x1e), 0 < iVar30)) {
      iVar36 = 0;
      lVar16 = (ulong)(uVar21 - 1) + 1;
      do {
        if ((local_100 & 2) == 0) {
          iVar28 = 0;
          pbVar34 = pbVar31;
          do {
            pbVar13 = pbVar34 + lVar16;
            iVar24 = 0;
            pbVar20 = pbVar34;
            if (0 < (int)uVar21) {
              do {
                bVar4 = *pbVar20;
                pbVar34 = pbVar20 + 1;
                *pbVar20 = bVar4 >> 1 | bVar4 | (byte)iVar24;
                iVar24 = (uint)bVar4 << 7;
                pbVar20 = pbVar34;
              } while (pbVar34 != pbVar13);
            }
            iVar28 = iVar28 + 1;
          } while (iVar28 < iVar8);
        }
        else {
          iVar28 = 0;
          pbVar34 = pbVar31;
          do {
            if (0 < (int)uVar21) {
              bVar4 = *pbVar34;
              pbVar13 = pbVar34 + lVar16;
              lVar12 = 0;
              while( true ) {
                pbVar20 = pbVar34;
                lVar32 = (ulong)bVar4 << 7;
                pbVar34 = pbVar20 + 1;
                bVar22 = ~bVar4;
                bVar4 = bVar4 >> 1 | bVar4;
                bVar5 = ~(bVar4 * '\x02' & bVar22) & (bVar4 | (byte)lVar12);
                *pbVar20 = bVar5;
                if (pbVar34 == pbVar13) break;
                bVar4 = *pbVar34;
                lVar12 = lVar32;
                if (((bVar22 & 1) != 0) && ((char)bVar4 < '\0')) {
                  *pbVar20 = bVar5 & 0xfe;
                }
              }
            }
            iVar28 = iVar28 + 1;
          } while (iVar28 < iVar8);
        }
        iVar36 = iVar36 + 1;
      } while (iVar36 != iVar30);
    }
    if ((local_138 == 0) && (param_4[0x29] != 0)) {
      iVar28 = *(int *)((long)param_4 + 0x14c) - *(int *)(param_4 + 0x29);
      iVar30 = (int)*(short *)(param_4[0xf] + 6);
      iVar36 = iVar30 + *(short *)(param_4[0xf] + 8);
      if ((double)param_4[0x1a] <= 0.00000000 && (double)param_4[0x1a] != 0.00000000) {
        iVar28 = -iVar28;
      }
      uVar14 = uVar21 - 1;
      iVar30 = ((iVar36 + -1) - (iVar30 - *(short *)((long)param_3 + 6))) * iVar28;
      uVar18 = 0;
      if ((int)uVar14 < 1) {
        uVar18 = uVar14;
      }
      lVar16 = (long)(int)uVar14;
      do {
        uVar2 = (long)iVar30 / (long)iVar36;
        iVar24 = (int)uVar2;
        if (iVar24 < 0) {
          uVar9 = -iVar24 & 7;
          if ((uVar9 != 0) && (0 < (int)uVar21)) {
            sVar3 = (sbyte)uVar9;
            pbVar34 = pbVar31;
            while( true ) {
              bVar4 = *pbVar34 << sVar3;
              *pbVar34 = bVar4;
              if (pbVar31 + uVar14 == pbVar34) break;
              *pbVar34 = bVar4 | (byte)((int)(uint)pbVar34[1] >> (8U - sVar3 & 0x1f));
              pbVar34 = pbVar34 + 1;
            }
          }
          if (-iVar24 >> 3 != 0) {
            pbVar34 = pbVar31;
            if (1 < (int)uVar21) {
              do {
                pbVar13 = pbVar34 + 1;
                *pbVar34 = pbVar34[1];
                pbVar34 = pbVar13;
              } while (pbVar31 + (ulong)(uVar21 - 2) + 1 != pbVar13);
              pbVar34 = pbVar31 + lVar16;
            }
            *pbVar34 = 0;
          }
        }
        else {
          bVar4 = (byte)uVar2 & 7;
          if (((uVar2 & 7) != 0) && (-1 < (int)uVar14)) {
            pbVar34 = pbVar31 + lVar16;
            uVar9 = uVar14;
            while( true ) {
              uVar9 = uVar9 - 1;
              bVar5 = (byte)((int)(uint)*pbVar34 >> bVar4);
              *pbVar34 = bVar5;
              if (uVar9 == 0xffffffff) break;
              if (uVar14 != uVar9) {
                *pbVar34 = pbVar34[-1] << (8 - bVar4 & 0x1f) | bVar5;
              }
              pbVar34 = pbVar34 + -1;
            }
          }
          if (iVar24 >> 3 != 0) {
            if (0 < (int)uVar14) {
              pbVar34 = pbVar31 + lVar16;
              do {
                pbVar13 = pbVar34 + -1;
                *pbVar34 = pbVar34[-1];
                pbVar34 = pbVar13;
              } while (pbVar31 + (lVar16 - (ulong)(uVar21 - 2)) + -1 != pbVar13);
            }
            pbVar31[(int)uVar18] = 0;
          }
        }
        local_138 = local_138 + 1;
        iVar30 = iVar30 - iVar28;
        pbVar31 = pbVar31 + (int)uVar21;
      } while ((int)local_138 < iVar8);
    }
    iVar8 = *(int *)(param_4 + 0x14);
    if (iVar8 == 0) {
      BitOrderInvert(param_3[2],(ulong)uVar27);
      iVar8 = *(int *)(param_4 + 0x14);
    }
    if (*(int *)((long)param_4 + 0xa4) != iVar8) {
      if (*(int *)((long)param_4 + 0xac) == 2) {
        TwoByteSwap(param_3[2],(ulong)uVar27);
        uVar11 = 0x55;
        goto LAB_001130f5;
      }
      if (*(int *)((long)param_4 + 0xac) == 4) {
        FourByteSwap(param_3[2],(ulong)uVar27);
      }
    }
  }
LAB_001130f0:
  uVar11 = 0x55;
LAB_001130f5:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar11;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_00113ff0(ulong param_1,ulong param_2,long *param_3,long param_4)

{
  int iVar1;
  undefined8 uVar2;
  long lVar3;
  long in_FS_OFFSET;
  int local_3c;
  int local_38;
  int local_34;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(int *)(param_4 + 0x58) == 2) {
    *param_3 = *(long *)(param_4 + 0x78);
    uVar2 = 0x55;
  }
  else {
    if ((param_2 & 8) == 0) {
      uVar2 = FUN_00111620(param_1,param_2,param_4 + 0xb0,(ulong)*(uint *)(param_4 + 0x10c),
                           param_4 + 0xb8,param_4 + 0xc0,&local_3c,&local_38,&local_34);
      if ((int)uVar2 == 0x55) {
        if (local_3c != 0) {
          iVar1 = *(int *)(*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) +
                          (long)local_34 * 4);
          if (iVar1 != 1) {
            lVar3 = *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) +
                    (long)local_34 * 0x18;
            if (iVar1 < 2) {
              uVar2 = FUN_00112c20(param_1 & 0xffffffff,(ulong)((uint)param_2 | 2),lVar3,param_4,0);
              if ((int)uVar2 != 0x55) goto LAB_00114064;
              *(undefined4 *)
               (*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) + (long)local_34 * 4) = 2;
              lVar3 = *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) +
                      (long)local_34 * 0x18;
            }
            *param_3 = lVar3;
            goto LAB_00114064;
          }
        }
        *param_3 = 0;
      }
    }
    else {
      *param_3 = *(long *)(param_4 + 0x98);
      uVar2 = 0x55;
    }
  }
LAB_00114064:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_00114170(undefined8 param_1,uint param_2,long *param_3,undefined8 *param_4)

{
  int iVar1;
  uint uVar2;
  undefined8 uVar3;
  long in_FS_OFFSET;
  uint local_24;
  long local_20;
  
  local_24 = 0;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = FUN_001126f0(param_1,param_4,&local_24);
  if (((iVar1 != 0) || (local_24 == 0)) || (local_24 == *(uint *)(param_4 + 5))) {
    *param_3 = 0;
    uVar3 = 0x55;
    goto LAB_0011420d;
  }
  iVar1 = FUN_00113ff0((ulong)local_24,(ulong)param_2,param_3,*param_4);
  if ((iVar1 == 0x55) && (*param_3 != 0)) {
LAB_00114237:
    uVar3 = 0x55;
  }
  else {
    uVar3 = *param_4;
    uVar2 = local_24;
    if (*(uint *)(param_4 + 5) != local_24) {
      iVar1 = FUN_00113ff0((ulong)*(uint *)(param_4 + 5),(ulong)param_2,param_3,uVar3);
      if ((iVar1 == 0x55) && (*param_3 != 0)) goto LAB_00114237;
      uVar3 = *param_4;
      uVar2 = *(uint *)(param_4 + 5);
    }
    uVar3 = FUN_00113ff0((ulong)uVar2,(ulong)(param_2 | 4),param_3,uVar3);
  }
LAB_0011420d:
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



ulong FUN_001143e0(ulong param_1,undefined8 param_2,long *param_3,long param_4)

{
  long lVar1;
  int iVar2;
  uint uVar3;
  ulong uVar4;
  long in_FS_OFFSET;
  int local_3c;
  int local_38;
  int local_34;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar3 = FUN_00111620(param_1,param_2,param_4 + 0xb0,(ulong)*(uint *)(param_4 + 0x10c),
                       param_4 + 0xb8,param_4 + 0xc0,&local_3c,&local_38,&local_34);
  uVar4 = (ulong)uVar3;
  if (uVar3 != 0x55) goto LAB_00114445;
  if (local_3c != 0) {
    iVar2 = *(int *)(*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) + (long)local_34 * 4)
    ;
    if (iVar2 != 1) {
      lVar1 = *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) + (long)local_34 * 0x18;
      if (iVar2 == 3) {
        *param_3 = lVar1;
        goto LAB_00114445;
      }
      uVar3 = FUN_00112c20(param_1 & 0xffffffff,(ulong)((uint)param_2 | 1),lVar1,param_4,
                           (ulong)(1 < iVar2));
      if (uVar3 == 0x55) {
LAB_00114590:
        *(undefined4 *)
         (*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) + (long)local_34 * 4) = 3;
        *param_3 = *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) + (long)local_34 * 0x18
        ;
      }
      else {
        if (1 < *(int *)(*(long *)(*(long *)(param_4 + 0xc0) + (long)local_38 * 8) +
                        (long)local_34 * 4)) {
          ErrorF("Warning: FreeTypeRasteriseGlyph() returns an error,\n");
          ErrorF("\tso the backend tries to set a white space.\n");
          uVar3 = FUN_00112c20(param_1 & 0xffffffff,(ulong)((uint)param_2 | 5),
                               *(long *)(*(long *)(param_4 + 0xb8) + (long)local_38 * 8) +
                               (long)local_34 * 0x18,param_4,
                               (ulong)(1 < *(int *)(*(long *)(*(long *)(param_4 + 0xc0) +
                                                             (long)local_38 * 8) +
                                                   (long)local_34 * 4)));
          if (uVar3 == 0x55) goto LAB_00114590;
        }
        uVar4 = (ulong)uVar3;
      }
      goto LAB_00114445;
    }
  }
  *param_3 = 0;
LAB_00114445:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Could not reconcile some variable overlaps

ulong FUN_001148d0(char *param_1,long param_2,long param_3,ushort *param_4,undefined8 param_5,
                  undefined8 *param_6)

{
  char cVar1;
  ushort uVar2;
  int iVar3;
  long *plVar4;
  undefined8 *puVar5;
  bool bVar6;
  ushort uVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  long **pplVar15;
  size_t __nmemb;
  char *pcVar16;
  long lVar17;
  char *pcVar18;
  char *__s;
  ushort *puVar19;
  ushort *puVar20;
  char **__ptr;
  undefined8 *puVar21;
  undefined8 *puVar22;
  void *__ptr_00;
  void *pvVar23;
  ushort *__nptr;
  byte bVar24;
  ushort uVar25;
  ushort uVar26;
  ushort *puVar27;
  long lVar28;
  int iVar29;
  uint *__s_00;
  undefined8 *puVar30;
  undefined8 *puVar31;
  uint uVar32;
  ulong uVar33;
  ulong uVar34;
  long lVar35;
  char **ppcVar36;
  uint *__dest;
  short sVar37;
  ulong uVar38;
  short sVar39;
  uint *puVar40;
  uint *puVar41;
  ushort uVar42;
  undefined8 *puVar43;
  long lVar44;
  ushort uVar45;
  ushort uVar46;
  ushort uVar47;
  ulong uVar48;
  long in_FS_OFFSET;
  bool bVar49;
  bool bVar50;
  byte bVar51;
  double dVar52;
  double dVar53;
  double dVar54;
  double dVar55;
  undefined auVar56 [16];
  double dVar57;
  double dVar58;
  double dVar59;
  double dVar60;
  undefined auVar61 [16];
  double dVar62;
  undefined auVar63 [16];
  double dVar64;
  double dVar65;
  double dVar66;
  undefined auVar67 [16];
  double dVar68;
  double dVar69;
  undefined8 uVar70;
  uint *local_630;
  undefined2 local_618;
  int local_610;
  uint local_608;
  char *local_600;
  double local_5f8;
  ushort local_5f0;
  double local_5e8;
  ulong local_5e0;
  ushort local_5d8;
  double local_5d0;
  ushort local_5c8;
  int local_5bc;
  int local_5b8;
  double local_5b0;
  ushort local_5a8;
  undefined2 local_5a0;
  double local_598;
  short local_590;
  long local_588;
  long local_580;
  long local_568;
  ushort local_530;
  ushort local_52e;
  ushort local_52c;
  ushort local_52a;
  undefined local_528 [8];
  long local_520;
  undefined8 local_518;
  ulong local_4d8;
  double local_4d0;
  double local_4c8;
  double local_4c0;
  double local_4b8;
  ulong local_4b0;
  undefined8 local_4a8;
  undefined8 local_4a0;
  undefined8 local_498;
  undefined8 local_490;
  ulong local_488;
  double local_480;
  double local_478;
  double local_470;
  double local_468;
  undefined8 local_460;
  undefined8 local_458;
  char local_448;
  char local_447;
  long local_40;
  
  bVar51 = 0;
  uVar33 = 0x50;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pplVar15 = (long **)calloc(1,0x60);
  if (pplVar15 == (long **)0x0) goto LAB_00114cbd;
  iVar11 = *(int *)(param_2 + 0x48);
  iVar8 = SPropRecValList_new(local_528);
  if (iVar8 == 0) {
    __nmemb = strlen(param_1);
    pcVar16 = strrchr(param_1,0x2f);
    __s = pcVar16 + 1;
    if (pcVar16 == (char *)0x0) {
      __s = param_1;
    }
    pcVar16 = strrchr(__s,0x3a);
    if (pcVar16 == (char *)0x0) {
      local_630 = (uint *)strdup(param_1);
      if (local_630 != (uint *)0x0) {
LAB_00114a0a:
        local_4c8 = 1.00000000;
        local_4c0 = 1.00000000;
        local_4b8 = 1.00000000;
        local_480 = 1.00000000;
        local_478 = 1.00000000;
        local_468 = 1.00000000;
        local_4d8 = 0;
        local_4d0 = 0.00000000;
        local_4b0 = 1;
        local_4a8 = 0;
        local_4a0 = 0;
        local_498 = 0xffffffffffffffff;
        local_490 = 0;
        local_488 = 0xfffffffe00000000;
        local_470 = 0.00000000;
        local_460 = 0;
        local_458 = 0;
        iVar8 = SPropRecValList_search_record(local_528,&local_520,"FaceNumber");
        if (iVar8 == 0) {
LAB_00114b1e:
          __dest = (uint *)strdup((char *)local_630);
          if (__dest == (uint *)0x0) {
LAB_00114ca0:
            free(local_630);
            goto LAB_00114cb0;
          }
          local_5f8._0_4_ = 0;
        }
        else {
          __s = *(char **)(local_520 + 8);
          lVar17 = strtol(__s,(char **)&local_518,10);
          if (((*__s == '\0') || (local_5f8._0_4_ = (int)lVar17, *(char *)local_518 != '\0')) ||
             (local_5f8._0_4_ < 1)) goto LAB_00114b1e;
          __nmemb = strlen(__s);
          __dest = local_630;
          do {
            __s_00 = __dest;
            uVar10 = *__s_00 + 0xfefefeff & ~*__s_00;
            uVar32 = uVar10 & 0x80808080;
            __dest = __s_00 + 1;
          } while (uVar32 == 0);
          bVar49 = (uVar10 & 0x8080) == 0;
          bVar24 = (byte)uVar32;
          if (bVar49) {
            bVar24 = (byte)(uVar32 >> 0x10);
          }
          if (bVar49) {
            __dest = (uint *)((long)__s_00 + 6);
          }
          lVar17 = (long)__dest + ((-3 - (ulong)CARRY1(bVar24,bVar24)) - (long)local_630);
          __dest = (uint *)malloc(lVar17 + 3 + __nmemb);
          if (__dest == (uint *)0x0) goto LAB_00114ca0;
          *(byte *)__dest = 0;
          pcVar16 = strrchr((char *)local_630,0x2f);
          if (pcVar16 == (char *)0x0) {
            *(byte *)__dest = 0x3a;
            __s = stpcpy((char *)((long)__dest + 1),__s);
            *__s = ':';
            memcpy(__s + 1,local_630,lVar17 + 1);
          }
          else {
            memcpy(__dest,local_630,lVar17 + 1);
            pcVar18 = strrchr((char *)__dest,0x2f);
            pcVar18[1] = '\0';
            __s_00 = __dest;
            do {
              puVar40 = __s_00;
              uVar10 = *puVar40 + 0xfefefeff & ~*puVar40;
              uVar32 = uVar10 & 0x80808080;
              __s_00 = puVar40 + 1;
            } while (uVar32 == 0);
            bVar49 = (uVar10 & 0x8080) == 0;
            bVar24 = (byte)uVar32;
            if (bVar49) {
              bVar24 = (byte)(uVar32 >> 0x10);
            }
            if (bVar49) {
              __s_00 = (uint *)((long)puVar40 + 6);
            }
            lVar17 = (long)__s_00 + ((-3 - (ulong)CARRY1(bVar24,bVar24)) - (long)__dest);
            *(undefined *)((long)__dest + lVar17) = 0x3a;
            __s = stpcpy((char *)((byte *)((long)__dest + 1) + lVar17),__s);
            *__s = ':';
            strcpy(__s + 1,pcVar16 + 1);
          }
        }
        iVar8 = SPropRecValList_search_record(local_528,&local_520,"AutoItalic");
        if (iVar8 != 0) {
          local_4d0 = *(double *)(local_520 + 8);
        }
        iVar8 = -1;
        iVar9 = SPropRecValList_search_record(local_528,&local_520,"Hinting");
        if (iVar9 != 0) {
          iVar8 = *(int *)(local_520 + 8);
        }
        iVar9 = SPropRecValList_search_record(local_528,&local_520,"ScaleWidth");
        if ((iVar9 == 0) || (local_4c8 = *(double *)(local_520 + 8), 0.00000000 < local_4c8)) {
          iVar9 = SPropRecValList_search_record(local_528,&local_520,"ScaleBBoxWidth");
          dVar52 = local_4c0;
          dVar53 = local_4b8;
          if (iVar9 == 0) {
LAB_00114c1a:
            local_4b8 = dVar53;
            local_4c0 = dVar52;
            iVar9 = SPropRecValList_search_record(local_528,&local_520,"ForceSpacing");
            if (iVar9 == 0) {
              local_5e8 = 0.00000000;
LAB_00114e90:
              iVar9 = SPropRecValList_search_record(local_528,&local_520,"DoubleStrike");
              if (iVar9 != 0) {
                __s = *(char **)(local_520 + 8);
                if ((*__s == '\0') || (bVar24 = *__s + 0xb4, 0x2d < bVar24)) goto LAB_00114c54;
                uVar33 = 1 << (bVar24 & 0x3f);
                if ((uVar33 & 0x400000004) == 0) {
                  if ((uVar33 & 0x200000002000) == 0) {
                    if ((uVar33 & 0x300000003) == 0) goto LAB_00114c54;
                    local_4d8 = local_4d8 | 3;
                  }
                  else {
                    local_4d8 = local_4d8 | 1;
                  }
                }
                else {
                  local_4d8 = local_4d8 & 0xfffffffffffffff4;
                }
                if (((__s[1] != 0) && (uVar10 = (uint)(byte)__s[1] - 0x42, (byte)uVar10 < 0x38)) &&
                   ((0x80400100804001U >> ((ulong)uVar10 & 0x1f) & 1) != 0)) {
                  local_4d8 = local_4d8 | 8;
                }
                pcVar16 = strchr(__s,0x3b);
                if ((pcVar16 != (char *)0x0) || (pcVar16 = strchr(__s,0x2c), pcVar16 != (char *)0x0)
                   ) {
                  __nptr = (ushort *)(pcVar16 + 1);
                  if ((pcVar16[1] != '\0') &&
                     ((lVar17 = strtol((char *)__nptr,(char **)&local_518,10), local_518 != __nptr
                      && ((int)lVar17 <= iVar11)))) {
                    local_4d8 = local_4d8 & 0xfffffffffffffffd;
                  }
                  __s = strchr((char *)__nptr,0x2c);
                  if ((__s != (char *)0x0) && (__s[1] != '\0')) {
                    lVar17 = strtol(__s + 1,(char **)&local_518,10);
                    if ((local_518 != (ushort *)(__s + 1)) &&
                       (((int)lVar17 <= iVar11 && ((local_4d8 & 1) != 0)))) {
                      local_4b0 = local_4b0 & 0xffffffff00000000 |
                                  (ulong)(uint)((int)local_4b0 + iVar11 / (int)lVar17);
                    }
                  }
                }
              }
              iVar11 = SPropRecValList_search_record(local_528,&local_520,"VeryLazyMetrics");
              if (iVar11 != 0) {
                if (*(int *)(local_520 + 8) == -1) {
                  local_4d8 = local_4d8 | 0x30;
                }
                else {
                  local_4d8 = local_4d8 & 0xffffffffffffffef | 0x20;
                }
              }
              iVar11 = SPropRecValList_search_record(local_528,&local_520,"EmbeddedBitmap");
              if (iVar11 == 0) {
LAB_00115050:
                local_5e0._0_4_ = 0;
                iVar11 = -1;
              }
              else {
                __s = *(char **)(local_520 + 8);
                __nmemb = strlen(__s);
                if ((__nmemb != 1) || (bVar24 = *__s + 0xb2, 0x2b < bVar24)) goto LAB_00114c54;
                uVar33 = 1 << (bVar24 & 0x3f);
                if ((uVar33 & 0x80000000800) == 0) {
                  if ((uVar33 & 0x100000001) == 0) {
                    if ((uVar33 & 0x8000000080) != 0) goto LAB_00115050;
                    goto LAB_00114c54;
                  }
                  local_5e0._0_4_ = 0;
                  iVar11 = 0;
                }
                else {
                  local_5e0._0_4_ = -1;
                  iVar11 = -1;
                }
              }
              if (((local_4d8 & 0x10) != 0) &&
                 (iVar9 = SPropRecValList_search_record
                                    (local_528,&local_520,"VeryLazyBitmapWidthScale"), iVar9 != 0))
              {
                uVar70 = *(undefined8 *)(local_520 + 8);
                fwrite("Warning: `bs\' option is not required in X-TT version 2.\n",1,0x38,stderr);
                local_4a0 = uVar70;
              }
              iVar9 = SPropRecValList_search_record(local_528,&local_520,0x1304b4);
              if (iVar9 == 0) {
                local_600 = (char *)0x0;
              }
              else {
                local_600 = strdup(*(char **)(local_520 + 8));
                if (local_600 == (char *)0x0) {
                  bVar49 = true;
                  ppcVar36 = (char **)0x0;
                  uVar33 = 0x50;
                  goto LAB_00114c68;
                }
              }
              local_52e = 0;
              local_518 = (ushort *)CONCAT62(local_518._2_6_,0xff);
              local_52c = 0xff;
              local_52a = 0;
              iVar9 = SPropRecValList_search_record
                                (local_528,&local_520,"ForceConstantSpacingCodeRange");
              if ((iVar9 != 0) &&
                 (iVar9 = FUN_00110ee0(1,&local_52e,&local_52a,&local_52c,&local_518), iVar9 == 1))
              {
                uVar10 = (uint)local_52a << 8 | (uint)local_52e;
                uVar32 = (uint)(ushort)local_518 << 8 | (uint)local_52c;
                local_498 = CONCAT44(uVar32,uVar10);
                uVar33 = local_4d8 | 0x400;
                local_4d8 = local_4d8 & 0xfffffffffffffbff;
                if (uVar32 < uVar10) {
                  local_4d8 = uVar33;
                }
              }
              local_52e = 0xff;
              local_52c = 0;
              local_530 = 0;
              local_52a = 0xff;
              iVar9 = SPropRecValList_search_record
                                (local_528,&local_520,"ForceConstantSpacingMetrics");
              if ((iVar9 != 0) && (__nptr = *(ushort **)(local_520 + 8), __nptr != (ushort *)0x0)) {
                puVar19 = (ushort *)strchr((char *)__nptr,0x3b);
                puVar27 = (ushort *)strchr((char *)__nptr,0x2c);
                puVar20 = (ushort *)strchr((char *)__nptr,0x2e);
                bVar49 = puVar20 != (ushort *)0x0 && puVar19 != (ushort *)0x0;
                if ((puVar27 == (ushort *)0x0) || (puVar19 == (ushort *)0x0)) {
LAB_001151b1:
                  if (bVar49) {
LAB_0011601e:
                    if (puVar20 <= puVar19) goto LAB_00115ef4;
                    bVar49 = true;
                  }
                  else {
                    bVar49 = puVar20 == (ushort *)0x0;
                  }
                  if ((!(bool)(__nptr != puVar19 & bVar49)) || (puVar27 != (ushort *)0x0))
                  goto LAB_00115ef4;
                  iVar9 = FUN_00110ee0(1,&local_530,&local_52c,&local_52e,&local_52a);
                  if (iVar9 == 1) {
                    local_488 = local_488 & 0xffffffff |
                                (ulong)((uint)local_52c << 8 | (uint)local_530) << 0x20;
                  }
                }
                else {
                  if (puVar19 < puVar27) {
                    puVar27 = (ushort *)0x0;
                    goto LAB_001151b1;
                  }
                  if (bVar49) goto LAB_0011601e;
LAB_00115ef4:
                  dVar52 = strtod((char *)__nptr,(char **)&local_518);
                  if (__nptr != local_518) {
                    local_480 = dVar52;
                  }
                  if (*(char *)local_518 == ',') {
                    __nptr = (ushort *)((long)local_518 + 1);
                    dVar52 = strtod((char *)__nptr,(char **)&local_518);
                    if (__nptr != local_518) {
                      local_4d8 = local_4d8 | 0x100;
                      local_470 = dVar52;
                    }
                    if (*(char *)local_518 == ',') {
                      __nptr = (ushort *)((long)local_518 + 1);
                      dVar52 = strtod((char *)__nptr,(char **)&local_518);
                      if (__nptr != local_518) {
                        local_4d8 = local_4d8 | 0x200;
                        local_468 = dVar52;
                      }
                      if ((*(char *)local_518 == ',') &&
                         (__nptr = (ushort *)((long)local_518 + 1),
                         dVar52 = strtod((char *)__nptr,(char **)&local_518), __nptr != local_518))
                      {
                        local_478 = dVar52;
                      }
                    }
                  }
                }
                if (puVar19 != (ushort *)0x0) {
                  uVar33 = strtol((char *)(ushort *)((long)puVar19 + 1),(char **)&local_518,10);
                  if ((ushort *)((long)puVar19 + 1) != local_518) {
                    local_490 = local_490 & 0xffffffff00000000 | uVar33 & 0xffffffff;
                  }
                  if (*(char *)local_518 == ',') {
                    __nptr = (ushort *)((long)local_518 + 1);
                    lVar17 = strtol((char *)__nptr,(char **)&local_518,10);
                    if (__nptr != local_518) {
                      local_490 = local_490 & 0xffffffff | lVar17 << 0x20;
                    }
                    if ((*(char *)local_518 == ',') &&
                       (__nptr = (ushort *)((long)local_518 + 1),
                       uVar33 = strtol((char *)__nptr,(char **)&local_518,10), __nptr != local_518))
                    {
                      local_488 = local_488 & 0xffffffff00000000 | uVar33 & 0xffffffff;
                    }
                  }
                }
              }
              iVar9 = SPropRecValList_search_record(local_528,&local_520,"FontProperties");
              local_5bc = -1;
              if (iVar9 != 0) {
                local_5bc = *(int *)(local_520 + 8);
              }
              local_488 = local_488 & 0xffffffff00000000 |
                          (ulong)(uint)((int)local_488 + local_4a8._4_4_);
              local_478 = local_478 * local_4b8;
              local_490 = local_490 & 0xffffffff |
                          (ulong)(uint)(local_490._4_4_ + (int)local_4a8) << 0x20;
              uVar10 = (uint)(iVar8 == 0) * 2;
              uVar32 = uVar10 | 8;
              if (iVar11 != 0) {
                uVar32 = uVar10;
              }
              local_480 = local_480 * local_4c0 * local_4c8;
              local_4c0 = local_4c0 * local_4c8;
              uVar10 = uVar32;
              if ((local_4d0 != 0.00000000) && (uVar10 = uVar32 | 8, (uint)local_5e0 != 0)) {
                uVar10 = uVar32;
              }
              if (DAT_0033cc80 == 0) {
                uVar32 = FT_Init_FreeType(local_4c0,local_480,local_4c8,&ftypeLibrary);
                if (uVar32 == 0) {
                  DAT_0033cc80 = 1;
                  goto LAB_00115373;
                }
                bVar49 = true;
                ppcVar36 = (char **)0x0;
                uVar33 = 0x50;
                ErrorF("FreeType: error initializing ftypeEngine: %d\n",(ulong)uVar32);
                goto LAB_00115560;
              }
LAB_00115373:
              bVar24 = *(byte *)__dest;
              uVar32 = 0;
              __s_00 = __dest;
              if (bVar24 == 0) {
                uVar32 = 0;
              }
              else {
                do {
                  uVar32 = (uVar32 << 5 | uVar32 >> 0x1b) + (uint)bVar24;
                  bVar24 = *(byte *)(uint *)((long)__s_00 + 1);
                  __s_00 = (uint *)((long)__s_00 + 1);
                } while (bVar24 != 0);
                uVar32 = uVar32 & 0x1f;
              }
              lVar17 = (long)(int)uVar32;
              ppcVar36 = (char **)(&DAT_0033cb80)[lVar17];
              while (ppcVar36 != (char **)0x0) {
                iVar11 = strcmp(*ppcVar36,(char *)__dest);
                if (iVar11 == 0) goto LAB_001153dd;
                ppcVar36 = (char **)ppcVar36[5];
              }
              __ptr = (char **)calloc(1,0x30);
              ppcVar36 = __ptr;
              if (__ptr == (char **)0x0) goto LAB_00115680;
              __s = strdup((char *)__dest);
              *__ptr = __s;
              if (__s == (char *)0x0) {
                bVar49 = true;
                ppcVar36 = (char **)0x0;
                free(__ptr);
                uVar33 = 0x50;
              }
              else {
                uVar32 = FT_New_Face(ftypeLibrary,local_630,(long)local_5f8._0_4_,__ptr + 1);
                if (uVar32 == 0) {
                  __s = __ptr[1];
                  uVar33 = *(ulong *)(__s + 0x10);
                  *(uint *)(__ptr + 2) = ~(uint)uVar33 & 1;
                  if ((uVar33 & 1) != 0) {
                    lVar35 = FT_Get_Sfnt_Table(__s,1);
                    if ((lVar35 != 0) && (*(short *)(lVar35 + 0xc) == 0)) {
                      *(undefined4 *)(__ptr + 2) = 1;
                    }
                    __s = __ptr[1];
                  }
                  uVar7 = FUN_00110d30(__s,0x68686561,0x22);
                  *(uint *)((long)__ptr + 0x14) = (uint)uVar7;
                  __s = (char *)(&DAT_0033cb80)[lVar17];
                  *(char ***)(&DAT_0033cb80 + lVar17) = __ptr;
                  __ptr[5] = __s;
LAB_001153dd:
                  dVar52 = hypot(*(double *)(param_2 + 0x38),*(double *)(param_2 + 0x40));
                  if ((((long)((*(double *)(param_2 + 0x28) / dVar52) * 65536.00000000) != 0x10000
                       || (long)((*(double *)(param_2 + 0x30) / dVar52) * 65536.00000000) != 0) ||
                       (long)((*(double *)(param_2 + 0x38) / dVar52) * 65536.00000000) != 0) ||
                     (iVar11 = -1,
                     (long)((*(double *)(param_2 + 0x40) / dVar52) * 65536.00000000) != 0x10000)) {
                    uVar10 = uVar10 | 8;
                    iVar11 = 0;
                  }
                  if (*(int *)(ppcVar36 + 2) == 0) {
                    *(double *)(param_2 + 0x38) =
                         *(double *)(param_2 + 0x28) * local_4d0 + *(double *)(param_2 + 0x38);
                    *(double *)(param_2 + 0x18) =
                         local_4d0 * *(double *)(param_2 + 8) + *(double *)(param_2 + 0x18);
                    *(double *)(param_2 + 0x40) =
                         local_4d0 * *(double *)(param_2 + 0x30) + *(double *)(param_2 + 0x40);
                    *(double *)(param_2 + 0x20) =
                         local_4d0 * *(double *)(param_2 + 0x10) + *(double *)(param_2 + 0x20);
                  }
                  else {
                    uVar10 = uVar10 & 0xfffffff7;
                  }
                  dVar53 = hypot(*(double *)(param_2 + 8),*(double *)(param_2 + 0x10));
                  uVar70 = 0x1154c8;
                  dVar54 = hypot(*(double *)(param_2 + 0x18),*(double *)(param_2 + 0x20));
                  dVar52 = dVar54;
                  if (dVar54 < dVar53) {
                    dVar52 = dVar53;
                  }
                  bVar49 = dVar52 < 1.00000000;
                  uVar33 = 0x53;
                  if (!bVar49) {
                    uVar10 = FUN_001118d0(0x3ff0000000000000,dVar54,dVar53,pplVar15,param_4,ppcVar36
                                          ,__dest,param_2,param_6,param_5,(ulong)uVar10,&local_4d8,
                                          local_600,local_5e8,uVar70);
                    uVar33 = (ulong)uVar10;
                    if (uVar10 == 0x55) {
                      __s = ppcVar36[1];
                      plVar4 = *pplVar15;
                      local_5f8 = 0.00048828;
                      if (*(ushort *)(__s + 0x88) != 0) {
                        local_5f8 = 1.00000000 / (double)(uint)*(ushort *)(__s + 0x88);
                      }
                      iVar8 = *(int *)(plVar4 + 0xb);
                      __nptr = (ushort *)plVar4[0xf];
                      if (__nptr == (ushort *)0x0) {
                        dVar52 = (double)plVar4[0x1c];
                        if (*(int *)(ppcVar36 + 2) == 0) {
                          local_5d0 = *(double *)(param_2 + 8);
                          dVar57 = *(double *)(param_2 + 0x10);
                          dVar59 = *(double *)(param_2 + 0x20);
                          dVar60 = (double)(int)*(short *)(__s + 0x90);
                          auVar63 = maxsd(ZEXT816((ulong)(double)(int)*(short *)(__s + 0x8a)),
                                          ZEXT816((ulong)(double)*(long *)(__s + 0x80)));
                          dVar53 = *(double *)(param_2 + 0x18);
                          dVar62 = SUB168(auVar63,0);
                          auVar63 = maxsd(ZEXT816((ulong)(double)-(int)*(short *)(__s + 0x8c)),
                                          ZEXT816((ulong)(double)-*(long *)(__s + 0x70)));
                          auVar61 = maxsd(ZEXT816((ulong)dVar60),
                                          ZEXT816((ulong)(double)*(long *)(__s + 0x78)));
                          dVar58 = (double)((ulong)SUB168(auVar63,0) ^ 0x8000000000000000);
                          dVar55 = (double)*(long *)(__s + 0x68) * dVar52 * dVar57;
                          uVar70 = SUB168(auVar61 >> 0x40,0);
                          dVar64 = dVar53 * dVar58;
                          dVar65 = (double)*(long *)(__s + 0x68) * dVar52 * local_5d0;
                          dVar58 = dVar58 * dVar59;
                          dVar68 = SUB168(auVar61,0) * dVar52;
                          dVar66 = dVar65 + dVar62 * dVar53;
                          dVar69 = dVar55 + dVar58;
                          auVar61 = ZEXT816((ulong)(dVar65 + dVar64));
                          dVar55 = dVar55 + dVar62 * dVar59;
                          auVar67 = maxsd(ZEXT816((ulong)dVar66),auVar61);
                          auVar61 = minsd(ZEXT816((ulong)dVar66),auVar61);
                          dVar65 = dVar55;
                          if (dVar69 <= dVar55) {
                            dVar65 = dVar69;
                          }
                          auVar56 = maxsd(ZEXT816((ulong)dVar55),ZEXT816((ulong)dVar69));
                          dVar55 = dVar68 * dVar57;
                          dVar68 = dVar68 * local_5d0;
                          dVar58 = dVar58 + dVar55;
                          dVar64 = dVar64 + dVar68;
                          auVar67 = maxsd(ZEXT816((ulong)dVar64),auVar67);
                          auVar61 = minsd(ZEXT816((ulong)dVar64),auVar61);
                          if (dVar58 < dVar65) {
                            dVar65 = dVar58;
                          }
                          dVar68 = dVar68 + dVar62 * dVar53;
                          auVar56 = maxsd(CONCAT88(SUB168(auVar63 >> 0x40,0),dVar58),auVar56);
                          dVar55 = dVar55 + dVar62 * dVar59;
                          auVar67 = maxsd(CONCAT88(uVar70,dVar68),auVar67);
                          auVar61 = minsd(CONCAT88(uVar70,dVar68),auVar61);
                          if (dVar55 < dVar65) {
                            dVar65 = dVar55;
                          }
                          auVar56 = maxsd(ZEXT816((ulong)dVar55),auVar56);
                          dVar55 = floor(SUB168(auVar61,0) * local_5f8 + 0.50000000);
                          dVar58 = floor(SUB168(auVar67,0) * local_5f8 + 0.50000000);
                          sVar39 = (short)(int)dVar58;
                          dVar65 = ceil(local_5f8 * (double)((ulong)dVar65 ^ 0x8000000000000000) -
                                        0.50000000);
                          local_5c8 = (ushort)(int)dVar65;
                          dVar58 = floor(SUB168(auVar56,0) * local_5f8 + 0.50000000);
                          iVar9 = (int)dVar58;
                          local_5b8._0_2_ = (ushort)iVar9;
                          if (*(short *)(__s + 0x92) < 1) {
                            dVar62 = dVar62 + SUB168(auVar63,0);
                          }
                          else {
                            dVar62 = (double)(int)*(short *)(__s + 0x92);
                          }
                          if (dVar57 == 0.00000000) {
                            dVar53 = 0.00000000;
                            local_5b0 = dVar52 * dVar60 * local_5d0;
                          }
                          else {
                            if (dVar59 == 0.00000000) {
                              local_5d0 = 0.00000000;
                              local_5b0 = (double)plVar4[0x1d] * dVar62 * dVar53;
                            }
                            else {
                              dVar58 = local_5d0 * dVar59;
                              local_5d0 = (double)((ulong)(local_5d0 - (dVar53 * dVar57) / dVar59) &
                                                  0x7fffffffffffffff);
                              dVar53 = dVar53 - dVar58 / dVar57;
                              local_5b0 = dVar52 * dVar60 * local_5d0;
                              dVar52 = (double)plVar4[0x1d] * dVar62 * dVar53;
                              if (local_5b0 <= dVar52) {
                                dVar53 = 0.00000000;
                              }
                              else {
                                local_5d0 = 0.00000000;
                                local_5b0 = dVar52;
                              }
                            }
                          }
                          local_598 = local_5b0 * local_5f8;
                          dVar52 = floor(local_598 + 0.50000000);
                          iVar14 = (int)dVar52;
                          uVar38 = plVar4[0x19];
                          iVar13 = iVar14;
                          if ((uVar38 & 8) != 0) {
                            iVar13 = iVar14 + *(int *)(plVar4 + 0x1e);
                          }
                          iVar13 = iVar13 + *(int *)((long)plVar4 + 0xf4);
                          local_5d8 = (ushort)iVar13;
                          dVar57 = (double)iVar13 / (double)iVar14;
                          if (local_5d0 == 0.00000000) {
                            dVar59 = (double)plVar4[0x25] * dVar62 * dVar53;
                            local_5e8 = dVar62 * (double)plVar4[0x27] * dVar53;
                            dVar52 = (double)plVar4[0x26] * dVar62 * dVar53;
                          }
                          else {
                            dVar59 = (double)plVar4[0x24] * dVar60 * local_5d0;
                            dVar52 = (double)plVar4[0x26] * dVar60 * local_5d0;
                            local_5e8 = dVar60 * (double)plVar4[0x27] * local_5d0;
                          }
                          dVar58 = floor(dVar59 * local_5f8 + 0.50000000);
                          iVar14 = (int)dVar58;
                          iVar13 = iVar14;
                          if ((uVar38 & 8) != 0) {
                            iVar13 = iVar14 + *(int *)(plVar4 + 0x1e);
                          }
                          iVar3 = *(int *)(plVar4 + 0x22);
                          local_5a0 = (undefined2)(iVar14 + iVar3);
                          sVar37 = (short)(int)dVar55;
                          if ((uVar38 & 0x100) != 0) {
                            dVar52 = floor(dVar52 * local_5f8 + 0.50000000);
                            sVar37 = (short)(int)dVar52;
                          }
                          local_590 = sVar39;
                          if ((uVar38 & 0x200) != 0) {
                            dVar52 = floor(local_5e8 * local_5f8 + 0.50000000);
                            local_590 = (short)(int)dVar52;
                          }
                          if ((iVar11 == -1) &&
                             (dVar52 = (double)plVar4[0x1a], dVar52 != 0.00000000)) {
                            dVar65 = (double)((int)dVar65 + iVar9);
                            if (dVar52 <= 0.00000000) {
                              iVar29 = (int)(0.50000000 - dVar52 * dVar65);
                              iVar11 = (int)(((double)iVar29 * (double)iVar9) / dVar65 + 0.50000000)
                              ;
                              *(int *)((long)plVar4 + 0x14c) = iVar29 - iVar11;
                              *(int *)(plVar4 + 0x29) = -iVar11;
                            }
                            else {
                              iVar11 = (int)(dVar52 * dVar65 + 0.50000000);
                              iVar9 = (int)(((double)iVar11 * (double)iVar9) / dVar65 + 0.50000000);
                              *(int *)((long)plVar4 + 0x14c) = iVar9;
                              *(int *)(plVar4 + 0x29) = iVar9 - iVar11;
                            }
                          }
                          local_5e0._0_2_ =
                               (short)(int)dVar55 + (short)*(undefined4 *)(plVar4 + 0x1f);
                          if ((uVar38 & 1) != 0) {
                            sVar39 = sVar39 + (short)*(undefined4 *)(plVar4 + 0x1e);
                            local_590 = local_590 + (short)*(undefined4 *)(plVar4 + 0x1e);
                          }
                          local_5e8._0_2_ = sVar39 + (short)*(undefined4 *)((long)plVar4 + 0xfc);
                          local_590 = local_590 + (short)*(undefined4 *)(plVar4 + 0x23);
                          local_5a8 = sVar37 + (short)*(undefined4 *)((long)plVar4 + 0x114);
                          dVar52 = floor(local_5b0 * 10.00000000 * local_5f8 * dVar57 + 0.50000000);
                          dVar57 = dVar57 * local_598;
                          dVar65 = floor((dVar57 * 1000.00000000) / dVar54 + 0.50000000);
                          local_5b0._0_2_ = (ushort)(long)dVar65;
                          dVar57 = floor((dVar57 * 10.00000000 * 1000.00000000) / dVar54 +
                                         0.50000000);
                          local_568 = (long)dVar57;
                          dVar57 = floor((dVar59 * local_5f8 *
                                          ((double)(iVar14 + iVar3) / (double)iVar13) *
                                         1000.00000000) / dVar54 + 0.50000000);
                          local_618 = (undefined2)(long)dVar57;
                        }
                        else {
                          lVar17 = plVar4[1];
                          dVar53 = (double)*(long *)(lVar17 + 0x48);
                          dVar57 = floor(dVar53 * dVar52 * 0.01562500 + 0.50000000);
                          uVar7 = (ushort)(int)dVar57;
                          iVar11 = -(int)(*(long *)(lVar17 + 0x38) / 0x40);
                          local_5c8 = (ushort)iVar11;
                          lVar17 = *(long *)(lVar17 + 0x30) / 0x40;
                          local_5b8._0_2_ = (ushort)lVar17;
                          dVar57 = floor(dVar53 * (double)plVar4[0x24] * 0.01562500 + 0.50000000);
                          local_5a0 = (undefined2)(int)dVar57;
                          if (*(int *)(param_2 + 0x58) == 0) {
                            dVar52 = floor(dVar53 * 10.00000000 * dVar52 * 0.01562500 + 0.50000000);
                          }
                          else {
                            dVar52 = floor((double)*(int *)(param_2 + 0x58) * dVar52 + 0.50000000);
                          }
                          dVar57 = floor(dVar53 * 0.01562500 + 0.50000000);
                          sVar39 = 0;
                          uVar38 = plVar4[0x19];
                          local_598 = (double)(int)dVar57;
                          local_5d0 = *(double *)(param_2 + 8);
                          if ((uVar38 & 0x100) != 0) {
                            dVar57 = floor(dVar53 * (double)plVar4[0x26] * 0.01562500 + 0.50000000);
                            sVar39 = (short)(int)dVar57;
                          }
                          uVar26 = uVar7;
                          if ((uVar38 & 0x200) != 0) {
                            dVar53 = floor(dVar53 * (double)plVar4[0x27] * 0.01562500 + 0.50000000);
                            uVar26 = (ushort)(int)dVar53;
                          }
                          dVar53 = (double)plVar4[0x1a];
                          if (dVar53 != 0.00000000) {
                            local_5e0._0_4_ = (uint)lVar17;
                            dVar57 = (double)(iVar11 + (uint)local_5e0);
                            if (dVar53 <= 0.00000000) {
                              iVar9 = (int)(0.50000000 - dVar53 * dVar57);
                              iVar11 = (int)(((double)iVar9 * (double)(uint)local_5e0) / dVar57 +
                                            0.50000000);
                              *(int *)((long)plVar4 + 0x14c) = iVar9 - iVar11;
                              *(int *)(plVar4 + 0x29) = -iVar11;
                            }
                            else {
                              iVar11 = (int)(dVar53 * dVar57 + 0.50000000);
                              iVar9 = (int)(((double)iVar11 * (double)(uint)local_5e0) / dVar57 +
                                           0.50000000);
                              *(int *)((long)plVar4 + 0x14c) = iVar9;
                              *(int *)(plVar4 + 0x29) = iVar9 - iVar11;
                            }
                          }
                          local_5d8 = uVar7;
                          if ((uVar38 & 8) != 0) {
                            local_5d8 = uVar7 + (short)*(undefined4 *)(plVar4 + 0x1e);
                          }
                          local_5e0._0_2_ =
                               (short)*(undefined4 *)(plVar4 + 0x1f) +
                               (short)*(undefined4 *)(plVar4 + 0x29);
                          local_590 = (short)*(undefined4 *)((long)plVar4 + 0x14c);
                          if ((uVar38 & 1) != 0) {
                            uVar7 = uVar7 + (short)*(undefined4 *)(plVar4 + 0x1e);
                            uVar26 = uVar26 + (short)*(undefined4 *)(plVar4 + 0x1e);
                          }
                          local_5e8._0_2_ =
                               (short)*(undefined4 *)((long)plVar4 + 0xfc) + uVar7 + local_590;
                          dVar53 = 0.00000000;
                          local_618 = 0;
                          local_568 = 0;
                          local_5b0._0_2_ = 0;
                          local_590 = uVar26 + (short)*(undefined4 *)(plVar4 + 0x23) + local_590;
                          local_5a8 = sVar39 + (short)*(undefined4 *)((long)plVar4 + 0x114) +
                                      (short)*(undefined4 *)(plVar4 + 0x29);
                        }
                        iVar11 = (int)dVar52;
                        *(double *)(plVar4 + 0xc) = dVar54;
                        *(double *)(plVar4 + 0x12) = local_598;
                        if (local_5d0 == 0.00000000) {
                          plVar4[0xd] = 0;
                          *(double *)(plVar4 + 0xe) = dVar53 / dVar54;
                        }
                        else {
                          plVar4[0xe] = 0;
                          *(double *)(plVar4 + 0xd) = local_5d0 / dVar54;
                        }
                        __ptr_00 = malloc(0xc);
                        *(void **)(plVar4 + 0xf) = __ptr_00;
                        if (__ptr_00 != (void *)0x0) {
                          *(ushort *)((long)__ptr_00 + 6) = (ushort)local_5b8;
                          *(ushort *)(plVar4[0xf] + 8) = local_5c8;
                          *(ushort *)(plVar4[0xf] + 10) = local_5b0._0_2_;
                          *(ushort *)(plVar4[0xf] + 2) = local_5e8._0_2_;
                          *(ushort *)plVar4[0xf] = (ushort)local_5e0;
                          *(ushort *)(plVar4[0xf] + 4) = local_5d8;
                          *(int *)(plVar4 + 0x10) = iVar11;
                          plVar4[0x11] = local_568;
                          iVar9 = FUN_001143e0((ulong)*(uint *)(pplVar15 + 5),0,&local_520);
                          if (((iVar9 == 0x55) && (local_520 != 0)) ||
                             ((iVar9 = FUN_001143e0((ulong)*(uint *)(pplVar15 + 5),4,&local_520),
                              iVar9 == 0x55 && (local_520 != 0)))) {
                            if (*(int *)((long)plVar4 + 0x10c) < 0) goto LAB_00115a90;
                            local_518 = (ushort *)0x0;
                            uVar10 = *(uint *)((long)plVar4 + 0x11c);
                            if (plVar4[0x13] == 0) {
                              __ptr_00 = malloc(0xc);
                              *(void **)(plVar4 + 0x13) = __ptr_00;
                              if (__ptr_00 == (void *)0x0) goto LAB_00115680;
                            }
                            if ((int)uVar10 < 0) {
LAB_001174da:
                              __nptr = (ushort *)plVar4[0x13];
LAB_001174e1:
                              *__nptr = local_5a8;
                              *(short *)(plVar4[0x13] + 2) = local_590;
                              *(undefined2 *)(plVar4[0x13] + 4) = local_5a0;
                              *(ushort *)(plVar4[0x13] + 6) = (ushort)local_5b8;
                              *(ushort *)(plVar4[0x13] + 8) = local_5c8;
                              *(undefined2 *)(plVar4[0x13] + 10) = local_618;
                            }
                            else {
                              iVar9 = FUN_00114170((ulong)uVar10,0,&local_518);
                              if (iVar9 != 0x55) {
                                local_518 = (ushort *)0x0;
                                goto LAB_001174da;
                              }
                              __nptr = (ushort *)plVar4[0x13];
                              if ((local_518 == (ushort *)0x0) || ((short)local_518[2] < 1))
                              goto LAB_001174e1;
                              *__nptr = *local_518;
                              *(ushort *)(plVar4[0x13] + 2) = local_518[1];
                              *(ushort *)(plVar4[0x13] + 4) = local_518[2];
                              *(ushort *)(plVar4[0x13] + 6) = local_518[3];
                              *(ushort *)(plVar4[0x13] + 8) = local_518[4];
                              *(ushort *)(plVar4[0x13] + 10) = local_518[5];
                            }
                            iVar9 = FUN_001143e0((ulong)*(uint *)(pplVar15 + 5),8,&local_520);
                            if (((iVar9 == 0x55) && (local_520 != 0)) ||
                               ((iVar9 = FUN_001143e0((ulong)*(uint *)(pplVar15 + 5),0xc,&local_520)
                                , iVar9 == 0x55 && (local_520 != 0)))) goto LAB_00115a90;
                          }
                        }
                      }
                      else {
                        local_5d8 = __nptr[2];
                        local_5b8._0_2_ = __nptr[3];
                        local_5c8 = __nptr[4];
                        local_5b0._0_2_ = __nptr[5];
                        local_5e8._0_2_ = __nptr[1];
                        local_5e0._0_2_ = *__nptr;
                        iVar11 = *(int *)(plVar4 + 0x10);
                        local_568._0_4_ = (int)plVar4[0x11];
LAB_00115a90:
                        if (iVar8 == 2) {
                          *(int *)(param_2 + 0x58) = iVar11;
                          if (param_4 == (ushort *)0x0) goto LAB_001160e6;
                          param_4[9] = local_5e8._0_2_;
                          param_4[10] = local_5d8;
                          param_4[8] = (ushort)local_5e0;
                          param_4[0xc] = local_5c8;
                          local_5f8._0_2_ = local_5c8;
                          param_4[0xb] = (ushort)local_5b8;
                          local_5f0 = (ushort)local_5b8;
                          param_4[0xd] = local_5b0._0_2_;
                          *(undefined8 *)(param_4 + 0xe) = *(undefined8 *)(param_4 + 8);
                          *(undefined4 *)(param_4 + 0x12) = *(undefined4 *)(param_4 + 0xc);
                        }
                        else {
                          if (param_4 == (ushort *)0x0) {
LAB_001160e6:
                            if (param_3 != 0) {
                              *(long ***)(param_3 + 0x98) = pplVar15;
                            }
                            goto LAB_00115560;
                          }
                          plVar4 = *pplVar15;
                          local_518 = (ushort *)0x0;
                          uVar38 = (ulong)param_4[1];
                          uVar10 = *(uint *)(plVar4 + 0x19);
                          iVar11 = ((uint)param_4[1] + 1) - (uint)*param_4;
                          uVar7 = param_4[2];
                          uVar33 = (ulong)uVar7;
                          if (param_4[3] < uVar7) {
                            uVar26 = 0x8001;
                            uVar42 = 0x7fff;
                            local_5f8._0_2_ = 0x8001;
                            local_5f0 = 0x8001;
                            uVar47 = 0x7fff;
                            uVar46 = 0x8001;
                            local_5e8._0_2_ = 0x8001;
                            uVar45 = 0x7fff;
                            local_5d8 = 0x8001;
                            local_5c8 = 0x7fff;
                            local_608._0_2_ = 0x7fff;
                            uVar7 = 0x7fff;
                            local_5e0._0_2_ = 0x8001;
LAB_00117bd9:
                            *(undefined4 *)(param_2 + 0x58) = 0;
                          }
                          else {
                            uVar34 = (ulong)uVar7 << 8;
                            local_5f8._0_2_ = 0x8001;
                            local_5f0 = 0x8001;
                            local_5e8._0_2_ = 0x8001;
                            local_5d8 = 0x8001;
                            local_608._0_2_ = 0x7fff;
                            uVar26 = 0x8001;
                            uVar7 = 0x7fff;
                            uVar47 = 0x7fff;
                            local_5e0 = 0xffff8001;
                            local_580 = 0;
                            uVar32 = 0x7fff;
                            local_588 = 0;
                            iVar8 = 0;
                            uVar46 = 0x8001;
                            bVar50 = false;
                            local_5c8 = 0x7fff;
                            uVar42 = 0x7fff;
                            do {
                              local_608 = (uint)uVar34;
                              if ((local_518 == (ushort *)0x0) || (!bVar50)) {
LAB_00115c9e:
                                uVar34 = (ulong)*param_4;
                                if ((uint)*param_4 <= (uint)uVar38) {
                                  uVar48 = (ulong)uVar32;
                                  uVar45 = local_5f8._0_2_;
                                  uVar2 = local_5f0;
                                  uVar25 = local_5d8;
                                  do {
                                    uVar32 = local_608 | (uint)uVar34;
                                    local_5f0 = uVar2;
                                    local_5d8 = uVar25;
                                    local_5f8._0_2_ = uVar45;
                                    bVar6 = bVar50;
                                    if ((uVar10 & 0x400) == 0) {
                                      if (uVar32 <= *(uint *)((long)plVar4 + 0x10c))
                                      goto LAB_00115cd0;
LAB_00115e20:
                                      uVar70 = 0;
LAB_00115e22:
                                      iVar9 = (int)uVar70;
                                      local_518 = (ushort *)0x0;
                                      iVar13 = FUN_00114170((ulong)uVar32,uVar70,&local_518);
                                      uVar38 = (ulong)param_4[1];
                                      if (iVar13 == 0x55) goto LAB_00115ced;
                                    }
                                    else {
                                      if (*(uint *)((long)plVar4 + 0x10c) < uVar32) {
LAB_00115cd0:
                                        if (uVar32 < *(uint *)(plVar4 + 0x21)) goto LAB_00115e20;
                                      }
                                      uVar70 = 8;
                                      iVar9 = 8;
                                      if (!bVar50) goto LAB_00115e22;
LAB_00115ced:
                                      if (local_518 != (ushort *)0x0) {
                                        local_5f0 = local_518[3];
                                        if ((short)local_5f0 < (short)uVar47) {
                                          uVar47 = local_5f0;
                                        }
                                        if ((short)local_5f0 <= (short)uVar2) {
                                          local_5f0 = uVar2;
                                        }
                                        local_5f8._0_2_ = local_518[4];
                                        if ((short)local_5f8._0_2_ < (short)local_5c8) {
                                          local_5c8 = local_5f8._0_2_;
                                        }
                                        if ((short)local_5f8._0_2_ <= (short)uVar45) {
                                          local_5f8._0_2_ = uVar45;
                                        }
                                        local_5d8 = *local_518;
                                        if ((short)local_5d8 < (short)uVar7) {
                                          uVar7 = local_5d8;
                                        }
                                        if ((short)local_5d8 <= (short)uVar25) {
                                          local_5d8 = uVar25;
                                        }
                                        uVar45 = local_518[1];
                                        if ((short)uVar45 < (short)uVar48) {
                                          uVar48 = (ulong)(uint)(int)(short)uVar45;
                                        }
                                        if ((short)local_5e8._0_2_ < (short)uVar45) {
                                          local_5e8._0_2_ = uVar45;
                                        }
                                        uVar2 = local_518[2];
                                        uVar25 = local_518[5];
                                        if ((short)uVar2 < (short)(ushort)local_608) {
                                          local_608._0_2_ = uVar2;
                                        }
                                        if ((short)uVar46 < (short)uVar2) {
                                          uVar46 = uVar2;
                                        }
                                        if ((short)uVar25 < (short)uVar42) {
                                          uVar42 = uVar25;
                                        }
                                        if ((short)uVar25 <= (short)uVar26) {
                                          uVar25 = uVar26;
                                        }
                                        uVar32 = (int)(short)uVar45 - (int)(short)uVar2;
                                        if ((int)uVar32 <= (int)(uint)local_5e0) {
                                          uVar32 = (uint)local_5e0;
                                        }
                                        local_5e0 = (ulong)uVar32;
                                        uVar26 = uVar25;
                                        if (uVar2 != 0) {
                                          iVar8 = iVar8 + 1;
                                          lVar17 = (long)-(int)(short)uVar2;
                                          if (-1 < (short)uVar2) {
                                            lVar17 = (long)(short)uVar2;
                                          }
                                          local_580 = local_580 + (long)(short)uVar2;
                                          local_588 = local_588 + lVar17;
                                          bVar6 = true;
                                          if (iVar9 == 0) {
                                            bVar6 = bVar50;
                                          }
                                        }
                                      }
                                    }
                                    bVar50 = bVar6;
                                    uVar32 = (uint)uVar34 + 1;
                                    uVar34 = (ulong)uVar32;
                                    uVar45 = local_5f8._0_2_;
                                    uVar2 = local_5f0;
                                    uVar25 = local_5d8;
                                  } while ((int)uVar32 <= (int)uVar38);
                                  uVar32 = (uint)uVar48;
                                }
                              }
                              else {
                                if ((uVar10 & 0x400) == 0) {
                                  if (*(int *)(plVar4 + 0x21) < (int)local_608) goto LAB_00115bd8;
LAB_00115c96:
                                  bVar50 = false;
                                  goto LAB_00115c9e;
                                }
                                if ((int)local_608 <= *(int *)(plVar4 + 0x21)) {
LAB_00115bd8:
                                  if ((int)(*(uint *)((long)plVar4 + 0x10c) & 0xff00) <=
                                      (int)local_608) goto LAB_00115c96;
                                }
                                uVar12 = SEXT24((short)local_518[2]);
                                bVar50 = true;
                                if (local_518[2] == 0) goto LAB_00115c9e;
                                iVar8 = iVar8 + iVar11;
                                local_588 = local_588 +
                                            (int)((((int)uVar12 >> 0x1f ^ uVar12) -
                                                  ((int)uVar12 >> 0x1f)) * iVar11);
                                local_580 = local_580 + (int)(uVar12 * iVar11);
                              }
                              local_5b8 = (int)uVar33;
                              uVar33 = (ulong)(local_5b8 + 1U);
                              uVar34 = (ulong)(local_608 + 0x100);
                            } while ((int)(local_5b8 + 1U) <= (int)(uint)param_4[3]);
                            uVar45 = (ushort)uVar32;
                            if (iVar8 < 1) goto LAB_00117bd9;
                            iVar11 = (int)(long)(((double)local_588 * 10.00000000 +
                                                 (double)iVar8 * 0.50000000) / (double)iVar8);
                            if (local_580 < 0) {
                              iVar11 = -iVar11;
                            }
                            *(int *)(param_2 + 0x58) = iVar11;
                          }
                          param_4[0xd] = uVar26;
                          param_4[0xf] = uVar45;
                          param_4[9] = local_5e8._0_2_;
                          param_4[8] = local_5d8;
                          param_4[10] = uVar46;
                          param_4[0x11] = uVar47;
                          param_4[0xc] = local_5f8._0_2_;
                          param_4[0xb] = local_5f0;
                          param_4[0xe] = uVar7;
                          param_4[0x10] = (ushort)local_608;
                          param_4[0x12] = local_5c8;
                          param_4[6] = (ushort)local_5e0;
                          param_4[0x13] = uVar42;
                        }
                        puVar43 = &local_518;
                        uVar33 = 0x55;
                        *(byte *)(param_4 + 5) = *(byte *)(param_4 + 5) | 0x20;
                        param_4[0x20] = local_5f0;
                        *(undefined8 *)(param_4 + 0x14) = *(undefined8 *)(param_4 + 8);
                        param_4[0x21] = local_5f8._0_2_;
                        *(undefined4 *)(param_4 + 0x18) = *(undefined4 *)(param_4 + 0xc);
                        *(undefined8 *)(param_4 + 0x1a) = *(undefined8 *)(param_4 + 0xe);
                        *(undefined4 *)(param_4 + 0x1e) = *(undefined4 *)(param_4 + 0x12);
                        param_4[4] = 0;
                        FontComputeInfoAccelerators(param_4);
                        if (param_3 != 0) {
                          *(long ***)(param_3 + 0x98) = pplVar15;
                        }
                        uVar70 = *param_6;
                        plVar4 = *pplVar15;
                        lVar17 = *plVar4;
                        uVar10 = 0x800;
                        uVar7 = *(ushort *)(*(long *)(lVar17 + 8) + 0x88);
                        if (uVar7 != 0) {
                          uVar10 = (uint)uVar7;
                        }
                        puVar21 = (undefined8 *)FT_Get_Sfnt_Table(*(long *)(lVar17 + 8),2);
                        puVar22 = (undefined8 *)FT_Get_Sfnt_Table(*(undefined8 *)(lVar17 + 8),5);
                        iVar11 = FT_Get_PS_Font_Info(*(undefined8 *)(lVar17 + 8),puVar43);
                        puVar30 = (undefined8 *)0x0;
                        puVar31 = puVar30;
                        puVar5 = puVar30;
                        if (iVar11 != 0) {
                          puVar31 = puVar21;
                          puVar5 = puVar22;
                          puVar43 = puVar30;
                        }
                        *(undefined4 *)(param_4 + 0x22) = 0;
                        __strcpy_chk(&local_448,uVar70,0x400);
                        iVar11 = FontParseXLFDName(&local_448,param_2,3);
                        uVar32 = -(uint)(iVar11 == 0) & 0xfffffff2;
                        iVar11 = uVar32 + 0x14;
                        if (*(int *)(lVar17 + 0x10) == 0) {
                          iVar11 = uVar32 + 0x17;
                        }
                        if (local_5bc == 0) {
                          local_5b8._0_1_ = false;
                          iVar8 = 0;
                        }
                        else {
                          if (puVar31 == (undefined8 *)0x0) {
                            iVar11 = iVar11 + 2;
                          }
                          else {
                            iVar11 = iVar11 + 8;
                          }
                          local_5b8._0_1_ = puVar31 != (undefined8 *)0x0;
                          if ((puVar5 != (undefined8 *)0x0) ||
                             (iVar8 = 0, puVar43 != (undefined8 *)0x0)) {
                            iVar8 = 3;
                          }
                        }
                        __nmemb = SEXT48(iVar11 + 2 + iVar8);
                        __ptr_00 = malloc(__nmemb << 4);
                        *(void **)(param_4 + 0x24) = __ptr_00;
                        if (__ptr_00 != (void *)0x0) {
                          pvVar23 = calloc(__nmemb,1);
                          *(void **)(param_4 + 0x28) = pvVar23;
                          if (pvVar23 == (void *)0x0) {
                            bVar49 = true;
                            uVar33 = 0x50;
                            free(__ptr_00);
                            goto LAB_00115560;
                          }
                          uVar70 = MakeAtom(0x130a43,4,1);
                          **(undefined8 **)(param_4 + 0x24) = uVar70;
                          __s_00 = (uint *)&local_448;
                          do {
                            puVar40 = __s_00;
                            uVar32 = *puVar40 + 0xfefefeff & ~*puVar40;
                            uVar12 = uVar32 & 0x80808080;
                            bVar24 = (byte)uVar12;
                            __s_00 = puVar40 + 1;
                          } while (uVar12 == 0);
                          bVar50 = (uVar32 & 0x8080) == 0;
                          if (bVar50) {
                            bVar24 = (byte)(uVar12 >> 0x10);
                          }
                          if (bVar50) {
                            __s_00 = (uint *)((long)puVar40 + 6);
                          }
                          uVar70 = MakeAtom(&local_448,
                                            (long)__s_00 +
                                            ((-3 - (ulong)CARRY1(bVar24,bVar24)) - (long)&local_448)
                                            ,1);
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + 8) = uVar70;
                          **(undefined **)(param_4 + 0x28) = 1;
                          if ((local_448 != '\0') && (local_447 != '\0')) {
                            lVar44 = 0;
                            lVar35 = 1;
                            __s_00 = (uint *)&local_448;
                            do {
                              puVar41 = (uint *)((long)__s_00 + 1);
                              puVar40 = puVar41;
                              if (lVar44 == 0xd) {
                                do {
                                  __s_00 = puVar40;
                                  if (*(char *)__s_00 == '\0') break;
                                  puVar40 = (uint *)((long)__s_00 + 1);
                                } while (*(char *)__s_00 != '[');
                                uVar70 = MakeAtom("CHARSET_ENCODING",0x10,1);
                                *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35 * 0x10) = uVar70;
switchD_00116603_caseD_a:
                                uVar70 = MakeAtom(puVar41,(uint *)((long)__s_00 - (long)puVar41),1);
                                *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar35 * 0x10) =
                                     uVar70;
                                *(undefined *)(*(long *)(param_4 + 0x28) + lVar35) = 1;
                                local_5d0._0_4_ = (int)lVar35 + 1;
                                if (lVar35 == 0xe) goto LAB_00116757;
                              }
                              else {
                                __s_00 = puVar41;
                                if ((*(char *)puVar41 != '-') && (*(char *)puVar41 != '\0')) {
                                  do {
                                    __s_00 = (uint *)((long)__s_00 + 1);
                                    if (*(char *)__s_00 == '\0') break;
                                  } while (*(char *)__s_00 != '-');
                                }
                                __s = (&PTR_s_FOUNDRY_0033a800)[lVar44];
                                __nmemb = strlen(__s);
                                uVar70 = MakeAtom(__s,__nmemb & 0xffffffff,1);
                                lVar28 = lVar35 * 0x10;
                                *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar28) = uVar70;
                                switch((int)lVar44) {
                                case 6:
                                  *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar28) =
                                       (long)(int)(*(double *)(param_2 + 0x20) + 0.50000000);
                                  break;
                                case 7:
                                  *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar28) =
                                       (long)(int)(*(double *)(param_2 + 0x40) * 10.00000000 +
                                                  0.50000000);
                                  break;
                                case 8:
                                  *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar28) =
                                       (long)*(int *)(param_2 + 0x50);
                                  break;
                                case 9:
                                  *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar28) =
                                       (long)*(int *)(param_2 + 0x54);
                                  break;
                                default:
                                  goto switchD_00116603_caseD_a;
                                case 0xb:
                                  *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar28) =
                                       (long)*(int *)(param_2 + 0x58);
                                }
                              }
                              lVar44 = lVar44 + 1;
                              lVar35 = lVar35 + 1;
                            } while( true );
                          }
                          local_5d0._0_4_ = 1;
LAB_00116757:
                          uVar70 = MakeAtom("RAW_PIXEL_SIZE",0xe,1);
                          lVar35 = (long)local_5d0._0_4_ * 0x10;
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35) = uVar70;
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar35) = 1000;
                          uVar70 = MakeAtom("RAW_POINT_SIZE",0xe,1);
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x10 + lVar35) = uVar70;
                          iVar11 = *(int *)(param_2 + 0x54);
                          dVar52 = 72270.00000000 / (double)iVar11 + 0.50000000;
                          *(long *)(*(long *)(param_4 + 0x24) + 0x18 + lVar35) = (long)dVar52;
                          local_610 = local_5d0._0_4_ + 2;
                          if (*(int *)(lVar17 + 0x10) == 0) {
                            uVar70 = MakeAtom(dVar52,(double)iVar11,"RAW_AVERAGE_WIDTH",0x11,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x20 + lVar35) = uVar70;
                            *(long *)(*(long *)(param_4 + 0x24) + lVar35 + 0x28) =
                                 (long)(int)local_568;
                            local_610 = local_5d0._0_4_ + 3;
                          }
                          if (local_5bc != 0) {
                            lVar35 = (long)local_610;
                            local_610 = local_610 + 1;
                            uVar70 = MakeAtom("FONT_ASCENT",0xb,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35 * 0x10) = uVar70;
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar35 * 0x10) =
                                 (long)(short)param_4[0x20];
                          }
                          if (*(int *)(lVar17 + 0x10) == 0) {
                            lVar35 = (long)local_610;
                            local_610 = local_610 + 1;
                            uVar70 = MakeAtom("RAW_ASCENT",10,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35 * 0x10) = uVar70;
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar35 * 0x10) =
                                 (long)(((double)(int)*(short *)(*(long *)(lVar17 + 8) + 0x8a) /
                                        (double)uVar10) * 1000.00000000);
                          }
                          if (local_5bc != 0) {
                            lVar35 = (long)local_610;
                            local_610 = local_610 + 1;
                            uVar70 = MakeAtom("FONT_DESCENT",0xc,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35 * 0x10) = uVar70;
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar35 * 0x10) =
                                 (long)(short)param_4[0x21];
                          }
                          if (*(int *)(lVar17 + 0x10) == 0) {
                            lVar35 = (long)local_610;
                            local_610 = local_610 + 1;
                            uVar70 = MakeAtom("RAW_DESCENT",0xb,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35 * 0x10) = uVar70;
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar35 * 0x10) =
                                 (long)(double)((ulong)(((double)(int)*(short *)(*(long *)(lVar17 + 
                                                  8) + 0x8c) / (double)uVar10) * 1000.00000000) ^
                                               0x8000000000000000);
                          }
                          uVar32 = FTGetEnglishName(*(undefined8 *)(lVar17 + 8),0,&local_448);
                          __s_00 = (uint *)&local_448;
                          puVar40 = (uint *)&local_448;
                          if ((int)uVar32 < 0) {
                            if (puVar43 == (undefined8 *)0x0) {
                              uVar32 = FTGetEnglishName(*(undefined8 *)(lVar17 + 8),4,&local_448);
                              if ((int)uVar32 < 0) goto LAB_001169d0;
                            }
                            else {
                              __s_00 = (uint *)puVar43[1];
                              if (__s_00 != (uint *)0x0) {
                                lVar35 = -1;
                                puVar41 = __s_00;
                                do {
                                  uVar32 = (uint)lVar35;
                                  if (lVar35 == 0) break;
                                  lVar35 = lVar35 + -1;
                                  uVar32 = (uint)lVar35;
                                  cVar1 = *(char *)puVar41;
                                  puVar41 = (uint *)((long)puVar41 + (ulong)bVar51 * -2 + 1);
                                } while (cVar1 != '\0');
                                uVar32 = ~uVar32 - 1;
                                goto LAB_00116868;
                              }
                              uVar32 = FTGetEnglishName(*(undefined8 *)(lVar17 + 8),4,&local_448);
                              if (-1 < (int)uVar32) goto LAB_00116932;
LAB_001181cc:
                              puVar40 = (uint *)puVar43[2];
                              if (puVar40 == (uint *)0x0) goto LAB_001169d0;
                              lVar35 = -1;
                              __s_00 = puVar40;
                              do {
                                uVar32 = (uint)lVar35;
                                if (lVar35 == 0) break;
                                lVar35 = lVar35 + -1;
                                uVar32 = (uint)lVar35;
                                cVar1 = *(char *)__s_00;
                                __s_00 = (uint *)((long)__s_00 + (ulong)bVar51 * -2 + 1);
                              } while (cVar1 != '\0');
                              uVar32 = ~uVar32 - 1;
                            }
LAB_00116932:
                            if (0 < (int)uVar32) {
                              lVar44 = (long)local_610;
                              lVar35 = lVar44 * 0x10;
                              local_610 = local_610 + 1;
                              uVar70 = MakeAtom("FACE_NAME",9,1);
                              *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35) = uVar70;
                              uVar70 = MakeAtom(puVar40,(ulong)uVar32,1,(ulong)uVar32);
                              *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar35) = uVar70;
                              *(undefined *)(*(long *)(param_4 + 0x28) + lVar44) = 1;
                            }
                          }
                          else {
LAB_00116868:
                            if (0 < (int)uVar32) {
                              lVar44 = (long)local_610;
                              lVar35 = lVar44 * 0x10;
                              local_610 = local_610 + 1;
                              uVar70 = MakeAtom("COPYRIGHT",9,1);
                              *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35) = uVar70;
                              uVar70 = MakeAtom(__s_00,(ulong)uVar32,1,(ulong)uVar32);
                              *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar35) = uVar70;
                              *(undefined *)(*(long *)(param_4 + 0x28) + lVar44) = 1;
                            }
                            uVar32 = FTGetEnglishName(*(undefined8 *)(lVar17 + 8),4,&local_448);
                            if (-1 < (int)uVar32) goto LAB_00116932;
                            if (puVar43 != (undefined8 *)0x0) goto LAB_001181cc;
                          }
LAB_001169d0:
                          __s_00 = (uint *)FT_Get_Postscript_Name(*(undefined8 *)(lVar17 + 8));
                          if (__s_00 == (uint *)0x0) {
LAB_00117b20:
                            uVar32 = FTGetEnglishName(*(undefined8 *)(lVar17 + 8),6,&local_448);
                            __s_00 = (uint *)&local_448;
                            if (-1 < (int)uVar32) goto LAB_00116a03;
                            if ((puVar43 != (undefined8 *)0x0) &&
                               (__s_00 = (uint *)puVar43[2], __s_00 != (uint *)0x0)) {
                              lVar35 = -1;
                              puVar40 = __s_00;
                              do {
                                uVar32 = (uint)lVar35;
                                if (lVar35 == 0) break;
                                lVar35 = lVar35 + -1;
                                uVar32 = (uint)lVar35;
                                cVar1 = *(char *)puVar40;
                                puVar40 = (uint *)((long)puVar40 + (ulong)bVar51 * -2 + 1);
                              } while (cVar1 != '\0');
                              uVar32 = ~uVar32 - 1;
                              goto LAB_00116a03;
                            }
                          }
                          else {
                            __nmemb = strlen((char *)__s_00);
                            uVar32 = (uint)__nmemb;
                            if ((int)uVar32 < 0) goto LAB_00117b20;
LAB_00116a03:
                            if (0 < (int)uVar32) {
                              lVar44 = (long)local_610;
                              lVar35 = lVar44 * 0x10;
                              local_610 = local_610 + 1;
                              uVar70 = MakeAtom("_ADOBE_POSTSCRIPT_FONTNAME",0x1a,1);
                              *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35) = uVar70;
                              uVar70 = MakeAtom(__s_00,(ulong)uVar32,1,(ulong)uVar32);
                              *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar35) = uVar70;
                              *(undefined *)(*(long *)(param_4 + 0x28) + lVar44) = 1;
                            }
                          }
                          if (local_5b8._0_1_) {
                            lVar35 = (long)local_610 * 0x10;
                            uVar70 = MakeAtom(0x131418,0xe,1);
                            dVar53 = (double)uVar10;
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35) = uVar70;
                            dVar52 = floor(((double)(int)*(short *)((long)puVar31 + 0xc) / dVar53) *
                                           *(double *)(param_2 + 0x20) + 0.50000000);
                            *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar35) = (long)(int)dVar52;
                            uVar70 = MakeAtom(dVar52,0x1313e3,0xb,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x10 + lVar35) = uVar70;
                            dVar52 = floor(((double)(int)*(short *)((long)puVar31 + 0xe) / dVar53) *
                                           *(double *)(param_2 + 8) + 0.50000000);
                            *(long *)(*(long *)(param_4 + 0x24) + lVar35 + 0x18) = (long)(int)dVar52
                            ;
                            uVar70 = MakeAtom(dVar52,0x1313f3,0xb,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x20 + lVar35) = uVar70;
                            dVar52 = floor(((double)(int)*(short *)(puVar31 + 2) / dVar53) *
                                           *(double *)(param_2 + 0x20) + 0.50000000);
                            *(long *)(*(long *)(param_4 + 0x24) + lVar35 + 0x28) = (long)(int)dVar52
                            ;
                            uVar70 = MakeAtom(dVar52,0x131403,0x10,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x30 + lVar35) = uVar70;
                            dVar52 = floor(((double)(int)*(short *)((long)puVar31 + 0x14) / dVar53)
                                           * *(double *)(param_2 + 0x20) + 0.50000000);
                            *(long *)(*(long *)(param_4 + 0x24) + lVar35 + 0x38) = (long)(int)dVar52
                            ;
                            uVar70 = MakeAtom(dVar52,0x1313bf,0xd,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x40 + lVar35) = uVar70;
                            dVar52 = floor(((double)(int)*(short *)((long)puVar31 + 0x16) / dVar53)
                                           * *(double *)(param_2 + 8) + 0.50000000);
                            *(long *)(*(long *)(param_4 + 0x24) + lVar35 + 0x48) = (long)(int)dVar52
                            ;
                            uVar70 = MakeAtom(dVar52,0x1313d1,0xd,1);
                            *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x50 + lVar35) = uVar70;
                            dVar52 = floor(((double)(int)*(short *)(puVar31 + 3) / dVar53) *
                                           *(double *)(param_2 + 0x20) + 0.50000000);
                            *(long *)(*(long *)(param_4 + 0x24) + lVar35 + 0x58) = (long)(int)dVar52
                            ;
                            iVar11 = local_610 + 6;
LAB_00118008:
                            if ((puVar5 != (undefined8 *)0x0) ||
                               (local_610 = iVar11, puVar43 != (undefined8 *)0x0)) {
                              dVar52 = *(double *)(param_2 + 0x20);
                              dVar53 = (double)uVar10;
                              if (puVar5 == (undefined8 *)0x0) {
                                dVar54 = floor(((double)-(int)*(short *)((long)puVar43 + 0x32) /
                                               dVar53) * dVar52 + 0.50000000);
                                uVar10 = (uint)*(ushort *)((long)puVar43 + 0x34);
                              }
                              else {
                                dVar54 = floor(((double)-(int)*(short *)(puVar5 + 2) / dVar53) *
                                               dVar52 + 0.50000000);
                                uVar10 = SEXT24(*(short *)((long)puVar5 + 0x12));
                              }
                              dVar52 = floor(((double)uVar10 / dVar53) * dVar52 + 0.50000000);
                              uVar70 = MakeAtom(dVar52,0x131455,0x13,1);
                              lVar44 = (long)iVar11 * 0x10;
                              *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar44) = uVar70;
                              lVar35 = 1;
                              if (0 < (int)dVar52) {
                                lVar35 = (long)(int)dVar52;
                              }
                              *(long *)(*(long *)(param_4 + 0x24) + 8 + lVar44) = lVar35;
                              uVar70 = MakeAtom(0x13143e,0x12,1);
                              *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x10 + lVar44) = uVar70;
                              *(long *)(*(long *)(param_4 + 0x24) + 0x18 + lVar44) =
                                   (long)(int)dVar54;
                              local_610 = iVar11 + 2;
                              if ((puVar5 != (undefined8 *)0x0) && (plVar4[4] == plVar4[7])) {
                                uVar70 = MakeAtom("ITALIC_ANGLE",0xc,1);
                                *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x20 + lVar44) = uVar70;
                                *(long *)(*(long *)(param_4 + 0x24) + lVar44 + 0x28) =
                                     ((long)puVar5[1] >> 10) + 0x1680;
                                local_610 = iVar11 + 3;
                              }
                            }
                          }
                          else {
                            iVar11 = local_610;
                            if (local_5bc != 0) goto LAB_00118008;
                          }
                          uVar70 = MakeAtom("FONT_TYPE",9,1);
                          lVar35 = (long)local_610 * 0x10;
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35) = uVar70;
                          __s = (char *)FT_Get_X11_Font_Format(*(undefined8 *)(lVar17 + 8));
                          __nmemb = strlen(__s);
                          uVar70 = MakeAtom(__s,__nmemb & 0xffffffff,1);
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + 8 + lVar35) = uVar70;
                          *(undefined *)(*(long *)(param_4 + 0x28) + (long)local_610) = 1;
                          uVar70 = MakeAtom("RASTERIZER_NAME",0xf,1);
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + 0x10 + lVar35) = uVar70;
                          uVar70 = MakeAtom("FreeType",10,1);
                          *(undefined8 *)(*(long *)(param_4 + 0x24) + lVar35 + 0x18) = uVar70;
                          *(undefined *)(*(long *)(param_4 + 0x28) + (long)(local_610 + 1)) = 1;
                          *(int *)(param_4 + 0x22) = local_610 + 2;
                          goto LAB_00115560;
                        }
                      }
LAB_00115680:
                      bVar49 = true;
                      uVar33 = 0x50;
                    }
                    else {
                      bVar49 = true;
                    }
                  }
                }
                else {
                  bVar49 = true;
                  uVar33 = 0x53;
                  ErrorF("FreeType: couldn\'t open face %s: %d\n",__dest,(ulong)uVar32);
                  free(*__ptr);
                  ppcVar36 = (char **)0x0;
                  free(__ptr);
                }
              }
LAB_00115560:
              if (local_600 != (char *)0x0) {
                free(local_600);
              }
              goto LAB_00114c68;
            }
            __s = *(char **)(local_520 + 8);
            __nmemb = strlen(__s);
            if (__nmemb == 1) {
              cVar1 = *__s;
              if (cVar1 == 'c') {
LAB_001158ee:
                local_5e8 = (double)(ulong)(uint)(int)cVar1;
                goto LAB_00114e90;
              }
              if (cVar1 < 'd') {
                if (cVar1 == 'M') {
                  local_4d8 = local_4d8 | 0x800;
                  local_5e8 = 0.00000000;
                  goto LAB_00114e90;
                }
              }
              else {
                if ((cVar1 == 'm') || (cVar1 == 'p')) goto LAB_001158ee;
              }
            }
          }
          else {
            __nptr = *(ushort **)(local_520 + 8);
            if (*(char *)__nptr == '\0') {
LAB_00114bfc:
              dVar52 = 1.00000000;
              dVar53 = 1.00000000;
              goto LAB_00114c1a;
            }
            dVar52 = strtod((char *)__nptr,(char **)&local_518);
            cVar1 = *(char *)local_518;
            if (__nptr == local_518) {
              if ((cVar1 != ',') && (cVar1 != ';')) goto LAB_00114bfc;
              dVar52 = 1.00000000;
LAB_00115808:
              __nptr = (ushort *)((long)local_518 + 1);
              dVar53 = 1.00000000;
              if (cVar1 == ',') {
                dVar53 = strtod((char *)__nptr,(char **)&local_518);
                if (local_518 == __nptr) {
                  dVar53 = 1.00000000;
                }
                if ((*(char *)local_518 == ';') || (*(char *)local_518 == ',')) {
                  __nptr = (ushort *)((long)local_518 + 1);
                  goto LAB_0011581d;
                }
              }
              else {
LAB_0011581d:
                lVar17 = strtol((char *)__nptr,(char **)&local_518,10);
                if (local_518 != __nptr) {
                  local_4b0 = local_4b0 & 0xffffffff | lVar17 << 0x20;
                }
                if (*(char *)local_518 == ',') {
                  __nptr = (ushort *)((long)local_518 + 1);
                  uVar33 = strtol((char *)__nptr,(char **)&local_518,10);
                  if (__nptr != local_518) {
                    local_4a8 = local_4a8 & 0xffffffff00000000 | uVar33 & 0xffffffff;
                  }
                  if ((*(char *)local_518 == ',') &&
                     (__nptr = (ushort *)((long)local_518 + 1),
                     lVar17 = strtol((char *)__nptr,(char **)&local_518,10), __nptr != local_518)) {
                    local_4a8 = local_4a8 & 0xffffffff | lVar17 << 0x20;
                  }
                }
              }
              if (dVar52 <= 0.00000000) goto LAB_001156f5;
              if (0.00000000 < dVar53) goto LAB_00114c1a;
              fwrite("ScaleBBoxHeight needs plus.\n",1,0x1c,stderr);
            }
            else {
              if ((cVar1 == ';') || (cVar1 == ',')) goto LAB_00115808;
              if (0.00000000 < dVar52) {
                dVar53 = 1.00000000;
                goto LAB_00114c1a;
              }
LAB_001156f5:
              fwrite("ScaleBBoxWitdh needs plus.\n",1,0x1b,stderr);
            }
          }
LAB_00114c54:
          bVar49 = true;
          ppcVar36 = (char **)0x0;
          uVar33 = 0x53;
        }
        else {
          bVar49 = true;
          ppcVar36 = (char **)0x0;
          uVar33 = 0x53;
          fwrite("ScaleWitdh needs plus.\n",1,0x17,stderr);
        }
LAB_00114c68:
        free(__dest);
        free(local_630);
        if (!bVar49) goto LAB_00114cbd;
        if (((ppcVar36 != (char **)0x0) && (*pplVar15 == (long *)0x0)) &&
           (ppcVar36[3] == (char *)0x0)) {
          FUN_00111300(ppcVar36);
        }
      }
    }
    else {
      local_630._0_4_ = (int)__nmemb;
      iVar8 = (int)__s - (int)param_1;
      local_630 = (uint *)malloc((long)((((int)local_630 + (int)param_1) - (int)pcVar16) + iVar8));
      if (local_630 == (uint *)0x0) goto LAB_00114cb0;
      if (0 < iVar8) {
        memcpy(local_630,param_1,(long)iVar8);
      }
      strcpy((char *)((long)local_630 + (long)iVar8),pcVar16 + 1);
      iVar8 = SPropRecValList_add_by_font_cap(local_528,__s);
      if (iVar8 == 0) goto LAB_00114a0a;
      uVar33 = 0x56;
      free(local_630);
    }
  }
  else {
LAB_00114cb0:
    uVar33 = 0x50;
  }
  FUN_001113d0(pplVar15);
LAB_00114cbd:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar33;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong FUN_00118820(undefined8 param_1,long *param_2,undefined8 param_3,undefined8 param_4,
                  undefined8 param_5,undefined8 param_6,uint param_7,uint param_8)

{
  uint uVar1;
  long lVar2;
  long in_FS_OFFSET;
  ulong local_68;
  undefined local_58 [24];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = CreateFontRec();
  local_68 = 0x50;
  if (lVar2 != 0) {
    uVar1 = FUN_00111180(param_1,lVar2,lVar2 + 8,(ulong)param_7,(ulong)param_8,local_58);
    local_68 = (ulong)uVar1;
    if (uVar1 == 0x55) {
      local_68 = FUN_001148d0(param_5,param_6,lVar2,lVar2 + 8,local_58,param_4);
      if ((int)local_68 == 0x55) {
        *param_2 = lVar2;
        goto LAB_00118899;
      }
      local_68 = local_68 & 0xffffffff;
    }
    DestroyFontRec(lVar2);
  }
LAB_00118899:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_68;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FreeTypeRegisterFontFileFunctions(void)

{
  FontFileRegisterRenderer(&PTR_DAT_0033b920);
  FontFileRegisterRenderer(&PTR_DAT_0033b958);
  FontFileRegisterRenderer(&PTR_DAT_0033b990);
  FontFileRegisterRenderer(&PTR_DAT_0033b9c8);
  FontFileRegisterRenderer(&PTR_DAT_0033ba00);
  FontFileRegisterRenderer(&PTR_DAT_0033ba38);
  FontFilePriorityRegisterRenderer(&PTR_DAT_0033b8a0,0xfffffff6);
  FontFilePriorityRegisterRenderer(&PTR_DAT_0033b8d8,0xfffffff6);
  return;
}



undefined8
FUN_00118980(undefined8 param_1,uint param_2,uint param_3,uint param_4,undefined4 *param_5)

{
  uint uVar1;
  int iVar2;
  undefined8 uVar3;
  uint uVar4;
  long in_FS_OFFSET;
  ushort local_58;
  ushort uStack86;
  short sStack84;
  ushort uStack82;
  undefined8 uStack80;
  undefined8 local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = FT_Get_Sfnt_Name_Count();
  if (0 < (int)uVar1) {
    uVar4 = 0;
    do {
      iVar2 = FT_Get_Sfnt_Name(param_1,(ulong)uVar4,&local_58);
      if ((((iVar2 == 0) && ((uint)uStack82 == param_2)) && ((uint)local_58 == param_3)) &&
         ((param_4 == 0xffffffff || ((uint)uStack86 == param_4)))) {
        if (local_58 < 2) {
          if (sStack84 == 0) goto LAB_00118a2e;
        }
        else {
          if ((local_58 != 3) || ((sStack84 - 0x409U & 0xfbff) != 0)) {
LAB_00118a2e:
            *(undefined8 *)(param_5 + 4) = local_48;
            uVar3 = 1;
            *param_5 = CONCAT22(uStack86,local_58);
            param_5[1] = (int)(CONCAT26(uStack82,CONCAT24(sStack84,CONCAT22(uStack86,local_58))) >>
                              0x20);
            param_5[2] = (int)uStack80;
            param_5[3] = (int)((ulong)uStack80 >> 0x20);
            goto LAB_00118a52;
          }
        }
      }
      uVar4 = uVar4 + 1;
    } while (uVar1 != uVar4);
  }
  uVar3 = 0;
LAB_00118a52:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



long FTtoXReturnCode(int param_1)

{
  return (ulong)(param_1 != 0x40) * 3 + 0x50;
}



ulong FTGetEnglishName(undefined8 param_1,ulong param_2,char *param_3,int param_4)

{
  int iVar1;
  char *pcVar2;
  uint uVar3;
  long in_FS_OFFSET;
  undefined auStack72 [8];
  char *local_40;
  uint local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = FUN_00118980(param_1,param_2,3,1,auStack72);
  if ((iVar1 == 0) &&
     (iVar1 = FUN_00118980(param_1,param_2 & 0xffffffff,0,0xffffffff,auStack72), iVar1 == 0)) {
    iVar1 = FUN_00118980(param_1,param_2 & 0xffffffff,1,0,auStack72);
    if (iVar1 == 0) {
      uVar3 = 0xffffffff;
    }
    else {
      uVar3 = local_38;
      if (param_4 <= (int)local_38) {
        uVar3 = param_4 - 1;
      }
      memcpy(param_3,local_40,(long)(int)uVar3);
      param_3[(long)(int)uVar3] = '\0';
    }
  }
  else {
    if (((int)local_38 < 1) || (param_4 < 2)) {
      uVar3 = 0;
      pcVar2 = param_3;
    }
    else {
      pcVar2 = param_3;
      do {
        pcVar2 = pcVar2 + 1;
        if (*local_40 == '\0') {
          *pcVar2 = local_40[1];
        }
        else {
          *pcVar2 = '?';
        }
        uVar3 = (int)pcVar2 - (int)param_3;
      } while ((pcVar2 != param_3 + (ulong)(local_38 - 1 >> 1) + 1) &&
              (local_40 = local_40 + 2, pcVar2 = pcVar2,
              pcVar2 != param_3 + (ulong)(param_4 - 2) + 1));
    }
    *pcVar2 = '\0';
  }
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return (ulong)uVar3;
}



ulong FUN_00118c10(undefined **param_1,char *param_2,char *param_3)

{
  undefined *puVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  undefined **ppuVar5;
  long lVar6;
  char *__s1;
  long lVar7;
  long in_FS_OFFSET;
  char *local_50;
  char *local_48;
  long local_40;
  
  lVar7 = 0;
  __s1 = "FontFile";
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  while( true ) {
    uVar2 = strcasecmp(__s1,param_2);
    if (uVar2 == 0) break;
    lVar7 = lVar7 + 1;
    if (lVar7 == 0x11) {
      __s1 = "truetype font : invalid record name \"%s.\"\n";
      goto LAB_00118d22;
    }
    __s1 = (&PTR_s_FontFile_0033a980)[lVar7 * 2];
  }
  switch((&DAT_0033a988)[(long)(int)lVar7 * 4]) {
  case 0:
    lVar6 = strtol(param_3,&local_48,0);
    uVar4 = (uint)lVar6;
    if (*local_48 != '\0') {
      __s1 = "truetype font property : %s record needs integer value.\n";
LAB_00118d22:
      uVar2 = 0xffffffff;
      __fprintf_chk(stderr,1,__s1,param_2);
      goto LAB_00118ceb;
    }
    goto LAB_00118eae;
  case 1:
    local_50 = (char *)strtod(param_3,&local_48);
    if (*local_48 != '\0') {
      __s1 = "truetype font property : %s record needs floating point value.\n";
      goto LAB_00118d22;
    }
    break;
  case 2:
    iVar3 = strcasecmp(param_3,"yes");
    if (((((iVar3 == 0) || (iVar3 = strcasecmp(param_3,"y"), iVar3 == 0)) ||
         (iVar3 = strcasecmp(param_3,"on"), iVar3 == 0)) ||
        ((iVar3 = strcasecmp(param_3,"true"), iVar3 == 0 ||
         (iVar3 = strcasecmp(param_3,"t"), iVar3 == 0)))) ||
       (iVar3 = strcasecmp(param_3,"ok"), iVar3 == 0)) {
      uVar4 = 0xffffffff;
    }
    else {
      uVar4 = strcasecmp(param_3,"no");
      if (((uVar4 != 0) && (uVar4 = strcasecmp(param_3,"n"), uVar4 != 0)) &&
         ((uVar4 = strcasecmp(param_3,"off"), uVar4 != 0 &&
          ((uVar4 = strcasecmp(param_3,"false"), uVar4 != 0 &&
           (uVar4 = strcasecmp(param_3,"f"), uVar4 != 0)))))) {
        uVar4 = strcasecmp(param_3,"bad");
        __s1 = "truetype font property : %s record needs boolean value.\n";
        if (uVar4 != 0) goto LAB_00118d22;
      }
    }
LAB_00118eae:
    local_50 = (char *)(ulong)uVar4;
    break;
  case 3:
    local_50 = strdup(param_3);
    if (local_50 != (char *)0x0) break;
    goto LAB_00118f07;
  case 0xffffffff:
    if (*param_3 != '\0') {
      uVar2 = 0xffffffff;
      __fprintf_chk(stderr,1,"truetype font property : %s record needs void.\n",param_2);
    }
  }
  ppuVar5 = (undefined **)malloc(0x18);
  if (ppuVar5 == (undefined **)0x0) {
LAB_00118f07:
    uVar2 = 0xffffffff;
    fwrite("truetype font property : cannot allocate memory.\n",1,0x31,stderr);
  }
  else {
    puVar1 = *param_1;
    *(undefined ***)ppuVar5 = &PTR_s_FontFile_0033a980 + (long)(int)lVar7 * 2;
    *(undefined ***)param_1 = ppuVar5;
    ppuVar5[2] = puVar1;
    ppuVar5[1] = local_50;
  }
LAB_00118ceb:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return (ulong)uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 SPropRecValList_new(undefined8 *param_1)

{
  *param_1 = 0;
  return 0;
}



undefined8 SPropRecValList_search_record(char **param_1,char **param_2,char *param_3)

{
  int iVar1;
  
  *param_2 = (char *)0x0;
  param_1 = (char **)*param_1;
  while( true ) {
    if (param_1 == (char **)0x0) {
      return 0;
    }
    iVar1 = strcasecmp(*(char **)*param_1,param_3);
    if (iVar1 == 0) break;
    param_1 = (char **)param_1[2];
  }
  *(char ***)param_2 = param_1;
  return 0xffffffff;
}



undefined8 SPropRecValList_add_by_font_cap(undefined8 param_1,char *param_2)

{
  char cVar1;
  int iVar2;
  char *pcVar3;
  ushort **ppuVar4;
  char *pcVar5;
  char *__s;
  char *__s1;
  void *__dest;
  long lVar6;
  size_t __n;
  char *local_48;
  
  pcVar3 = strrchr(param_2,0x3a);
  if (pcVar3 != (char *)0x0) {
    pcVar5 = pcVar3 + -1;
    if (param_2 <= pcVar5) {
      cVar1 = pcVar3[-1];
      if (cVar1 != ':') {
        ppuVar4 = __ctype_b_loc();
        do {
          if (((*(byte *)((long)*ppuVar4 + (long)cVar1 * 2 + 1) & 8) == 0) ||
             (pcVar5 = pcVar5 + -1, pcVar5 == param_2 + -1)) goto LAB_00119046;
          cVar1 = *pcVar5;
        } while (cVar1 != ':');
      }
      if (pcVar3 != pcVar5) {
        iVar2 = (int)pcVar3 - (int)pcVar5;
        __dest = malloc((long)iVar2);
        __n = SEXT48(iVar2 + -1);
        memcpy(__dest,pcVar5 + 1,__n);
        *(undefined *)((long)__dest + __n) = 0;
        FUN_00118c10(param_1,"FaceNumber",__dest);
        free(__dest);
        pcVar3 = pcVar5;
      }
    }
LAB_00119046:
    if (param_2 < pcVar3) {
      do {
        while( true ) {
          pcVar5 = strchr(param_2,0x3a);
          local_48 = pcVar5 + -(long)param_2;
          if ((long)local_48 < 1) break;
          __s = (char *)malloc((size_t)(local_48 + 1));
          memcpy(__s,param_2,(size_t)local_48);
          local_48 = __s + (long)local_48;
          *local_48 = '\0';
          __s1 = strchr(__s,0x3d);
          if (__s1 != (char *)0x0) {
            *__s1 = '\0';
            local_48 = __s1 + 1;
          }
          lVar6 = 0;
          __s1 = "fn";
          while( true ) {
            iVar2 = strcasecmp(__s1,__s);
            if (iVar2 == 0) break;
            lVar6 = lVar6 + 1;
            if (lVar6 == 0xf) goto LAB_00119148;
            __s1 = (&PTR_DAT_0033a880)[lVar6 * 2];
          }
          iVar2 = FUN_00118c10(param_1,(&PTR_s_FaceNumber_0033a888)[(long)(int)lVar6 * 2],local_48);
          if (iVar2 != 0) {
LAB_00119148:
            fwrite("truetype font : Illegal Font Cap.\n",1,0x22,stderr);
            return 0xffffffff;
          }
          param_2 = pcVar5 + 1;
          free(__s);
          if (pcVar3 <= param_2) {
            return 0;
          }
        }
        param_2 = pcVar5 + 1;
      } while (param_2 < pcVar3);
    }
  }
  return 0;
}



void FUN_001191e0(long param_1)

{
  void **ppvVar1;
  void *__ptr;
  void **__ptr_00;
  int iVar2;
  int iVar3;
  long lVar4;
  void *__ptr_01;
  
  __ptr = *(void **)(param_1 + 0x98);
  __ptr_00 = *(void ***)((long)__ptr + 0x38);
  free(*(void **)((long)__ptr + 0x18));
  __ptr_01 = *(void **)((long)__ptr + 0x28);
  if (__ptr_01 != (void *)0x0) {
    iVar2 = (((uint)*(ushort *)(param_1 + 10) - (uint)*(ushort *)(param_1 + 8)) + 1) *
            (((uint)*(ushort *)(param_1 + 0xe) - (uint)*(ushort *)(param_1 + 0xc)) + 1);
    iVar3 = iVar2 + 0x7f;
    if (iVar3 < 0) {
      iVar3 = iVar2 + 0xfe;
    }
    if (0 < iVar3 >> 7) {
      lVar4 = 0;
      do {
        ppvVar1 = (void **)((long)__ptr_01 + lVar4);
        lVar4 = lVar4 + 8;
        free(*ppvVar1);
        __ptr_01 = *(void **)((long)__ptr + 0x28);
      } while ((ulong)((iVar3 >> 7) - 1) * 8 + 8 != lVar4);
    }
  }
  free(__ptr_01);
  if (0 < *(int *)((long)__ptr + 4)) {
    lVar4 = 0;
    iVar3 = 0;
    do {
      iVar3 = iVar3 + 1;
      ppvVar1 = (void **)(*(long *)((long)__ptr + 0x10) + 0x10 + lVar4);
      lVar4 = lVar4 + 0x18;
      free(*ppvVar1);
    } while (*(int *)((long)__ptr + 4) != iVar3 && iVar3 <= *(int *)((long)__ptr + 4));
  }
  free(*(void **)((long)__ptr + 0x10));
  if (__ptr_00 != (void **)0x0) {
    free(*__ptr_00);
    free(__ptr_00[1]);
    free(__ptr_00);
  }
  free(*(void **)(param_1 + 0x50));
  free(__ptr);
  return;
}



void FUN_001192e0(undefined8 param_1)

{
  FUN_001191e0();
  DestroyFontRec(param_1);
  return;
}



// WARNING: Could not reconcile some variable overlaps

undefined8
bdfReadCharacters(undefined8 param_1,long param_2,long param_3,int param_4,int param_5,int param_6,
                 int param_7)

{
  uint uVar1;
  byte bVar2;
  ushort uVar3;
  long lVar4;
  short sVar5;
  undefined uVar6;
  byte bVar7;
  short sVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  int iVar12;
  char *__s;
  void *pvVar13;
  undefined8 uVar14;
  undefined8 *puVar15;
  undefined *puVar16;
  byte *__s_00;
  long lVar17;
  long lVar18;
  uint *puVar19;
  uint *puVar20;
  ulong uVar21;
  undefined8 *puVar22;
  uint uVar23;
  int iVar24;
  ulong uVar25;
  void **ppvVar26;
  undefined *puVar27;
  void **ppvVar28;
  byte *pbVar29;
  uint uVar30;
  short sVar31;
  ulong uVar32;
  char cVar33;
  undefined2 uVar34;
  int iVar35;
  byte *pbVar36;
  void **ppvVar37;
  long in_FS_OFFSET;
  bool bVar38;
  bool bVar39;
  bool bVar40;
  byte bVar41;
  void **local_1198;
  short *local_1168;
  void *local_1158;
  uint local_1150;
  char *local_1148;
  uint local_1140;
  undefined *local_1138;
  uint local_1130;
  int local_112c;
  int local_1108;
  int local_1104;
  uint local_10dc;
  int local_10d8;
  int local_10d4;
  int local_10d0;
  int local_10cc;
  undefined4 local_10c8;
  int local_10c4;
  uint local_10c0;
  uint local_10bc;
  void *local_10b8 [256];
  char local_8b8 [112];
  undefined local_848 [1024];
  undefined local_448 [1032];
  long local_40;
  
  bVar41 = 0;
  lVar4 = *(long *)(param_2 + 0x98);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  ppvVar37 = *(void ***)(lVar4 + 0x38);
  local_1198 = (void **)0x0;
  if (ppvVar37 != (void **)0x0) {
    local_1198 = ppvVar37 + 2;
    ppvVar37[2] = (void *)0x0;
    ppvVar37[3] = (void *)0x0;
  }
  ppvVar26 = local_10b8;
  lVar17 = 0x100;
  *(undefined8 *)(lVar4 + 0x10) = 0;
  ppvVar28 = ppvVar26;
  while (lVar17 != 0) {
    lVar17 = lVar17 + -1;
    *ppvVar28 = (void *)0x0;
    ppvVar28 = ppvVar28 + 1;
  }
  __s = (char *)bdfGetLine(param_1,local_848,0x400);
  if ((__s == (char *)0x0) || (iVar9 = sscanf(__s,"CHARS %d",&local_10dc), iVar9 != 1)) {
    bdfError("bad \'CHARS\' in bdf file\n");
    uVar14 = 0;
    goto LAB_001193d7;
  }
  if ((int)local_10dc < 1) {
    bdfError("invalid number of CHARS in BDF file\n");
    uVar14 = 0;
    goto LAB_001193d7;
  }
  if ((int)local_10dc < 0x5555556) {
    local_1168 = (short *)calloc((long)(int)local_10dc,0x18);
    if (local_1168 == (short *)0x0) {
      local_10b8[0] = (void *)0x0;
      bdfError("Couldn\'t allocate pCI (%d*%d)\n",(ulong)local_10dc,0x18);
    }
    else {
      *(short **)(lVar4 + 0x10) = local_1168;
      if (ppvVar37 != (void **)0x0) {
        pvVar13 = malloc((long)(int)local_10dc << 3);
        *ppvVar37 = pvVar13;
        if (pvVar13 == (void *)0x0) {
          local_10b8[0] = (void *)0x0;
          bdfError("Couldn\'t allocate glyphNames (%d*%d)\n",(ulong)local_10dc,8);
          goto LAB_0011942c;
        }
        pvVar13 = malloc((long)(int)local_10dc << 2);
        ppvVar37[1] = pvVar13;
        if (pvVar13 == (void *)0x0) {
          bdfError("Couldn\'t allocate sWidth (%d *%d)\n",(ulong)local_10dc,4);
          uVar14 = 0;
          goto LAB_001193d7;
        }
      }
      __s_00 = (byte *)bdfGetLine(param_1,local_848,0x400);
      uVar21 = (ulong)local_10dc;
      *(undefined8 *)(param_2 + 8) = 0x10000000100;
      if ((int)local_10dc < 1) {
        uVar25 = 0;
        local_112c = 0;
        local_1150 = 0;
LAB_0011a23a:
        if ((int)uVar25 == (int)uVar21) {
          local_10dc = local_1150;
          bVar40 = false;
          bVar38 = __s_00 == (byte *)0x0;
          *(uint *)(lVar4 + 4) = local_1150;
          if (bVar38) {
LAB_0011992f:
            bdfError("missing \'ENDFONT\'\n");
          }
          else {
LAB_0011a1c3:
            local_1148 = "STARTCHAR";
            lVar17 = 9;
            pbVar36 = __s_00;
            do {
              if (lVar17 == 0) break;
              lVar17 = lVar17 + -1;
              bVar40 = *pbVar36 < (byte)*local_1148;
              bVar38 = *pbVar36 == *local_1148;
              pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
              local_1148 = (char *)((byte *)local_1148 + (ulong)bVar41 * -2 + 1);
            } while (bVar38);
            bVar39 = false;
            bVar40 = (!bVar40 && !bVar38) == bVar40;
            local_10dc = local_1150;
            if (bVar40) {
              bdfError("more characters than specified\n");
            }
            else {
              lVar17 = 7;
              pbVar36 = (byte *)"ENDFONT";
              do {
                if (lVar17 == 0) break;
                lVar17 = lVar17 + -1;
                bVar39 = *__s_00 < *pbVar36;
                bVar40 = *__s_00 == *pbVar36;
                __s_00 = __s_00 + (ulong)bVar41 * -2 + 1;
                pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
              } while (bVar40);
              cVar33 = (!bVar39 && !bVar40) - bVar39;
              iVar9 = (int)cVar33;
              if (cVar33 != '\0') goto LAB_0011992f;
              if (local_112c == 0) {
                bdfWarning("No characters with valid encodings\n");
              }
              iVar12 = (((uint)*(ushort *)(param_2 + 0xe) - (uint)*(ushort *)(param_2 + 0xc)) + 1) *
                       (((uint)*(ushort *)(param_2 + 10) - (uint)*(ushort *)(param_2 + 8)) + 1);
              iVar35 = iVar12 + 0x7f;
              if (iVar35 < 0) {
                iVar35 = iVar12 + 0xfe;
              }
              pvVar13 = calloc((long)(iVar35 >> 7),8);
              *(void **)(lVar4 + 0x28) = pvVar13;
              if (pvVar13 != (void *)0x0) {
                uVar21 = (ulong)*(ushort *)(param_2 + 0xc);
                uVar25 = (ulong)*(ushort *)(param_2 + 0xe);
                *(byte *)(param_2 + 0x12) = *(byte *)(param_2 + 0x12) | 0x40;
                if (*(ushort *)(param_2 + 0xc) <= *(ushort *)(param_2 + 0xe)) {
                  ppvVar37 = ppvVar26 + uVar21;
                  do {
                    pvVar13 = *ppvVar37;
                    uVar3 = *(ushort *)(param_2 + 8);
                    if (pvVar13 == (void *)0x0) {
                      *(byte *)(param_2 + 0x12) = *(byte *)(param_2 + 0x12) & 0xbf;
                      iVar9 = iVar9 + 1 + ((uint)*(ushort *)(param_2 + 10) - (uint)uVar3);
                    }
                    else {
                      if (uVar3 <= *(ushort *)(param_2 + 10)) {
                        lVar17 = (ulong)uVar3 * 8;
                        iVar35 = (uint)uVar3 - iVar9;
                        while( true ) {
                          lVar18 = *(long *)((long)pvVar13 + lVar17);
                          if (lVar18 == 0) {
                            *(byte *)(param_2 + 0x12) = *(byte *)(param_2 + 0x12) & 0xbf;
                          }
                          else {
                            iVar12 = iVar9 + 0x7f;
                            if (-1 < iVar9) {
                              iVar12 = iVar9;
                            }
                            ppvVar28 = (void **)(*(long *)(lVar4 + 0x28) + (long)(iVar12 >> 7) * 8);
                            pvVar13 = *ppvVar28;
                            if (pvVar13 == (void *)0x0) {
                              pvVar13 = calloc(0x80,8);
                              *ppvVar28 = pvVar13;
                              pvVar13 = *(void **)(*(long *)(lVar4 + 0x28) + (long)(iVar12 >> 7) * 8
                                                  );
                              if (pvVar13 == (void *)0x0) goto LAB_0011942c;
                            }
                            uVar23 = (uint)(iVar9 >> 0x1f) >> 0x19;
                            *(long *)((long)pvVar13 +
                                     (long)(int)((iVar9 + uVar23 & 0x7f) - uVar23) * 8) = lVar18;
                          }
                          iVar9 = iVar9 + 1;
                          lVar17 = lVar17 + 8;
                          if ((uint)*(ushort *)(param_2 + 10) < (uint)(iVar35 + iVar9)) break;
                          pvVar13 = *ppvVar37;
                        }
                        uVar25 = (ulong)*(ushort *)(param_2 + 0xe);
                      }
                    }
                    uVar23 = (int)uVar21 + 1;
                    uVar21 = (ulong)uVar23;
                    ppvVar37 = ppvVar37 + 1;
                  } while (uVar23 <= (uint)uVar25);
                }
                do {
                  if (*ppvVar26 != (void *)0x0) {
                    free(*ppvVar26);
                  }
                  ppvVar26 = ppvVar26 + 1;
                } while ((void **)local_8b8 != ppvVar26);
                uVar14 = 1;
                goto LAB_001193d7;
              }
              bdfError("Couldn\'t allocate ppCI (%d,%d)\n",(ulong)(uint)(iVar35 >> 7),8);
            }
          }
          goto LAB_0011942c;
        }
      }
      else {
        bVar40 = __s_00 == (byte *)0x0;
        if (bVar40) {
          local_10b8[0] = (void *)0x0;
          uVar25 = 0;
        }
        else {
          local_112c = 0;
          local_1108 = 0;
          local_1150 = 0;
          local_1148 = "STARTCHAR";
          do {
            bVar38 = false;
            lVar17 = 9;
            pbVar36 = __s_00;
            pbVar29 = (byte *)local_1148;
            do {
              if (lVar17 == 0) break;
              lVar17 = lVar17 + -1;
              bVar38 = *pbVar36 < *pbVar29;
              bVar40 = *pbVar36 == *pbVar29;
              pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
              pbVar29 = pbVar29 + (ulong)bVar41 * -2 + 1;
            } while (bVar40);
            uVar23 = SEXT14((char)((!bVar38 && !bVar40) - bVar38));
            uVar25 = (ulong)uVar23;
            if (uVar23 != 0) {
              uVar23 = local_1108 + local_1150;
              uVar25 = (ulong)uVar23;
              bVar40 = uVar23 < (uint)uVar21;
              bVar38 = uVar23 == (uint)uVar21;
              if (!bVar38) goto LAB_0011a117;
              *(uint *)(lVar4 + 4) = local_1150;
              goto LAB_0011a1c3;
            }
            iVar9 = sscanf((char *)__s_00,"STARTCHAR %s",local_8b8);
            if (iVar9 != 1) {
              bdfError("bad character name in BDF file\n");
              goto LAB_0011942c;
            }
            if (ppvVar37 != (void **)0x0) {
              pvVar13 = *ppvVar37;
              uVar14 = bdfForceMakeAtom(local_8b8,0);
              *(undefined8 *)((long)pvVar13 + (long)(int)local_1150 * 8) = uVar14;
            }
            __s = (char *)bdfGetLine(param_1,local_848,0x400);
            if ((__s == (char *)0x0) ||
               (iVar9 = sscanf(__s,"ENCODING %d %d",&local_10c0,&local_10bc), iVar9 < 1)) {
              bdfError("bad \'ENCODING\' in BDF file\n");
              goto LAB_0011942c;
            }
            uVar21 = (ulong)local_10c0;
            if ((int)local_10c0 < -1) {
LAB_0011a12e:
              bdfError("bad ENCODING value");
              goto LAB_0011942c;
            }
            if (iVar9 == 2) {
              if ((int)local_10bc < -1) goto LAB_0011a12e;
              if (local_10c0 == 0xffffffff) {
                uVar21 = (ulong)local_10bc;
                local_10c0 = local_10bc;
                goto LAB_001195f9;
              }
LAB_00119602:
              if ((int)uVar21 < 0x10000) {
                uVar32 = uVar21 & 0xff;
                uVar23 = (int)uVar21 >> 8;
                uVar34 = (undefined2)(uVar21 >> 8);
                if (uVar23 < *(ushort *)(param_2 + 0xc)) {
                  *(undefined2 *)(param_2 + 0xc) = uVar34;
                }
                if (*(ushort *)(param_2 + 0xe) < uVar23) {
                  *(undefined2 *)(param_2 + 0xe) = uVar34;
                }
                if ((uint)uVar32 < (uint)*(ushort *)(param_2 + 8)) {
                  *(undefined2 *)(param_2 + 8) = (short)uVar32;
                }
                if ((uint)*(ushort *)(param_2 + 10) < (uint)uVar32) {
                  *(undefined2 *)(param_2 + 10) = (short)uVar32;
                }
                puVar15 = (undefined8 *)local_10b8[uVar23];
                if (puVar15 == (undefined8 *)0x0) {
                  puVar15 = (undefined8 *)malloc(0x800);
                  *(undefined8 **)(local_10b8 + uVar23) = puVar15;
                  if (puVar15 == (undefined8 *)0x0) {
                    bdfError("Couldn\'t allocate row %d of encoding (%d*%d)\n",(ulong)uVar23,0x100,8
                            );
                    goto LAB_0011942c;
                  }
                  puVar22 = puVar15;
                  do {
                    *puVar22 = 0;
                    puVar22 = puVar22 + 1;
                  } while (puVar22 != puVar15 + 0x100);
                }
                local_112c = local_112c + 1;
                *(short **)(puVar15 + uVar32) = local_1168;
              }
              else {
                bdfError("char \'%s\' has encoding too large (%d)\n",local_8b8);
              }
            }
            else {
LAB_001195f9:
              if ((int)uVar21 != -1) goto LAB_00119602;
              if (ppvVar37 == (void **)0x0) {
                local_1108 = local_1108 + 1;
                uVar25 = 1;
              }
            }
            __s = (char *)bdfGetLine(param_1,local_848,0x400);
            if (__s == (char *)0x0) {
LAB_0011a081:
              bdfError("bad \'SWIDTH\'\n");
              goto LAB_0011942c;
            }
            iVar9 = sscanf(__s,"SWIDTH %d %d",&local_10d8);
            if (iVar9 != 2) goto LAB_0011a081;
            if (local_10d4 != 0) {
              bdfError("SWIDTH y value must be zero\n");
              goto LAB_0011942c;
            }
            if (ppvVar37 != (void **)0x0) {
              *(int *)((long)ppvVar37[1] + (long)(int)local_1150 * 4) = local_10d8;
            }
            __s = (char *)bdfGetLine(param_1,local_848,0x400);
            if ((__s == (char *)0x0) ||
               (iVar9 = sscanf(__s,"DWIDTH %d %d",&local_10d8,&local_10d4), iVar9 != 2)) {
              bdfError("bad \'DWIDTH\'\n");
              goto LAB_0011942c;
            }
            if (local_10d4 != 0) {
              bdfError("DWIDTH y value must be zero\n");
              goto LAB_0011942c;
            }
            __s = (char *)bdfGetLine(param_1,local_848,0x400);
            if ((__s == (char *)0x0) ||
               (iVar9 = sscanf(__s,"BBX %d %d %d %d",&local_10d0), iVar9 != 4)) {
              bdfError("bad \'BBX\'\n");
              goto LAB_0011942c;
            }
            if ((local_10cc < 0) || (local_10d0 < 0)) {
              bdfError("character \'%s\' has a negative sized bitmap, %dx%d\n",local_8b8);
              goto LAB_0011942c;
            }
            __s_00 = (byte *)bdfGetLine(param_1,local_848,0x400);
            bVar40 = false;
            bVar38 = __s_00 == (byte *)0x0;
            if (bVar38) {
LAB_001197ea:
              local_1168[5] = 0;
            }
            else {
              lVar17 = 10;
              pbVar36 = __s_00;
              pbVar29 = (byte *)"ATTRIBUTES";
              do {
                if (lVar17 == 0) break;
                lVar17 = lVar17 + -1;
                bVar40 = *pbVar36 < *pbVar29;
                bVar38 = *pbVar36 == *pbVar29;
                pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
                pbVar29 = pbVar29 + (ulong)bVar41 * -2 + 1;
              } while (bVar38);
              if ((!bVar40 && !bVar38) != bVar40) goto LAB_001197ea;
              pbVar36 = __s_00 + 0xb;
              if ((__s_00[0xb] == 9) || (__s_00[0xb] == 0x20)) {
                do {
                  do {
                    pbVar36 = pbVar36 + 1;
                  } while (*pbVar36 == 0x20);
                } while (*pbVar36 == 9);
              }
              iVar9 = bdfHexByte(pbVar36);
              bVar7 = bdfHexByte(pbVar36 + 2);
              local_1168[5] = (ushort)bVar7 + (short)(iVar9 << 8);
              __s_00 = (byte *)bdfGetLine(param_1,local_848,0x400);
            }
            iVar9 = local_10cc;
            bVar40 = false;
            bVar38 = __s_00 == (byte *)0x0;
            if (bVar38) {
LAB_0011a141:
              bdfError("missing \'BITMAP\'\n");
              goto LAB_0011942c;
            }
            lVar17 = 6;
            pbVar36 = (byte *)"BITMAP";
            do {
              if (lVar17 == 0) break;
              lVar17 = lVar17 + -1;
              bVar40 = *__s_00 < *pbVar36;
              bVar38 = *__s_00 == *pbVar36;
              __s_00 = __s_00 + (ulong)bVar41 * -2 + 1;
              pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
            } while (bVar38);
            cVar33 = (!bVar40 && !bVar38) - bVar40;
            iVar35 = (int)cVar33;
            puVar20 = (uint *)local_8b8;
            if (cVar33 != '\0') goto LAB_0011a141;
            do {
              puVar19 = puVar20;
              uVar23 = *puVar19 + 0xfefefeff & ~*puVar19;
              uVar10 = uVar23 & 0x80808080;
              bVar7 = (byte)uVar10;
              puVar20 = puVar19 + 1;
            } while (uVar10 == 0);
            bVar40 = (uVar23 & 0x8080) == 0;
            if (bVar40) {
              bVar7 = (byte)(uVar10 >> 0x10);
            }
            if (bVar40) {
              puVar20 = (uint *)((long)puVar19 + 6);
            }
            if ((long)puVar20 + ((-3 - (ulong)CARRY1(bVar7,bVar7)) - (long)local_8b8) == 1) {
              if ((byte)(local_8b8[0] - 0x30U) < 10) {
                *(int *)(param_3 + 0x41c) = *(int *)(param_3 + 0x41c) + 1;
                *(int *)(param_3 + 0x420) = *(int *)(param_3 + 0x420) + local_10d8;
              }
              else {
                if (local_8b8[0] == 'x') {
                  iVar12 = local_10c4 + local_10cc;
                  if (local_10c4 + local_10cc < 1) {
                    iVar12 = local_10cc;
                  }
                  *(int *)(param_3 + 0x424) = iVar12;
                }
              }
            }
            if ((int)uVar25 == 0) {
              sVar5 = (short)local_10c8;
              sVar31 = (short)local_10cc + (short)local_10c4;
              sVar8 = -(short)local_10c4;
              *local_1168 = sVar5;
              local_1168[1] = (short)local_10d0 + sVar5;
              local_1168[3] = sVar31;
              local_1168[4] = sVar8;
              iVar9 = (int)(short)((short)local_10d0 + sVar5) - (int)sVar5;
              uVar23 = (int)sVar8 + (int)sVar31;
              local_1168[2] = (short)local_10d8;
              *(undefined8 *)(local_1168 + 8) = 0;
              if (param_6 == 1) {
                local_1140 = iVar9 + 7 >> 3;
LAB_00119b70:
                local_1104 = uVar23 * local_1140;
                if (local_1104 < 1) {
                  local_1158 = (void *)0x0;
                  goto LAB_001199ed;
                }
                local_1158 = malloc((long)local_1104);
                if (local_1158 != (void *)0x0) goto LAB_001199ed;
                bdfError("Couldn\'t allocate picture (%d*%d)\n",(ulong)local_1140,(ulong)uVar23);
LAB_00119bb2:
                *(undefined8 *)(local_1168 + 8) = 0;
              }
              else {
                if (param_6 == 2) {
                  local_1140 = iVar9 + 0xf >> 3 & 0xfffffffe;
                  goto LAB_00119b70;
                }
                if (param_6 == 4) {
                  local_1140 = iVar9 + 0x1f >> 3 & 0xfffffffc;
                  goto LAB_00119b70;
                }
                if (param_6 == 8) {
                  local_1140 = iVar9 + 0x3f >> 3 & 0xfffffff8;
                  goto LAB_00119b70;
                }
                local_1104 = 0;
                local_1140 = 0;
                local_1158 = (void *)0x0;
LAB_001199ed:
                *(void **)(local_1168 + 8) = local_1158;
                if (local_1198 != (void **)0x0) {
                  lVar17 = 0;
                  uVar30 = iVar9 + 7 >> 3;
                  iVar35 = *(int *)local_1198;
                  uVar10 = uVar30;
                  do {
                    *(uint *)((long)local_1198 + lVar17 * 4) = iVar35 + uVar10 * uVar23;
                    while( true ) {
                      lVar17 = lVar17 + 1;
                      iVar35 = *(int *)((long)local_1198 + lVar17 * 4);
                      uVar10 = uVar30;
                      if (((lVar17 == 0) ||
                          (iVar12 = (int)lVar17, uVar10 = iVar9 + 0xf >> 3 & 0xfffffffe, iVar12 == 1
                          )) || (uVar10 = iVar9 + 0x1f >> 3 & 0xfffffffc, iVar12 == 2)) break;
                      *(uint *)((long)local_1198 + lVar17 * 4) =
                           iVar35 + (iVar9 + 0x3f >> 3 & 0xfffffff8U) * uVar23;
                      if (iVar12 == 3) goto LAB_00119bf2;
                    }
                  } while( true );
                }
LAB_00119bf2:
                iVar35 = iVar9 + 7 >> 3;
                if ((int)uVar23 < 1) {
                  if (uVar23 == 0) {
                    uVar25 = 0;
                    goto LAB_00119e7a;
                  }
LAB_00119e98:
                  bdfError("missing \'ENDCHAR\'\n");
LAB_00119d09:
                  if (local_1158 != (void *)0x0) {
                    free(local_1158);
                  }
                  goto LAB_00119bb2;
                }
                local_1130 = 0;
                uVar10 = 0xff << (8 - ((byte)iVar9 & 7) & 0x1f);
                bVar7 = (byte)uVar10;
                uVar30 = (local_1140 - iVar35) - 1;
                lVar17 = (long)local_1158 + 1;
                do {
                  __s_00 = (byte *)bdfGetLine(param_1,local_448,0x400);
                  if (__s_00 == (byte *)0x0) goto LAB_00119e98;
                  bVar40 = false;
                  bVar38 = iVar9 == 0;
                  if (bVar38) {
                    lVar18 = 7;
                    pbVar36 = __s_00;
                    pbVar29 = (byte *)"ENDCHAR";
                    do {
                      if (lVar18 == 0) break;
                      lVar18 = lVar18 + -1;
                      bVar40 = *pbVar36 < *pbVar29;
                      bVar38 = *pbVar36 == *pbVar29;
                      pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
                      pbVar29 = pbVar29 + (ulong)bVar41 * -2 + 1;
                    } while (bVar38);
                    bVar40 = (!bVar40 && !bVar38) == bVar40;
                    if (bVar40) goto LAB_00119ccc;
                  }
                  else {
                    _iVar11 = strlen((char *)__s_00);
                    iVar11 = (int)_iVar11;
                    iVar12 = iVar11;
                    if ((_iVar11 & 1) != 0) {
                      bdfError("odd number of characters in hex encoding\n");
                      iVar12 = iVar11 + 1;
                      __s_00[iVar11] = 0x30;
                      __s_00[iVar12] = 0;
                    }
                    iVar12 = iVar12 >> 1;
                    iVar11 = iVar12;
                    if (iVar35 <= iVar12) {
                      iVar11 = iVar35;
                    }
                    if (0 < iVar11) {
                      iVar24 = (int)uVar25;
                      puVar16 = (undefined *)((long)local_1158 + (long)iVar24);
                      pbVar36 = __s_00;
                      do {
                        puVar27 = puVar16 + 1;
                        uVar6 = bdfHexByte(pbVar36);
                        *puVar16 = uVar6;
                        puVar16 = puVar27;
                        pbVar36 = pbVar36 + 2;
                      } while (puVar27 !=
                               (undefined *)((ulong)(iVar11 - 1U) + (long)iVar24 + lVar17));
                      uVar25 = (ulong)(iVar24 + 1 + (iVar11 - 1U));
                    }
                    iVar11 = (int)uVar25;
                    if (iVar12 < iVar35) {
                      if (0 < iVar35 - iVar12) {
                        uVar1 = (iVar35 - iVar12) - 1;
                        puVar16 = (undefined *)((long)local_1158 + (long)iVar11);
                        do {
                          *puVar16 = 0;
                          puVar16 = puVar16 + 1;
                        } while (puVar16 != (undefined *)((ulong)uVar1 + lVar17 + (long)iVar11));
                        uVar25 = (ulong)(iVar11 + 1 + uVar1);
                      }
                    }
                    else {
                      if (bVar7 != 0) {
                        pbVar36 = (byte *)((long)local_1158 + (long)iVar11 + -1);
                        bVar2 = *pbVar36;
                        if ((~(uVar10 & 0xff) & (uint)bVar2) != 0) {
                          *pbVar36 = bVar2 & bVar7;
                        }
                      }
                    }
                    if ((iVar35 < (int)local_1140) && (0 < (int)(local_1140 - iVar35))) {
                      iVar12 = (int)uVar25;
                      puVar16 = (undefined *)((long)local_1158 + (long)iVar12);
                      do {
                        *puVar16 = 0;
                        puVar16 = puVar16 + 1;
                      } while ((undefined *)((ulong)uVar30 + lVar17 + (long)iVar12) != puVar16);
                      uVar25 = (ulong)(iVar12 + 1 + uVar30);
                    }
                  }
                  local_1130 = local_1130 + 1;
                } while (uVar23 != local_1130);
                iVar9 = strncmp((char *)__s_00,"ENDCHAR",7);
                bVar40 = iVar9 == 0;
                if (!bVar40) {
LAB_00119e7a:
                  local_1138 = local_448;
                  __s_00 = (byte *)bdfGetLine(param_1,local_1138,0x400);
                  bVar40 = __s_00 == (byte *)0x0;
                  if (bVar40) goto LAB_00119e98;
                }
LAB_00119ccc:
                bVar38 = false;
                lVar17 = 7;
                pbVar36 = (byte *)"ENDCHAR";
                do {
                  if (lVar17 == 0) break;
                  lVar17 = lVar17 + -1;
                  bVar38 = *__s_00 < *pbVar36;
                  bVar40 = *__s_00 == *pbVar36;
                  __s_00 = __s_00 + (ulong)bVar41 * -2 + 1;
                  pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
                } while (bVar40);
                if ((!bVar38 && !bVar40) != bVar38) goto LAB_00119e98;
                if ((int)uVar25 != local_1104) {
                  bdfError("bytes != rows * bytes_per_row (%d != %d * %d)\n",uVar25,(ulong)uVar23);
                  goto LAB_00119d09;
                }
                if (local_1158 != (void *)0x0) {
                  if (param_4 == 0) {
                    BitOrderInvert(local_1158,uVar25);
                  }
                  if (param_4 != param_5) {
                    if (param_7 == 2) {
                      TwoByteSwap(local_1158,uVar25);
                    }
                    else {
                      if (param_7 == 4) {
                        FourByteSwap(local_1158,uVar25);
                      }
                    }
                  }
                }
              }
              local_1168 = local_1168 + 0xc;
              local_1150 = local_1150 + 1;
            }
            else {
              do {
                __s_00 = (byte *)bdfGetLine(param_1,local_448,0x400);
                iVar35 = iVar35 + 1;
                bVar40 = false;
                bVar38 = __s_00 == (byte *)0x0;
                if (bVar38) goto LAB_001198d3;
                lVar17 = 7;
                pbVar36 = (byte *)"ENDCHAR";
                do {
                  if (lVar17 == 0) break;
                  lVar17 = lVar17 + -1;
                  bVar40 = *__s_00 < *pbVar36;
                  bVar38 = *__s_00 == *pbVar36;
                  __s_00 = __s_00 + (ulong)bVar41 * -2 + 1;
                  pbVar36 = pbVar36 + (ulong)bVar41 * -2 + 1;
                } while (bVar38);
              } while ((iVar35 <= iVar9) && ((!bVar40 && !bVar38) != bVar40));
              if ((iVar35 != 1) && ((!bVar40 && !bVar38) != bVar40)) {
                bdfError("Error in bitmap, missing \'ENDCHAR\'\n");
              }
            }
LAB_001198d3:
            __s_00 = (byte *)bdfGetLine(param_1,local_848,0x400);
            uVar21 = (ulong)local_10dc;
            if ((int)local_10dc <= (int)local_1150) {
              uVar25 = (ulong)(local_1108 + local_1150);
              goto LAB_0011a23a;
            }
            bVar40 = __s_00 == (byte *)0x0;
          } while (!bVar40);
          uVar25 = (ulong)(local_1108 + local_1150);
          if (local_10dc == local_1108 + local_1150) {
            local_10dc = local_1150;
            *(uint *)(lVar4 + 4) = local_1150;
            goto LAB_0011992f;
          }
        }
      }
LAB_0011a117:
      bdfError("%d too few characters\n",(ulong)(uint)((int)uVar21 - (int)uVar25),uVar21,uVar25);
    }
  }
  else {
    local_10b8[0] = (void *)0x0;
    bdfError("Couldn\'t allocate pCI (%d*%d)\n",(ulong)local_10dc,0x18);
  }
LAB_0011942c:
  while( true ) {
    ppvVar26 = ppvVar26 + 1;
    if (local_10b8[0] != (void *)0x0) {
      free(local_10b8[0]);
    }
    if ((void **)local_8b8 == ppvVar26) break;
    local_10b8[0] = *ppvVar26;
  }
  uVar14 = 0;
LAB_001193d7:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar14;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Could not reconcile some variable overlaps

undefined8
bdfReadFont(long param_1,undefined8 param_2,uint param_3,uint param_4,uint param_5,uint param_6)

{
  byte bVar1;
  ushort uVar2;
  ushort uVar3;
  ushort uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  char *__s;
  void *pvVar9;
  void *pvVar10;
  void *pvVar11;
  ushort **ppuVar12;
  long lVar13;
  undefined8 uVar14;
  long lVar15;
  uint *puVar16;
  uint *puVar17;
  undefined8 uVar18;
  long lVar19;
  byte *pbVar20;
  uint uVar21;
  undefined8 *puVar22;
  byte *pbVar23;
  long *plVar24;
  char cVar25;
  byte *__s_00;
  long in_FS_OFFSET;
  bool bVar26;
  bool bVar27;
  byte bVar28;
  undefined local_1540;
  undefined local_1538;
  int local_1530;
  undefined local_152c;
  short local_14d8;
  short sStack5334;
  short sStack5332;
  short sStack5330;
  short sStack5328;
  undefined2 uStack5326;
  undefined4 uStack5324;
  void *local_14c8;
  undefined8 local_14b8 [2];
  undefined local_14a8 [1024];
  float local_10a8;
  int local_10a4;
  int local_10a0;
  int local_109c;
  int local_1098;
  int local_1094;
  undefined8 *local_1090;
  undefined8 *local_1088;
  long local_1080;
  long local_1078;
  undefined8 *local_1070;
  undefined8 *local_1068;
  undefined8 *local_1060;
  undefined8 *local_1058;
  char local_1050;
  char local_104f;
  char local_104e;
  uint local_1048 [256];
  char local_c48 [1024];
  byte local_848 [1024];
  undefined local_448 [1032];
  long local_40;
  
  bVar28 = 0;
  *(undefined8 *)(param_1 + 0x98) = 0;
  lVar15 = 0x8e;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  puVar22 = local_14b8;
  while (lVar15 != 0) {
    lVar15 = lVar15 + -1;
    *puVar22 = 0;
    puVar22 = puVar22 + 1;
  }
  bdfFileLineNum = 0;
  __s = (char *)bdfGetLine(param_2,local_448,0x400);
  if (__s == (char *)0x0) {
LAB_0011a575:
    bdfError("bad \'STARTFONT\'\n");
  }
  else {
    iVar5 = sscanf(__s,"STARTFONT %s",local_848);
    bVar26 = iVar5 == 0;
    bVar27 = iVar5 == 1;
    if (!bVar27) goto LAB_0011a575;
    lVar15 = 4;
    __s_00 = local_848;
    pbVar20 = &DAT_00130a79;
    do {
      if (lVar15 == 0) break;
      lVar15 = lVar15 + -1;
      bVar26 = *__s_00 < *pbVar20;
      bVar27 = *__s_00 == *pbVar20;
      __s_00 = __s_00 + (ulong)bVar28 * -2 + 1;
      pbVar20 = pbVar20 + (ulong)bVar28 * -2 + 1;
    } while (bVar27);
    if ((!bVar26 && !bVar27) != bVar26) goto LAB_0011a575;
    __s = (char *)bdfGetLine(param_2,local_448,0x400);
    if ((__s == (char *)0x0) || (iVar5 = sscanf(__s,"FONT %[^\n]",local_14a8), iVar5 != 1)) {
      bdfError("bad \'FONT\'\n");
      goto LAB_0011a583;
    }
    __s_00 = (byte *)bdfGetLine(param_2,local_448,0x400);
    bVar26 = false;
    bVar27 = __s_00 == (byte *)0x0;
    if (bVar27) {
LAB_0011a658:
      bdfError("missing \'SIZE\'\n");
    }
    else {
      lVar15 = 4;
      pbVar20 = __s_00;
      pbVar23 = (byte *)0x1304f3;
      do {
        if (lVar15 == 0) break;
        lVar15 = lVar15 + -1;
        bVar26 = *pbVar20 < *pbVar23;
        bVar27 = *pbVar20 == *pbVar23;
        pbVar20 = pbVar20 + (ulong)bVar28 * -2 + 1;
        pbVar23 = pbVar23 + (ulong)bVar28 * -2 + 1;
      } while (bVar27);
      if ((!bVar26 && !bVar27) != bVar26) goto LAB_0011a658;
      iVar5 = sscanf((char *)__s_00,"SIZE %f%d%d",&local_10a8,&local_10a4,&local_10a0);
      if (iVar5 == 3) {
        if (((local_10a8 < 1.00000000) || (local_10a4 < 1)) || (local_10a0 < 1)) {
          bdfError(0x3f800000,"SIZE values must be > 0\n");
        }
        else {
          __s = (char *)bdfGetLine(0x3f800000,param_2,local_448,0x400);
          if ((__s == (char *)0x0) || (iVar5 = strncmp(__s,"FONTBOUNDINGBOX",0xf), iVar5 != 0)) {
            bdfError("missing \'FONTBOUNDINGBOX\'\n");
          }
          else {
            pvVar9 = calloc(1,0x40);
            if (pvVar9 == (void *)0x0) {
              bdfError("Couldn\'t allocate bitmapFontRec (%d)\n",0x40);
            }
            else {
              *(void **)(param_1 + 0x98) = pvVar9;
              *(undefined8 *)((long)pvVar9 + 0x10) = 0;
              *(undefined8 *)((long)pvVar9 + 0x18) = 0;
              *(undefined8 *)((long)pvVar9 + 0x20) = 0;
              *(undefined8 *)((long)pvVar9 + 0x28) = 0;
              *(undefined8 *)((long)pvVar9 + 0x30) = 0;
              puVar22 = (undefined8 *)calloc(1,0x78);
              *(undefined8 **)((long)pvVar9 + 0x38) = puVar22;
              if (puVar22 == (undefined8 *)0x0) {
                bdfError("Couldn\'t allocate bitmapExtra (%d)\n",0x78);
              }
              else {
                *puVar22 = 0;
                puVar22[1] = 0;
                __s_00 = (byte *)bdfGetLine(param_2,local_448,0x400);
                bVar26 = false;
                bVar27 = __s_00 == (byte *)0x0;
                if (!bVar27) {
                  lVar15 = 0xf;
                  pbVar20 = __s_00;
                  pbVar23 = (byte *)"STARTPROPERTIES";
                  do {
                    if (lVar15 == 0) break;
                    lVar15 = lVar15 + -1;
                    bVar26 = *pbVar20 < *pbVar23;
                    bVar27 = *pbVar20 == *pbVar23;
                    pbVar20 = pbVar20 + (ulong)bVar28 * -2 + 1;
                    pbVar23 = pbVar23 + (ulong)bVar28 * -2 + 1;
                  } while (bVar27);
                  cVar25 = (!bVar26 && !bVar27) - bVar26;
                  iVar5 = (int)cVar25;
                  if (cVar25 == '\0') {
                    iVar6 = sscanf((char *)__s_00,"STARTPROPERTIES %d");
                    if (iVar6 != 1) {
                      bdfError("bad \'STARTPROPERTIES\'\n");
                      goto LAB_0011a583;
                    }
                    *(undefined8 *)(param_1 + 0x50) = 0;
                    *(undefined4 *)(param_1 + 0x4c) = 0;
                    pvVar10 = malloc((long)(CONCAT22(sStack5334,local_14d8) + 6));
                    *(void **)(param_1 + 0x58) = pvVar10;
                    if (pvVar10 == (void *)0x0) {
                      bdfError("Couldn\'t allocate stringProps (%d*%d)\n",
                               (ulong)(CONCAT22(sStack5334,local_14d8) + 6),4);
                    }
                    else {
                      pvVar11 = calloc((long)(CONCAT22(sStack5334,local_14d8) + 6),0x10);
                      *(void **)(param_1 + 0x50) = pvVar11;
                      if (pvVar11 == (void *)0x0) {
                        bdfError("Couldn\'t allocate props (%d*%d)\n",
                                 (ulong)(CONCAT22(sStack5334,local_14d8) + 6),0x10);
                      }
                      else {
                        iVar6 = CONCAT22(sStack5334,local_14d8);
                        while (0 < iVar6) {
                          __s_00 = (byte *)bdfGetLine(param_2,local_448,0x400);
                          bVar26 = false;
                          bVar27 = __s_00 == (byte *)0x0;
                          if (bVar27) {
LAB_0011ac25:
                            bdfError("\"STARTPROPERTIES %d\" followed by only %d properties\n",
                                     (ulong)CONCAT22(sStack5334,local_14d8),
                                     (ulong)((CONCAT22(sStack5334,local_14d8) - (iVar6 + -1)) - 1));
                            goto LAB_0011a9e0;
                          }
                          lVar15 = 0xd;
                          pbVar20 = __s_00;
                          pbVar23 = (byte *)"ENDPROPERTIES";
                          do {
                            if (lVar15 == 0) break;
                            lVar15 = lVar15 + -1;
                            bVar26 = *pbVar20 < *pbVar23;
                            bVar27 = *pbVar20 == *pbVar23;
                            pbVar20 = pbVar20 + (ulong)bVar28 * -2 + 1;
                            pbVar23 = pbVar23 + (ulong)bVar28 * -2 + 1;
                          } while (bVar27);
                          if ((!bVar26 && !bVar27) == bVar26) goto LAB_0011ac25;
                          bVar1 = *__s_00;
                          if (bVar1 != 0) {
                            ppuVar12 = __ctype_b_loc();
                            do {
                              if ((*(byte *)((long)*ppuVar12 + (ulong)bVar1 * 2 + 1) & 0x20) == 0)
                              break;
                              __s_00 = __s_00 + 1;
                              bVar1 = *__s_00;
                            } while (bVar1 != 0);
                          }
                          iVar7 = sscanf((char *)__s_00,"%s%s%s",local_1048,local_c48,local_848);
                          puVar16 = local_1048;
                          if (iVar7 == 2) {
                            if (local_c48[0] == '\"') {
                              *(undefined *)((long)pvVar10 + (long)iVar5) = 1;
                              do {
                                uVar8 = *puVar16;
                                puVar16 = puVar16 + 1;
                                uVar8 = uVar8 + 0xfefefeff & ~uVar8 & 0x80808080;
                              } while (uVar8 == 0);
                              goto LAB_0011aaa2;
                            }
                            iVar7 = bdfIsInteger(local_c48);
                            if (iVar7 == 0) goto LAB_0011ad24;
                            *(undefined *)((long)pvVar10 + (long)iVar5) = 0;
                            lVar15 = strtol(local_c48,(char **)0x0,10);
                            plVar24 = (long *)((long)iVar5 * 0x10 + (long)pvVar11);
                            plVar24[1] = (long)(int)lVar15;
                          }
                          else {
                            if (iVar7 != 3) {
                              bdfError("missing \'%s\' parameter value\n",local_1048);
                              goto LAB_0011a9e0;
                            }
                            if (local_c48[0] != '\"') {
LAB_0011ad24:
                              bdfError("invalid \'%s\' parameter value\n",local_1048);
                              goto LAB_0011a9e0;
                            }
                            *(undefined *)((long)pvVar10 + (long)iVar5) = 1;
                            do {
                              uVar8 = *puVar16;
                              puVar16 = puVar16 + 1;
                              uVar8 = uVar8 + 0xfefefeff & ~uVar8 & 0x80808080;
                            } while (uVar8 == 0);
LAB_0011aaa2:
                            bVar26 = (uVar8 & 0x8080) == 0;
                            if (bVar26) {
                              uVar8 = uVar8 >> 0x10;
                            }
                            puVar17 = puVar16;
                            if (bVar26) {
                              puVar17 = (uint *)((long)puVar16 + 2);
                            }
                            lVar15 = (long)puVar17 +
                                     ((-3 - (ulong)CARRY1((byte)uVar8,(byte)uVar8)) -
                                     (long)local_1048);
                            lVar15 = bdfGetPropertyValue(__s_00 + lVar15 + 1,
                                                         (uint *)((long)puVar16 + 2),lVar15,
                                                         (ulong)(uVar8 & 0xffffff00));
                            plVar24 = (long *)((long)iVar5 * 0x10 + (long)pvVar11);
                            plVar24[1] = lVar15;
                            if (lVar15 == 0) goto LAB_0011a9e0;
                          }
                          lVar15 = bdfForceMakeAtom(local_1048,0);
                          *plVar24 = lVar15;
                          if (lVar15 == 0) {
                            bdfError("Empty property name.\n");
                            goto LAB_0011a9e0;
                          }
                          iVar7 = bdfSpecialProperty(param_1,plVar24,
                                                     (ulong)(uint)(int)*(char *)((long)pvVar10 +
                                                                                (long)iVar5));
                          iVar5 = iVar5 + (uint)(iVar7 == 0);
                          iVar6 = iVar6 + -1;
                        }
                        __s_00 = (byte *)bdfGetLine(param_2,local_448,0x400);
                        if (__s_00 != (byte *)0x0) {
                          uVar18 = 0x11ac9c;
                          iVar6 = strncmp((char *)__s_00,"ENDPROPERTIES",0xd);
                          if (iVar6 == 0) {
                            if ((local_1050 == '\0') || (local_104f == '\0')) {
                              bdfError("missing \'FONT_ASCENT\' or \'FONT_DESCENT\' properties\n");
                              goto LAB_0011a9e0;
                            }
                            if (*(long *)((long)pvVar9 + 0x38) != 0) {
                              *(undefined2 *)(*(long *)((long)pvVar9 + 0x38) + 0x60) =
                                   *(undefined2 *)(param_1 + 0x48);
                              *(undefined2 *)(*(long *)((long)pvVar9 + 0x38) + 0x62) =
                                   *(undefined2 *)(param_1 + 0x4a);
                            }
                            if (local_1088 == (undefined8 *)0x0) {
                              uVar18 = 0x11b303;
                              uVar14 = bdfForceMakeAtom(0x1304fc,0);
                              lVar15 = (long)iVar5;
                              local_1088 = (undefined8 *)(lVar15 * 0x10 + (long)pvVar11);
                              iVar5 = iVar5 + 1;
                              *local_1088 = uVar14;
                              local_1088[1] = (long)(int)(local_10a8 * 10.00000000);
                              *(undefined *)((long)pvVar10 + lVar15) = 0;
                            }
                            if (local_1090 == (undefined8 *)0x0) {
                              uVar18 = bdfForceMakeAtom(0x130a43,0);
                              lVar15 = (long)iVar5;
                              local_1090 = (undefined8 *)(lVar15 * 0x10 + (long)pvVar11);
                              *local_1090 = uVar18;
                              uVar18 = 0x11b2c5;
                              iVar7 = bdfForceMakeAtom(local_14a8,0);
                              local_1090[1] = (long)iVar7;
                              iVar5 = iVar5 + 1;
                              *(undefined *)((long)pvVar10 + lVar15) = 1;
                            }
                            if (local_1060 == (undefined8 *)0x0) {
                              uVar18 = 0x11b51d;
                              uVar14 = bdfForceMakeAtom(0x1314cb,0);
                              lVar15 = (long)iVar5;
                              local_1060 = (undefined8 *)(lVar15 * 0x10 + (long)pvVar11);
                              iVar5 = iVar5 + 1;
                              *local_1060 = uVar14;
                              local_1060[1] = 0xffffffffffffffff;
                              *(undefined *)((long)pvVar10 + lVar15) = 0;
                            }
                            if ((local_1070 == (undefined8 *)0x0) && (local_10a4 == local_10a0)) {
                              uVar18 = 0x11b4b2;
                              uVar14 = bdfForceMakeAtom("RESOLUTION",0);
                              lVar15 = (long)iVar5;
                              local_1070 = (undefined8 *)(lVar15 * 0x10 + (long)pvVar11);
                              iVar5 = iVar5 + 1;
                              *local_1070 = uVar14;
                              local_1070[1] =
                                   (long)(int)(((double)local_10a4 * 100.00000000) / 72.27000000);
                              *(undefined *)((long)pvVar10 + lVar15) = 0;
                            }
                            if (local_1080 == 0) {
                              uVar18 = 0x11b44e;
                              uVar14 = bdfForceMakeAtom("RESOLUTION_X",0);
                              lVar15 = (long)iVar5;
                              local_1070 = (undefined8 *)(lVar15 * 0x10 + (long)pvVar11);
                              iVar5 = iVar5 + 1;
                              *local_1070 = uVar14;
                              local_1070[1] = (long)local_10a4;
                              *(undefined *)((long)pvVar10 + lVar15) = 0;
                            }
                            if (local_1078 == 0) {
                              uVar18 = 0x11b3fe;
                              uVar14 = bdfForceMakeAtom("RESOLUTION_Y",0);
                              lVar15 = (long)iVar5;
                              local_1070 = (undefined8 *)(lVar15 * 0x10 + (long)pvVar11);
                              iVar5 = iVar5 + 1;
                              *local_1070 = uVar14;
                              local_1070[1] = (long)local_10a0;
                              *(undefined *)((long)pvVar10 + lVar15) = 0;
                            }
                            if (local_1068 == (undefined8 *)0x0) {
                              uVar18 = 0x11b3b2;
                              uVar14 = bdfForceMakeAtom(0x1314a7,0);
                              lVar15 = (long)iVar5;
                              local_1068 = (undefined8 *)(lVar15 * 0x10 + (long)pvVar11);
                              iVar5 = iVar5 + 1;
                              *local_1068 = uVar14;
                              local_1068[1] = 0xffffffffffffffff;
                              *(undefined *)((long)pvVar10 + lVar15) = 0;
                            }
                            if (local_1058 == (undefined8 *)0x0) {
                              uVar18 = 0x11b366;
                              uVar14 = bdfForceMakeAtom(0x13139f,0);
                              lVar15 = (long)iVar5;
                              local_1058 = (undefined8 *)(lVar15 * 0x10 + (long)pvVar11);
                              iVar5 = iVar5 + 1;
                              *local_1058 = uVar14;
                              local_1058[1] = 0xffffffffffffffff;
                              *(undefined *)((long)pvVar10 + lVar15) = 0;
                            }
                            *(int *)(param_1 + 0x4c) = iVar5;
                            iVar5 = bdfReadCharacters(param_2,param_1,local_14b8,(ulong)param_3,
                                                      (ulong)param_4,(ulong)param_5,(ulong)param_6,
                                                      uVar18);
                            if (iVar5 == 0) goto LAB_0011a583;
                            if (local_104e != '\0') {
                              uVar2 = *(ushort *)(param_1 + 0x10);
                              uVar4 = uVar2 >> 8;
                              if ((*(ushort *)(param_1 + 0xc) <= uVar4) &&
                                 (uVar4 < *(ushort *)(param_1 + 0xe) ||
                                  uVar4 == *(ushort *)(param_1 + 0xe))) {
                                uVar3 = *(ushort *)(param_1 + 8);
                                if ((uVar3 <= (uVar2 & 0xff)) &&
                                   ((uVar2 & 0xff) <= *(ushort *)(param_1 + 10))) {
                                  uVar8 = ((uint)(byte)uVar2 - (uint)uVar3) +
                                          ((uint)uVar4 - (uint)*(ushort *)(param_1 + 0xc)) *
                                          (((uint)*(ushort *)(param_1 + 10) - (uint)uVar3) + 1);
                                  lVar15 = *(long *)(*(long *)((long)pvVar9 + 0x28) +
                                                    (ulong)(uVar8 >> 7) * 8);
                                  if (lVar15 == 0) {
                                    uVar18 = 0;
                                  }
                                  else {
                                    uVar18 = *(undefined8 *)(lVar15 + (ulong)(uVar8 & 0x7f) * 8);
                                  }
                                  *(undefined8 *)((long)pvVar9 + 0x30) = uVar18;
                                }
                              }
                            }
                            local_1540 = (undefined)param_3;
                            *(undefined *)(param_1 + 0x60) = local_1540;
                            local_1530._0_1_ = (undefined)param_4;
                            *(undefined *)(param_1 + 0x61) = (undefined)local_1530;
                            local_1538 = (undefined)param_5;
                            *(undefined *)(param_1 + 0x62) = local_1538;
                            local_152c = (undefined)param_6;
                            *(undefined *)(param_1 + 99) = local_152c;
                            *(byte *)(param_1 + 0x13) = *(byte *)(param_1 + 0x13) & 0xfb | 2;
                            bitmapComputeFontBounds(param_1);
                            iVar5 = FontCouldBeTerminal();
                            if (iVar5 != 0) {
                              sStack5328 = *(short *)(param_1 + 0x4a);
                              sStack5330 = *(short *)(param_1 + 0x48);
                              sStack5334 = *(short *)(param_1 + 0x28);
                              lVar15 = *(long *)(param_1 + 0x98);
                              local_14c8 = (void *)0x0;
                              local_14d8 = 0;
                              uStack5326 = 0;
                              uStack5324 = 0;
                              iVar5 = (int)sStack5330 + (int)sStack5328;
                              cVar25 = *(char *)(param_1 + 0x62);
                              if (cVar25 == '\x01') {
                                local_1530 = ((int)sStack5334 + 7 >> 3) * iVar5;
                              }
                              else {
                                if (cVar25 == '\x02') {
                                  local_1530 = ((int)sStack5334 + 0xf >> 3 & 0xfffffffeU) * iVar5;
                                }
                                else {
                                  if (cVar25 == '\x04') {
                                    local_1530 = ((int)sStack5334 + 0x1f >> 3 & 0xfffffffcU) * iVar5
                                    ;
                                  }
                                  else {
                                    local_1530 = 0;
                                    if (cVar25 == '\b') {
                                      local_1530 = ((int)sStack5334 + 0x3f >> 3 & 0xfffffff8U) *
                                                   iVar5;
                                    }
                                  }
                                }
                              }
                              sStack5332 = sStack5334;
                              if (0 < *(int *)(lVar15 + 4)) {
                                lVar19 = 0;
                                do {
                                  local_14c8 = malloc((long)local_1530);
                                  if (local_14c8 == (void *)0x0) {
                                    bdfError("Couldn\'t allocate bits (%d)\n");
                                    goto LAB_0011b0f2;
                                  }
                                  iVar6 = iVar6 + 1;
                                  FontCharReshape(param_1,*(long *)(lVar15 + 0x10) + lVar19,
                                                  &local_14d8);
                                  lVar13 = *(long *)(lVar15 + 0x10) + lVar19;
                                  uStack5326 = *(undefined2 *)(lVar13 + 10);
                                  free(*(void **)(lVar13 + 0x10));
                                  lVar13 = *(long *)(lVar15 + 0x10);
                                  uVar18 = CONCAT26(sStack5330,
                                                    CONCAT24(sStack5332,
                                                             CONCAT22(sStack5334,local_14d8)));
                                  *(undefined4 *)(lVar13 + lVar19) = CONCAT22(sStack5334,local_14d8)
                                  ;
                                  *(undefined4 *)(lVar13 + lVar19 + 4) =
                                       (int)((ulong)uVar18 >> 0x20);
                                  *(undefined4 *)(lVar13 + lVar19 + 8) =
                                       SUB124(CONCAT210(uStack5326,CONCAT28(sStack5328,uVar18)) >>
                                              0x40,0);
                                  *(undefined4 *)(lVar13 + lVar19 + 0xc) = uStack5324;
                                  *(void **)(lVar13 + 0x10 + lVar19) = local_14c8;
                                  lVar19 = lVar19 + 0x18;
                                } while (iVar6 < *(int *)(lVar15 + 4));
                              }
                              lVar19 = *(long *)(lVar15 + 0x38);
                              if (lVar19 != 0) {
                                iVar6 = (int)sStack5334 - (int)local_14d8;
                                iVar5 = *(int *)(lVar15 + 4);
                                lVar13 = 0;
                                uVar21 = iVar6 + 7 >> 3;
                                uVar8 = uVar21;
                                do {
                                  *(int *)(lVar19 + 0x10 + lVar13 * 4) =
                                       iVar5 * uVar8 * ((int)sStack5330 + (int)sStack5328);
                                  while( true ) {
                                    lVar13 = lVar13 + 1;
                                    iVar5 = *(int *)(lVar15 + 4);
                                    uVar8 = uVar21;
                                    if (((lVar13 == 0) ||
                                        (iVar7 = (int)lVar13, uVar8 = iVar6 + 0xf >> 3 & 0xfffffffe,
                                        iVar7 == 1)) ||
                                       (uVar8 = iVar6 + 0x1f >> 3 & 0xfffffffc, iVar7 == 2)) break;
                                    *(int *)(lVar19 + 0x10 + lVar13 * 4) =
                                         iVar5 * (iVar6 + 0x3f >> 3 & 0xfffffff8U) *
                                                 ((int)sStack5330 + (int)sStack5328);
                                    if (iVar7 == 3) goto LAB_0011b0f2;
                                  }
                                } while( true );
                              }
LAB_0011b0f2:
                              bitmapComputeFontBounds(param_1);
                            }
                            FontComputeInfoAccelerators(param_1 + 8);
                            if (*(long *)((long)pvVar9 + 0x38) == 0) {
                              if ((*(byte *)(param_1 + 0x12) & 4) != 0) goto LAB_0011afaa;
                            }
                            else {
                              FontComputeInfoAccelerators(*(long *)((long)pvVar9 + 0x38) + 0x20);
                              if ((*(byte *)(param_1 + 0x12) & 4) != 0) {
LAB_0011afaa:
                                iVar5 = bitmapAddInkMetrics(param_1);
                                if (iVar5 == 0) {
                                  bdfError("Failed to add bitmap ink metrics\n");
                                  goto LAB_0011a583;
                                }
                              }
                              lVar15 = *(long *)((long)pvVar9 + 0x38);
                              if (lVar15 != 0) {
                                *(byte *)(lVar15 + 0x2a) =
                                     *(byte *)(lVar15 + 0x2a) & 0xdf |
                                     *(byte *)(param_1 + 0x12) & 0x20;
                              }
                            }
                            bitmapComputeFontInkBounds(param_1);
                            if ((local_1068 != (undefined8 *)0x0) && (local_1068[1] == -1)) {
                              lVar15 = (long)local_1094;
                              if (local_1094 == 0) {
                                lVar15 = (long)*(short *)(param_1 + 0x42);
                              }
                              local_1068[1] = lVar15;
                            }
                            if ((local_1058 != (undefined8 *)0x0) && (local_1058[1] == -1)) {
                              if (local_109c == 0) {
                                local_1098 = ((int)*(short *)(param_1 + 0x34) +
                                             (int)*(short *)(param_1 + 0x40)) / 2;
                              }
                              else {
                                local_1098 = local_1098 / local_109c;
                              }
                              local_1058[1] = (long)local_1098;
                            }
                            if ((local_1060 != (undefined8 *)0x0) && (local_1060[1] == -1)) {
                              iVar5 = bitmapComputeWeight(param_1);
                              local_1060[1] = (long)iVar5;
                            }
                            *(undefined8 *)(param_1 + 0x80) = 0;
                            uVar18 = 0x55;
                            *(code **)(param_1 + 0x68) = bitmapGetGlyphs;
                            *(code **)(param_1 + 0x70) = bitmapGetMetrics;
                            *(undefined8 *)(param_1 + 0x78) = 0x1192e0;
                            goto LAB_0011a59a;
                          }
                        }
                        bdfError("missing \'ENDPROPERTIES\'\n");
                      }
                    }
LAB_0011a9e0:
                    if (*(void **)(param_1 + 0x58) != (void *)0x0) {
                      free(*(void **)(param_1 + 0x58));
                      *(undefined8 *)(param_1 + 0x58) = 0;
                    }
                    if (*(void **)(param_1 + 0x50) != (void *)0x0) {
                      free(*(void **)(param_1 + 0x50));
                      *(undefined8 *)(param_1 + 0x50) = 0;
                    }
                    while (bVar26 = __s_00 == (byte *)0x0, !bVar26) {
                      bVar27 = false;
                      lVar15 = 0xd;
                      pbVar20 = (byte *)"ENDPROPERTIES";
                      do {
                        if (lVar15 == 0) break;
                        lVar15 = lVar15 + -1;
                        bVar27 = *__s_00 < *pbVar20;
                        bVar26 = *__s_00 == *pbVar20;
                        __s_00 = __s_00 + (ulong)bVar28 * -2 + 1;
                        pbVar20 = pbVar20 + (ulong)bVar28 * -2 + 1;
                      } while (bVar26);
                      if ((!bVar27 && !bVar26) != bVar27) break;
                      __s_00 = (byte *)bdfGetLine(param_2,local_448,0x400);
                    }
                    goto LAB_0011a583;
                  }
                }
                bdfError("missing \'STARTPROPERTIES\'\n");
              }
            }
          }
        }
      }
      else {
        bdfError("bad \'SIZE\'\n");
      }
    }
  }
LAB_0011a583:
  uVar18 = 0x50;
  if (*(long *)(param_1 + 0x98) != 0) {
    FUN_001191e0(param_1);
  }
LAB_0011a59a:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar18;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong bdfReadFontInfo(undefined4 *param_1,undefined8 param_2)

{
  undefined8 uVar1;
  undefined4 uVar2;
  undefined8 uVar3;
  ulong uVar4;
  long lVar5;
  undefined8 *puVar6;
  long in_FS_OFFSET;
  undefined8 local_d8;
  undefined local_d0 [16];
  undefined local_c0 [16];
  undefined local_b0 [16];
  undefined local_a0 [16];
  undefined4 local_90;
  undefined4 uStack140;
  undefined8 uStack136;
  undefined8 local_80;
  long local_20;
  
  lVar5 = 0x17;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  puVar6 = &local_d8;
  while (lVar5 != 0) {
    lVar5 = lVar5 + -1;
    *puVar6 = 0;
    puVar6 = puVar6 + 1;
  }
  uVar4 = bdfReadFont(&local_d8,param_2,1,0,1,1);
  uVar1 = local_80;
  uVar3 = uStack136;
  uVar2 = uStack140;
  if ((int)uVar4 == 0x55) {
    *param_1 = SUB164(local_d0,0);
    param_1[1] = SUB164(local_d0 >> 0x20,0);
    param_1[2] = SUB164(local_d0 >> 0x40,0);
    param_1[3] = SUB164(local_d0 >> 0x60,0);
    local_80 = 0;
    *(undefined8 *)(param_1 + 0x14) = uVar1;
    param_1[4] = SUB164(local_c0,0);
    param_1[5] = SUB164(local_c0 >> 0x20,0);
    param_1[6] = SUB164(local_c0 >> 0x40,0);
    param_1[7] = SUB164(local_c0 >> 0x60,0);
    param_1[8] = SUB164(local_b0,0);
    param_1[9] = SUB164(local_b0 >> 0x20,0);
    param_1[10] = SUB164(local_b0 >> 0x40,0);
    param_1[0xb] = SUB164(local_b0 >> 0x60,0);
    param_1[0xc] = SUB164(local_a0,0);
    param_1[0xd] = SUB164(local_a0 >> 0x20,0);
    param_1[0xe] = SUB164(local_a0 >> 0x40,0);
    param_1[0xf] = SUB164(local_a0 >> 0x60,0);
    uVar1 = CONCAT44(uStack140,local_90);
    uStack136 = 0;
    uStack140 = 0;
    param_1[0x10] = local_90;
    param_1[0x11] = uVar2;
    param_1[0x12] = (int)uVar3;
    param_1[0x13] = (int)((ulong)uVar3 >> 0x20);
    FUN_001191e0(uVar1,&local_d8);
    uVar4 = uVar4 & 0xffffffff;
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void bdfError(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4_00
             ,undefined8 param_5_00,undefined8 param_6_00)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [8];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined4 local_98;
  undefined4 local_88;
  undefined4 local_78;
  undefined4 local_68;
  undefined4 local_58;
  undefined4 local_48;
  undefined4 local_38;
  undefined4 local_28;
  
  if (in_AL != '\0') {
    local_98 = param_1;
    local_88 = param_2;
    local_78 = param_3;
    local_68 = param_4;
    local_58 = param_5;
    local_48 = param_6;
    local_38 = param_7;
    local_28 = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &stack0x00000008;
  local_d8 = local_c8;
  local_e8 = 8;
  local_e4 = 0x30;
  local_c0 = param_2_00;
  local_b8 = param_3_00;
  local_b0 = param_4_00;
  local_a8 = param_5_00;
  local_a0 = param_6_00;
  __fprintf_chk(stderr,1,0x130fa0,(ulong)bdfFileLineNum);
  __vfprintf_chk(stderr,1,param_1_00,&local_e8);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void bdfWarning(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,
               undefined8 param_4_00,undefined8 param_5_00,undefined8 param_6_00)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [8];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined4 local_98;
  undefined4 local_88;
  undefined4 local_78;
  undefined4 local_68;
  undefined4 local_58;
  undefined4 local_48;
  undefined4 local_38;
  undefined4 local_28;
  
  if (in_AL != '\0') {
    local_98 = param_1;
    local_88 = param_2;
    local_78 = param_3;
    local_68 = param_4;
    local_58 = param_5;
    local_48 = param_6;
    local_38 = param_7;
    local_28 = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &stack0x00000008;
  local_d8 = local_c8;
  local_e8 = 8;
  local_e4 = 0x30;
  local_c0 = param_2_00;
  local_b8 = param_3_00;
  local_b0 = param_4_00;
  local_a8 = param_5_00;
  local_a0 = param_6_00;
  __fprintf_chk(stderr,1,"BDF Warning on line %d: ",(ulong)bdfFileLineNum);
  __vfprintf_chk(stderr,1,param_1_00,&local_e8);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



byte * bdfGetLine(byte **param_1,byte *param_2,int param_3)

{
  int iVar1;
  ulong uVar2;
  long lVar3;
  byte *pbVar4;
  byte *pbVar5;
  bool bVar6;
  bool bVar7;
  byte bVar8;
  
  bVar8 = 0;
  pbVar5 = param_2;
LAB_0011b843:
  iVar1 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 != 0) goto LAB_0011b88a;
LAB_0011b850:
  uVar2 = (*(code *)param_1[0x402])(param_1);
  *(int *)((long)param_1 + 0xc) = (int)uVar2;
  pbVar4 = pbVar5;
  if ((int)uVar2 == -1) {
    *pbVar5 = 0;
    return (byte *)0;
  }
  do {
    pbVar5 = pbVar4;
    if ((int)uVar2 == 0xd) goto LAB_0011b843;
    if ((int)uVar2 == 10) {
      bdfFileLineNum = bdfFileLineNum + 1;
      *pbVar4 = 0;
LAB_0011b8be:
      bVar6 = pbVar4 < param_2;
      bVar7 = pbVar4 == param_2;
      pbVar5 = param_2;
      if (bVar7) goto LAB_0011b843;
      lVar3 = 7;
      pbVar4 = (byte *)"COMMENT";
      break;
    }
    if ((long)(param_3 + -1) <= (long)(pbVar4 + -(long)param_2)) {
      *pbVar4 = 0;
      goto LAB_0011b8be;
    }
    pbVar5 = pbVar4 + 1;
    *pbVar4 = (byte)uVar2;
    iVar1 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar1 + -1;
    if (iVar1 == 0) goto LAB_0011b850;
LAB_0011b88a:
    pbVar4 = *param_1;
    *param_1 = pbVar4 + 1;
    uVar2 = (ulong)*pbVar4;
    pbVar4 = pbVar5;
  } while( true );
  while( true ) {
    lVar3 = lVar3 + -1;
    bVar6 = *pbVar5 < *pbVar4;
    bVar7 = *pbVar5 == *pbVar4;
    pbVar5 = pbVar5 + (ulong)bVar8 * -2 + 1;
    pbVar4 = pbVar4 + (ulong)bVar8 * -2 + 1;
    if (!bVar7) break;
    if (lVar3 == 0) break;
  }
  pbVar5 = param_2;
  if ((!bVar6 && !bVar7) != bVar6) {
    return param_2;
  }
  goto LAB_0011b843;
}



long bdfForceMakeAtom(char *param_1,int *param_2)

{
  size_t sVar1;
  long lVar2;
  
  sVar1 = strlen(param_1);
  if (param_2 != (int *)0x0) {
    *param_2 = *param_2 + (int)sVar1 + 1;
  }
  lVar2 = MakeAtom(param_1,sVar1 & 0xffffffff,1);
  if (lVar2 == 0) {
    bdfError("Atom allocation failed\n");
  }
  return lVar2;
}



undefined8 bdfGetPropertyValue(byte *param_1)

{
  byte bVar1;
  undefined8 uVar2;
  size_t sVar3;
  byte *__ptr;
  byte *__s;
  byte *pbVar4;
  byte bVar5;
  ulong __size;
  bool bVar6;
  
  bVar1 = *param_1;
  pbVar4 = param_1;
  if (bVar1 != 0) {
    if ((bVar1 == 9) || (bVar1 == 0x20)) {
      do {
        pbVar4 = pbVar4 + 1;
        bVar1 = *pbVar4;
        if (bVar1 == 0) goto LAB_0011b9c8;
      } while ((bVar1 == 0x20) || (bVar1 == 9));
    }
    if (bVar1 == 0x22) {
      __s = pbVar4 + 1;
      sVar3 = strlen((char *)__s);
      __size = (ulong)((int)sVar3 + 1);
      __ptr = (byte *)malloc(__size);
      if (__ptr == (byte *)0x0) {
        bdfError("Couldn\'t allocate property value string (%d)\n",__size);
      }
      else {
        bVar1 = pbVar4[1];
        pbVar4 = __ptr;
        while (bVar1 != 0) {
          bVar6 = bVar1 == 0x22;
          bVar1 = __s[1];
          if (bVar6) {
            if (bVar1 != 0x22) {
              *pbVar4 = 0;
              uVar2 = bdfForceMakeAtom(__ptr,0);
              free(__ptr);
              return uVar2;
            }
            bVar1 = __s[2];
            bVar5 = 0x22;
            __s = __s + 1;
          }
          else {
            bVar5 = *__s;
          }
          __s = __s + 1;
          *pbVar4 = bVar5;
          pbVar4 = pbVar4 + 1;
        }
        free(__ptr);
        bdfError("unterminated quoted string property: %s\n",param_1);
      }
      return 0;
    }
    bVar1 = *pbVar4;
    __s = pbVar4;
    do {
      if ((bVar1 < 0x21) && ((0x100002600U >> ((ulong)bVar1 & 0x1f) & 1) != 0)) {
        *__s = 0;
        break;
      }
      __s = __s + 1;
      bVar1 = *__s;
    } while (bVar1 != 0);
  }
LAB_0011b9c8:
  uVar2 = bdfForceMakeAtom(pbVar4,0);
  return uVar2;
}



undefined8 bdfIsInteger(char *param_1)

{
  char cVar1;
  ushort **ppuVar2;
  char *pcVar3;
  
  cVar1 = *param_1;
  ppuVar2 = __ctype_b_loc();
  pcVar3 = param_1 + 1;
  if (((*(byte *)((long)*ppuVar2 + (long)cVar1 * 2 + 1) & 8) == 0) && ((cVar1 - 0x2bU & 0xfd) != 0))
  {
    return 0;
  }
  do {
    cVar1 = *pcVar3;
    if (cVar1 == '\0') {
      return 1;
    }
    pcVar3 = pcVar3 + 1;
  } while ((*(byte *)((long)*ppuVar2 + (long)cVar1 * 2 + 1) & 8) != 0);
  return 0;
}



ulong bdfHexByte(char *param_1)

{
  char cVar1;
  char *pcVar2;
  uint uVar3;
  int iVar4;
  
  uVar3 = 0;
  pcVar2 = param_1;
  do {
    pcVar2 = pcVar2 + 1;
    cVar1 = *pcVar2;
    iVar4 = (int)cVar1;
    if ((byte)(iVar4 + -0x30) < 10) {
      uVar3 = uVar3 * 0x10 + iVar4 + -0x30;
    }
    else {
      if ((byte)(cVar1 + 0xbfU) < 6) {
        uVar3 = iVar4 + -0x37 + uVar3 * 0x10;
      }
      else {
        if ((byte)(cVar1 + 0x9fU) < 6) {
          uVar3 = iVar4 + -0x57 + uVar3 * 0x10;
        }
        else {
          bdfError("bad hex char \'%c\'");
        }
      }
    }
    pcVar2 = pcVar2;
  } while (param_1 + 2 != pcVar2);
  return (ulong)uVar3;
}



undefined8 bdfSpecialProperty(long param_1,undefined8 *param_2,char param_3,long param_4)

{
  int iVar1;
  char *__s1;
  undefined8 uVar2;
  char *__s2;
  undefined **ppuVar3;
  
  __s1 = (char *)NameForAtom(*param_2);
  if (PTR_s_FONT_ASCENT_0033ba80 == (undefined *)0x0) {
switchD_0011bc12_caseD_0:
    uVar2 = 1;
    if (param_3 == '\0') {
      *(undefined2 *)(param_1 + 0x48) = (short)param_2[1];
      *(undefined *)(param_4 + 0x468) = 1;
    }
  }
  else {
    ppuVar3 = &PTR_s_FONT_ASCENT_0033ba80;
    __s2 = PTR_s_FONT_ASCENT_0033ba80;
    do {
      iVar1 = strcmp(__s1,__s2);
      if (iVar1 == 0) break;
      ppuVar3 = ppuVar3 + 1;
      __s2 = *ppuVar3;
    } while (__s2 != (char *)0x0);
    switch((long)(ppuVar3 + -0x67750) >> 3) {
    case 0:
      goto switchD_0011bc12_caseD_0;
    case 1:
      uVar2 = 1;
      if (param_3 == '\0') {
        *(undefined2 *)(param_1 + 0x4a) = (short)param_2[1];
        *(undefined *)(param_4 + 0x469) = 1;
      }
      break;
    case 2:
      uVar2 = 1;
      if (param_3 == '\0') {
        *(undefined2 *)(param_1 + 0x10) = (short)param_2[1];
        *(undefined *)(param_4 + 0x46a) = 1;
      }
      break;
    case 3:
      *(undefined8 **)(param_4 + 0x430) = param_2;
      uVar2 = 0;
      break;
    case 4:
      *(undefined8 **)(param_4 + 0x448) = param_2;
      uVar2 = 0;
      break;
    case 5:
      *(undefined8 **)(param_4 + 0x450) = param_2;
      uVar2 = 0;
      break;
    case 6:
      *(undefined8 **)(param_4 + 0x458) = param_2;
      uVar2 = 0;
      break;
    case 7:
      *(undefined8 **)(param_4 + 0x460) = param_2;
      uVar2 = 0;
      break;
    case 8:
      *(undefined8 **)(param_4 + 0x428) = param_2;
      uVar2 = 0;
      break;
    case 9:
      *(undefined8 **)(param_4 + 0x438) = param_2;
      uVar2 = 0;
      break;
    case 10:
      *(undefined8 **)(param_4 + 0x440) = param_2;
      uVar2 = 0;
      break;
    default:
      return 0;
    }
  }
  return uVar2;
}



undefined8
bitmapGetGlyphs(long param_1,long param_2,ushort *param_3,uint param_4,long *param_5,long *param_6)

{
  ushort uVar1;
  ushort uVar2;
  long lVar3;
  long lVar4;
  uint uVar5;
  uint uVar6;
  long lVar7;
  long lVar8;
  ushort *puVar9;
  ushort *puVar10;
  long lVar11;
  long *plVar12;
  uint uVar13;
  uint uVar14;
  
  uVar1 = *(ushort *)(param_1 + 8);
  lVar3 = *(long *)(*(long *)(param_1 + 0x98) + 0x28);
  lVar4 = *(long *)(*(long *)(param_1 + 0x98) + 0x30);
  uVar13 = ((uint)*(ushort *)(param_1 + 10) + 1) - (uint)uVar1;
  plVar12 = param_6;
  if (param_4 == 2) {
    if (((*(byte *)(param_1 + 0x12) & 0x40) == 0) || (lVar7 = 0, lVar4 == 0)) {
      while (param_2 = param_2 + -1, puVar9 = param_3, param_2 != -1) {
        while( true ) {
          param_3 = puVar9 + 1;
          uVar6 = (uint)(ushort)(*puVar9 << 8 | *puVar9 >> 8) - (uint)uVar1;
          if (((uVar13 <= uVar6) || (lVar7 = *(long *)(lVar3 + (ulong)(uVar6 >> 7) * 8), lVar7 == 0)
              ) || (lVar7 = *(long *)(lVar7 + (ulong)(uVar6 & 0x7f) * 8), lVar7 == 0)) break;
          param_2 = param_2 + -1;
          *plVar12 = lVar7;
          plVar12 = plVar12 + 1;
          puVar9 = param_3;
          if (param_2 == -1) goto LAB_0011bdca;
        }
        if (lVar4 != 0) {
          *plVar12 = lVar4;
          plVar12 = plVar12 + 1;
        }
      }
LAB_0011bdca:
      *param_5 = (long)((long)plVar12 - (long)param_6) >> 3;
      return 0x55;
    }
    while (lVar7 != param_2) {
      uVar6 = (uint)(ushort)(param_3[lVar7] << 8 | param_3[lVar7] >> 8) - (uint)uVar1;
      if (uVar6 < uVar13) {
        lVar8 = *(long *)(lVar3 + (ulong)(uVar6 >> 7) * 8);
        lVar11 = 0;
        if (lVar8 != 0) {
          lVar11 = *(long *)(lVar8 + (ulong)(uVar6 & 0x7f) * 8);
        }
        param_6[lVar7] = lVar11;
      }
      else {
        param_6[lVar7] = lVar4;
      }
      lVar7 = lVar7 + 1;
    }
    lVar7 = lVar7 * 8 >> 3;
  }
  else {
    uVar6 = (uint)uVar1;
    if (param_4 < 2) {
      lVar7 = 0;
      if (*(short *)(param_1 + 0xc) == 0) {
        if (((*(byte *)(param_1 + 0x12) & 0x40) == 0) ||
           (puVar9 = (ushort *)((long)param_3 + param_2), lVar4 == 0)) {
          puVar9 = (ushort *)(param_2 + (long)param_3);
          while (puVar9 != param_3) {
            uVar5 = *(byte *)param_3 - uVar6;
            while (((param_3 = (ushort *)((long)param_3 + 1), uVar5 < uVar13 &&
                    (lVar7 = *(long *)(lVar3 + (ulong)(uVar5 >> 7) * 8), lVar7 != 0)) &&
                   (lVar7 = *(long *)(lVar7 + (ulong)(uVar5 & 0x7f) * 8), lVar7 != 0))) {
              *plVar12 = lVar7;
              plVar12 = plVar12 + 1;
              if (puVar9 == param_3) goto LAB_0011bdca;
              uVar5 = *(byte *)param_3 - uVar6;
            }
            if (lVar4 != 0) {
              *plVar12 = lVar4;
              plVar12 = plVar12 + 1;
            }
          }
          goto LAB_0011bdca;
        }
        while (puVar10 = param_3, plVar12 = param_6, puVar9 != param_3) {
          while( true ) {
            param_3 = (ushort *)((long)puVar10 + 1);
            param_6 = plVar12 + 1;
            uVar6 = (uint)*(byte *)puVar10 - (uint)uVar1;
            if (uVar13 <= uVar6) break;
            lVar7 = *(long *)(lVar3 + (ulong)(uVar6 >> 7) * 8);
            lVar8 = 0;
            if (lVar7 != 0) {
              lVar8 = *(long *)(lVar7 + (ulong)(uVar6 & 0x7f) * 8);
            }
            *plVar12 = lVar8;
            puVar10 = param_3;
            plVar12 = param_6;
            if (puVar9 == param_3) goto LAB_0011be7b;
          }
          *plVar12 = lVar4;
        }
LAB_0011be7b:
        lVar7 = param_2 * 8 >> 3;
      }
    }
    else {
      if (param_4 == 3) {
        uVar1 = *(ushort *)(param_1 + 0xc);
        uVar2 = *(ushort *)(param_1 + 0xe);
        while (param_2 = param_2 + -1, puVar9 = param_3, param_2 != -1) {
          while( true ) {
            param_3 = puVar9 + 1;
            uVar5 = (uint)*(byte *)puVar9 - (uint)uVar1;
            uVar14 = *(byte *)((long)puVar9 + 1) - uVar6;
            if ((((uint)uVar2 + 1) - (uint)uVar1 <= uVar5) || (uVar13 <= uVar14)) break;
            uVar14 = uVar5 * uVar13 + uVar14;
            lVar7 = *(long *)(lVar3 + (ulong)(uVar14 >> 7) * 8);
            if ((lVar7 == 0) || (lVar7 = *(long *)(lVar7 + (ulong)(uVar14 & 0x7f) * 8), lVar7 == 0))
            break;
            param_2 = param_2 + -1;
            *plVar12 = lVar7;
            plVar12 = plVar12 + 1;
            puVar9 = param_3;
            if (param_2 == -1) goto LAB_0011bdca;
          }
          if (lVar4 != 0) {
            *plVar12 = lVar4;
            plVar12 = plVar12 + 1;
          }
        }
        goto LAB_0011bdca;
      }
      lVar7 = 0;
    }
  }
  *param_5 = lVar7;
  return 0x55;
}



void bitmapGetMetrics(long param_1)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  undefined *puVar5;
  int iVar6;
  ulong uVar7;
  ulong *in_R8;
  long in_R9;
  
  lVar1 = *(long *)(param_1 + 0x98);
  uVar2 = *(undefined8 *)(lVar1 + 0x30);
  *(undefined8 *)(lVar1 + 0x30) = 0x33ccb0;
  iVar6 = bitmapGetGlyphs();
  if (((iVar6 == 0x55) && (lVar3 = *(long *)(lVar1 + 0x18), lVar3 != 0)) &&
     (lVar4 = *(long *)(lVar1 + 0x10), *in_R8 != 0)) {
    uVar7 = 0;
    do {
      puVar5 = *(undefined **)(in_R9 + uVar7 * 8);
      if (puVar5 != &DAT_0033ccb0) {
        *(long *)(in_R9 + uVar7 * 8) = lVar3 + ((long)(puVar5 + -lVar4) >> 3) * 4;
      }
      uVar7 = uVar7 + 1;
    } while (uVar7 <= *in_R8 && *in_R8 != uVar7);
    *(undefined8 *)(lVar1 + 0x30) = uVar2;
    return;
  }
  *(undefined8 *)(lVar1 + 0x30) = uVar2;
  return;
}



void BitmapRegisterFontFileFunctions(void)

{
  undefined **ppuVar1;
  undefined **ppuVar2;
  
  ppuVar1 = &PTR_DAT_0033bae0;
  do {
    ppuVar2 = ppuVar1 + 7;
    FontFileRegisterRenderer(ppuVar1);
    ppuVar1 = ppuVar2;
  } while (ppuVar2 != (undefined **)&DAT_0033bcd8);
  return;
}



void bitmapComputeFontBounds(long param_1)

{
  ulong *puVar1;
  long lVar2;
  ulong *puVar3;
  long lVar4;
  undefined8 *puVar5;
  undefined2 uVar6;
  undefined2 uVar7;
  ulong uVar8;
  ulong uVar9;
  undefined8 *puVar10;
  short sVar11;
  uint uVar12;
  uint uVar13;
  int iVar14;
  int iVar15;
  uint uVar16;
  
  lVar2 = *(long *)(param_1 + 0x98);
  lVar4 = *(long *)(lVar2 + 0x38);
  if (lVar4 == 0) {
    puVar10 = (undefined8 *)(param_1 + 0x24);
    puVar5 = (undefined8 *)(param_1 + 0x18);
  }
  else {
    puVar10 = (undefined8 *)(lVar4 + 0x3c);
    puVar5 = (undefined8 *)(lVar4 + 0x30);
  }
  *puVar10 = 0x7fff7fff7fff7fff;
  *(undefined4 *)(puVar10 + 1) = 0xffff7fff;
  *puVar5 = 0x8000800080008000;
  *(undefined4 *)(puVar5 + 1) = 0x8000;
  puVar3 = *(ulong **)(lVar2 + 0x10);
  if (*(int *)(lVar2 + 4) < 1) {
    lVar4 = *(long *)(lVar2 + 0x38);
    iVar14 = 0;
    iVar15 = 0;
    uVar6 = 0x8000;
    uVar7 = 0x8000;
    if (lVar4 == 0) goto LAB_0011c632;
LAB_0011c681:
    *(ushort *)(lVar4 + 0x2a) = *(ushort *)(lVar4 + 0x2a) & 0xfe7f;
LAB_0011c476:
    *(undefined2 *)(*(long *)(lVar2 + 0x38) + 0x2c) = uVar6;
    uVar8 = (ulong)*(ushort *)(param_1 + 0xc);
    uVar7 = 0x8000;
    *(undefined4 *)(param_1 + 0x2c) = 0xffff7fff;
    *(undefined8 *)(param_1 + 0x18) = 0x8000800080008000;
    *(undefined4 *)(param_1 + 0x20) = 0x8000;
    *(undefined8 *)(param_1 + 0x24) = 0x7fff7fff7fff7fff;
    if (*(ushort *)(param_1 + 0xc) <= *(ushort *)(param_1 + 0xe)) {
      uVar12 = 0;
      uVar9 = 0xffff8000;
      do {
        if (*(ushort *)(param_1 + 8) <= *(ushort *)(param_1 + 10)) {
          uVar13 = (((uint)*(ushort *)(param_1 + 10) + 1) - (uint)*(ushort *)(param_1 + 8)) + uVar12
          ;
          do {
            lVar4 = *(long *)(*(long *)(lVar2 + 0x28) + (long)((int)uVar12 >> 7) * 8);
            if ((lVar4 != 0) &&
               (puVar3 = *(ulong **)(lVar4 + (ulong)(uVar12 & 0x7f) * 8), puVar3 != (ulong *)0x0)) {
              sVar11 = *(short *)((long)puVar3 + 6);
              if ((sVar11 == 0) &&
                 ((*(short *)(puVar3 + 1) == 0 && ((*puVar3 & 0xffffffffffff) == 0)))) {
LAB_0011c4fc:
                sVar11 = *(short *)((long)puVar3 + 4);
              }
              else {
                if (sVar11 < *(short *)(param_1 + 0x2a)) {
                  *(short *)(param_1 + 0x2a) = sVar11;
                  sVar11 = *(short *)((long)puVar3 + 6);
                }
                if (*(short *)(param_1 + 0x1e) < sVar11) {
                  *(short *)(param_1 + 0x1e) = sVar11;
                }
                sVar11 = *(short *)(puVar3 + 1);
                if (*(short *)(param_1 + 0x2c) != sVar11 && sVar11 <= *(short *)(param_1 + 0x2c)) {
                  *(short *)(param_1 + 0x2c) = sVar11;
                  sVar11 = *(short *)(puVar3 + 1);
                }
                if (*(short *)(param_1 + 0x20) < sVar11) {
                  *(short *)(param_1 + 0x20) = sVar11;
                }
                sVar11 = *(short *)puVar3;
                if (*(short *)(param_1 + 0x24) != sVar11 && sVar11 <= *(short *)(param_1 + 0x24)) {
                  *(short *)(param_1 + 0x24) = sVar11;
                  sVar11 = *(short *)puVar3;
                }
                if (*(short *)(param_1 + 0x18) < sVar11) {
                  *(short *)(param_1 + 0x18) = sVar11;
                }
                sVar11 = *(short *)((long)puVar3 + 2);
                if (*(short *)(param_1 + 0x26) != sVar11 && sVar11 <= *(short *)(param_1 + 0x26)) {
                  *(short *)(param_1 + 0x26) = sVar11;
                  sVar11 = *(short *)((long)puVar3 + 2);
                }
                if (*(short *)(param_1 + 0x1a) < sVar11) {
                  *(short *)(param_1 + 0x1a) = sVar11;
                }
                sVar11 = *(short *)((long)puVar3 + 4);
                if (*(short *)(param_1 + 0x28) != sVar11 && sVar11 <= *(short *)(param_1 + 0x28)) {
                  *(short *)(param_1 + 0x28) = sVar11;
                  sVar11 = *(short *)((long)puVar3 + 4);
                }
                if (*(short *)(param_1 + 0x1c) < sVar11) {
                  *(short *)(param_1 + 0x1c) = sVar11;
                  goto LAB_0011c4fc;
                }
              }
              if (sVar11 < 0) {
                iVar15 = iVar15 + 1;
              }
              else {
                iVar14 = iVar14 + 1;
              }
              *(ushort *)(param_1 + 0x2e) =
                   *(ushort *)(param_1 + 0x2e) & *(ushort *)((long)puVar3 + 10);
              *(ushort *)(param_1 + 0x22) =
                   *(ushort *)(param_1 + 0x22) | *(ushort *)((long)puVar3 + 10);
              uVar16 = (int)*(short *)((long)puVar3 + 2) - (int)*(short *)((long)puVar3 + 4);
              if ((int)uVar9 < (int)uVar16) {
                uVar9 = (ulong)uVar16;
              }
            }
            uVar12 = uVar12 + 1;
          } while (uVar13 != uVar12);
        }
        uVar7 = (undefined2)uVar9;
        uVar13 = (int)uVar8 + 1;
        uVar8 = (ulong)uVar13;
      } while ((uint)*(ushort *)(param_1 + 0xe) + 1 != uVar13);
    }
  }
  else {
    iVar14 = 0;
    iVar15 = 0;
    puVar1 = puVar3 + (ulong)(*(int *)(lVar2 + 4) - 1) * 3 + 3;
    uVar8 = 0xffff8000;
    do {
      sVar11 = *(short *)((long)puVar3 + 6);
      if (((sVar11 == 0) && (*(short *)(puVar3 + 1) == 0)) && ((*puVar3 & 0xffffffffffff) == 0)) {
LAB_0011c344:
        sVar11 = *(short *)((long)puVar3 + 4);
      }
      else {
        if (sVar11 < *(short *)((long)puVar10 + 6)) {
          *(short *)((long)puVar10 + 6) = sVar11;
          sVar11 = *(short *)((long)puVar3 + 6);
        }
        if (*(short *)((long)puVar5 + 6) < sVar11) {
          *(short *)((long)puVar5 + 6) = sVar11;
        }
        sVar11 = *(short *)(puVar3 + 1);
        if (*(short *)(puVar10 + 1) != sVar11 && sVar11 <= *(short *)(puVar10 + 1)) {
          *(short *)(puVar10 + 1) = sVar11;
          sVar11 = *(short *)(puVar3 + 1);
        }
        if (*(short *)(puVar5 + 1) < sVar11) {
          *(short *)(puVar5 + 1) = sVar11;
        }
        sVar11 = *(short *)puVar3;
        if (*(short *)puVar10 != sVar11 && sVar11 <= *(short *)puVar10) {
          *(short *)puVar10 = sVar11;
          sVar11 = *(short *)puVar3;
        }
        if (*(short *)puVar5 < sVar11) {
          *(short *)puVar5 = sVar11;
        }
        sVar11 = *(short *)((long)puVar3 + 2);
        if (*(short *)((long)puVar10 + 2) != sVar11 && sVar11 <= *(short *)((long)puVar10 + 2)) {
          *(short *)((long)puVar10 + 2) = sVar11;
          sVar11 = *(short *)((long)puVar3 + 2);
        }
        if (*(short *)((long)puVar5 + 2) < sVar11) {
          *(short *)((long)puVar5 + 2) = sVar11;
        }
        sVar11 = *(short *)((long)puVar3 + 4);
        if (*(short *)((long)puVar10 + 4) != sVar11 && sVar11 <= *(short *)((long)puVar10 + 4)) {
          *(short *)((long)puVar10 + 4) = sVar11;
          sVar11 = *(short *)((long)puVar3 + 4);
        }
        if (*(short *)((long)puVar5 + 4) < sVar11) {
          *(short *)((long)puVar5 + 4) = sVar11;
          goto LAB_0011c344;
        }
      }
      if (sVar11 < 0) {
        iVar15 = iVar15 + 1;
      }
      else {
        iVar14 = iVar14 + 1;
      }
      *(ushort *)((long)puVar10 + 10) =
           *(ushort *)((long)puVar10 + 10) & *(ushort *)((long)puVar3 + 10);
      *(ushort *)((long)puVar5 + 10) =
           *(ushort *)((long)puVar5 + 10) | *(ushort *)((long)puVar3 + 10);
      uVar12 = (int)*(short *)((long)puVar3 + 2) - (int)*(short *)((long)puVar3 + 4);
      if ((int)uVar8 < (int)uVar12) {
        uVar8 = (ulong)uVar12;
      }
      uVar6 = (undefined2)uVar8;
      puVar3 = puVar3 + 3;
    } while (puVar1 != puVar3);
    lVar4 = *(long *)(lVar2 + 0x38);
    uVar7 = uVar6;
    if (lVar4 != 0) {
      if (iVar15 <= iVar14) goto LAB_0011c681;
      *(ushort *)(lVar4 + 0x2a) = *(ushort *)(lVar4 + 0x2a) & 0xfe7f | 0x80;
      goto LAB_0011c476;
    }
  }
  if (iVar14 < iVar15) {
    *(undefined2 *)(param_1 + 0x14) = uVar7;
    *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) & 0xfe7f | 0x80;
    return;
  }
LAB_0011c632:
  *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) & 0xfe7f;
  *(undefined2 *)(param_1 + 0x14) = uVar7;
  return;
}



void bitmapComputeFontInkBounds(long param_1)

{
  int iVar1;
  long lVar2;
  long lVar3;
  short *psVar4;
  short *psVar5;
  short *psVar6;
  uint uVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  short sVar10;
  uint uVar11;
  ulong uVar12;
  
  lVar2 = *(long *)(param_1 + 0x98);
  lVar3 = *(long *)(lVar2 + 0x38);
  if (*(long *)(lVar2 + 0x18) != 0) {
    if (lVar3 == 0) {
      puVar9 = (undefined8 *)(param_1 + 0x3c);
      puVar8 = (undefined8 *)(param_1 + 0x30);
    }
    else {
      puVar9 = (undefined8 *)(lVar3 + 0x54);
      puVar8 = (undefined8 *)(lVar3 + 0x48);
    }
    *puVar9 = 0x7fff7fff7fff7fff;
    *(undefined4 *)(puVar9 + 1) = 0xffff7fff;
    *puVar8 = 0x8000800080008000;
    *(undefined4 *)(puVar8 + 1) = 0x8000;
    iVar1 = *(int *)(lVar2 + 4);
    psVar4 = *(short **)(lVar2 + 0x18);
    if (0 < iVar1) {
      psVar5 = psVar4;
      do {
        sVar10 = psVar5[3];
        if ((((sVar10 != 0) || (psVar5[4] != 0)) || (*psVar5 != 0)) ||
           ((psVar5[1] != 0 || (psVar5[2] != 0)))) {
          if (sVar10 < *(short *)((long)puVar9 + 6)) {
            *(short *)((long)puVar9 + 6) = sVar10;
            sVar10 = psVar5[3];
          }
          if (*(short *)((long)puVar8 + 6) < sVar10) {
            *(short *)((long)puVar8 + 6) = sVar10;
          }
          sVar10 = psVar5[4];
          if (*(short *)(puVar9 + 1) != sVar10 && sVar10 <= *(short *)(puVar9 + 1)) {
            *(short *)(puVar9 + 1) = sVar10;
            sVar10 = psVar5[4];
          }
          if (*(short *)(puVar8 + 1) < sVar10) {
            *(short *)(puVar8 + 1) = sVar10;
          }
          sVar10 = *psVar5;
          if (*(short *)puVar9 != sVar10 && sVar10 <= *(short *)puVar9) {
            *(short *)puVar9 = sVar10;
            sVar10 = *psVar5;
          }
          if (*(short *)puVar8 < sVar10) {
            *(short *)puVar8 = sVar10;
          }
          sVar10 = psVar5[1];
          if (*(short *)((long)puVar9 + 2) != sVar10 && sVar10 <= *(short *)((long)puVar9 + 2)) {
            *(short *)((long)puVar9 + 2) = sVar10;
            sVar10 = psVar5[1];
          }
          if (*(short *)((long)puVar8 + 2) < sVar10) {
            *(short *)((long)puVar8 + 2) = sVar10;
          }
          sVar10 = psVar5[2];
          if (*(short *)((long)puVar9 + 4) != sVar10 && sVar10 <= *(short *)((long)puVar9 + 4)) {
            *(short *)((long)puVar9 + 4) = sVar10;
            sVar10 = psVar5[2];
          }
          if (*(short *)((long)puVar8 + 4) < sVar10) {
            *(short *)((long)puVar8 + 4) = sVar10;
          }
        }
        psVar6 = psVar5 + 6;
        *(ushort *)((long)puVar9 + 10) = *(ushort *)((long)puVar9 + 10) & psVar5[5];
        *(ushort *)((long)puVar8 + 10) = *(ushort *)((long)puVar8 + 10) | psVar5[5];
        psVar5 = psVar6;
      } while (psVar4 + ((ulong)(iVar1 - 1) * 3 + 3) * 2 != psVar6);
    }
    if (*(long *)(lVar2 + 0x38) != 0) {
      *(undefined4 *)(param_1 + 0x38) = 0x8000;
      uVar12 = (ulong)*(ushort *)(param_1 + 0xc);
      *(undefined8 *)(param_1 + 0x3c) = 0x7fff7fff7fff7fff;
      *(undefined4 *)(param_1 + 0x44) = 0xffff7fff;
      *(undefined8 *)(param_1 + 0x30) = 0x8000800080008000;
      if (*(ushort *)(param_1 + 0xc) <= *(ushort *)(param_1 + 0xe)) {
        uVar7 = 0;
        do {
          if (*(ushort *)(param_1 + 8) <= *(ushort *)(param_1 + 10)) {
            uVar11 = (((uint)*(ushort *)(param_1 + 10) + 1) - (uint)*(ushort *)(param_1 + 8)) +
                     uVar7;
            do {
              lVar3 = *(long *)(*(long *)(lVar2 + 0x28) + (long)((int)uVar7 >> 7) * 8);
              if ((lVar3 != 0) && (lVar3 = *(long *)(lVar3 + (ulong)(uVar7 & 0x7f) * 8), lVar3 != 0)
                 ) {
                psVar4 = (short *)(*(long *)(lVar2 + 0x18) +
                                  (long)((int)(lVar3 - *(long *)(lVar2 + 0x10) >> 3) * -0x55555555)
                                  * 0xc);
                sVar10 = psVar4[3];
                if (((sVar10 != 0) || (((psVar4[4] != 0 || (*psVar4 != 0)) || (psVar4[1] != 0)))) ||
                   (psVar4[2] != 0)) {
                  if (sVar10 < *(short *)(param_1 + 0x42)) {
                    *(short *)(param_1 + 0x42) = sVar10;
                    sVar10 = psVar4[3];
                  }
                  if (*(short *)(param_1 + 0x36) < sVar10) {
                    *(short *)(param_1 + 0x36) = sVar10;
                  }
                  sVar10 = psVar4[4];
                  if (*(short *)(param_1 + 0x44) != sVar10 && sVar10 <= *(short *)(param_1 + 0x44))
                  {
                    *(short *)(param_1 + 0x44) = sVar10;
                    sVar10 = psVar4[4];
                  }
                  if (*(short *)(param_1 + 0x38) < sVar10) {
                    *(short *)(param_1 + 0x38) = sVar10;
                  }
                  sVar10 = *psVar4;
                  if (*(short *)(param_1 + 0x3c) != sVar10 && sVar10 <= *(short *)(param_1 + 0x3c))
                  {
                    *(short *)(param_1 + 0x3c) = sVar10;
                    sVar10 = *psVar4;
                  }
                  if (*(short *)(param_1 + 0x30) < sVar10) {
                    *(short *)(param_1 + 0x30) = sVar10;
                  }
                  sVar10 = psVar4[1];
                  if (*(short *)(param_1 + 0x3e) != sVar10 && sVar10 <= *(short *)(param_1 + 0x3e))
                  {
                    *(short *)(param_1 + 0x3e) = sVar10;
                    sVar10 = psVar4[1];
                  }
                  if (*(short *)(param_1 + 0x32) < sVar10) {
                    *(short *)(param_1 + 0x32) = sVar10;
                  }
                  sVar10 = psVar4[2];
                  if (*(short *)(param_1 + 0x40) != sVar10 && sVar10 <= *(short *)(param_1 + 0x40))
                  {
                    *(short *)(param_1 + 0x40) = sVar10;
                    sVar10 = psVar4[2];
                  }
                  if (*(short *)(param_1 + 0x34) < sVar10) {
                    *(short *)(param_1 + 0x34) = sVar10;
                  }
                }
                *(ushort *)(param_1 + 0x46) = *(ushort *)(param_1 + 0x46) & psVar4[5];
                *(ushort *)(param_1 + 0x3a) = *(ushort *)(param_1 + 0x3a) | psVar4[5];
              }
              uVar7 = uVar7 + 1;
            } while (uVar11 != uVar7);
          }
          uVar11 = (int)uVar12 + 1;
          uVar12 = (ulong)uVar11;
        } while ((uint)*(ushort *)(param_1 + 0xe) + 1 != uVar11);
      }
    }
    return;
  }
  if (lVar3 != 0) {
    *(undefined8 *)(lVar3 + 0x54) = *(undefined8 *)(lVar3 + 0x3c);
    *(undefined4 *)(lVar3 + 0x5c) = *(undefined4 *)(lVar3 + 0x44);
    lVar2 = *(long *)(lVar2 + 0x38);
    *(undefined8 *)(lVar2 + 0x48) = *(undefined8 *)(lVar2 + 0x30);
    *(undefined4 *)(lVar2 + 0x50) = *(undefined4 *)(lVar2 + 0x38);
  }
  *(undefined8 *)(param_1 + 0x3c) = *(undefined8 *)(param_1 + 0x24);
  *(undefined4 *)(param_1 + 0x44) = *(undefined4 *)(param_1 + 0x2c);
  *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_1 + 0x18);
  *(undefined4 *)(param_1 + 0x38) = *(undefined4 *)(param_1 + 0x20);
  return;
}



undefined8 bitmapAddInkMetrics(long param_1)

{
  long lVar1;
  long lVar2;
  int iVar3;
  long lVar4;
  void *pvVar5;
  long lVar6;
  int iVar7;
  
  lVar4 = *(long *)(param_1 + 0x98);
  iVar3 = *(int *)(lVar4 + 4);
  pvVar5 = malloc((long)iVar3 * 0xc);
  *(void **)(lVar4 + 0x18) = pvVar5;
  if (pvVar5 == (void *)0x0) {
    __fprintf_chk(stderr,1,"Error: Couldn\'t allocate ink_metrics (%d*%ld)\n",
                  (long)iVar3 & 0xffffffff,0xc);
    return 0;
  }
  lVar6 = 0;
  iVar7 = 0;
  if (0 < iVar3) {
    while( true ) {
      lVar2 = (long)pvVar5 + lVar6;
      iVar7 = iVar7 + 1;
      lVar1 = lVar6 * 2;
      lVar6 = lVar6 + 0xc;
      FontCharInkMetrics(param_1,*(long *)(lVar4 + 0x10) + lVar1,lVar2);
      if (*(int *)(lVar4 + 4) == iVar7 || *(int *)(lVar4 + 4) < iVar7) break;
      pvVar5 = *(void **)(lVar4 + 0x18);
    }
  }
  *(byte *)(param_1 + 0x12) = *(byte *)(param_1 + 0x12) | 0x20;
  return 1;
}



undefined8 bitmapComputeWeight(void)

{
  return 10;
}



undefined8
FUN_0011caf0(long param_1,uint *param_2,double *param_3,double *param_4,double *param_5,
            double *param_6,double *param_7)

{
  double dVar1;
  double dVar2;
  double dVar3;
  double dVar4;
  double dVar5;
  
  dVar1 = hypot(*(double *)(param_1 + 8),*(double *)(param_1 + 0x10));
  dVar2 = hypot(*(double *)(param_2 + 2),*(double *)(param_2 + 4));
  dVar3 = hypot(*(double *)(param_1 + 0x18),*(double *)(param_1 + 0x20));
  dVar4 = hypot(*(double *)(param_2 + 6),*(double *)(param_2 + 8));
  if (dVar1 < 0.00000000) {
    *param_3 = 0.00000000;
    *param_5 = 0.00000000;
  }
  else {
    *param_3 = dVar2 / dVar1;
    *param_5 = 1000.00000000 / dVar1;
  }
  *param_7 = 1.00000000;
  if (((0 < *(int *)(param_1 + 0x58)) && (0 < (int)param_2[0x16])) &&
     (dVar1 = *param_3, 0.00000000 < (double)((ulong)dVar1 & 0x7fffffffffffffff))) {
    dVar5 = (double)*(int *)(param_1 + 0x58);
    dVar2 = (double)param_2[0x16] / dVar5;
    if (((*param_2 & 3) == 2) || ((*param_2 & 0xc) == 8)) {
      if (10.00000000 <= dVar2 * dVar5 - dVar5 * dVar1) {
        return 0;
      }
    }
    else {
      *param_7 = dVar2 / dVar1;
      *param_3 = dVar2;
    }
  }
  if (dVar3 < 0.00000000) {
    *param_4 = 0.00000000;
    *param_6 = 0.00000000;
    return 1;
  }
  *param_4 = dVar4 / dVar3;
  *param_6 = 1000.00000000 / dVar3;
  return 1;
}



undefined8
FUN_0011ccd0(double param_1,double param_2,long param_3,double *param_4,double *param_5,
            double *param_6,double *param_7)

{
  double dVar1;
  double dVar2;
  double dVar3;
  double dVar4;
  double dVar5;
  
  dVar3 = hypot(*(double *)(param_3 + 0x18),*(double *)(param_3 + 0x20));
  dVar4 = hypot(*(double *)(param_3 + 8),*(double *)(param_3 + 0x10));
  if ((0.00000000 <= dVar3) && (0.00000000 <= dVar4)) {
    param_4[2] = 0.00000000;
    param_4[1] = 0.00000000;
    param_1 = param_1 / dVar4;
    param_2 = param_2 / dVar3;
    *param_4 = param_1;
    param_4[3] = param_2;
    dVar3 = *(double *)(param_3 + 0x18);
    dVar4 = *(double *)(param_3 + 8);
    dVar1 = *(double *)(param_3 + 0x20);
    dVar2 = *(double *)(param_3 + 0x10);
    dVar5 = dVar3 * 0.00000000 + param_1 * dVar4;
    *param_4 = dVar5;
    param_4[3] = dVar2 * 0.00000000 + dVar1 * param_2;
    param_4[1] = param_1 * dVar2 + dVar1 * 0.00000000;
    param_4[2] = param_2 * dVar3 + dVar4 * 0.00000000;
    *param_6 = dVar5;
    *param_7 = param_4[3];
    dVar3 = *param_4 * param_4[3] - param_4[1] * param_4[2];
    if (0.00000000 <= (double)((ulong)dVar3 & 0x7fffffffffffffff)) {
      *param_5 = param_4[3] / dVar3;
      param_5[1] = (double)((ulong)param_4[1] ^ 0x8000000000000000) / dVar3;
      param_5[2] = (double)((ulong)param_4[2] ^ 0x8000000000000000) / dVar3;
      param_5[3] = *param_4 / dVar3;
      return 1;
    }
  }
  return 0;
}



void FUN_0011ce90(long param_1)

{
  void **ppvVar1;
  long lVar2;
  int iVar3;
  int iVar4;
  long lVar5;
  void *__ptr;
  
  lVar2 = *(long *)(param_1 + 0x98);
  free(*(void **)(param_1 + 0x50));
  free(*(void **)(param_1 + 0x58));
  __ptr = *(void **)(lVar2 + 0x28);
  if (__ptr != (void *)0x0) {
    iVar3 = (((uint)*(ushort *)(param_1 + 10) - (uint)*(ushort *)(param_1 + 8)) + 1) *
            (((uint)*(ushort *)(param_1 + 0xe) - (uint)*(ushort *)(param_1 + 0xc)) + 1);
    iVar4 = iVar3 + 0x7f;
    if (iVar4 < 0) {
      iVar4 = iVar3 + 0xfe;
    }
    if (0 < iVar4 >> 7) {
      lVar5 = 0;
      do {
        ppvVar1 = (void **)((long)__ptr + lVar5);
        lVar5 = lVar5 + 8;
        free(*ppvVar1);
        __ptr = *(void **)(lVar2 + 0x28);
      } while (lVar5 != (ulong)((iVar4 >> 7) - 1) * 8 + 8);
    }
  }
  free(__ptr);
  free(*(void **)(lVar2 + 0x20));
  free(*(void **)(lVar2 + 0x18));
  free(*(void **)(lVar2 + 0x10));
  free(*(void **)(param_1 + 0x98));
  DestroyFontRec(param_1);
  return;
}



// WARNING: Could not reconcile some variable overlaps
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

ulong BitmapOpenScalable(long param_1,undefined8 *param_2,undefined8 param_3,undefined8 *param_4,
                        undefined8 param_5,uint *param_6)

{
  undefined **ppuVar1;
  void **ppvVar2;
  undefined *puVar3;
  undefined uVar4;
  byte bVar5;
  char cVar6;
  char cVar7;
  ushort uVar8;
  ushort uVar9;
  ushort uVar10;
  undefined4 uVar11;
  undefined4 *puVar12;
  ulong *puVar13;
  short *psVar14;
  uint uVar15;
  long lVar16;
  int *piVar17;
  uint *puVar18;
  byte bVar19;
  short sVar20;
  uint uVar21;
  uint uVar22;
  int iVar23;
  int iVar24;
  int iVar25;
  uint uVar26;
  int iVar27;
  int iVar28;
  int iVar29;
  size_t sVar30;
  undefined8 *__ptr;
  undefined4 *puVar31;
  void *pvVar32;
  undefined *puVar33;
  char *pcVar34;
  long lVar35;
  byte *__dest;
  byte *pbVar36;
  short sVar37;
  int *piVar38;
  byte *pbVar39;
  short sVar40;
  long lVar41;
  undefined *puVar42;
  char *__s;
  uint uVar43;
  long lVar44;
  char *__s_00;
  long lVar45;
  int iVar46;
  int *piVar47;
  undefined *puVar48;
  ushort uVar49;
  uint uVar50;
  int iVar51;
  ulong uVar52;
  long *plVar53;
  uint *puVar54;
  byte *pbVar55;
  uint *puVar56;
  ulong uVar57;
  undefined *puVar58;
  undefined4 *__ptr_00;
  long lVar59;
  int iVar60;
  int iVar61;
  int iVar62;
  long *plVar63;
  byte *pbVar64;
  int iVar65;
  int iVar66;
  long lVar67;
  byte *pbVar68;
  int iVar69;
  short *psVar70;
  long lVar71;
  char **ppcVar72;
  char **ppcVar73;
  uint *puVar74;
  byte *__ptr_01;
  undefined8 *puVar75;
  int *piVar76;
  long lVar77;
  undefined **ppuVar78;
  byte *__src;
  long in_FS_OFFSET;
  bool bVar79;
  double dVar80;
  double dVar81;
  double dVar82;
  undefined auVar83 [16];
  double dVar84;
  undefined auVar85 [16];
  double dVar86;
  double dVar87;
  undefined auVar88 [16];
  undefined auVar89 [16];
  double dVar90;
  double dVar91;
  double dVar92;
  undefined8 uVar93;
  uint local_750;
  char *local_740;
  uint *local_738;
  undefined *local_730;
  double local_720;
  undefined8 local_718;
  uint *local_710;
  char *local_708;
  void *local_700;
  int *local_6f8;
  undefined8 *local_6f0;
  uint local_6e8;
  uint local_6e0;
  int local_6c8;
  undefined4 uStack1732;
  int local_6b8;
  undefined4 uStack1716;
  undefined4 local_6a8;
  undefined4 uStack1700;
  double local_690;
  int *local_688;
  long local_678;
  undefined8 local_670;
  uint *local_5d0;
  double local_5c8;
  char *local_5c0;
  double local_5b8;
  uint *local_5b0;
  double local_5a8;
  char *local_5a0;
  double local_598;
  int *local_590;
  uint *local_588;
  short local_580;
  undefined2 local_57e;
  char *local_578;
  short local_570;
  undefined2 local_56e;
  double local_568;
  double local_560;
  double local_558;
  double local_550;
  undefined4 local_548;
  undefined4 uStack1348;
  undefined4 uStack1344;
  undefined4 uStack1340;
  undefined4 local_538;
  undefined4 uStack1332;
  undefined4 uStack1328;
  undefined4 uStack1324;
  undefined4 local_528;
  undefined4 uStack1316;
  undefined4 uStack1312;
  undefined4 uStack1308;
  undefined4 local_518;
  undefined4 uStack1300;
  undefined4 uStack1296;
  undefined4 uStack1292;
  undefined4 local_508;
  undefined4 uStack1284;
  undefined4 uStack1280;
  undefined4 uStack1276;
  undefined4 local_4f8;
  undefined4 uStack1268;
  int local_4f0;
  undefined4 uStack1260;
  undefined4 local_4e8;
  undefined4 uStack1252;
  undefined4 uStack1248;
  undefined4 uStack1244;
  undefined8 local_4d8;
  double local_4c8;
  double local_4c0;
  double local_4b8;
  double local_4b0;
  uint local_448 [258];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  dVar80 = hypot(*(double *)(param_6 + 6),*(double *)(param_6 + 8));
  if ((dVar80 < 1.00000000) ||
     (dVar80 = hypot(*(double *)(param_6 + 2),*(double *)(param_6 + 4)), dVar80 < 1.00000000)) {
LAB_0011d450:
    uVar57 = 0x53;
LAB_0011d456:
    if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    return uVar57;
  }
  local_590 = (int *)0x3ff0000000000000;
  local_5b0 = (uint *)0x0;
  local_5a8 = 0.00000000;
  local_5a0 = (char *)0x0;
  local_598 = 0.00000000;
  sVar40 = *(short *)(param_4 + 1);
  __memcpy_chk(dVar80,local_448,*param_4);
  *(undefined *)((long)local_448 + (long)sVar40) = 0;
  local_588 = local_448;
  FontParseXLFDName(local_448,&local_4c8,2);
  puVar18 = local_448;
  do {
    puVar74 = puVar18;
    uVar21 = *puVar74 + 0xfefefeff & ~*puVar74;
    uVar22 = uVar21 & 0x80808080;
    bVar19 = (byte)uVar22;
    puVar18 = puVar74 + 1;
  } while (uVar22 == 0);
  __s = *(char **)(param_6 + 0x18);
  bVar79 = (uVar21 & 0x8080) == 0;
  if (bVar79) {
    bVar19 = (byte)(uVar22 >> 0x10);
  }
  sVar40 = (short)(puVar74 + 1);
  if (bVar79) {
    sVar40 = (short)puVar74 + 6;
  }
  local_580 = ((sVar40 + -3) - (ushort)CARRY1(bVar19,bVar19)) - (short)local_448;
  local_57e = *(undefined2 *)((long)param_4 + 10);
  local_578 = __s;
  sVar30 = strlen(__s);
  local_570 = (short)sVar30;
  local_56e = FontFileCountDashes(__s,(ulong)(uint)(int)local_570);
  local_6c8 = 0;
  uStack1732 = 0;
  local_740 = (char *)0x7ff0000000000000;
  iVar25 = 0x14;
  local_670 = 0;
  local_738 = (uint *)0x7ff0000000000000;
  local_718 = 0;
  local_6b8 = 0;
  uStack1716 = 0;
  local_730 = (undefined *)0x0;
  local_688 = (int *)0x0;
  local_6f8 = (int *)0x0;
  local_6a8 = 0;
  uStack1700 = 0;
  local_690 = 0.00000000;
  local_700 = (void *)0x0;
  local_708 = (char *)0x0;
  local_720 = 0.00000000;
  local_710 = (uint *)0x0;
  iVar65 = -1;
  iVar27 = 0;
LAB_0011d1cb:
  if (0 < FontFileBitmapSources._12_4_) {
    lVar71 = 0;
    local_6f0 = (undefined8 *)0x0;
    do {
      lVar45 = lVar71 * 8;
      lVar44 = *(long *)(FontFileBitmapSources._0_8_ + lVar71 * 8);
      if ((local_6f0 == (undefined8 *)0x0) && (*(long *)(param_6 + 0x18) != 0)) {
        __ptr = (undefined8 *)FontFileFindNameInDir(*(long *)(lVar44 + 0x18) + 0x30);
        local_6c8 = (int)lVar44;
        uStack1732 = (undefined4)((ulong)lVar44 >> 0x20);
        if (__ptr != (undefined8 *)0x0) {
          if (*(int *)(__ptr + 2) == 2) {
            lVar44 = *(long *)(FontFileBitmapSources._0_8_ + lVar45);
            local_6f0 = __ptr;
            goto LAB_0011d209;
          }
          if ((*(int *)(__ptr + 2) == 3) && (0 < iVar25)) goto LAB_0011e44d;
        }
        lVar44 = *(long *)(FontFileBitmapSources._0_8_ + lVar45);
      }
LAB_0011d209:
      __ptr = param_4;
      if (((param_1 == lVar44) ||
          (__ptr = (undefined8 *)FontFileFindNameInDir(*(long *)(lVar44 + 0x18) + 0x18,&local_588),
          __ptr != (undefined8 *)0x0)) && (lVar44 = __ptr[5], 0 < *(int *)(lVar44 + 0x78))) {
        lVar77 = 0;
        iVar46 = 0;
        do {
          puVar33 = (undefined *)(*(long *)(lVar44 + 0x80) + lVar77);
          if ((*(long *)(puVar33 + 0x78) != 0) &&
             (iVar23 = FUN_0011caf0(puVar33,param_6,&local_5b0), iVar23 != 0)) {
            if ((double)local_5a0 < 1.00000000) {
              iVar23 = (int)((double)local_5a0 * 20.00000000);
            }
            else {
              iVar23 = 0xa0;
              if (((double)local_5a0 != 1.00000000) &&
                 (iVar23 = 0x28, (double)local_5a0 != 2.00000000)) {
                iVar23 = (int)(30.00000000 / (double)local_5a0);
              }
            }
            if ((double)local_5b0 < 1.00000000) {
              iVar24 = (int)((double)local_5b0 + (double)local_5b0) + iVar23;
            }
            else {
              iVar24 = iVar23 + 0x10;
              if (((double)local_5b0 != 1.00000000) &&
                 (iVar24 = iVar23 + 4, (double)local_5b0 != 2.00000000)) {
                iVar24 = (int)(3.00000000 / (double)local_5b0) + iVar23;
              }
            }
            if ((iVar27 < iVar24) ||
               ((iVar23 = iVar27, iVar24 == iVar27 &&
                (((double)local_5a0 < (double)local_740 ||
                 ((iVar23 = iVar24, (double)local_5a0 == (double)local_740 &&
                  (iVar23 = iVar27, (double)local_5b0 < (double)local_738)))))))) {
              local_720 = local_5a8;
              local_700 = (void *)local_598;
              local_718 = *(undefined8 *)(FontFileBitmapSources._0_8_ + lVar45);
              local_6f8 = local_590;
              local_740 = local_5a0;
              local_738 = local_5b0;
              local_730 = puVar33;
              local_710 = local_5b0;
              local_708 = local_5a0;
              iVar23 = iVar24;
            }
            iVar27 = iVar23;
            if ((0.00000000 < (double)local_5b0) && (0.00000000 < (double)local_5a0)) {
              dVar80 = *(double *)(param_6 + 2);
              dVar81 = *(double *)(puVar33 + 8);
              if ((dVar80 * (double)local_590 - dVar81 < 1.00000000) &&
                 (((double)((ulong)(*(double *)(param_6 + 4) * (double)local_590 -
                                   *(double *)(puVar33 + 0x10)) & 0x7fffffffffffffff) < 0.00000000
                  && ((double)((ulong)(*(double *)(param_6 + 6) - *(double *)(puVar33 + 0x18)) &
                              0x7fffffffffffffff) < 0.00000000)))) {
                dVar82 = *(double *)(param_6 + 8);
                dVar84 = *(double *)(puVar33 + 0x20);
                if (dVar82 - dVar84 < 1.00000000) {
                  if (dVar82 / dVar84 < 1.00000000) {
                    dVar82 = dVar82 * 80.00000000;
                  }
                  else {
                    dVar82 = 80.00000000 / dVar82;
                  }
                  if ((dVar80 * (double)local_590) / dVar81 < 1.00000000) {
                    dVar80 = dVar80 * 8.00000000;
                  }
                  else {
                    dVar80 = 8.00000000 / dVar80;
                  }
                  iVar23 = (int)((dVar80 * (double)local_590) / dVar81) + (int)(dVar82 / dVar84);
                  if (iVar65 < iVar23) {
                    local_6b8 = (int)puVar33;
                    uStack1716 = (undefined4)((ulong)puVar33 >> 0x20);
                    local_690 = local_5a8 / (double)local_5b0;
                    local_670 = *(undefined8 *)(FontFileBitmapSources._0_8_ + lVar45);
                    local_6a8 = SUB84(local_598 / (double)local_5a0,0);
                    uStack1700 = (undefined4)((ulong)(local_598 / (double)local_5a0) >> 0x20);
                    local_688 = local_590;
                    iVar65 = iVar23;
                  }
                }
              }
            }
          }
          iVar46 = iVar46 + 1;
          lVar77 = lVar77 + 0x88;
        } while (iVar46 < *(int *)(lVar44 + 0x78));
      }
      iVar46 = (int)lVar71;
      lVar71 = lVar71 + 1;
      if (FontFileBitmapSources._12_4_ <= iVar46 + 1) goto LAB_0011d4a5;
    } while( true );
  }
  local_6f0 = (undefined8 *)0x0;
LAB_0011d4a5:
  puVar33 = (undefined *)CONCAT44(uStack1716,local_6b8);
  if (puVar33 == (undefined *)0x0) {
    if (local_730 != (undefined *)0x0) {
      local_5d0 = local_710;
      local_670 = local_718;
                    // WARNING: Load size is inaccurate
      auVar85 = *(undefined *)local_730;
      local_548 = SUB164(auVar85,0);
      uStack1348 = SUB164(auVar85 >> 0x20,0);
      uStack1344 = SUB164(auVar85 >> 0x40,0);
      uStack1340 = SUB164(auVar85 >> 0x60,0);
      local_5b8 = (double)local_700;
      local_5c0 = local_708;
                    // WARNING: Load size is inaccurate
      auVar85 = *(undefined *)(local_730 + 0x10);
      local_538 = SUB164(auVar85,0);
      uStack1332 = SUB164(auVar85 >> 0x20,0);
      uStack1328 = SUB164(auVar85 >> 0x40,0);
      uStack1324 = SUB164(auVar85 >> 0x60,0);
      local_5c8 = local_720;
                    // WARNING: Load size is inaccurate
      auVar85 = *(undefined *)(local_730 + 0x20);
      local_528 = SUB164(auVar85,0);
      uStack1316 = SUB164(auVar85 >> 0x20,0);
      uStack1312 = SUB164(auVar85 >> 0x40,0);
      uStack1308 = SUB164(auVar85 >> 0x60,0);
      local_590 = local_6f8;
                    // WARNING: Load size is inaccurate
      auVar85 = *(undefined *)(local_730 + 0x30);
      local_518 = SUB164(auVar85,0);
      uStack1300 = SUB164(auVar85 >> 0x20,0);
      uStack1296 = SUB164(auVar85 >> 0x40,0);
      uStack1292 = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar85 = *(undefined *)(local_730 + 0x40);
      local_508 = SUB164(auVar85,0);
      uStack1284 = SUB164(auVar85 >> 0x20,0);
      uStack1280 = SUB164(auVar85 >> 0x40,0);
      uStack1276 = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar85 = *(undefined *)(local_730 + 0x50);
      local_4f8 = SUB164(auVar85,0);
      uStack1268 = SUB164(auVar85 >> 0x20,0);
      local_4f0 = SUB164(auVar85 >> 0x40,0);
      uStack1260 = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
      auVar85 = *(undefined *)(local_730 + 0x60);
      local_4e8 = SUB164(auVar85,0);
      uStack1252 = SUB164(auVar85 >> 0x20,0);
      uStack1248 = SUB164(auVar85 >> 0x40,0);
      uStack1244 = SUB164(auVar85 >> 0x60,0);
      local_4d8 = *(undefined8 *)(local_730 + 0x70);
      __ptr = *(undefined8 **)(local_730 + 0x78);
      goto LAB_0011d56d;
    }
    if (local_6f0 != (undefined8 *)0x0) goto LAB_0011d5a4;
    goto LAB_0011d450;
  }
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)puVar33;
  local_548 = SUB164(auVar85,0);
  uStack1348 = SUB164(auVar85 >> 0x20,0);
  uStack1344 = SUB164(auVar85 >> 0x40,0);
  uStack1340 = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(puVar33 + 0x10);
  local_538 = SUB164(auVar85,0);
  uStack1332 = SUB164(auVar85 >> 0x20,0);
  uStack1328 = SUB164(auVar85 >> 0x40,0);
  uStack1324 = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(puVar33 + 0x20);
  local_528 = SUB164(auVar85,0);
  uStack1316 = SUB164(auVar85 >> 0x20,0);
  uStack1312 = SUB164(auVar85 >> 0x40,0);
  uStack1308 = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(puVar33 + 0x30);
  local_518 = SUB164(auVar85,0);
  uStack1300 = SUB164(auVar85 >> 0x20,0);
  uStack1296 = SUB164(auVar85 >> 0x40,0);
  uStack1292 = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(puVar33 + 0x40);
  local_508 = SUB164(auVar85,0);
  uStack1284 = SUB164(auVar85 >> 0x20,0);
  uStack1280 = SUB164(auVar85 >> 0x40,0);
  uStack1276 = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(puVar33 + 0x50);
  local_4f8 = SUB164(auVar85,0);
  uStack1268 = SUB164(auVar85 >> 0x20,0);
  local_4f0 = SUB164(auVar85 >> 0x40,0);
  uStack1260 = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(puVar33 + 0x60);
  local_4e8 = SUB164(auVar85,0);
  uStack1252 = SUB164(auVar85 >> 0x20,0);
  uStack1248 = SUB164(auVar85 >> 0x40,0);
  uStack1244 = SUB164(auVar85 >> 0x60,0);
  local_4d8 = *(undefined8 *)(puVar33 + 0x70);
  local_5c8 = local_690;
  local_5b8 = (double)CONCAT44(uStack1700,local_6a8);
  local_5d0 = (uint *)0x3ff0000000000000;
  local_5c0 = (char *)0x3ff0000000000000;
  local_590 = local_688;
  __ptr = *(undefined8 **)(puVar33 + 0x78);
LAB_0011d56d:
  if (local_6f0 == (undefined8 *)0x0) {
    if (__ptr != (undefined8 *)0x0) goto LAB_0011de59;
    goto LAB_0011d450;
  }
  if (((__ptr == (undefined8 *)0x0) || ((double)local_5d0 != 1.00000000)) ||
     ((double)local_5c0 != 1.00000000)) {
LAB_0011d5a4:
    uVar93 = 0x11d5be;
    FontParseXLFDName(*local_6f0,&local_548,0);
    iVar25 = FUN_0011caf0(&local_548,&local_548,&local_5d0,&local_5c0,&local_5c8,&local_5b8,
                          &local_590,uVar93);
    if (iVar25 == 0) goto LAB_0011d450;
  }
  else {
LAB_0011de59:
    local_6c8 = (int)local_670;
    uStack1732 = (undefined4)((ulong)local_670 >> 0x20);
    local_6f0 = __ptr;
  }
  if ((double)local_590 != 1.00000000) {
    dVar80 = *(double *)(param_6 + 2);
    *param_6 = *param_6 & 0xfffffff3;
    dVar81 = *(double *)(param_6 + 4);
    *(double *)(param_6 + 2) = dVar80 * (double)local_590;
    *(double *)(param_6 + 4) = (double)local_590 * dVar81;
    FontFileCompleteXLFD((double)local_590 * dVar81,dVar80 * (double)local_590,param_6,param_6);
  }
  local_6e8 = FontFileOpenBitmap(CONCAT44(uStack1732,local_6c8),&local_590,1);
  piVar17 = local_590;
  __s = local_5c0;
  dVar80 = local_5c8;
  puVar18 = local_5d0;
  if (local_6e8 != 0x55) goto LAB_0011d450;
  if (param_6[0x16] == 0) {
    param_6[0x16] = (int)((double)local_4f0 * (double)local_5d0);
  }
  puVar12 = *(undefined4 **)(local_590 + 0x26);
  __ptr_00 = (undefined4 *)CreateFontRec();
  if (__ptr_00 == (undefined4 *)0x0) {
    __fprintf_chk(stderr,1,"Error: Couldn\'t allocate FontRec (%ld)\n");
LAB_0011e208:
    uVar57 = 0x50;
    if (*local_590 == 0) {
      FontFileCloseFont(0);
    }
    goto LAB_0011d456;
  }
  *__ptr_00 = 0;
  *(undefined *)(__ptr_00 + 0x18) = *(undefined *)(piVar17 + 0x18);
  *(undefined *)((long)__ptr_00 + 0x61) = *(undefined *)((long)piVar17 + 0x61);
  *(undefined *)((long)__ptr_00 + 0x62) = *(undefined *)((long)piVar17 + 0x62);
  uVar4 = *(undefined *)((long)piVar17 + 99);
  *(undefined8 *)(__ptr_00 + 0x20) = 0;
  *(undefined *)((long)__ptr_00 + 99) = uVar4;
  *(code **)(__ptr_00 + 0x1a) = bitmapGetGlyphs;
  *(code **)(__ptr_00 + 0x1c) = bitmapGetMetrics;
  *(undefined8 *)(__ptr_00 + 0x1e) = 0x11ce90;
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(piVar17 + 2);
  __ptr_00[2] = SUB164(auVar85,0);
  __ptr_00[3] = SUB164(auVar85 >> 0x20,0);
  __ptr_00[4] = SUB164(auVar85 >> 0x40,0);
  __ptr_00[5] = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(piVar17 + 6);
  __ptr_00[6] = SUB164(auVar85,0);
  __ptr_00[7] = SUB164(auVar85 >> 0x20,0);
  __ptr_00[8] = SUB164(auVar85 >> 0x40,0);
  __ptr_00[9] = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(piVar17 + 10);
  __ptr_00[10] = SUB164(auVar85,0);
  __ptr_00[0xb] = SUB164(auVar85 >> 0x20,0);
  __ptr_00[0xc] = SUB164(auVar85 >> 0x40,0);
  __ptr_00[0xd] = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(piVar17 + 0xe);
  __ptr_00[0xe] = SUB164(auVar85,0);
  __ptr_00[0xf] = SUB164(auVar85 >> 0x20,0);
  __ptr_00[0x10] = SUB164(auVar85 >> 0x40,0);
  __ptr_00[0x11] = SUB164(auVar85 >> 0x60,0);
                    // WARNING: Load size is inaccurate
  auVar85 = *(undefined *)(piVar17 + 0x12);
  __ptr_00[0x12] = SUB164(auVar85,0);
  __ptr_00[0x13] = SUB164(auVar85 >> 0x20,0);
  __ptr_00[0x14] = SUB164(auVar85 >> 0x40,0);
  __ptr_00[0x15] = SUB164(auVar85 >> 0x60,0);
  *(undefined8 *)(__ptr_00 + 0x16) = *(undefined8 *)(piVar17 + 0x16);
  if (param_6[0x1a] != 0) {
    *(byte *)((long)__ptr_00 + 0x12) = *(byte *)((long)__ptr_00 + 0x12) & 0xbf;
    if (0 < (int)param_6[0x1a]) {
      uVar52 = 0;
      uVar57 = 0xff;
      local_750 = 0;
      uVar21 = 0xff;
      __ptr_01 = *(byte **)(param_6 + 0x1c) + 4;
      pbVar39 = *(byte **)(param_6 + 0x1c);
      __src = __ptr_01;
      while( true ) {
        bVar19 = *pbVar39;
        bVar5 = pbVar39[2];
        if (bVar19 != bVar5) {
          uVar57 = (ulong)*(ushort *)(piVar17 + 2);
          uVar52 = (ulong)*(ushort *)((long)piVar17 + 10);
        }
        if ((uint)pbVar39[1] < (uint)uVar57) {
          uVar57 = (ulong)pbVar39[1];
        }
        uVar22 = (uint)uVar57;
        if ((uint)uVar52 < (uint)pbVar39[3]) {
          uVar52 = (ulong)pbVar39[3];
        }
        uVar26 = (uint)uVar52;
        if ((uint)bVar19 < uVar21) {
          uVar21 = (uint)bVar19;
        }
        if (local_750 < (uint)bVar5) {
          local_750 = (uint)bVar5;
        }
        if (__ptr_01 + (ulong)(param_6[0x1a] - 1) * 4 == __src) break;
        pbVar39 = __src;
        __src = __src + 4;
      }
      if ((uVar22 <= uVar26) && (uVar21 <= local_750)) {
        if (uVar22 <= *(ushort *)(piVar17 + 2)) {
          uVar22 = (uint)*(ushort *)(piVar17 + 2);
        }
        uVar43 = (uint)*(ushort *)((long)piVar17 + 10);
        if (uVar26 < *(ushort *)((long)piVar17 + 10)) {
          uVar43 = uVar26;
        }
        if (uVar21 <= *(ushort *)(piVar17 + 3)) {
          uVar21 = (uint)*(ushort *)(piVar17 + 3);
        }
        if (*(ushort *)((long)piVar17 + 0xe) <= local_750) {
          local_750 = (uint)*(ushort *)((long)piVar17 + 0xe);
        }
        goto LAB_0011d832;
      }
    }
LAB_0011e325:
    free(__ptr_00);
    goto LAB_0011e208;
  }
  uVar43 = (uint)*(ushort *)((long)piVar17 + 10);
  uVar22 = (uint)*(ushort *)(piVar17 + 2);
  uVar21 = (uint)*(ushort *)(piVar17 + 3);
  local_750 = (uint)*(ushort *)((long)piVar17 + 0xe);
LAB_0011d832:
  puVar31 = (undefined4 *)malloc(0x40);
  if (puVar31 == (undefined4 *)0x0) {
    __fprintf_chk(stderr,1,"Error: Couldn\'t allocate bitmapFont (%ld)\n");
    free(__ptr_00);
    goto LAB_0011e208;
  }
  *(undefined2 *)((long)__ptr_00 + 10) = (short)uVar43;
  *(undefined4 **)(__ptr_00 + 0x26) = puVar31;
  *(short *)(__ptr_00 + 2) = (short)uVar22;
  iVar25 = (uVar43 - uVar22) + 1;
  *(undefined2 *)((long)__ptr_00 + 0xe) = (short)local_750;
  *(short *)(__ptr_00 + 3) = (short)uVar21;
  uVar26 = ((local_750 - uVar21) + 1) * iVar25;
  uVar11 = *puVar12;
  puVar31[1] = uVar26;
  *puVar31 = uVar11;
  uVar11 = puVar12[2];
  *(undefined8 *)(puVar31 + 6) = 0;
  *(undefined8 *)(puVar31 + 8) = 0;
  *(undefined8 *)(puVar31 + 10) = 0;
  *(undefined8 *)(puVar31 + 0xe) = 0;
  puVar31[2] = uVar11;
  *(undefined8 *)(puVar31 + 0xc) = 0;
  pvVar32 = malloc((long)(int)uVar26 * 0x18);
  *(void **)(puVar31 + 4) = pvVar32;
  if (pvVar32 == (void *)0x0) {
    __s = "Error: Couldn\'t allocate metrics (%d*%ld)\n";
    uVar93 = 0x18;
LAB_0011e4a2:
    __fprintf_chk(stderr,1,__s,(ulong)uVar26,uVar93);
LAB_0011e2bf:
    free(__ptr_00);
    free(*(void **)(puVar31 + 4));
    free(*(void **)(puVar31 + 6));
    free(*(void **)(puVar31 + 8));
    __ptr_00 = *(undefined4 **)(puVar31 + 10);
    if (__ptr_00 != (undefined4 *)0x0) {
      iVar25 = uVar26 + 0xfe;
      if (-1 < (int)(uVar26 + 0x7f)) {
        iVar25 = uVar26 + 0x7f;
      }
      if (0 < iVar25 >> 7) {
        lVar71 = 0;
        do {
          ppvVar2 = (void **)((long)__ptr_00 + lVar71);
          lVar71 = lVar71 + 8;
          free(*ppvVar2);
          __ptr_00 = *(undefined4 **)(puVar31 + 10);
        } while (lVar71 != (ulong)((iVar25 >> 7) - 1) * 8 + 8);
      }
    }
    goto LAB_0011e325;
  }
  iVar27 = uVar26 + 0xfe;
  if (-1 < (int)(uVar26 + 0x7f)) {
    iVar27 = uVar26 + 0x7f;
  }
  pvVar32 = calloc((long)(iVar27 >> 7),8);
  *(void **)(puVar31 + 10) = pvVar32;
  if (pvVar32 == (void *)0x0) {
    uVar93 = 8;
    __s = "Error: Couldn\'t allocate encoding (%d*%ld)\n";
    goto LAB_0011e4a2;
  }
  if ((double)__s == (double)puVar18) {
    bVar19 = *(byte *)((long)__ptr_00 + 0x13) & 0xfb;
    *(byte *)((long)__ptr_00 + 0x13) = bVar19;
  }
  else {
    bVar19 = *(byte *)((long)__ptr_00 + 0x13) | 4;
    *(byte *)((long)__ptr_00 + 0x13) = bVar19;
  }
  *(byte *)((long)__ptr_00 + 0x13) = bVar19 | 2;
  iVar27 = FUN_0011ccd0(puVar18,__s,param_6,&local_568,&local_4c8);
  if (iVar27 == 0) goto LAB_0011e2bf;
  auVar88 = ZEXT816(local_578);
  *(short *)(__ptr_00 + 0x12) =
       (short)(int)((double)(int)*(short *)(piVar17 + 0x12) * (double)local_578);
  sVar40 = *(short *)((long)piVar17 + 0x4a);
  *(undefined8 *)(__ptr_00 + 8) = 0x7fff7fff80008000;
  *(undefined8 *)(__ptr_00 + 10) = 0x7fff7fff7fff7fff;
  dVar81 = (double)(int)sVar40 * (double)local_578;
  auVar85 = ZEXT816((ulong)dVar81);
  *(undefined2 *)((long)__ptr_00 + 0x4a) = (short)(int)dVar81;
  *(undefined8 *)(__ptr_00 + 6) = 0x8000800080008000;
  psVar70 = *(short **)(puVar31 + 4);
  if ((int)uVar26 < 1) {
    *(undefined8 *)(__ptr_00 + 0xc) = 0x8000800080008000;
    *(undefined8 *)(__ptr_00 + 0xf) = *(undefined8 *)(__ptr_00 + 9);
    __ptr_00[0xe] = __ptr_00[8];
    __ptr_00[0x11] = __ptr_00[0xb];
    __s_00 = local_578;
LAB_0011f7f8:
    param_6[0x16] = 0;
    local_678 = 0;
  }
  else {
    uVar43 = 0;
    iVar27 = 0;
    do {
      iVar65 = (int)uVar43 / iVar25 + uVar21;
      iVar23 = ((((uint)*(ushort *)((long)piVar17 + 10) - (uint)*(ushort *)(piVar17 + 2)) + 1) *
                (iVar65 - (uint)*(ushort *)(piVar17 + 3)) + (int)uVar43 % iVar25 + uVar22) -
               (uint)*(ushort *)(piVar17 + 2);
      iVar46 = iVar23 + 0x7f;
      if (-1 < iVar23) {
        iVar46 = iVar23;
      }
      lVar71 = *(long *)(*(long *)(puVar12 + 10) + (long)(iVar46 >> 7) * 8);
      if ((lVar71 != 0) &&
         (uVar50 = (uint)(iVar23 >> 0x1f) >> 0x19,
         puVar13 = *(ulong **)(lVar71 + (long)(int)((iVar23 + uVar50 & 0x7f) - uVar50) * 8),
         puVar13 != (ulong *)0x0)) {
        uVar50 = param_6[0x1a];
        if ((uVar50 != 0) &&
           (iVar65 = (int)uVar43 % iVar25 + uVar22 + iVar65 * 0x100, 0 < (int)uVar50)) {
          lVar71 = *(long *)(param_6 + 0x1c);
          lVar45 = 1;
          do {
            if (((int)((uint)*(byte *)(lVar71 + -4 + lVar45 * 4) * 0x100 +
                      (uint)*(byte *)(lVar71 + -3 + lVar45 * 4)) <= iVar65) &&
               (iVar65 <= (int)((uint)*(byte *)(lVar71 + -2 + lVar45 * 4) * 0x100 +
                               (uint)*(byte *)(lVar71 + -1 + lVar45 * 4)))) goto LAB_0011dd4e;
            uVar15 = (uint)lVar45;
            lVar45 = lVar45 + 1;
          } while ((ulong)(uVar50 - 1) + 2 != lVar45);
          if (uVar50 == uVar15) goto LAB_0011dcc8;
        }
LAB_0011dd4e:
        if ((((*puVar13 & 0xffff0000ffffffff) != 0) || (*(short *)(puVar13 + 1) != 0)) ||
           (*(short *)((long)puVar13 + 4) != 0)) {
          ppvVar2 = (void **)(*(long *)(puVar31 + 10) + (long)((int)uVar43 >> 7) * 8);
          pvVar32 = *ppvVar2;
          if (pvVar32 == (void *)0x0) {
            pvVar32 = calloc(0x80,8);
            *ppvVar2 = pvVar32;
            pvVar32 = *(void **)(*(long *)(puVar31 + 10) + (long)((int)uVar43 >> 7) * 8);
            if (pvVar32 == (void *)0x0) goto LAB_0011e2bf;
          }
          *(short **)((long)pvVar32 + (ulong)(uVar43 & 0x7f) * 8) = psVar70;
          dVar87 = local_568 * (double)(int)*(short *)puVar13;
          dVar84 = (double)(int)*(short *)puVar13 * local_560;
          dVar86 = local_558 * (double)-(int)*(short *)(puVar13 + 1);
          dVar82 = (double)-(int)*(short *)(puVar13 + 1) * local_550;
          dVar91 = local_550 * (double)(int)*(short *)((long)puVar13 + 6);
          dVar90 = dVar87 + dVar86;
          dVar92 = local_558 * (double)(int)*(short *)((long)puVar13 + 6);
          dVar81 = dVar84 + dVar82;
          auVar85 = ZEXT816((ulong)dVar81);
          dVar84 = dVar84 + dVar91;
          dVar87 = dVar87 + dVar92;
          auVar88 = maxsd(ZEXT816((ulong)dVar87),ZEXT816((ulong)dVar90));
          auVar89 = minsd(ZEXT816((ulong)dVar87),ZEXT816((ulong)dVar90));
          if (dVar84 < dVar81) {
            dVar81 = dVar84;
          }
          auVar85 = maxsd(ZEXT816((ulong)dVar84),auVar85);
          dVar87 = local_568 * (double)(int)*(short *)((long)puVar13 + 2);
          dVar84 = (double)(int)*(short *)((long)puVar13 + 2) * local_560;
          dVar86 = dVar86 + dVar87;
          dVar82 = dVar82 + dVar84;
          auVar89 = minsd(ZEXT816((ulong)dVar86),auVar89);
          auVar88 = maxsd(ZEXT816((ulong)dVar86),auVar88);
          if (dVar82 < dVar81) {
            dVar81 = dVar82;
          }
          dVar87 = dVar87 + dVar92;
          dVar84 = dVar84 + dVar91;
          auVar83 = maxsd(ZEXT816((ulong)dVar82),auVar85);
          auVar89 = minsd(ZEXT816((ulong)dVar87),auVar89);
          auVar85 = maxsd(ZEXT816((ulong)dVar87),auVar88);
          dVar82 = SUB168(auVar89,0);
          if (dVar84 < dVar81) {
            dVar81 = dVar84;
          }
          dVar81 = (double)((ulong)dVar81 ^ 0x8000000000000000);
          auVar88 = maxsd(ZEXT816((ulong)dVar84),auVar83);
          if ((double)((ulong)dVar82 & 0x7fffffffffffffff) < 4503599627370496.00000000) {
            auVar89 = orpd(ZEXT816((ulong)((double)(long)dVar82 -
                                          (double)(-(ulong)(dVar82 < (double)(long)dVar82) &
                                                  0x3ff0000000000000))),
                           auVar89 & (undefined  [16])0xffffffffffffffff);
            dVar82 = SUB168(auVar89,0);
          }
          dVar84 = SUB168(auVar85,0) + 0.50000000;
          *psVar70 = (short)(int)dVar82;
          if ((double)((ulong)dVar84 & 0x7fffffffffffffff) < 4503599627370496.00000000) {
            auVar85 = orpd(ZEXT816((ulong)((double)(long)dVar84 -
                                          (double)(-(ulong)(dVar84 < (double)(long)dVar84) &
                                                  0x3ff0000000000000))),
                           CONCAT88(SUB168(auVar85 >> 0x40,0),dVar84) &
                           (undefined  [16])0xffffffffffffffff);
            dVar84 = SUB168(auVar85,0);
          }
          sVar40 = (short)(int)dVar84;
          psVar70[1] = sVar40;
          if ((double)((ulong)dVar81 & 0x7fffffffffffffff) < 4503599627370496.00000000) {
            auVar85 = orpd(ZEXT816((ulong)((double)(-(ulong)((double)(long)dVar81 < dVar81) &
                                                   0x3ff0000000000000) + (double)(long)dVar81)) &
                           (undefined  [16])0xffffffffffffffff,
                           CONCAT88(0xffffffffffffffff,(ulong)dVar81 & 0x8000000000000000) &
                           (undefined  [16])0xffffffffffffffff);
            dVar81 = SUB168(auVar85,0);
          }
          uVar93 = SUB168(auVar88 >> 0x40,0);
          dVar84 = SUB168(auVar88,0) + 0.50000000;
          auVar88 = CONCAT88(uVar93,dVar84) & (undefined  [16])0xffffffffffffffff;
          psVar70[4] = (short)(int)dVar81;
          if ((double)((ulong)dVar84 & 0x7fffffffffffffff) < 4503599627370496.00000000) {
            dVar86 = (double)(long)dVar84 -
                     (double)(-(ulong)(dVar84 < (double)(long)dVar84) & 0x3ff0000000000000);
            auVar88 = ZEXT816((ulong)dVar86);
            auVar85 = orpd(ZEXT816((ulong)dVar86),
                           CONCAT88(uVar93,dVar84) & (undefined  [16])0xffffffffffffffff);
            dVar84 = SUB168(auVar85,0);
          }
          sVar20 = (short)(int)dVar84;
          psVar70[3] = sVar20;
          iVar27 = iVar27 + (int)*(short *)((long)puVar13 + 4);
          dVar84 = (double)(int)*(short *)((long)puVar13 + 4) * (double)local_588;
          if (dVar84 < 0.00000000) {
            sVar37 = (short)(long)(dVar84 - 0.50000000);
          }
          else {
            sVar37 = (short)(long)(dVar84 + 0.50000000);
          }
          psVar70[2] = sVar37;
          dVar84 = (double)(int)*(short *)((long)puVar13 + 4) * dVar80;
          if (dVar84 < 0.00000000) {
            dVar84 = dVar84 - 0.50000000;
          }
          else {
            dVar84 = dVar84 + 0.50000000;
          }
          auVar85 = ZEXT816((ulong)dVar84);
          psVar70[5] = (short)(long)dVar84;
          if (sVar37 == 0) {
            if ((short)(int)dVar82 == sVar40) {
              psVar70[1] = sVar40 + 1;
            }
            if ((int)sVar20 + (int)(short)(int)dVar81 == 0) {
              psVar70[3] = sVar20 + 1;
            }
          }
          psVar70 = psVar70 + 0xc;
        }
      }
LAB_0011dcc8:
      __s_00 = SUB168(auVar88,0);
      dVar81 = SUB168(auVar85,0);
      uVar43 = uVar43 + 1;
    } while (uVar26 != uVar43);
    local_6e8 = 0x55;
    iVar65 = 0;
    lVar71 = 0;
    uVar26 = 0;
    do {
      lVar45 = *(long *)(*(long *)(puVar31 + 10) + (long)((int)uVar26 >> 7) * 8);
      if ((lVar45 != 0) &&
         (psVar70 = *(short **)(lVar45 + (ulong)(uVar26 & 0x7f) * 8), psVar70 != (short *)0x0)) {
        iVar23 = ((((int)uVar26 / iVar25 + uVar21) - (uint)*(ushort *)(piVar17 + 3)) *
                  (((uint)*(ushort *)((long)piVar17 + 10) - (uint)*(ushort *)(piVar17 + 2)) + 1) +
                  (int)uVar26 % iVar25 + uVar22) - (uint)*(ushort *)(piVar17 + 2);
        iVar46 = iVar23 + 0x7f;
        if (-1 < iVar23) {
          iVar46 = iVar23;
        }
        lVar45 = *(long *)(*(long *)(puVar12 + 10) + (long)(iVar46 >> 7) * 8);
        if ((lVar45 != 0) &&
           (uVar50 = (uint)(iVar23 >> 0x1f) >> 0x19,
           *(long *)(lVar45 + (long)(int)((iVar23 + uVar50 & 0x7f) - uVar50) * 8) != 0)) {
          iVar65 = iVar65 + 1;
          uVar50 = (int)psVar70[5] >> 0x1f;
          lVar71 = lVar71 + (int)(((int)psVar70[5] ^ uVar50) - uVar50);
          sVar40 = *psVar70;
          if (*(short *)(__ptr_00 + 9) != sVar40 && sVar40 <= *(short *)(__ptr_00 + 9)) {
            *(short *)(__ptr_00 + 9) = sVar40;
            sVar40 = *psVar70;
          }
          if (*(short *)(__ptr_00 + 6) < sVar40) {
            *(short *)(__ptr_00 + 6) = sVar40;
          }
          sVar40 = psVar70[1];
          if (*(short *)((long)__ptr_00 + 0x26) != sVar40 &&
              sVar40 <= *(short *)((long)__ptr_00 + 0x26)) {
            *(short *)((long)__ptr_00 + 0x26) = sVar40;
            sVar40 = psVar70[1];
          }
          if (*(short *)((long)__ptr_00 + 0x1a) < sVar40) {
            *(short *)((long)__ptr_00 + 0x1a) = sVar40;
          }
          sVar40 = psVar70[3];
          if (*(short *)((long)__ptr_00 + 0x2a) != sVar40 &&
              sVar40 <= *(short *)((long)__ptr_00 + 0x2a)) {
            *(short *)((long)__ptr_00 + 0x2a) = sVar40;
            sVar40 = psVar70[3];
          }
          if (*(short *)((long)__ptr_00 + 0x1e) < sVar40) {
            *(short *)((long)__ptr_00 + 0x1e) = sVar40;
          }
          sVar40 = psVar70[4];
          if (*(short *)(__ptr_00 + 0xb) != sVar40 && sVar40 <= *(short *)(__ptr_00 + 0xb)) {
            *(short *)(__ptr_00 + 0xb) = sVar40;
            sVar40 = psVar70[4];
          }
          if (*(short *)(__ptr_00 + 8) < sVar40) {
            *(short *)(__ptr_00 + 8) = sVar40;
          }
          sVar40 = psVar70[2];
          if (*(short *)(__ptr_00 + 10) != sVar40 && sVar40 <= *(short *)(__ptr_00 + 10)) {
            *(short *)(__ptr_00 + 10) = sVar40;
            sVar40 = psVar70[2];
          }
          if (*(short *)(__ptr_00 + 7) < sVar40) {
            *(short *)(__ptr_00 + 7) = sVar40;
          }
          sVar40 = psVar70[5];
          if (*(short *)((long)__ptr_00 + 0x2e) != sVar40 &&
              sVar40 <= *(short *)((long)__ptr_00 + 0x2e)) {
            *(short *)((long)__ptr_00 + 0x2e) = sVar40;
            sVar40 = psVar70[5];
          }
          if (*(short *)((long)__ptr_00 + 0x22) < sVar40) {
            *(short *)((long)__ptr_00 + 0x22) = sVar40;
          }
        }
      }
      uVar26 = uVar26 + 1;
    } while (uVar43 != uVar26);
    *(undefined8 *)(__ptr_00 + 0xf) = *(undefined8 *)(__ptr_00 + 9);
    __ptr_00[0x11] = __ptr_00[0xb];
    *(undefined8 *)(__ptr_00 + 0xc) = *(undefined8 *)(__ptr_00 + 6);
    __ptr_00[0xe] = __ptr_00[8];
    if (iVar65 == 0) goto LAB_0011f7f8;
    local_678 = ((long)(iVar65 >> 1) + lVar71 * 10) / (long)iVar65;
    if (iVar27 < 0) {
      local_678 = -local_678;
    }
    if (*(short *)(__ptr_00 + 10) == *(short *)(__ptr_00 + 7)) {
      param_6[0x16] = (int)*(short *)(__ptr_00 + 10) * 10;
    }
    else {
      __s_00 = (char *)0x3fe0000000000000;
      dVar81 = ((double)local_678 * *(double *)(param_6 + 2)) / 1000.00000000;
      if (dVar81 < 0.00000000) {
        dVar81 = dVar81 - 0.50000000;
        uVar21 = (uint)(long)dVar81;
      }
      else {
        dVar81 = dVar81 + 0.50000000;
        uVar21 = (uint)(long)dVar81;
      }
      param_6[0x16] = uVar21;
    }
  }
  FontComputeInfoAccelerators(dVar81,__s_00);
  piVar17 = local_590;
  uVar8 = *(ushort *)(__ptr_00 + 4);
  if (uVar8 != 0xffff) {
    uVar49 = uVar8 >> 8;
    if ((*(ushort *)(__ptr_00 + 3) <= uVar49) &&
       (uVar49 < *(ushort *)((long)__ptr_00 + 0xe) || uVar49 == *(ushort *)((long)__ptr_00 + 0xe)))
    {
      uVar9 = *(ushort *)(__ptr_00 + 2);
      if ((uVar9 <= (uVar8 & 0xff)) &&
         (uVar10 = *(ushort *)((long)__ptr_00 + 10),
         (uVar8 & 0xff) < uVar10 || (uVar8 & 0xff) == uVar10)) {
        uVar21 = (((uint)uVar10 - (uint)uVar9) + 1) *
                 ((uint)uVar49 - (uint)*(ushort *)(__ptr_00 + 3)) +
                 ((uint)(byte)uVar8 - (uint)uVar9);
        lVar71 = *(long *)(*(long *)(puVar31 + 10) + (ulong)(uVar21 >> 7) * 8);
        if (lVar71 == 0) {
          uVar93 = 0;
        }
        else {
          uVar93 = *(undefined8 *)(lVar71 + (ulong)(uVar21 & 0x7f) * 8);
        }
        *(undefined8 *)(puVar31 + 0xc) = uVar93;
      }
    }
  }
  lVar71 = *(long *)(__ptr_00 + 0x26);
  local_5d0 = local_588;
  lVar45 = *(long *)(local_590 + 0x26);
  local_5c0 = local_578;
  iVar25 = FUN_0011ccd0(puVar18,__s,param_6,&local_568,&local_4c8,&local_588,&local_578);
  if (iVar25 == 0) {
    free(__ptr_00);
    if (lVar71 == 0) goto LAB_0011e208;
    free(*(void **)(lVar71 + 0x10));
    free(*(void **)(lVar71 + 0x18));
    free(*(void **)(lVar71 + 0x20));
    __ptr_00 = *(undefined4 **)(lVar71 + 0x28);
    goto LAB_0011e325;
  }
  uVar8 = *(ushort *)(__ptr_00 + 3);
  uVar49 = *(ushort *)(__ptr_00 + 2);
  cVar6 = *(char *)((long)__ptr_00 + 0x62);
  iVar25 = ((uint)*(ushort *)((long)__ptr_00 + 10) - (uint)uVar49) + 1;
  uVar21 = (((uint)*(ushort *)((long)__ptr_00 + 0xe) - (uint)uVar8) + 1) * iVar25;
  if (0 < (int)uVar21) {
    uVar22 = 0;
    uVar26 = 0;
    lVar44 = *(long *)(lVar71 + 0x28);
    do {
      lVar77 = *(long *)(lVar44 + (long)((int)uVar26 >> 7) * 8);
      if ((lVar77 != 0) &&
         (psVar70 = *(short **)(lVar77 + (ulong)(uVar26 & 0x7f) * 8), psVar70 != (short *)0x0)) {
        iVar27 = (int)psVar70[4] + (int)psVar70[3];
        if (cVar6 == '\x01') {
          uVar22 = uVar22 + iVar27 * (((int)psVar70[1] - (int)*psVar70) + 7 >> 3);
        }
        else {
          if (cVar6 == '\x02') {
            uVar22 = uVar22 + iVar27 * (((int)psVar70[1] - (int)*psVar70) + 0xf >> 3 & 0xfffffffeU);
          }
          else {
            if (cVar6 == '\x04') {
              uVar22 = uVar22 + iVar27 * (((int)psVar70[1] - (int)*psVar70) + 0x1f >> 3 &
                                         0xfffffffcU);
            }
            else {
              if (cVar6 == '\b') {
                uVar22 = uVar22 + iVar27 * (((int)psVar70[1] - (int)*psVar70) + 0x3f >> 3 &
                                           0xfffffff8U);
              }
            }
          }
        }
      }
      uVar26 = uVar26 + 1;
    } while (uVar21 != uVar26);
    local_700 = calloc(1,(ulong)uVar22);
    *(void **)(lVar71 + 0x20) = local_700;
    if (local_700 == (void *)0x0) {
LAB_0011f747:
      __fprintf_chk(stderr,1,"Error: Couldn\'t allocate bitmaps (%d)\n");
      free(__ptr_00);
      free(*(void **)(lVar71 + 0x10));
      free(*(void **)(lVar71 + 0x18));
      free(*(void **)(lVar71 + 0x20));
      __ptr_00 = *(undefined4 **)(lVar71 + 0x28);
      if (__ptr_00 != (undefined4 *)0x0) {
        iVar25 = uVar21 + 0xfe;
        if (-1 < (int)(uVar21 + 0x7f)) {
          iVar25 = uVar21 + 0x7f;
        }
        if (0 < iVar25 >> 7) {
          lVar45 = 0;
          do {
            ppvVar2 = (void **)((long)__ptr_00 + lVar45);
            lVar45 = lVar45 + 8;
            free(*ppvVar2);
            __ptr_00 = *(undefined4 **)(lVar71 + 0x28);
          } while ((ulong)((iVar25 >> 7) - 1) * 8 + 8 != lVar45);
        }
      }
      goto LAB_0011e325;
    }
    uVar21 = 0;
    do {
      lVar44 = *(long *)(lVar44 + (long)((int)uVar21 >> 7) * 8);
      if ((lVar44 != 0) &&
         (psVar70 = *(short **)(lVar44 + (ulong)(uVar21 & 0x7f) * 8), psVar70 != (short *)0x0)) {
        iVar65 = ((((int)uVar21 / iVar25 + (uint)uVar8) - (uint)*(ushort *)(piVar17 + 3)) *
                  (((uint)*(ushort *)((long)piVar17 + 10) - (uint)*(ushort *)(piVar17 + 2)) + 1) +
                  (int)uVar21 % iVar25 + (uint)uVar49) - (uint)*(ushort *)(piVar17 + 2);
        iVar27 = iVar65 + 0x7f;
        if (-1 < iVar65) {
          iVar27 = iVar65;
        }
        lVar44 = *(long *)(*(long *)(lVar45 + 0x28) + (long)(iVar27 >> 7) * 8);
        if ((lVar44 != 0) &&
           (uVar22 = (uint)(iVar65 >> 0x1f) >> 0x19,
           psVar14 = *(short **)(lVar44 + (long)(int)((iVar65 + uVar22 & 0x7f) - uVar22) * 8),
           psVar14 != (short *)0x0)) {
          local_6c8 = (int)psVar70[3];
          *(void **)(psVar70 + 8) = local_700;
          puVar33 = &DAT_0033bce0;
          if (*(char *)(__ptr_00 + 0x18) != '\0') {
            puVar33 = &DAT_0033bcd8;
          }
          iVar27 = psVar70[4] + local_6c8;
          uVar22 = (int)psVar70[1] - (int)*psVar70;
          if ((uVar22 != 0) && (iVar27 != 0)) {
            iVar46 = (int)psVar14[3] + (int)psVar14[4];
            iVar65 = (int)psVar14[1] - (int)*psVar14;
            if ((iVar65 != 0) && (iVar46 != 0)) {
              cVar7 = *(char *)((long)__ptr_00 + 0x62);
              if (cVar7 == '\x01') {
                local_6f8._0_4_ = iVar65 + 7 >> 3;
                local_6e0 = (int)(uVar22 + 7) >> 3;
              }
              else {
                if (cVar7 == '\x02') {
                  local_6f8._0_4_ = iVar65 + 0xf >> 3 & 0xfffffffe;
                  local_6e0 = (int)(uVar22 + 0xf) >> 3 & 0xfffffffe;
                }
                else {
                  if (cVar7 == '\x04') {
                    local_6f8._0_4_ = iVar65 + 0x1f >> 3 & 0xfffffffc;
                    local_6e0 = (int)(uVar22 + 0x1f) >> 3 & 0xfffffffc;
                  }
                  else {
                    local_6f8._0_4_ = 0;
                    local_6e0 = 0;
                    if (cVar7 == '\b') {
                      local_6f8._0_4_ = iVar65 + 0x3f >> 3 & 0xfffffff8;
                      local_6e0 = (int)(uVar22 + 0x3f) >> 3 & 0xfffffff8;
                    }
                  }
                }
              }
              lVar44 = *(long *)(psVar14 + 8);
              if ((((double)puVar18 <= 0.00000000) || ((double)__s <= 0.00000000)) ||
                 ((1.00000000 <= (double)puVar18 && (1.00000000 <= (double)__s)))) {
LAB_0011eac1:
                piVar76 = (int *)0x0;
                piVar47 = (int *)0x0;
                local_710 = (uint *)0x0;
                __ptr_01 = (byte *)0x0;
              }
              else {
                dVar80 = 1.00000000 / (double)puVar18;
                if ((double)((ulong)dVar80 & 0x7fffffffffffffff) < 4503599627370496.00000000) {
                  auVar85 = orpd(ZEXT816((ulong)((double)(-(ulong)((double)(long)dVar80 < dVar80) &
                                                         0x3ff0000000000000) + (double)(long)dVar80)
                                        ),CONCAT88(0xffffffffffffffff,
                                                   (ulong)dVar80 & 0x8000000000000000) &
                                          (undefined  [16])0xffffffffffffffff);
                  dVar80 = SUB168(auVar85,0);
                }
                dVar81 = 1.00000000 / (double)__s;
                if ((double)((ulong)dVar81 & 0x7fffffffffffffff) < 4503599627370496.00000000) {
                  auVar85 = orpd(ZEXT816((ulong)((double)(-(ulong)((double)(long)dVar81 < dVar81) &
                                                         0x3ff0000000000000) + (double)(long)dVar81)
                                        ),CONCAT88(0xffffffffffffffff,
                                                   (ulong)dVar81 & 0x8000000000000000) &
                                          (undefined  [16])0xffffffffffffffff);
                  dVar81 = SUB168(auVar85,0);
                }
                iVar24 = iVar65 / 2;
                iVar23 = iVar46 / 2;
                if (dVar80 < (double)iVar24) {
                  iVar24 = (int)dVar80;
                }
                if (dVar81 < (double)iVar23) {
                  iVar23 = (int)dVar81;
                }
                if ((iVar24 < 2) && (iVar23 < 2)) goto LAB_0011eac1;
                iVar62 = iVar65 + 1;
                iVar29 = (iVar46 + 1) * iVar62;
                __ptr_01 = (byte *)malloc((long)iVar29);
                if (__ptr_01 == (byte *)0x0) {
                  piVar76 = (int *)0x0;
                  piVar47 = (int *)0x0;
                  __fprintf_chk(stderr,1,"Warning: Couldn\'t allocate character grayscale (%d)\n");
                  local_6c8 = (int)psVar70[3];
                  local_710 = (uint *)0x0;
                }
                else {
                  local_710 = (uint *)calloc((long)(int)(uVar22 * 2 + 4),4);
                  piVar76 = (int *)((long)(int)uVar22 * 4 + 0xc);
                  if (local_710 == (uint *)0x0) {
                    piVar47 = (int *)&DAT_00000004;
                    __fprintf_chk(stderr,1,"Warning: Couldn\'t allocate diffusion workspace (%ld)\n"
                                 );
                    free(__ptr_01);
                    local_6c8 = (int)psVar70[3];
                    __ptr_01 = (byte *)0x0;
                  }
                  else {
                    piVar76 = (int *)((long)piVar76 + (long)local_710);
                    piVar47 = (int *)((long)local_710 + 4);
                    if (iVar46 < 1) {
                      if ((iVar24 < 2) || (1 < iVar23)) goto LAB_0011fa9a;
                    }
                    else {
                      iVar51 = 0;
                      lVar41 = (ulong)(iVar65 - 1) + 1;
                      pbVar39 = __ptr_01;
                      lVar77 = lVar44;
                      do {
                        lVar35 = 0;
                        if (0 < iVar65) {
                          do {
                            pbVar39[lVar35] =
                                 -((puVar33[(uint)lVar35 & 7] &
                                   *(byte *)(lVar77 + ((int)(uint)lVar35 >> 3))) != 0);
                            lVar35 = lVar35 + 1;
                          } while (lVar41 != lVar35);
                          pbVar39 = pbVar39 + lVar41;
                        }
                        lVar77 = lVar77 + (int)(uint)local_6f8;
                        pbVar39 = pbVar39 + 1;
                        iVar51 = iVar51 + 1;
                      } while (iVar46 != iVar51);
                      if (iVar24 < 2) {
LAB_0011fa9a:
                        iVar29 = iVar23 >> 1;
                        iVar60 = iVar23 - iVar29;
                        iVar51 = iVar60 + -1;
                        if (0 < iVar65) {
                          pbVar39 = __ptr_01 + (long)iVar65;
                          lVar59 = (long)iVar65 + 1;
                          lVar35 = (long)(iVar29 * iVar62);
                          __src = __ptr_01 + lVar35;
                          lVar77 = (long)((1 - iVar60) * iVar62);
                          lVar41 = ((ulong)(iVar60 - 2) + 1) * lVar59;
                          do {
                            __dest = __src + -lVar35;
                            iVar66 = 0;
                            pbVar36 = __dest;
                            iVar28 = 0;
                            do {
                              iVar61 = iVar28;
                              bVar19 = *pbVar36;
                              iVar28 = iVar61 + 1;
                              pbVar36 = pbVar36 + iVar62;
                              iVar66 = iVar66 + (uint)bVar19;
                            } while (iVar29 != iVar28);
                            if (iVar51 < 1) {
                              iVar69 = 0;
                              pbVar36 = __dest;
                              pbVar68 = pbVar39;
                              iVar61 = iVar29;
                            }
                            else {
                              iVar61 = iVar61 + 2;
                              lVar67 = 0;
                              do {
                                iVar66 = iVar66 + (uint)__src[lVar67];
                                iVar69 = iVar66 / iVar61;
                                iVar61 = iVar61 + 1;
                                pbVar39[lVar67] = (byte)iVar69;
                                lVar67 = lVar67 + lVar59;
                              } while (iVar60 + iVar29 != iVar61);
                              pbVar36 = __src + (lVar41 - lVar35);
                              pbVar68 = pbVar39 + lVar41;
                              iVar61 = iVar28 + iVar51;
                              iVar69 = iVar51;
                            }
                            if (iVar61 < iVar46) {
                              iVar69 = iVar69 + iVar28;
                              do {
                                iVar69 = iVar69 + 1;
                                bVar19 = pbVar36[lVar35];
                                *pbVar68 = (byte)((int)(iVar66 + (uint)bVar19) / iVar23);
                                pbVar68 = pbVar68 + lVar59;
                                pbVar55 = pbVar36 + lVar77;
                                pbVar36 = pbVar36 + lVar59;
                                iVar66 = (iVar66 + (uint)bVar19) - (uint)*pbVar55;
                              } while (iVar69 < iVar46);
                            }
                            iVar28 = iVar28 + iVar51;
                            lVar67 = 0;
                            do {
                              iVar61 = iVar66 / iVar28;
                              iVar28 = iVar28 + -1;
                              pbVar68[lVar67] = (byte)iVar61;
                              lVar16 = lVar67 + lVar77;
                              lVar67 = lVar67 + lVar59;
                              iVar66 = iVar66 - (uint)pbVar36[lVar16];
                            } while (iVar51 != iVar28);
                            if (0 < iVar46) {
                              iVar28 = 0;
                              pbVar36 = pbVar39;
                              do {
                                bVar19 = *pbVar36;
                                iVar28 = iVar28 + 1;
                                pbVar36 = pbVar36 + lVar59;
                                *__dest = bVar19;
                                __dest = __dest + lVar59;
                              } while (iVar46 != iVar28);
                            }
                            __src = __src + 1;
                          } while (__ptr_01 + lVar35 + 1 + (ulong)(iVar65 - 1) != __src);
                        }
                        if (iVar46 < 1) goto LAB_0011ead2;
                      }
                      else {
                        iVar66 = iVar24 >> 1;
                        iVar28 = iVar24 - iVar66;
                        local_6b8 = 0;
                        iVar60 = iVar28 + -1;
                        lVar77 = (long)iVar66;
                        pbVar39 = __ptr_01 + lVar77;
                        __src = __ptr_01 + (iVar29 - iVar62);
                        do {
                          __dest = pbVar39 + -lVar77;
                          iVar29 = 0;
                          pbVar36 = __dest;
                          do {
                            bVar19 = *pbVar36;
                            pbVar36 = pbVar36 + 1;
                            iVar29 = iVar29 + (uint)bVar19;
                          } while (pbVar39 + (ulong)(iVar66 - 1) + (1 - lVar77) != pbVar36);
                          if (iVar60 < 1) {
                            iVar69 = 0;
                            pbVar36 = __src;
                            pbVar68 = __dest;
                            iVar61 = iVar66;
                          }
                          else {
                            lVar35 = 0;
                            lVar41 = (ulong)(iVar28 - 2) + 1;
                            iVar61 = iVar66;
                            do {
                              iVar61 = iVar61 + 1;
                              iVar29 = iVar29 + (uint)pbVar39[lVar35];
                              __src[lVar35] = (byte)(iVar29 / iVar61);
                              lVar35 = lVar35 + 1;
                            } while (lVar41 != lVar35);
                            pbVar36 = __src + lVar41;
                            pbVar68 = pbVar39 + (1 - lVar77) + (ulong)(iVar28 - 2);
                            iVar61 = iVar60 + iVar66;
                            iVar69 = iVar60;
                          }
                          if (iVar61 < iVar65) {
                            iVar69 = iVar69 + iVar66;
                            pbVar55 = pbVar36;
                            pbVar64 = pbVar68;
                            do {
                              pbVar36 = pbVar55 + 1;
                              iVar69 = iVar69 + 1;
                              pbVar68 = pbVar64 + 1;
                              bVar19 = pbVar64[lVar77];
                              *pbVar55 = (byte)((int)(iVar29 + (uint)bVar19) / iVar24);
                              iVar29 = (iVar29 + (uint)bVar19) - (uint)pbVar64[1 - iVar28];
                              pbVar55 = pbVar36;
                              pbVar64 = pbVar68;
                            } while (iVar69 < iVar65);
                          }
                          pbVar68 = pbVar68 + (1 - iVar28);
                          iVar61 = iVar60 + iVar66;
                          do {
                            iVar69 = iVar29 / iVar61;
                            iVar61 = iVar61 + -1;
                            *pbVar36 = (byte)iVar69;
                            iVar29 = iVar29 - (uint)*pbVar68;
                            pbVar36 = pbVar36 + 1;
                            pbVar68 = pbVar68 + 1;
                          } while (iVar60 != iVar61);
                          memmove(__dest,__src,(long)iVar65);
                          local_6b8 = local_6b8 + 1;
                          pbVar39 = pbVar39 + iVar62;
                        } while (iVar51 != local_6b8);
                        if (1 < iVar23) goto LAB_0011fa9a;
                      }
                      iVar62 = 0;
                      pbVar39 = __ptr_01;
                      do {
                        __src = pbVar39 + (ulong)(iVar65 - 1) + 1;
                        pbVar36 = pbVar39;
                        if (0 < iVar65) {
                          do {
                            iVar51 = (uint)*pbVar36 * iVar23 * iVar24 * 0xc0;
                            iVar29 = iVar51 + 0xff;
                            if (-1 < iVar51) {
                              iVar29 = iVar51;
                            }
                            bVar19 = (byte)((uint)iVar29 >> 8);
                            if (0xff < iVar29 >> 8) {
                              bVar19 = 0xff;
                            }
                            pbVar39 = pbVar36 + 1;
                            *pbVar36 = bVar19;
                            pbVar36 = pbVar39;
                          } while (pbVar39 != __src);
                        }
                        pbVar39 = pbVar39 + 1;
                        iVar62 = iVar62 + 1;
                      } while (iVar62 < iVar46);
                    }
                  }
                }
              }
LAB_0011ead2:
              iVar23 = (int)((local_4b8 * 0.00000000 + local_4c8) * 65536.00000000);
              iVar24 = (int)((double)((ulong)(local_4b0 * 0.00000000 + local_4c0) ^
                                     0x8000000000000000) * 65536.00000000);
              if (0 < iVar27) {
                lVar77 = (long)(int)uVar22;
                iVar62 = 0;
                iVar29 = 0;
                do {
                  dVar80 = (double)(local_6c8 - iVar29) - 0.50000000;
                  iVar51 = (int)(((local_4b8 * dVar80 +
                                  local_4c8 * ((double)(int)*psVar70 + 0.50000000)) -
                                 (double)(int)*psVar14) * 65536.00000000);
                  iVar60 = (int)(((double)(int)psVar14[3] -
                                 (dVar80 * local_4b0 +
                                 ((double)(int)*psVar70 + 0.50000000) * local_4c0)) * 65536.00000000
                                );
                  if (__ptr_01 == (byte *)0x0) {
                    uVar43 = 0;
                    piVar38 = piVar47;
                    if (0 < (int)uVar22) {
                      do {
                        uVar50 = iVar51 >> 0x10;
                        if ((((-1 < (int)uVar50) && ((int)uVar50 < iVar65)) &&
                            (iVar28 = iVar60 >> 0x10, -1 < iVar28)) &&
                           ((iVar28 < iVar46 &&
                            ((*(byte *)(lVar44 + (int)((iVar51 >> 0x13) + iVar28 * (uint)local_6f8))
                             & puVar33[uVar50 & 7]) != 0)))) {
                          pbVar39 = (byte *)((long)local_700 + (long)(((int)uVar43 >> 3) + iVar62));
                          *pbVar39 = *pbVar39 | puVar33[uVar43 & 7];
                        }
                        iVar51 = iVar51 + iVar23;
                        iVar60 = iVar60 + iVar24;
                        uVar43 = uVar43 + 1;
                      } while (uVar22 != uVar43);
                      local_6c8 = (int)psVar70[3];
                    }
                  }
                  else {
                    if (0 < (int)uVar22) {
                      lVar41 = 0;
                      piVar38 = piVar76;
                      do {
                        iVar28 = iVar51 >> 0x10;
                        if (((iVar28 < 0) || (iVar65 <= iVar28)) ||
                           ((iVar66 = iVar60 >> 0x10, iVar66 < 0 || (iVar46 <= iVar66)))) {
                          uVar43 = 0;
                        }
                        else {
                          uVar43 = (uint)__ptr_01[iVar28 + iVar66 * (iVar65 + 1)];
                        }
                        iVar28 = piVar47[lVar41];
                        iVar66 = iVar28 + 0xf;
                        if (-1 < iVar28) {
                          iVar66 = iVar28;
                        }
                        iVar28 = (iVar66 >> 4) + uVar43;
                        if (iVar28 < 0x100) {
                          if (iVar28 < 0) {
                            iVar28 = 0;
                            iVar61 = 0;
                            iVar69 = 0;
                            iVar66 = 0;
                          }
                          else {
                            if (0x7f < iVar28) {
                              iVar66 = iVar28 + -0xff;
                              iVar61 = iVar66 * 3;
                              iVar28 = iVar66 * 5;
                              iVar69 = iVar66 * 7;
                              goto LAB_0011ed53;
                            }
                            iVar66 = -iVar28;
                            iVar69 = iVar28 * -7;
                            iVar61 = iVar28 * -3;
                            iVar28 = iVar28 * -5;
                          }
                        }
                        else {
                          iVar28 = 0;
                          iVar61 = 0;
                          iVar69 = 0;
                          iVar66 = 0;
LAB_0011ed53:
                          pbVar39 = (byte *)((long)local_700 +
                                            (long)(((int)(uint)lVar41 >> 3) + iVar62));
                          *pbVar39 = *pbVar39 | puVar33[(uint)lVar41 & 7];
                        }
                        piVar47[lVar41 + 1] = piVar47[lVar41 + 1] + iVar69;
                        iVar51 = iVar51 + iVar23;
                        lVar41 = lVar41 + 1;
                        piVar38[-1] = piVar38[-1] + iVar61;
                        piVar38[1] = iVar66;
                        *piVar38 = *piVar38 + iVar28;
                        iVar60 = iVar60 + iVar24;
                        piVar38 = piVar38 + 1;
                      } while ((ulong)(uVar22 - 1) + 1 != lVar41);
                      local_6c8 = (int)psVar70[3];
                    }
                    *piVar76 = *piVar76 + piVar76[-1];
                    piVar76[lVar77 + -2] = piVar76[lVar77 + -2] + piVar47[lVar77];
                    piVar76[lVar77 + -1] = piVar76[lVar77 + -1] + piVar76[lVar77];
                    piVar76[lVar77] = 0;
                    *piVar47 = 0;
                    piVar47[-1] = 0;
                    piVar38 = piVar76;
                    piVar76 = piVar47;
                  }
                  iVar29 = iVar29 + 1;
                  iVar62 = iVar62 + local_6e0;
                  piVar47 = piVar38;
                } while (iVar27 != iVar29);
              }
              iVar27 = psVar70[4] + local_6c8;
              if (__ptr_01 != (byte *)0x0) {
                free(__ptr_01);
                free(local_710);
              }
            }
          }
          if (cVar6 == '\x01') {
            local_700 = (void *)((long)local_700 +
                                (long)((((int)psVar70[1] - (int)*psVar70) + 7 >> 3) * iVar27));
          }
          else {
            if (cVar6 == '\x02') {
              local_700 = (void *)((long)local_700 +
                                  (long)(int)((((int)psVar70[1] - (int)*psVar70) + 0xf >> 3 &
                                              0xfffffffeU) * iVar27));
            }
            else {
              if (cVar6 == '\x04') {
                local_700 = (void *)((long)local_700 +
                                    (long)(int)((((int)psVar70[1] - (int)*psVar70) + 0x1f >> 3 &
                                                0xfffffffcU) * iVar27));
              }
              else {
                if (cVar6 == '\b') {
                  local_700 = (void *)((long)local_700 +
                                      (long)(int)((((int)psVar70[1] - (int)*psVar70) + 0x3f >> 3 &
                                                  0xfffffff8U) * iVar27));
                }
              }
            }
          }
        }
      }
      uVar21 = uVar21 + 1;
      if (uVar26 == uVar21) goto LAB_0011eef5;
      lVar44 = *(long *)(lVar71 + 0x28);
    } while( true );
  }
  pvVar32 = calloc(1,0);
  *(void **)(lVar71 + 0x20) = pvVar32;
  if (pvVar32 == (void *)0x0) goto LAB_0011f747;
LAB_0011eef5:
  __strcpy_chk(local_448,*local_6f0,0x400);
  FontParseXLFDName(local_448,param_6,3);
  piVar17 = local_590;
  dVar81 = local_5b8;
  __s = local_5c0;
  dVar80 = local_5c8;
  puVar18 = local_5d0;
  if (_DAT_0033ccc8 != serverGeneration) {
    ppcVar73 = &PTR_s_FOUNDRY_0033c1a0;
    do {
      __s_00 = *ppcVar73;
      ppcVar72 = ppcVar73 + 3;
      sVar30 = strlen(__s_00);
      __s_00 = (char *)MakeAtom(__s_00,sVar30 & 0xffffffff,1);
      ppcVar73[1] = __s_00;
      ppcVar73 = ppcVar72;
    } while (ppcVar72 != (char **)&DAT_0033c380);
    ppcVar73 = &PTR_s_MIN_SPACE_0033bf00;
    do {
      __s_00 = *ppcVar73;
      ppcVar72 = ppcVar73 + 3;
      sVar30 = strlen(__s_00);
      __s_00 = (char *)MakeAtom(__s_00,sVar30 & 0xffffffff,1);
      ppcVar73[1] = __s_00;
      ppcVar73 = ppcVar72;
    } while (ppcVar72 != &PTR_s_FOUNDRY_0033c1a0);
    ppcVar73 = &PTR_s_RAW_MIN_SPACE_0033bd00;
    do {
      __s_00 = *ppcVar73;
      ppcVar72 = ppcVar73 + 3;
      sVar30 = strlen(__s_00);
      __s_00 = (char *)MakeAtom(__s_00,sVar30 & 0xffffffff,1);
      ppcVar73[1] = __s_00;
      ppcVar73 = ppcVar72;
    } while (ppcVar72 != (char **)&DAT_0033bef8);
    _DAT_0033ccc8 = serverGeneration;
  }
  __ptr = (undefined8 *)malloc(0x460);
  if (__ptr == (undefined8 *)0x0) {
    __fprintf_chk(stderr,1,"Error: Couldn\'t allocate font properties (%ld*%d)\n",0x10,0x46);
LAB_0011f5b8:
    if (*local_590 == 0) {
      FontFileCloseFont(0);
    }
    __ptr_00[0x13] = 1;
    *(undefined8 *)(__ptr_00 + 0x16) = 0;
    uVar57 = 0x50;
    *(undefined8 **)(__ptr_00 + 0x14) = __ptr;
    FUN_0011ce90(__ptr_00);
    goto LAB_0011d456;
  }
  puVar33 = (undefined *)malloc(0x46);
  if (puVar33 == (undefined *)0x0) {
    __fprintf_chk(stderr,1,"Error: Couldn\'t allocate isStringProp (%d)\n",0x46);
    free(__ptr);
    goto LAB_0011f5b8;
  }
  __s_00 = (char *)0x0;
  uVar57 = (ulong)local_6e8;
  ppuVar78 = &PTR_s_FOUNDRY_0033c1a0;
  puVar48 = puVar33;
  puVar74 = local_448;
  puVar75 = __ptr;
  do {
    if (*(char *)puVar74 != '\0') {
      __s_00 = (char *)((long)puVar74 + 1);
      puVar74 = (uint *)strchr(__s_00,0x2d);
      if (puVar74 == (uint *)0x0) {
        sVar30 = strlen(__s_00);
        puVar74 = (uint *)(__s_00 + sVar30);
      }
    }
    *puVar48 = 0;
    switch(*(undefined4 *)(ppuVar78 + 2)) {
    case 0:
      puVar56 = (uint *)((long)puVar74 - (long)__s_00);
      goto LAB_0011f421;
    case 1:
      if (*__s_00 == '\0') {
LAB_0011f464:
        puVar56 = (uint *)(ulong)(uint)((int)puVar74 - (int)__s_00);
      }
      else {
        pcVar34 = __s_00;
        if (*__s_00 == '[') {
          puVar56 = (uint *)0x0;
        }
        else {
          do {
            pcVar34 = pcVar34 + 1;
            if (*pcVar34 == '\0') goto LAB_0011f464;
          } while (*pcVar34 != '[');
          puVar56 = (uint *)(ulong)(uint)((int)pcVar34 - (int)__s_00);
        }
      }
LAB_0011f421:
      uVar93 = MakeAtom(__s_00,puVar56,1);
      *puVar48 = 1;
      puVar75[1] = uVar93;
      break;
    case 2:
      dVar82 = *(double *)(param_6 + 8);
      if (0.00000000 <= dVar82) goto LAB_0011f3e3;
LAB_0011f40d:
      lVar71 = (long)(dVar82 - 0.50000000);
      goto LAB_0011f115;
    case 3:
      dVar82 = *(double *)(param_6 + 0x10) * 10.00000000;
      if (dVar82 < 0.00000000) goto LAB_0011f40d;
LAB_0011f3e3:
      lVar71 = (long)(dVar82 + 0.50000000);
      goto LAB_0011f115;
    case 4:
      puVar75[1] = (long)(int)param_6[0x14];
      break;
    case 5:
      puVar75[1] = (long)(int)param_6[0x15];
      break;
    case 6:
      puVar75[1] = (long)(int)param_6[0x16];
      break;
    case 10:
      puVar56 = local_448;
      do {
        puVar54 = puVar56;
        uVar22 = *puVar54 + 0xfefefeff & ~*puVar54;
        uVar21 = uVar22 & 0x80808080;
        puVar56 = puVar54 + 1;
      } while (uVar21 == 0);
      bVar79 = (uVar22 & 0x8080) == 0;
      if (bVar79) {
        uVar21 = uVar21 >> 0x10;
      }
      if (bVar79) {
        puVar56 = (uint *)((long)puVar54 + 6);
      }
      uVar93 = MakeAtom(local_448,
                        (long)puVar56 +
                        ((-3 - (ulong)CARRY1((byte)uVar21,(byte)uVar21)) - (long)local_448),1,
                        (ulong)(uVar21 & 0xffffff00));
      *puVar48 = 1;
      puVar75[1] = uVar93;
      break;
    case 0xb:
      puVar75[1] = (long)((double)(int)*(short *)(piVar17 + 0x12) * dVar81);
      break;
    case 0xc:
      puVar75[1] = (long)((double)(int)*(short *)((long)piVar17 + 0x4a) * dVar81);
      break;
    case 0xd:
      puVar75[1] = 1000;
      break;
    case 0xe:
      puVar75[1] = (long)(72270.00000000 / (double)param_6[0x15] + 0.50000000);
      break;
    case 0xf:
      lVar71 = local_678;
LAB_0011f115:
      puVar75[1] = lVar71;
    }
    ppuVar1 = ppuVar78 + 1;
    ppuVar78 = ppuVar78 + 3;
    puVar48 = puVar48 + 1;
    *(undefined **)puVar75 = *ppuVar1;
    puVar75 = puVar75 + 2;
  } while (ppuVar78 != (undefined **)&DAT_0033c380);
  iVar25 = 0x14;
  plVar63 = __ptr + 0x28;
  puVar48 = puVar33 + 0x14;
  if (piVar17[0x13] != 0) {
    auVar85 = (undefined  [16])0x0;
    iVar25 = 0;
    puVar58 = *(undefined **)(piVar17 + 0x16);
    plVar53 = *(long **)(piVar17 + 0x14);
    puVar3 = puVar58 + (ulong)(piVar17[0x13] - 1) + 1;
    do {
      puVar42 = (undefined *)*plVar53;
      ppuVar78 = &PTR_s_MIN_SPACE_0033bf00;
      do {
        if (ppuVar78[1] == puVar42) {
          iVar27 = *(int *)(ppuVar78 + 2);
          if (iVar27 == 8) {
            dVar82 = (double)plVar53[1] * (double)__s;
            if (dVar82 < 0.00000000) {
              dVar82 = dVar82 - 0.50000000;
            }
            else {
              dVar82 = dVar82 + 0.50000000;
            }
            plVar63[1] = (long)dVar82;
            auVar85 = ZEXT816((ulong)dVar81);
            puVar42 = (undefined *)*plVar53;
          }
          else {
            if (iVar27 == 9) {
              iVar25 = iVar25 + 1;
              plVar63[1] = plVar53[1];
              *plVar63 = *plVar53;
              *puVar48 = *puVar58;
              plVar63 = plVar63 + 2;
              puVar48 = puVar48 + 1;
              break;
            }
            if (iVar27 == 7) {
              dVar82 = (double)plVar53[1] * (double)puVar18;
              if (dVar82 < 0.00000000) {
                dVar82 = dVar82 - 0.50000000;
              }
              else {
                dVar82 = dVar82 + 0.50000000;
              }
              plVar63[1] = (long)dVar82;
              auVar85 = ZEXT816((ulong)dVar80);
              puVar42 = (undefined *)*plVar53;
            }
          }
          *(undefined **)plVar63 = puVar42;
          dVar82 = (double)plVar53[1] * SUB168(auVar85,0);
          if (dVar82 < 0.00000000) {
            dVar82 = dVar82 - 0.50000000;
          }
          else {
            dVar82 = dVar82 + 0.50000000;
          }
          plVar63[3] = (long)dVar82;
          iVar25 = iVar25 + 2;
          *(undefined **)(plVar63 + 2) = ppuVar78[-0x3f];
          *puVar48 = *puVar58;
          puVar48[1] = *puVar58;
          plVar63 = plVar63 + 4;
          puVar48 = puVar48 + 2;
          break;
        }
        ppuVar78 = ppuVar78 + 3;
      } while (ppuVar78 != &PTR_s_FOUNDRY_0033c1a0);
      puVar58 = puVar58 + 1;
      plVar53 = plVar53 + 2;
    } while (puVar58 != puVar3);
    iVar25 = iVar25 + 0x14;
  }
  if (*local_590 == 0) {
    FontFileCloseFont(0);
  }
  __ptr_00[0x13] = iVar25;
  *(undefined8 **)(__ptr_00 + 0x14) = __ptr;
  *(undefined **)(__ptr_00 + 0x16) = puVar33;
  *(undefined4 **)param_2 = __ptr_00;
  goto LAB_0011d456;
LAB_0011e44d:
  __s = (char *)__ptr[3];
  iVar25 = iVar25 + -1;
  local_578 = __s;
  sVar30 = strlen(__s);
  local_570 = (short)sVar30;
  local_56e = FontFileCountDashes(__s,(ulong)(uint)(int)local_570);
  goto LAB_0011d1cb;
}



ulong BitmapGetInfoScalable
                (undefined8 param_1,undefined4 *param_2,undefined8 param_3,undefined8 param_4,
                undefined8 param_5,undefined8 param_6)

{
  undefined auVar1 [16];
  ulong uVar2;
  long in_FS_OFFSET;
  long local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = BitmapOpenScalable(param_1,&local_18,0,param_3,param_5,param_6,0,0,0);
  if ((int)uVar2 == 0x55) {
                    // WARNING: Load size is inaccurate
    auVar1 = *(undefined *)(local_18 + 8);
    *param_2 = SUB164(auVar1,0);
    param_2[1] = SUB164(auVar1 >> 0x20,0);
    param_2[2] = SUB164(auVar1 >> 0x40,0);
    param_2[3] = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar1 = *(undefined *)(local_18 + 0x18);
    param_2[4] = SUB164(auVar1,0);
    param_2[5] = SUB164(auVar1 >> 0x20,0);
    param_2[6] = SUB164(auVar1 >> 0x40,0);
    param_2[7] = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar1 = *(undefined *)(local_18 + 0x28);
    param_2[8] = SUB164(auVar1,0);
    param_2[9] = SUB164(auVar1 >> 0x20,0);
    param_2[10] = SUB164(auVar1 >> 0x40,0);
    param_2[0xb] = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar1 = *(undefined *)(local_18 + 0x38);
    param_2[0xc] = SUB164(auVar1,0);
    param_2[0xd] = SUB164(auVar1 >> 0x20,0);
    param_2[0xe] = SUB164(auVar1 >> 0x40,0);
    param_2[0xf] = SUB164(auVar1 >> 0x60,0);
                    // WARNING: Load size is inaccurate
    auVar1 = *(undefined *)(local_18 + 0x48);
    param_2[0x10] = SUB164(auVar1,0);
    param_2[0x11] = SUB164(auVar1 >> 0x20,0);
    param_2[0x12] = SUB164(auVar1 >> 0x40,0);
    param_2[0x13] = SUB164(auVar1 >> 0x60,0);
    *(undefined8 *)(param_2 + 0x14) = *(undefined8 *)(local_18 + 0x58);
    *(undefined4 *)(local_18 + 0x4c) = 0;
    *(undefined8 *)(local_18 + 0x50) = 0;
    *(undefined8 *)(local_18 + 0x58) = 0;
    (**(code **)(local_18 + 0x78))(SUB168(auVar1,0),local_18);
    uVar2 = uVar2 & 0xffffffff;
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FontCharInkMetrics(long param_1,short *param_2,short *param_3)

{
  uint uVar1;
  char cVar2;
  byte bVar3;
  short sVar4;
  short sVar5;
  uint uVar6;
  ulong uVar7;
  char *pcVar8;
  long lVar9;
  byte *pbVar10;
  uint uVar11;
  int iVar12;
  short sVar13;
  int iVar14;
  ulong uVar15;
  byte bVar16;
  uint uVar17;
  uint uVar18;
  short sVar19;
  uint uVar20;
  short sVar21;
  byte *pbVar22;
  short sVar23;
  byte *local_48;
  uint local_3c;
  
  local_48 = &DAT_0033c388;
  if ((*(char *)(param_1 + 0x60) != '\x01') &&
     (local_48 = (byte *)0x0, *(char *)(param_1 + 0x60) == '\0')) {
    local_48 = &DAT_0033c380;
  }
  param_3[2] = param_2[2];
  param_3[5] = param_2[5];
  sVar4 = *param_2;
  sVar19 = param_2[3];
  iVar12 = (int)param_2[1] - (int)sVar4;
  cVar2 = *(char *)(param_1 + 0x62);
  uVar11 = iVar12 + 7 >> 3;
  if (cVar2 == '\x01') {
    iVar14 = 0;
    local_3c = uVar11;
  }
  else {
    if (cVar2 == '\x02') {
      local_3c = iVar12 + 0xf >> 3 & 0xfffffffe;
      iVar14 = local_3c - uVar11;
    }
    else {
      if (cVar2 == '\x04') {
        local_3c = iVar12 + 0x1f >> 3 & 0xfffffffc;
        iVar14 = local_3c - uVar11;
      }
      else {
        if (cVar2 == '\b') {
          local_3c = iVar12 + 0x3f >> 3 & 0xfffffff8;
          iVar14 = local_3c - uVar11;
        }
        else {
          local_3c = 0;
          iVar14 = -uVar11;
        }
      }
    }
  }
  uVar1 = (int)sVar19 + -1 + (int)param_2[4];
  pcVar8 = *(char **)(param_2 + 8);
  uVar18 = uVar11;
  uVar15 = (ulong)uVar1;
  if (-1 < (int)uVar1) {
    do {
      while( true ) {
        if ((int)(uVar18 - 1) < 0) break;
        cVar2 = *pcVar8;
        pcVar8 = pcVar8 + 1;
        uVar18 = uVar18 - 1;
        if (cVar2 != '\0') {
          lVar9 = (long)(int)uVar11;
          param_3[3] = ((short)uVar15 - param_2[4]) + 1;
          pcVar8 = (char *)((int)(local_3c * uVar1) + lVar9 + *(long *)(param_2 + 8));
          uVar18 = uVar1;
          do {
            sVar5 = (short)uVar18;
            uVar17 = uVar11;
            while (uVar17 = uVar17 - 1, -1 < (int)uVar17) {
              pcVar8 = pcVar8 + -1;
              if (*pcVar8 != '\0') goto LAB_001202d0;
            }
            uVar18 = uVar18 - 1;
            sVar5 = (short)uVar18;
            pcVar8 = pcVar8 + -(long)iVar14;
          } while (uVar18 != 0xffffffff);
LAB_001202d0:
          uVar18 = uVar11 - 1;
          sVar21 = (short)uVar18;
          param_3[4] = (sVar5 - sVar19) + 1;
          if ((int)uVar11 < 1) {
            sVar5 = 0;
            sVar23 = 8;
            sVar19 = 0;
            uVar15 = 0;
          }
          else {
            pbVar22 = *(byte **)(param_2 + 8);
            uVar17 = 8;
            uVar15 = 0;
            uVar20 = 0;
            do {
              bVar16 = 0;
              pbVar10 = pbVar22;
              uVar6 = uVar1;
              do {
                uVar6 = uVar6 - 1;
                bVar16 = bVar16 | *pbVar10;
                pbVar10 = pbVar10 + (int)local_3c;
              } while (uVar6 != 0xffffffff);
              if (bVar16 != 0) {
                if (uVar20 == uVar18) {
                  uVar17 = iVar12 + uVar20 * -8;
                }
                sVar23 = (short)uVar17;
                uVar15 = (ulong)uVar17;
                pbVar10 = local_48;
                while( true ) {
                  uVar6 = (int)uVar15 - 1;
                  sVar5 = (short)uVar6;
                  uVar15 = (ulong)uVar6;
                  if ((int)uVar6 < 0) break;
                  bVar3 = *pbVar10;
                  pbVar10 = pbVar10 + 1;
                  if ((bVar3 & bVar16) != 0) {
                    sVar19 = (short)(uVar20 << 3);
                    goto LAB_00120336;
                  }
                }
              }
              sVar23 = (short)uVar17;
              uVar20 = uVar20 + 1;
              pbVar22 = pbVar22 + 1;
            } while (uVar11 != uVar20);
            sVar19 = (short)uVar11 * 8;
            sVar5 = (short)uVar15;
          }
LAB_00120336:
          sVar13 = (short)uVar15;
          *param_3 = (sVar23 + sVar4 + -1 + sVar19) - sVar5;
          uVar11 = iVar12 + uVar18 * -8;
          while (-1 < (int)uVar18) {
            lVar9 = lVar9 + -1;
            sVar21 = (short)uVar18;
            bVar16 = 0;
            pbVar22 = (byte *)(*(long *)(param_2 + 8) + lVar9);
            uVar7 = (ulong)uVar1;
            do {
              uVar17 = (int)uVar7 - 1;
              uVar7 = (ulong)uVar17;
              bVar16 = bVar16 | *pbVar22;
              pbVar22 = pbVar22 + (int)local_3c;
            } while (uVar17 != 0xffffffff);
            if (bVar16 != 0) {
              uVar15 = (ulong)uVar11;
              pbVar22 = local_48 + (int)uVar11;
              while( true ) {
                uVar11 = (int)uVar15 - 1;
                sVar13 = (short)uVar11;
                uVar15 = (ulong)uVar11;
                if ((int)uVar11 < 0) break;
                pbVar22 = pbVar22 + -1;
                if ((*pbVar22 & bVar16) != 0) goto LAB_0012039d;
              }
            }
            sVar13 = (short)uVar15;
            uVar18 = uVar18 - 1;
            sVar21 = (short)uVar18;
            uVar11 = 8;
          }
LAB_0012039d:
          param_3[1] = sVar4 + 1 + sVar13 + sVar21 * 8;
          return;
        }
      }
      uVar17 = (int)uVar15 - 1;
      uVar15 = (ulong)uVar17;
      pcVar8 = pcVar8 + iVar14;
      uVar18 = uVar11;
    } while (uVar17 != 0xffffffff);
  }
  *param_3 = sVar4;
  param_3[1] = sVar4;
  *(undefined4 *)(param_3 + 3) = 0;
  return;
}



void FontCharReshape(long param_1,short *param_2,short *param_3)

{
  byte *pbVar1;
  char cVar2;
  byte bVar3;
  int iVar4;
  int iVar5;
  void *pvVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  size_t __n;
  long lVar10;
  uint uVar11;
  short sVar12;
  short sVar13;
  int iVar14;
  uint uVar15;
  short sVar16;
  int iVar17;
  uint uVar18;
  
  lVar10 = *(long *)(param_2 + 8);
  iVar4 = (int)param_3[1] - (int)*param_3;
  iVar5 = (int)param_3[3] + (int)param_3[4];
  cVar2 = *(char *)(param_1 + 0x62);
  if (cVar2 == '\x01') {
    uVar11 = iVar4 + 7 >> 3;
    uVar15 = ((int)param_2[1] - (int)*param_2) + 7 >> 3;
    __n = SEXT48((int)(iVar5 * uVar11));
  }
  else {
    if (cVar2 == '\x02') {
      uVar11 = iVar4 + 0xf >> 3 & 0xfffffffe;
      uVar15 = ((int)param_2[1] - (int)*param_2) + 0xf >> 3 & 0xfffffffe;
      __n = SEXT48((int)(iVar5 * uVar11));
    }
    else {
      if (cVar2 == '\x04') {
        uVar11 = iVar4 + 0x1f >> 3 & 0xfffffffc;
        uVar15 = ((int)param_2[1] - (int)*param_2) + 0x1f >> 3 & 0xfffffffc;
        __n = SEXT48((int)(iVar5 * uVar11));
      }
      else {
        if (cVar2 == '\b') {
          uVar11 = iVar4 + 0x3f >> 3 & 0xfffffff8;
          uVar15 = ((int)param_2[1] - (int)*param_2) + 0x3f >> 3 & 0xfffffff8;
          __n = SEXT48((int)(iVar5 * uVar11));
        }
        else {
          __n = 0;
          uVar11 = 0;
          uVar15 = 0;
        }
      }
    }
  }
  pvVar6 = memset(*(void **)(param_3 + 8),0,__n);
  iVar4 = (int)param_3[3];
  iVar5 = (int)param_2[3];
  if (param_2[3] < param_3[3]) {
    pvVar6 = (void *)((long)pvVar6 + (long)(int)((iVar4 - iVar5) * uVar11));
    iVar4 = iVar5;
  }
  else {
    lVar10 = lVar10 + (int)((iVar5 - iVar4) * uVar15);
  }
  iVar4 = -iVar4;
  sVar16 = param_2[4];
  sVar13 = *param_2;
  sVar12 = param_2[1];
  if (param_3[4] == sVar16 || param_3[4] < sVar16) {
    sVar16 = param_3[4];
  }
  if (sVar13 <= *param_3) {
    sVar13 = *param_3;
  }
  if (param_3[1] == sVar12 || param_3[1] < sVar12) {
    sVar12 = param_3[1];
  }
  iVar17 = (int)sVar16;
  iVar14 = (int)sVar13;
  iVar5 = (int)sVar12;
  if (*(char *)(param_1 + 0x60) == '\x01') {
    if (iVar4 < iVar17) {
      do {
        iVar9 = iVar14;
        if (iVar14 < iVar5) {
          do {
            iVar7 = iVar9 - *param_2;
            iVar8 = iVar7 + 7;
            if (-1 < iVar7) {
              iVar8 = iVar7;
            }
            uVar18 = (uint)(iVar7 >> 0x1f) >> 0x1d;
            if ((*(byte *)(lVar10 + (iVar8 >> 3)) >> (7 - ((iVar7 + uVar18 & 7) - uVar18) & 0x1f) &
                1) != 0) {
              iVar7 = iVar9 - *param_3;
              iVar8 = iVar7 + 7;
              if (-1 < iVar7) {
                iVar8 = iVar7;
              }
              bVar3 = (byte)(iVar7 >> 0x37);
              pbVar1 = (byte *)((long)pvVar6 + (long)(iVar8 >> 3));
              *pbVar1 = *pbVar1 | (byte)(1 << (7 - (((char)iVar7 + (bVar3 >> 5) & 7) - (bVar3 >> 5))
                                              & 0x1f));
            }
            iVar9 = iVar9 + 1;
          } while (iVar5 != iVar9);
        }
        iVar4 = iVar4 + 1;
        lVar10 = lVar10 + (int)uVar15;
        pvVar6 = (void *)((long)pvVar6 + (long)(int)uVar11);
      } while (iVar17 != iVar4);
      return;
    }
  }
  else {
    if (iVar4 < iVar17) {
      do {
        iVar9 = iVar14;
        if (iVar14 < iVar5) {
          do {
            iVar7 = iVar9 - *param_2;
            iVar8 = iVar7 + 7;
            if (-1 < iVar7) {
              iVar8 = iVar7;
            }
            uVar18 = (uint)(iVar7 >> 0x1f) >> 0x1d;
            if ((*(byte *)(lVar10 + (iVar8 >> 3)) >> ((iVar7 + uVar18 & 7) - uVar18 & 0x1f) & 1) !=
                0) {
              iVar7 = iVar9 - *param_3;
              iVar8 = iVar7 + 7;
              if (-1 < iVar7) {
                iVar8 = iVar7;
              }
              bVar3 = (byte)(iVar7 >> 0x37);
              pbVar1 = (byte *)((long)pvVar6 + (long)(iVar8 >> 3));
              *pbVar1 = *pbVar1 | (byte)(1 << (((char)iVar7 + (bVar3 >> 5) & 7) - (bVar3 >> 5) &
                                              0x1f));
            }
            iVar9 = iVar9 + 1;
          } while (iVar5 != iVar9);
        }
        iVar4 = iVar4 + 1;
        lVar10 = lVar10 + (int)uVar15;
        pvVar6 = (void *)((long)pvVar6 + (long)(int)uVar11);
      } while (iVar17 != iVar4);
    }
  }
  return;
}



ulong FUN_001207d0(byte **param_1)

{
  byte bVar1;
  byte *pbVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  iVar7 = *(int *)(param_1 + 1);
  iVar3 = iVar7 + -1;
  *(int *)(param_1 + 1) = iVar3;
  if (iVar7 == 0) {
    uVar4 = (*(code *)param_1[0x402])();
    *(uint *)((long)param_1 + 0xc) = uVar4;
    iVar3 = *(int *)(param_1 + 1);
    iVar7 = iVar3 + -1;
    *(int *)(param_1 + 1) = iVar7;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    iVar7 = iVar7 + -2;
    uVar4 = (uint)*pbVar2;
    *(int *)(param_1 + 1) = iVar7;
  }
  if (iVar3 == 0) {
    uVar5 = (*(code *)param_1[0x402])(param_1);
    iVar7 = *(int *)(param_1 + 1);
    *(uint *)((long)param_1 + 0xc) = uVar5;
    iVar3 = iVar7 + -1;
    *(int *)(param_1 + 1) = iVar3;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    bVar1 = *pbVar2;
    iVar3 = iVar7 + -1;
    *(int *)(param_1 + 1) = iVar3;
    uVar5 = (uint)bVar1;
  }
  if (iVar7 == 0) {
    uVar6 = (*(code *)param_1[0x402])(param_1);
    iVar3 = *(int *)(param_1 + 1);
    *(uint *)((long)param_1 + 0xc) = uVar6;
    *(int *)(param_1 + 1) = iVar3 + -1;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    uVar6 = (uint)*pbVar2;
    *(int *)(param_1 + 1) = iVar3 + -1;
  }
  uVar4 = uVar4 | uVar5 << 8 | uVar6 << 0x10;
  if (iVar3 != 0) {
    pbVar2 = *param_1;
    DAT_0033ccd0 = DAT_0033ccd0 + 4;
    *param_1 = pbVar2 + 1;
    return (ulong)((uint)*pbVar2 << 0x18 | uVar4);
  }
  iVar7 = (*(code *)param_1[0x402])(param_1);
  DAT_0033ccd0 = DAT_0033ccd0 + 4;
  *(int *)((long)param_1 + 0xc) = iVar7;
  return (ulong)(iVar7 << 0x18 | uVar4);
}



ulong FUN_001208e0(byte **param_1,ulong param_2)

{
  byte *pbVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  
  iVar5 = *(int *)(param_1 + 1);
  iVar6 = iVar5 + -1;
  *(int *)(param_1 + 1) = iVar6;
  if ((param_2 & 4) == 0) {
    if (iVar5 == 0) {
      uVar2 = (*(code *)param_1[0x402])();
      iVar6 = *(int *)(param_1 + 1);
      *(uint *)((long)param_1 + 0xc) = uVar2;
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar2 = (uint)*pbVar1;
    }
    iVar5 = iVar6 + -1;
    *(int *)(param_1 + 1) = iVar5;
    if (iVar6 == 0) {
      uVar3 = (*(code *)param_1[0x402])(param_1);
      iVar5 = *(int *)(param_1 + 1);
      *(uint *)((long)param_1 + 0xc) = uVar3;
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar3 = (uint)*pbVar1;
    }
    iVar6 = iVar5 + -1;
    *(int *)(param_1 + 1) = iVar6;
    if (iVar5 == 0) {
      uVar4 = (*(code *)param_1[0x402])(param_1);
      iVar6 = *(int *)(param_1 + 1);
      *(uint *)((long)param_1 + 0xc) = uVar4;
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar4 = (uint)*pbVar1;
    }
    uVar2 = uVar2 | uVar3 << 8 | uVar4 << 0x10;
    *(int *)(param_1 + 1) = iVar6 + -1;
    if (iVar6 == 0) {
      iVar6 = (*(code *)param_1[0x402])(param_1);
      *(int *)((long)param_1 + 0xc) = iVar6;
      uVar3 = iVar6 << 0x18;
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar3 = (uint)*pbVar1 << 0x18;
    }
  }
  else {
    if (iVar5 == 0) {
      uVar2 = (*(code *)param_1[0x402])();
      *(uint *)((long)param_1 + 0xc) = uVar2;
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar2 = (uint)*pbVar1;
    }
    iVar6 = *(int *)(param_1 + 1);
    iVar5 = iVar6 + -1;
    *(int *)(param_1 + 1) = iVar5;
    if (iVar6 == 0) {
      uVar3 = (*(code *)param_1[0x402])(param_1);
      iVar5 = *(int *)(param_1 + 1);
      *(uint *)((long)param_1 + 0xc) = uVar3;
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar3 = (uint)*pbVar1;
    }
    iVar6 = iVar5 + -1;
    *(int *)(param_1 + 1) = iVar6;
    if (iVar5 == 0) {
      uVar4 = (*(code *)param_1[0x402])(param_1);
      iVar6 = *(int *)(param_1 + 1);
      *(uint *)((long)param_1 + 0xc) = uVar4;
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar4 = (uint)*pbVar1;
    }
    uVar2 = uVar2 << 0x18 | uVar3 << 0x10 | uVar4 << 8;
    *(int *)(param_1 + 1) = iVar6 + -1;
    if (iVar6 == 0) {
      uVar3 = (*(code *)param_1[0x402])(param_1);
      DAT_0033ccd0 = DAT_0033ccd0 + 4;
      *(uint *)((long)param_1 + 0xc) = uVar3;
      return (ulong)(uVar3 | uVar2);
    }
    pbVar1 = *param_1;
    *param_1 = pbVar1 + 1;
    uVar3 = (uint)*pbVar1;
  }
  DAT_0033ccd0 = DAT_0033ccd0 + 4;
  return (ulong)(uVar3 | uVar2);
}



ulong FUN_00120ae0(byte **param_1,ulong param_2)

{
  byte *pbVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  
  iVar5 = *(int *)(param_1 + 1);
  iVar2 = iVar5 + -1;
  *(int *)(param_1 + 1) = iVar2;
  if ((param_2 & 4) == 0) {
    if (iVar5 == 0) {
      uVar3 = (*(code *)param_1[0x402])();
      *(uint *)((long)param_1 + 0xc) = uVar3;
      iVar2 = *(int *)(param_1 + 1);
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar3 = (uint)*pbVar1;
    }
    *(int *)(param_1 + 1) = iVar2 + -1;
    if (iVar2 == 0) {
      iVar5 = (*(code *)param_1[0x402])(param_1);
      *(int *)((long)param_1 + 0xc) = iVar5;
      uVar4 = iVar5 << 8;
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar4 = (uint)*pbVar1 << 8;
    }
  }
  else {
    if (iVar5 == 0) {
      uVar3 = (*(code *)param_1[0x402])();
      *(uint *)((long)param_1 + 0xc) = uVar3;
    }
    else {
      pbVar1 = *param_1;
      *param_1 = pbVar1 + 1;
      uVar3 = (uint)*pbVar1;
    }
    uVar3 = uVar3 << 8;
    iVar5 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar5 + -1;
    if (iVar5 == 0) {
      uVar4 = (*(code *)param_1[0x402])(param_1);
      DAT_0033ccd0 = DAT_0033ccd0 + 2;
      *(uint *)((long)param_1 + 0xc) = uVar4;
      return (ulong)(uVar4 | uVar3);
    }
    pbVar1 = *param_1;
    *param_1 = pbVar1 + 1;
    uVar4 = (uint)*pbVar1;
  }
  DAT_0033ccd0 = DAT_0033ccd0 + 2;
  return (ulong)(uVar4 | uVar3);
}



ulong FUN_00120be0(long param_1,ulong param_2,undefined2 *param_3)

{
  undefined2 uVar1;
  
  param_2 = param_2 & 0xffffffff;
  uVar1 = FUN_00120ae0();
  *param_3 = uVar1;
  uVar1 = FUN_00120ae0(param_1,param_2);
  param_3[1] = uVar1;
  uVar1 = FUN_00120ae0(param_1,param_2);
  param_3[2] = uVar1;
  uVar1 = FUN_00120ae0(param_1,param_2);
  param_3[3] = uVar1;
  uVar1 = FUN_00120ae0(param_1,param_2);
  param_3[4] = uVar1;
  uVar1 = FUN_00120ae0(param_1,param_2);
  param_3[5] = uVar1;
  return (ulong)(*(int *)(param_1 + 0xc) != -1);
}



undefined8 FUN_00120c50(long param_1,int *param_2,int param_3,int param_4,int *param_5,int *param_6)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  if (param_3 < 1) {
    return 0;
  }
  if (param_4 != *param_2) {
    piVar1 = param_2 + 4;
    piVar2 = piVar1;
    do {
      param_2 = piVar2;
      if (param_2 == piVar1 + (ulong)(param_3 - 1) * 4) {
        return 0;
      }
      piVar2 = param_2 + 4;
    } while (*param_2 != param_4);
  }
  if (DAT_0033ccd0 <= (uint)param_2[3]) {
    iVar3 = (**(code **)(param_1 + 0x2020))(param_1,(ulong)(param_2[3] - DAT_0033ccd0));
    *(int *)(param_1 + 0xc) = iVar3;
    if (iVar3 != -1) {
      DAT_0033ccd0 = param_2[3];
      *param_6 = param_2[2];
      *param_5 = param_2[1];
      return 1;
    }
  }
  return 0;
}



ulong FUN_00120d00(long param_1,byte **param_2,undefined8 param_3,uint param_4,ulong param_5)

{
  int iVar1;
  byte *pbVar2;
  byte bVar3;
  undefined2 uVar4;
  int iVar5;
  undefined4 uVar6;
  uint uVar7;
  ulong uVar8;
  long in_FS_OFFSET;
  uint local_28;
  undefined local_24 [4];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar5 = FUN_00120c50(param_2,param_3,(ulong)param_4,param_5 & 0xffffffff,&local_28,local_24);
  if ((iVar5 != 0) && (*(int *)((long)param_2 + 0xc) != -1)) {
    uVar8 = FUN_001207d0(param_2);
    local_28 = (uint)uVar8;
    if ((uVar8 & 0xfffffe00) == 0) {
      iVar5 = DAT_0033ccd0 + 1;
      iVar1 = *(int *)(param_2 + 1);
      DAT_0033ccd0 = iVar5;
      *(int *)(param_2 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar6 = (*(code *)param_2[0x402])(param_2);
        *(undefined4 *)((long)param_2 + 0xc) = uVar6;
        bVar3 = (byte)uVar6;
        iVar5 = DAT_0033ccd0;
      }
      else {
        pbVar2 = *param_2;
        *param_2 = pbVar2 + 1;
        bVar3 = *pbVar2;
      }
      iVar5 = iVar5 + 1;
      DAT_0033ccd0 = iVar5;
      *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xfe | bVar3 & 1;
      iVar1 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar7 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar7;
        iVar5 = DAT_0033ccd0;
      }
      else {
        pbVar2 = *param_2;
        *param_2 = pbVar2 + 1;
        uVar7 = (uint)*pbVar2;
      }
      iVar5 = iVar5 + 1;
      DAT_0033ccd0 = iVar5;
      *(byte *)(param_1 + 10) = (byte)((uVar7 & 1) << 2) | *(byte *)(param_1 + 10) & 0xfb;
      iVar1 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar6 = (*(code *)param_2[0x402])(param_2);
        bVar3 = (byte)uVar6;
        *(undefined4 *)((long)param_2 + 0xc) = uVar6;
        iVar5 = DAT_0033ccd0;
      }
      else {
        pbVar2 = *param_2;
        *param_2 = pbVar2 + 1;
        bVar3 = *pbVar2;
      }
      iVar5 = iVar5 + 1;
      DAT_0033ccd0 = iVar5;
      *(byte *)(param_1 + 10) = (bVar3 & 1) * '\x02' | *(byte *)(param_1 + 10) & 0xfd;
      iVar1 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar7 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar7;
        iVar5 = DAT_0033ccd0;
      }
      else {
        pbVar2 = *param_2;
        *param_2 = pbVar2 + 1;
        uVar7 = (uint)*pbVar2;
      }
      iVar5 = iVar5 + 1;
      DAT_0033ccd0 = iVar5;
      *(byte *)(param_1 + 10) = (byte)((uVar7 & 1) << 3) | *(byte *)(param_1 + 10) & 0xf7;
      iVar1 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar7 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar7;
        iVar5 = DAT_0033ccd0;
      }
      else {
        pbVar2 = *param_2;
        *param_2 = pbVar2 + 1;
        uVar7 = (uint)*pbVar2;
      }
      iVar5 = iVar5 + 1;
      DAT_0033ccd0 = iVar5;
      *(byte *)(param_1 + 10) = (byte)((uVar7 & 1) << 4) | *(byte *)(param_1 + 10) & 0xef;
      iVar1 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar7 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar7;
        iVar5 = DAT_0033ccd0;
      }
      else {
        pbVar2 = *param_2;
        *param_2 = pbVar2 + 1;
        uVar7 = (uint)*pbVar2;
      }
      iVar5 = iVar5 + 1;
      DAT_0033ccd0 = iVar5;
      *(byte *)(param_1 + 10) = (byte)((uVar7 & 1) << 5) | *(byte *)(param_1 + 10) & 0xdf;
      iVar1 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar1 + -1;
      if (iVar1 == 0) {
        uVar7 = (*(code *)param_2[0x402])(param_2);
        *(uint *)((long)param_2 + 0xc) = uVar7;
        iVar5 = DAT_0033ccd0;
      }
      else {
        pbVar2 = *param_2;
        *param_2 = pbVar2 + 1;
        uVar7 = (uint)*pbVar2;
      }
      DAT_0033ccd0 = iVar5 + 1;
      uVar7 = (uint)(*(ushort *)(param_1 + 10) & 0xfe7f) | (uVar7 & 3) << 7;
      *(undefined2 *)(param_1 + 10) = (short)uVar7;
      *(byte *)(param_1 + 0xb) = (byte)((ulong)uVar7 >> 8) & 0xfb | 2;
      iVar5 = *(int *)(param_2 + 1);
      *(int *)(param_2 + 1) = iVar5 + -1;
      if (iVar5 == 0) {
        uVar6 = (*(code *)param_2[0x402])(param_2);
        *(undefined4 *)((long)param_2 + 0xc) = uVar6;
      }
      else {
        *param_2 = *param_2 + 1;
      }
      uVar4 = FUN_001208e0(param_2);
      *(undefined2 *)(param_1 + 0x40) = uVar4;
      uVar4 = FUN_001208e0(param_2);
      *(undefined2 *)(param_1 + 0x42) = uVar4;
      uVar4 = FUN_001208e0(param_2);
      *(undefined2 *)(param_1 + 0xc) = uVar4;
      if (*(int *)((long)param_2 + 0xc) != -1) {
        iVar5 = FUN_00120be0(param_2,(ulong)local_28,param_1 + 0x1c);
        if (iVar5 != 0) {
          iVar5 = FUN_00120be0(param_2,(ulong)local_28,param_1 + 0x10);
          if (iVar5 != 0) {
            if (local_28 >> 8 != 1) {
              *(undefined8 *)(param_1 + 0x34) = *(undefined8 *)(param_1 + 0x1c);
              *(undefined4 *)(param_1 + 0x3c) = *(undefined4 *)(param_1 + 0x24);
              *(undefined8 *)(param_1 + 0x28) = *(undefined8 *)(param_1 + 0x10);
              *(undefined4 *)(param_1 + 0x30) = *(undefined4 *)(param_1 + 0x18);
              uVar8 = 1;
              goto LAB_00120f9a;
            }
            iVar5 = FUN_00120be0(param_2,(ulong)local_28,param_1 + 0x34);
            if (iVar5 != 0) {
              iVar5 = FUN_00120be0(param_2,(ulong)local_28,param_1 + 0x28);
              uVar8 = (ulong)(iVar5 != 0);
              goto LAB_00120f9a;
            }
          }
        }
      }
    }
  }
  uVar8 = 0;
LAB_00120f9a:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar8;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong FUN_001211c0(byte **param_1,short *param_2)

{
  int iVar1;
  byte *pbVar2;
  ushort uVar3;
  undefined4 uVar4;
  int iVar5;
  
  iVar5 = DAT_0033ccd0 + 1;
  iVar1 = *(int *)(param_1 + 1);
  DAT_0033ccd0 = iVar5;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar4 = (*(code *)param_1[0x402])();
    *(undefined4 *)((long)param_1 + 0xc) = uVar4;
    uVar3 = (ushort)uVar4;
    iVar5 = DAT_0033ccd0;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    uVar3 = (ushort)*pbVar2;
  }
  *param_2 = uVar3 - 0x80;
  iVar1 = *(int *)(param_1 + 1);
  iVar5 = iVar5 + 1;
  DAT_0033ccd0 = iVar5;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar4 = (*(code *)param_1[0x402])(param_1);
    *(undefined4 *)((long)param_1 + 0xc) = uVar4;
    uVar3 = (ushort)uVar4;
    iVar5 = DAT_0033ccd0;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    uVar3 = (ushort)*pbVar2;
  }
  param_2[1] = uVar3 - 0x80;
  iVar1 = *(int *)(param_1 + 1);
  iVar5 = iVar5 + 1;
  DAT_0033ccd0 = iVar5;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar4 = (*(code *)param_1[0x402])(param_1);
    *(undefined4 *)((long)param_1 + 0xc) = uVar4;
    uVar3 = (ushort)uVar4;
    iVar5 = DAT_0033ccd0;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    uVar3 = (ushort)*pbVar2;
  }
  param_2[2] = uVar3 - 0x80;
  iVar1 = *(int *)(param_1 + 1);
  iVar5 = iVar5 + 1;
  DAT_0033ccd0 = iVar5;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar4 = (*(code *)param_1[0x402])(param_1);
    *(undefined4 *)((long)param_1 + 0xc) = uVar4;
    uVar3 = (ushort)uVar4;
    iVar5 = DAT_0033ccd0;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    uVar3 = (ushort)*pbVar2;
  }
  param_2[3] = uVar3 - 0x80;
  iVar1 = *(int *)(param_1 + 1);
  DAT_0033ccd0 = iVar5 + 1;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 == 0) {
    uVar4 = (*(code *)param_1[0x402])(param_1);
    *(undefined4 *)((long)param_1 + 0xc) = uVar4;
    uVar3 = (ushort)uVar4;
  }
  else {
    pbVar2 = *param_1;
    *param_1 = pbVar2 + 1;
    uVar3 = (ushort)*pbVar2;
  }
  param_2[4] = uVar3 - 0x80;
  param_2[5] = 0;
  return (ulong)(*(int *)((long)param_1 + 0xc) != -1);
}



void pcfError(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4_00
             ,undefined8 param_5_00,undefined8 param_6_00)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [8];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined4 local_98;
  undefined4 local_88;
  undefined4 local_78;
  undefined4 local_68;
  undefined4 local_58;
  undefined4 local_48;
  undefined4 local_38;
  undefined4 local_28;
  
  if (in_AL != '\0') {
    local_98 = param_1;
    local_88 = param_2;
    local_78 = param_3;
    local_68 = param_4;
    local_58 = param_5;
    local_48 = param_6;
    local_38 = param_7;
    local_28 = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &stack0x00000008;
  local_d8 = local_c8;
  local_e8 = 8;
  local_e4 = 0x30;
  local_c0 = param_2_00;
  local_b8 = param_3_00;
  local_b0 = param_4_00;
  local_a8 = param_5_00;
  local_a0 = param_6_00;
  fwrite("PCF Error: ",1,0xb,stderr);
  __vfprintf_chk(stderr,1,param_1_00,&local_e8);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4 * FUN_00121450(long param_1,uint *param_2)

{
  int iVar1;
  uint uVar2;
  undefined4 uVar3;
  undefined4 *__ptr;
  undefined4 *puVar4;
  
  DAT_0033ccd0 = 0;
  iVar1 = FUN_001207d0();
  if (iVar1 == 0x70636601) {
    uVar2 = FUN_001207d0(param_1);
    if (*(int *)(param_1 + 0xc) != -1) {
      if (0x7ffffff < uVar2) {
        pcfError("pcfReadTOC(): invalid file format\n");
        return (undefined4 *)0;
      }
      __ptr = (undefined4 *)malloc((long)(int)uVar2 << 4);
      if (__ptr != (undefined4 *)0x0) {
        if (uVar2 != 0) {
          puVar4 = __ptr;
          do {
            uVar3 = FUN_001207d0(param_1);
            *puVar4 = uVar3;
            uVar3 = FUN_001207d0(param_1);
            puVar4[1] = uVar3;
            uVar3 = FUN_001207d0(param_1);
            puVar4[2] = uVar3;
            uVar3 = FUN_001207d0(param_1);
            iVar1 = *(int *)(param_1 + 0xc);
            puVar4[3] = uVar3;
            if (iVar1 == -1) {
              free(__ptr);
              return (undefined4 *)0;
            }
            puVar4 = puVar4 + 4;
          } while (puVar4 != __ptr + (ulong)(uVar2 - 1) * 4 + 4);
        }
        *param_2 = uVar2;
        return __ptr;
      }
      pcfError("pcfReadTOC(): Couldn\'t allocate tables (%d*%d)\n",(ulong)uVar2,0x10);
      return (undefined4 *)0;
    }
  }
  return (undefined4 *)0;
}



undefined8 FUN_00121570(long param_1,byte **param_2,undefined8 param_3,uint param_4)

{
  byte *pbVar1;
  byte bVar2;
  int iVar3;
  uint uVar4;
  ulong uVar5;
  long lVar6;
  void *__ptr;
  size_t sVar7;
  undefined8 uVar8;
  long *__ptr_00;
  uint uVar9;
  long *plVar10;
  byte *pbVar11;
  byte *__ptr_01;
  long in_FS_OFFSET;
  long *local_50;
  uint local_48;
  undefined local_44 [4];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar3 = FUN_00120c50(param_2,param_3,(ulong)param_4,1,&local_48,local_44);
  if (iVar3 == 0) {
LAB_001215c7:
    __ptr_01 = (byte *)0x0;
    __ptr_00 = (long *)0x0;
  }
  else {
    uVar5 = FUN_001207d0(param_2);
    local_48 = (uint)uVar5;
    if ((uVar5 & 0xffffff00) != 0) goto LAB_001215c7;
    uVar4 = FUN_001208e0(param_2,uVar5 & 0xffffffff);
    if (uVar4 - 1 < 0x7ffffff) {
      if (*(int *)((long)param_2 + 0xc) == -1) goto LAB_001215c7;
      __ptr_00 = (long *)malloc((long)(int)uVar4 << 4);
      if (__ptr_00 == (long *)0x0) {
        __ptr_01 = (byte *)0x0;
        pcfError("pcfGetProperties(): Couldn\'t allocate props (%d*%d)\n",(ulong)uVar4,0x10);
      }
      else {
        __ptr_01 = (byte *)malloc((long)(int)uVar4);
        if (__ptr_01 == (byte *)0x0) {
          pcfError("pcfGetProperties(): Couldn\'t allocate isStringProp (%d*%d)\n",(ulong)uVar4,1);
        }
        else {
          plVar10 = __ptr_00;
          pbVar11 = __ptr_01;
          do {
            iVar3 = FUN_001208e0(param_2,(ulong)local_48);
            DAT_0033ccd0 = DAT_0033ccd0 + 1;
            *plVar10 = (long)iVar3;
            iVar3 = *(int *)(param_2 + 1);
            *(int *)(param_2 + 1) = iVar3 + -1;
            if (iVar3 == 0) {
              _bVar2 = (*(code *)param_2[0x402])(param_2);
              bVar2 = (byte)_bVar2;
              *(undefined4 *)((long)param_2 + 0xc) = _bVar2;
            }
            else {
              pbVar1 = *param_2;
              *param_2 = pbVar1 + 1;
              bVar2 = *pbVar1;
            }
            *pbVar11 = bVar2;
            iVar3 = FUN_001208e0(param_2,(ulong)local_48);
            lVar6 = (long)iVar3;
            plVar10[1] = lVar6;
            bVar2 = *pbVar11;
            uVar5 = (ulong)(uint)(int)(char)bVar2;
            if ((*plVar10 < 0) || (1 < bVar2)) {
LAB_00121770:
              pcfError("pcfGetProperties(): invalid file format %ld %d %ld\n",*plVar10,uVar5,lVar6);
              goto LAB_001215cc;
            }
            if ((lVar6 < 0) && (((int)(char)bVar2 & 1U) != 0)) {
              uVar5 = 1;
              goto LAB_00121770;
            }
            if (*(int *)((long)param_2 + 0xc) == -1) goto LAB_001215cc;
            plVar10 = plVar10 + 2;
            pbVar11 = pbVar11 + 1;
          } while (plVar10 != __ptr_00 + (ulong)(uVar4 - 1) * 2 + 2);
          if ((uVar4 & 3) != 0) {
            uVar9 = 4 - (uVar4 & 3);
            iVar3 = (*(code *)param_2[0x404])(param_2,(ulong)uVar9);
            DAT_0033ccd0 = DAT_0033ccd0 + uVar9;
            *(int *)((long)param_2 + 0xc) = iVar3;
            if (iVar3 == -1) goto LAB_001215cc;
          }
          uVar9 = FUN_001208e0(param_2,(ulong)local_48);
          if ((-1 < (int)uVar9) && (*(int *)((long)param_2 + 0xc) != -1)) {
            __ptr = malloc((long)(int)uVar9);
            if (__ptr == (void *)0x0) {
              pcfError("pcfGetProperties(): Couldn\'t allocate strings (%d)\n",(ulong)uVar9);
            }
            else {
              BufFileRead(param_2,__ptr,(ulong)uVar9);
              if (*(int *)((long)param_2 + 0xc) != -1) {
                DAT_0033ccd0 = DAT_0033ccd0 + uVar9;
                pbVar11 = __ptr_01;
                local_50 = __ptr_00;
                do {
                  lVar6 = *local_50;
                  sVar7 = strlen((char *)(lVar6 + (long)__ptr));
                  lVar6 = MakeAtom((char *)(lVar6 + (long)__ptr),sVar7 & 0xffffffff,1);
                  bVar2 = *pbVar11;
                  *local_50 = lVar6;
                  if (bVar2 != 0) {
                    lVar6 = local_50[1];
                    sVar7 = strlen((char *)(lVar6 + (long)__ptr));
                    lVar6 = MakeAtom((char *)(lVar6 + (long)__ptr),sVar7 & 0xffffffff,1);
                    local_50[1] = lVar6;
                  }
                  pbVar11 = pbVar11 + 1;
                  local_50 = local_50 + 2;
                } while ((int)pbVar11 - (int)__ptr_01 < (int)uVar4);
                free(__ptr);
                *(byte **)(param_1 + 0x50) = __ptr_01;
                *(long **)(param_1 + 0x48) = __ptr_00;
                *(uint *)(param_1 + 0x44) = uVar4;
                uVar8 = 1;
                goto LAB_001215de;
              }
            }
          }
        }
      }
    }
    else {
      __ptr_01 = (byte *)0x0;
      __ptr_00 = (long *)0x0;
      pcfError("pcfGetProperties(): invalid nprops value (%d)\n",(ulong)uVar4);
    }
  }
LAB_001215cc:
  free(__ptr_01);
  free(__ptr_00);
  uVar8 = 0;
LAB_001215de:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar8;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 pcfReadFont(long param_1,long param_2,uint param_3,uint param_4,uint param_5,int param_6)

{
  long lVar1;
  short sVar2;
  short sVar3;
  short sVar4;
  ushort uVar5;
  ushort uVar6;
  ushort uVar7;
  bool bVar8;
  undefined2 uVar9;
  int iVar10;
  uint uVar11;
  undefined4 uVar12;
  uint uVar13;
  int iVar14;
  int *__ptr;
  int *piVar15;
  ulong uVar16;
  undefined8 uVar17;
  void *__ptr_00;
  void *__ptr_01;
  void *pvVar18;
  undefined4 *puVar19;
  ushort uVar20;
  byte bVar21;
  short *psVar22;
  void **__ptr_02;
  long lVar23;
  void **ppvVar24;
  long in_FS_OFFSET;
  short *local_c0;
  undefined local_b8;
  undefined local_b4;
  undefined local_b0;
  undefined local_ac;
  uint local_94;
  void *local_90;
  uint local_64;
  undefined local_60 [4];
  uint local_5c;
  uint local_58 [6];
  long local_40;
  
  *(undefined4 *)(param_1 + 0x4c) = 0;
  *(undefined8 *)(param_1 + 0x50) = 0;
  *(undefined8 *)(param_1 + 0x58) = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  __ptr = (int *)FUN_00121450(param_2,&local_5c);
  if (__ptr != (int *)0x0) {
    lVar1 = param_1 + 8;
    iVar10 = FUN_00121570(lVar1,param_2,__ptr);
    if (iVar10 != 0) {
      uVar16 = (ulong)local_5c;
      if ((int)local_5c < 1) {
LAB_001219b6:
        iVar10 = FUN_00120d00(lVar1,param_2,__ptr,uVar16,2);
        if (iVar10 == 0) goto LAB_00121a70;
        uVar16 = (ulong)local_5c;
        bVar8 = false;
      }
      else {
        if (*__ptr != 0x100) {
          piVar15 = __ptr;
          do {
            piVar15 = piVar15 + 4;
            if (piVar15 == __ptr + (ulong)(local_5c - 1) * 4 + 4) goto LAB_001219b6;
          } while (*piVar15 != 0x100);
        }
        bVar8 = true;
      }
      iVar10 = FUN_00120c50(param_2,__ptr,uVar16,4,&local_64,local_60);
      if (iVar10 != 0) {
        uVar16 = FUN_001207d0(param_2);
        local_64 = (uint)uVar16;
        if ((uVar16 & 0xfffffe00) == 0) {
          if ((uVar16 & 0xffffff00) == 0) {
            local_94 = FUN_001208e0();
          }
          else {
            local_94 = FUN_00120ae0(param_2,uVar16 & 0xffffffff);
          }
          if (*(int *)(param_2 + 0xc) != -1) {
            if (local_94 < 0x5555556) {
              local_c0 = (short *)malloc((long)(int)local_94 * 0x18);
              if (local_c0 == (short *)0x0) {
                __ptr_00 = (void *)0x0;
                __ptr_02 = (void **)0x0;
                __ptr_01 = (void *)0x0;
                pcfError("pcfReadFont(): Couldn\'t allocate metrics (%d*%d)\n",(ulong)local_94,0x18)
                ;
              }
              else {
                if (local_94 != 0) {
                  psVar22 = local_c0;
                  do {
                    if ((local_64 & 0xffffff00) == 0) {
                      iVar10 = FUN_00120be0(param_2,(ulong)local_64,psVar22);
                    }
                    else {
                      iVar10 = FUN_001211c0(param_2);
                    }
                    if (iVar10 == 0) {
                      __ptr_00 = (void *)0x0;
                      pvVar18 = (void *)0x0;
                      local_90 = (void *)0x0;
                      goto LAB_00121baa;
                    }
                    psVar22 = psVar22 + 0xc;
                  } while (psVar22 != local_c0 + (ulong)(local_94 - 1) * 0xc + 0xc);
                }
                iVar10 = FUN_00120c50(param_2,__ptr,(ulong)local_5c,8,&local_64,local_60);
                if (iVar10 != 0) {
                  uVar16 = FUN_001207d0(param_2);
                  local_64 = (uint)uVar16;
                  if ((((uVar16 & 0xffffff00) == 0) &&
                      (uVar11 = FUN_001208e0(param_2,uVar16 & 0xffffffff), local_94 == uVar11)) &&
                     (*(int *)(param_2 + 0xc) != -1)) {
                    __ptr_01 = (void *)0x0;
                    __ptr_00 = malloc((long)(int)local_94 << 2);
                    if (__ptr_00 == (void *)0x0) {
                      __ptr_02 = (void **)0x0;
                      pcfError("pcfReadFont(): Couldn\'t allocate offsets (%d*%d)\n",(ulong)local_94
                               ,4);
                    }
                    else {
                      do {
                        uVar16 = (ulong)local_64;
                        if ((int)uVar11 <= (int)__ptr_01) {
                          lVar23 = 0;
                          goto LAB_00121c84;
                        }
                        uVar12 = FUN_001208e0(param_2,uVar16);
                        *(undefined4 *)((long)__ptr_00 + (long)__ptr_01 * 4) = uVar12;
                        __ptr_01 = (void *)((long)__ptr_01 + 1);
                      } while (*(int *)(param_2 + 0xc) != -1);
LAB_00121cb7:
                      pvVar18 = (void *)0x0;
                      local_90 = (void *)0x0;
LAB_00121baa:
                      __ptr_02 = (void **)0x0;
                      free(local_90);
                      __ptr_01 = pvVar18;
                    }
                    goto LAB_00121a82;
                  }
                }
                __ptr_00 = (void *)0x0;
                __ptr_02 = (void **)0x0;
                __ptr_01 = (void *)0x0;
              }
            }
            else {
              __ptr_00 = (void *)0x0;
              __ptr_02 = (void **)0x0;
              pcfError("pcfReadFont(): invalid file format\n");
              local_c0 = (short *)0x0;
              __ptr_01 = (void *)0x0;
            }
            goto LAB_00121a82;
          }
        }
      }
    }
  }
LAB_00121a70:
  __ptr_00 = (void *)0x0;
  __ptr_02 = (void **)0x0;
  __ptr_01 = (void *)0x0;
  local_c0 = (short *)0x0;
LAB_00121a82:
  free(__ptr_02);
  free(__ptr_01);
  free(local_c0);
  free(*(void **)(param_1 + 0x50));
  *(undefined4 *)(param_1 + 0x4c) = 0;
  *(undefined8 *)(param_1 + 0x50) = 0;
  free(*(void **)(param_1 + 0x58));
  free(__ptr);
  free(__ptr_00);
  uVar17 = 0x50;
LAB_00121ad2:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar17;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
LAB_00121c84:
  uVar13 = FUN_001208e0(param_2,uVar16);
  iVar10 = *(int *)(param_2 + 0xc);
  local_58[lVar23] = uVar13;
  if (iVar10 == -1) goto LAB_00121cb7;
  lVar23 = lVar23 + 1;
  if (lVar23 != 4) goto code_r0x00121cac;
  uVar13 = local_58[local_64 & 3];
  if (uVar13 == 0) {
    __ptr_01 = malloc(1);
    uVar16 = 0;
    if (__ptr_01 == (void *)0x0) {
      uVar16 = 1;
      goto LAB_00121eb3;
    }
  }
  else {
    uVar16 = (ulong)uVar13;
    __ptr_01 = malloc((long)(int)uVar13);
    if (__ptr_01 == (void *)0x0) {
LAB_00121eb3:
      __ptr_02 = (void **)0x0;
      __ptr_01 = (void *)0x0;
      pcfError("pcfReadFont(): Couldn\'t allocate bitmaps (%d)\n",uVar16);
      goto LAB_00121a82;
    }
  }
  BufFileRead(param_2,__ptr_01,uVar16);
  pvVar18 = __ptr_01;
  if (*(int *)(param_2 + 0xc) == -1) goto LAB_00121f3c;
  DAT_0033ccd0 = DAT_0033ccd0 + (int)uVar16;
  if ((local_64 >> 3 & 1) != param_3) {
    BitOrderInvert();
  }
  bVar21 = (byte)local_64;
  if ((bool)(~((byte)(local_64 >> 2) ^ (byte)(local_64 >> 3)) & 1) != (param_3 == param_4)) {
    iVar10 = param_6;
    if (param_3 == param_4) {
      iVar10 = 1 << ((byte)(local_64 >> 4) & 3);
    }
    if (iVar10 == 2) {
      TwoByteSwap(__ptr_01);
      bVar21 = (byte)local_64;
    }
    else {
      if (iVar10 == 4) {
        FourByteSwap(__ptr_01);
        bVar21 = (byte)local_64;
      }
    }
  }
  if (1 << (bVar21 & 3) == param_5) goto LAB_00121f65;
  if (param_5 == 4) {
    uVar16 = 2;
  }
  else {
    uVar16 = (ulong)(param_5 == 2);
  }
  uVar13 = local_58[uVar16];
  pvVar18 = malloc((long)(int)uVar13);
  if (pvVar18 == (void *)0x0) {
    __ptr_02 = (void **)0x0;
    pcfError("pcfReadFont(): Couldn\'t allocate padbitmaps (%d)\n",(ulong)uVar13);
    goto LAB_00121a82;
  }
  lVar23 = 0;
  iVar10 = 0;
  psVar22 = local_c0;
  while ((int)lVar23 < (int)uVar11) {
    iVar14 = *(int *)((long)__ptr_00 + lVar23 * 4);
    sVar2 = psVar22[3];
    sVar3 = psVar22[4];
    sVar4 = psVar22[1];
    *(int *)((long)__ptr_00 + lVar23 * 4) = iVar10;
    iVar14 = RepadBitmap((long)iVar14 + (long)__ptr_01,(long)iVar10 + (long)pvVar18,
                         (ulong)(uint)(1 << ((byte)local_64 & 3)),(ulong)param_5,
                         (ulong)(uint)((int)sVar4 - (int)*psVar22),
                         (ulong)(uint)((int)sVar2 + (int)sVar3));
    iVar10 = iVar10 + iVar14;
    lVar23 = lVar23 + 1;
    psVar22 = psVar22 + 0xc;
  }
  free(__ptr_01);
LAB_00121f65:
  lVar23 = 0;
  while ((int)lVar23 < (int)uVar11) {
    *(ulong *)(local_c0 + lVar23 * 0xc + 8) =
         (ulong)*(uint *)((long)__ptr_00 + lVar23 * 4) + (long)pvVar18;
    lVar23 = lVar23 + 1;
  }
  free(__ptr_00);
  iVar10 = FUN_00120c50(param_2,__ptr,(ulong)local_5c,0x10,&local_64,local_60);
  __ptr_01 = pvVar18;
  if (iVar10 != 0) {
    uVar16 = FUN_001207d0(param_2);
    local_64 = (uint)uVar16;
    if ((uVar16 & 0xfffffe00) == 0) {
      if ((uVar16 & 0xffffff00) == 0) {
        uVar11 = FUN_001208e0();
      }
      else {
        uVar11 = FUN_00120ae0(param_2);
      }
      if ((*(int *)(param_2 + 0xc) == -1) || (local_94 != uVar11)) goto LAB_00121f39;
      local_90 = malloc((long)(int)uVar11 * 0xc);
      iVar10 = 0;
      if (local_90 == (void *)0x0) {
        __ptr_00 = (void *)0x0;
        __ptr_02 = (void **)0x0;
        pcfError("pcfReadFont(): Couldn\'t allocate ink_metrics (%d*%d)\n",(ulong)uVar11,0xc);
        goto LAB_00121a82;
      }
      while( true ) {
        if ((int)uVar11 <= iVar10) goto LAB_00121fb5;
        if ((local_64 & 0xffffff00) == 0) break;
        iVar14 = FUN_001211c0(param_2);
        if (iVar14 == 0) goto LAB_001221b3;
LAB_00122040:
        iVar10 = iVar10 + 1;
      }
      iVar14 = FUN_00120be0(param_2);
      if (iVar14 != 0) goto LAB_00122040;
LAB_001221b3:
      __ptr_00 = (void *)0x0;
      goto LAB_00121baa;
    }
LAB_00121f39:
    __ptr_00 = (void *)0x0;
LAB_00121f3c:
    __ptr_02 = (void **)0x0;
    __ptr_01 = pvVar18;
    goto LAB_00121a82;
  }
  local_90 = (void *)0x0;
LAB_00121fb5:
  iVar10 = FUN_00120c50(param_2,__ptr,(ulong)local_5c);
  if (iVar10 != 0) {
    uVar16 = FUN_001207d0(param_2);
    local_64 = (uint)uVar16;
    if ((uVar16 & 0xffffff00) == 0) {
      uVar9 = FUN_00120ae0(param_2);
      *(undefined2 *)(param_1 + 8) = uVar9;
      uVar9 = FUN_00120ae0(param_2);
      *(undefined2 *)(param_1 + 10) = uVar9;
      uVar9 = FUN_00120ae0(param_2);
      *(undefined2 *)(param_1 + 0xc) = uVar9;
      uVar9 = FUN_00120ae0(param_2);
      *(undefined2 *)(param_1 + 0xe) = uVar9;
      uVar9 = FUN_00120ae0(param_2);
      *(undefined2 *)(param_1 + 0x10) = uVar9;
      if (*(int *)(param_2 + 0xc) != -1) {
        if (*(ushort *)(param_1 + 8) <= *(ushort *)(param_1 + 10)) {
          if ((*(ushort *)(param_1 + 0xc) <= *(ushort *)(param_1 + 0xe)) &&
             (iVar10 = (uint)*(ushort *)(param_1 + 10) - (uint)*(ushort *)(param_1 + 8),
             iVar10 < 0x100)) {
            uVar11 = (((uint)*(ushort *)(param_1 + 0xe) - (uint)*(ushort *)(param_1 + 0xc)) + 1) *
                     (iVar10 + 1);
            iVar10 = (int)(uVar11 + 0x7f) / 0x80;
            __ptr_02 = (void **)calloc((long)iVar10,8);
            if (__ptr_02 == (void **)0x0) {
              __ptr_00 = (void *)0x0;
              pcfError("pcfReadFont(): Couldn\'t allocate encoding (%d*%d)\n",(ulong)uVar11,8);
              free(local_90);
              goto LAB_00121a82;
            }
            *(byte *)(param_1 + 0x12) = *(byte *)(param_1 + 0x12) | 0x40;
            uVar13 = 0;
            while ((int)uVar13 < (int)uVar11) {
              iVar14 = FUN_00120ae0(param_2);
              if (*(int *)(param_2 + 0xc) == -1) goto LAB_00122216;
              if (iVar14 == 0xffff) {
                *(byte *)(param_1 + 0x12) = *(byte *)(param_1 + 0x12) & 0xbf;
              }
              else {
                ppvVar24 = __ptr_02 + (int)uVar13 / 0x80;
                if (*ppvVar24 == (void *)0x0) {
                  __ptr_00 = calloc(0x80,8);
                  *ppvVar24 = __ptr_00;
                  if (__ptr_00 == (void *)0x0) goto LAB_00122216;
                }
                *(short **)((long)*ppvVar24 + (ulong)(uVar13 & 0x7f) * 8) =
                     local_c0 + (long)iVar14 * 0xc;
              }
              uVar13 = uVar13 + 1;
            }
            if ((!bVar8) || (iVar14 = FUN_00120d00(lVar1,param_2,__ptr), iVar14 != 0)) {
              puVar19 = (undefined4 *)malloc(0x40);
              if (puVar19 != (undefined4 *)0x0) {
                uVar5 = *(ushort *)(param_1 + 0x10);
                *puVar19 = 0x70636601;
                *(void **)(puVar19 + 8) = pvVar18;
                *(void ***)(puVar19 + 10) = __ptr_02;
                puVar19[1] = local_94;
                puVar19[2] = local_5c;
                *(undefined8 *)(puVar19 + 0xc) = 0;
                *(short **)(puVar19 + 4) = local_c0;
                *(void **)(puVar19 + 6) = local_90;
                if (uVar5 != 0xffff) {
                  uVar7 = uVar5 >> 8;
                  if ((*(ushort *)(param_1 + 0xc) <= uVar7) &&
                     (uVar7 < *(ushort *)(param_1 + 0xe) || uVar7 == *(ushort *)(param_1 + 0xe))) {
                    uVar6 = *(ushort *)(param_1 + 8);
                    uVar20 = (ushort)((ulong)uVar5 & 0xff);
                    if ((uVar6 <= uVar20) && (uVar20 <= *(ushort *)(param_1 + 10))) {
                      uVar11 = (((uint)*(ushort *)(param_1 + 10) - (uint)uVar6) + 1) *
                               ((uint)uVar7 - (uint)*(ushort *)(param_1 + 0xc)) +
                               ((int)((ulong)uVar5 & 0xff) - (uint)uVar6);
                      if (__ptr_02[uVar11 >> 7] == (void *)0x0) {
                        uVar17 = 0;
                      }
                      else {
                        uVar17 = *(undefined8 *)
                                  ((long)__ptr_02[uVar11 >> 7] + (ulong)(uVar11 & 0x7f) * 8);
                      }
                      *(undefined8 *)(puVar19 + 0xc) = uVar17;
                    }
                  }
                }
                *(undefined8 *)(puVar19 + 0xe) = 0;
                *(undefined4 **)(param_1 + 0x98) = puVar19;
                *(undefined8 *)(param_1 + 0x80) = 0;
                *(code **)(param_1 + 0x68) = bitmapGetGlyphs;
                *(code **)(param_1 + 0x70) = bitmapGetMetrics;
                *(undefined8 *)(param_1 + 0x78) = 0x1210f0;
                local_b8 = (undefined)param_3;
                *(undefined *)(param_1 + 0x60) = local_b8;
                local_b0 = (undefined)param_4;
                *(undefined *)(param_1 + 0x61) = local_b0;
                local_b4 = (undefined)param_5;
                *(undefined *)(param_1 + 0x62) = local_b4;
                local_ac = (undefined)param_6;
                *(undefined *)(param_1 + 99) = local_ac;
                free(__ptr);
                uVar17 = 0x55;
                goto LAB_00121ad2;
              }
              pcfError("pcfReadFont(): Couldn\'t allocate bitmapFont (%d)\n",0x40);
            }
LAB_00122216:
            free(local_90);
            if (0 < iVar10) {
              ppvVar24 = __ptr_02;
              do {
                __ptr_00 = *ppvVar24;
                ppvVar24 = ppvVar24 + 1;
                free(__ptr_00);
              } while (ppvVar24 != __ptr_02 + (ulong)(iVar10 - 1) + 1);
            }
            __ptr_00 = (void *)0x0;
            goto LAB_00121a82;
          }
        }
      }
    }
  }
  __ptr_00 = (void *)0x0;
  __ptr_02 = (void **)0x0;
  free(local_90);
  goto LAB_00121a82;
code_r0x00121cac:
  uVar16 = (ulong)local_64;
  goto LAB_00121c84;
}



undefined8 pcfReadFontInfo(ushort *param_1,long param_2)

{
  bool bVar1;
  ushort uVar2;
  int iVar3;
  int iVar4;
  int *__ptr;
  int *piVar5;
  ulong uVar6;
  undefined8 uVar7;
  long in_FS_OFFSET;
  uint local_3c;
  uint local_38;
  undefined local_34 [4];
  long local_30;
  
  *(undefined8 *)(param_1 + 0x28) = 0;
  *(undefined8 *)(param_1 + 0x24) = 0;
  *(undefined4 *)(param_1 + 0x22) = 0;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  __ptr = (int *)FUN_00121450(param_2,&local_3c);
  if (__ptr != (int *)0x0) {
    iVar3 = FUN_00121570(param_1,param_2,__ptr);
    if (iVar3 != 0) {
      uVar6 = (ulong)local_3c;
      if ((int)local_3c < 1) {
LAB_001224be:
        iVar3 = FUN_00120d00(param_1,param_2,__ptr,uVar6,2);
        if (iVar3 == 0) goto LAB_00122510;
        uVar6 = (ulong)local_3c;
        bVar1 = false;
      }
      else {
        if (*__ptr != 0x100) {
          piVar5 = __ptr;
          do {
            piVar5 = piVar5 + 4;
            if (piVar5 == __ptr + (ulong)(local_3c - 1) * 4 + 4) goto LAB_001224be;
          } while (*piVar5 != 0x100);
        }
        bVar1 = true;
      }
      iVar3 = FUN_00120c50(param_2,__ptr,uVar6,0x20,&local_38,local_34);
      if (iVar3 != 0) {
        uVar6 = FUN_001207d0(param_2);
        local_38 = (uint)uVar6;
        if ((uVar6 & 0xffffff00) == 0) {
          uVar2 = FUN_00120ae0(param_2);
          *param_1 = uVar2;
          uVar2 = FUN_00120ae0(param_2);
          param_1[1] = uVar2;
          uVar2 = FUN_00120ae0(param_2);
          param_1[2] = uVar2;
          uVar2 = FUN_00120ae0(param_2);
          param_1[3] = uVar2;
          uVar2 = FUN_00120ae0(param_2);
          param_1[4] = uVar2;
          if (*(int *)(param_2 + 0xc) != -1) {
            if (*param_1 <= param_1[1]) {
              if ((param_1[2] <= param_1[3]) &&
                 (iVar3 = (uint)param_1[1] - (uint)*param_1, iVar3 < 0x100)) {
                *(byte *)(param_1 + 5) = *(byte *)(param_1 + 5) | 0x40;
                iVar3 = (((uint)param_1[3] - (uint)param_1[2]) + 1) * (iVar3 + 1);
                do {
                  if (iVar3 == 0) {
                    if (*(int *)(param_2 + 0xc) == -1) break;
                    if (bVar1) {
                      iVar3 = FUN_00120d00(param_1,param_2,__ptr,(ulong)local_3c,0x100);
                      if (iVar3 == 0) break;
                    }
                    free(__ptr);
                    uVar7 = 0x55;
                    goto LAB_00122536;
                  }
                  iVar4 = FUN_00120ae0(param_2,(ulong)local_38);
                  if (iVar4 == 0xffff) {
                    *(byte *)(param_1 + 5) = *(byte *)(param_1 + 5) & 0xbf;
                  }
                  iVar3 = iVar3 + -1;
                } while (*(int *)(param_2 + 0xc) != -1);
              }
            }
          }
        }
      }
    }
  }
LAB_00122510:
  *(undefined4 *)(param_1 + 0x22) = 0;
  free(*(void **)(param_1 + 0x24));
  free(*(void **)(param_1 + 0x28));
  free(__ptr);
  uVar7 = 0x50;
LAB_00122536:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar7;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong FUN_00122690(long *param_1,ulong param_2)

{
  long *plVar1;
  int iVar2;
  undefined *puVar3;
  undefined8 uVar4;
  ulong uVar5;
  
  uVar5 = param_2 & 0xffffffff;
  DAT_0033ccd4 = DAT_0033ccd4 + 4;
  plVar1 = param_1 + 1;
  *(int *)plVar1 = *(int *)plVar1 + -1;
  if (*(int *)plVar1 == 0) {
    (*(code *)param_1[0x403])(param_2 & 0xff,param_1);
  }
  else {
    puVar3 = (undefined *)*param_1;
    *(undefined **)param_1 = puVar3 + 1;
    *puVar3 = (char)param_2;
  }
  iVar2 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar2 + -1;
  if (iVar2 + -1 == 0) {
    (*(code *)param_1[0x403])((ulong)(uint)((int)uVar5 >> 8) & 0xff,param_1);
  }
  else {
    puVar3 = (undefined *)*param_1;
    *(undefined **)param_1 = puVar3 + 1;
    *puVar3 = (char)(uVar5 >> 8);
  }
  iVar2 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar2 + -1;
  if (iVar2 + -1 == 0) {
    (*(code *)param_1[0x403])((ulong)(uint)((int)uVar5 >> 0x10) & 0xff,param_1);
  }
  else {
    puVar3 = (undefined *)*param_1;
    *(undefined **)param_1 = puVar3 + 1;
    *puVar3 = (char)(uVar5 >> 0x10);
  }
  iVar2 = *(int *)(param_1 + 1);
  *(int *)(param_1 + 1) = iVar2 + -1;
  if (iVar2 + -1 == 0) {
                    // WARNING: Could not recover jumptable at 0x00122715. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar4 = (*(code *)param_1[0x403])(uVar5 >> 0x18,param_1);
    return uVar4;
  }
  puVar3 = (undefined *)*param_1;
  *(undefined **)param_1 = puVar3 + 1;
  *puVar3 = (char)(uVar5 >> 0x18);
  return uVar5 >> 0x18;
}



ulong FUN_00122770(long *param_1,ulong param_2,ulong param_3)

{
  undefined *puVar1;
  int iVar2;
  undefined8 uVar3;
  undefined uVar4;
  ulong uVar5;
  undefined uVar6;
  
  uVar5 = param_3 & 0xffffffff;
  DAT_0033ccd4 = DAT_0033ccd4 + 4;
  iVar2 = *(int *)(param_1 + 1) + -1;
  *(int *)(param_1 + 1) = iVar2;
  uVar4 = (undefined)(uVar5 >> 0x18);
  _uVar6 = (int)uVar5 >> 8;
  _uVar6 = (int)uVar5 >> 0x10;
  uVar6 = (undefined)(uVar5 >> 8);
  uVar6 = (undefined)(uVar5 >> 0x10);
  if ((param_2 & 4) == 0) {
    if (iVar2 == 0) {
      (*(code *)param_1[0x403])(param_3 & 0xff,param_1);
    }
    else {
      puVar1 = (undefined *)*param_1;
      *(undefined **)param_1 = puVar1 + 1;
      *puVar1 = (char)uVar5;
    }
    iVar2 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar2 + -1;
    if (iVar2 + -1 == 0) {
      (*(code *)param_1[0x403])((ulong)_uVar6 & 0xff,param_1);
    }
    else {
      puVar1 = (undefined *)*param_1;
      *(undefined **)param_1 = puVar1 + 1;
      *puVar1 = uVar6;
    }
    iVar2 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar2 + -1;
    if (iVar2 + -1 == 0) {
      (*(code *)param_1[0x403])((ulong)_uVar6 & 0xff,param_1);
    }
    else {
      puVar1 = (undefined *)*param_1;
      *(undefined **)param_1 = puVar1 + 1;
      *puVar1 = uVar6;
    }
    iVar2 = *(int *)(param_1 + 1);
    param_3 = uVar5 >> 0x18;
    *(int *)(param_1 + 1) = iVar2 + -1;
    if (iVar2 + -1 == 0) goto LAB_00122890;
    puVar1 = (undefined *)*param_1;
    *(undefined **)param_1 = puVar1 + 1;
    *puVar1 = uVar4;
  }
  else {
    if (iVar2 == 0) {
      (*(code *)param_1[0x403])((param_3 & 0xffffffff) >> 0x18,param_1);
    }
    else {
      puVar1 = (undefined *)*param_1;
      *(undefined **)param_1 = puVar1 + 1;
      *puVar1 = uVar4;
    }
    iVar2 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar2 + -1;
    if (iVar2 + -1 == 0) {
      (*(code *)param_1[0x403])((ulong)_uVar6 & 0xff,param_1);
    }
    else {
      puVar1 = (undefined *)*param_1;
      *(undefined **)param_1 = puVar1 + 1;
      *puVar1 = uVar6;
    }
    iVar2 = *(int *)(param_1 + 1);
    *(int *)(param_1 + 1) = iVar2 + -1;
    if (iVar2 + -1 == 0) {
      (*(code *)param_1[0x403])((ulong)_uVar6 & 0xff,param_1);
    }
    else {
      puVar1 = (undefined *)*param_1;
      *(undefined **)param_1 = puVar1 + 1;
      *puVar1 = uVar6;
    }
    iVar2 = *(int *)(param_1 + 1);
    param_3 = param_3 & 0xff;
    *(int *)(param_1 + 1) = iVar2 + -1;
    if (iVar2 + -1 == 0) {
LAB_00122890:
                    // WARNING: Could not recover jumptable at 0x001228a0. Too many branches
                    // WARNING: Treating indirect jump as call
      uVar3 = (*(code *)param_1[0x403])(param_3,param_1);
      return uVar3;
    }
    puVar1 = (undefined *)*param_1;
    *(undefined **)param_1 = puVar1 + 1;
    *puVar1 = (char)uVar5;
  }
  return param_3;
}



ulong FUN_00122950(long *param_1,ulong param_2,ulong param_3)

{
  undefined *puVar1;
  undefined uVar2;
  int iVar3;
  undefined8 uVar4;
  ulong uVar5;
  
  uVar2 = (undefined)(param_3 >> 8);
  uVar5 = (ulong)(uint)((int)param_3 >> 8);
  DAT_0033ccd4 = DAT_0033ccd4 + 2;
  iVar3 = *(int *)(param_1 + 1) + -1;
  *(int *)(param_1 + 1) = iVar3;
  if ((param_2 & 4) == 0) {
    if (iVar3 == 0) {
      (*(code *)param_1[0x403])(param_3 & 0xff,param_1);
    }
    else {
      puVar1 = (undefined *)*param_1;
      *(undefined **)param_1 = puVar1 + 1;
      *puVar1 = (char)param_3;
    }
    iVar3 = *(int *)(param_1 + 1);
    uVar5 = uVar5 & 0xff;
    *(int *)(param_1 + 1) = iVar3 + -1;
    if (iVar3 + -1 == 0) goto LAB_001229d1;
    puVar1 = (undefined *)*param_1;
    *(undefined **)param_1 = puVar1 + 1;
    *puVar1 = uVar2;
  }
  else {
    if (iVar3 == 0) {
      (*(code *)param_1[0x403])(uVar5 & 0xff,param_1);
    }
    else {
      puVar1 = (undefined *)*param_1;
      *(undefined **)param_1 = puVar1 + 1;
      *puVar1 = uVar2;
    }
    iVar3 = *(int *)(param_1 + 1);
    uVar5 = param_3 & 0xff;
    *(int *)(param_1 + 1) = iVar3 + -1;
    if (iVar3 + -1 == 0) {
LAB_001229d1:
                    // WARNING: Could not recover jumptable at 0x001229df. Too many branches
                    // WARNING: Treating indirect jump as call
      uVar4 = (*(code *)param_1[0x403])(uVar5,param_1);
      return uVar4;
    }
    puVar1 = (undefined *)*param_1;
    *(undefined **)param_1 = puVar1 + 1;
    *puVar1 = (char)param_3;
  }
  return uVar5;
}



void FUN_00122a20(undefined8 param_1,ulong param_2,short *param_3)

{
  ulong uVar1;
  
  uVar1 = param_2 & 0xffffffff;
  FUN_00122950(param_1,param_2,(ulong)(uint)(int)*param_3);
  FUN_00122950(param_1,uVar1,(ulong)(uint)(int)param_3[1]);
  FUN_00122950(param_1,uVar1,(ulong)(uint)(int)param_3[2]);
  FUN_00122950(param_1,uVar1,(ulong)(uint)(int)param_3[3]);
  FUN_00122950(param_1,uVar1,(ulong)(uint)(int)param_3[4]);
  FUN_00122950(param_1,uVar1,(ulong)(ushort)param_3[5]);
  return;
}



ulong FUN_00122a90(byte **param_1,byte param_2)

{
  int iVar1;
  byte *pbVar2;
  undefined8 uVar3;
  
  iVar1 = *(int *)(param_1 + 1);
  DAT_0033ccd4 = DAT_0033ccd4 + 1;
  *(int *)(param_1 + 1) = iVar1 + -1;
  if (iVar1 + -1 == 0) {
                    // WARNING: Could not recover jumptable at 0x00122ab5. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar3 = (*(code *)param_1[0x403])((ulong)param_2,param_1);
    return uVar3;
  }
  pbVar2 = *param_1;
  *param_1 = pbVar2 + 1;
  *pbVar2 = param_2;
  return (ulong)param_2;
}



void FUN_00122ad0(undefined8 *param_1,uint param_2,long param_3)

{
  undefined8 *puVar1;
  undefined *puVar2;
  ulong uVar3;
  
  uVar3 = (ulong)param_2;
  FUN_00122a90(param_1,(ulong)((uint)*(byte *)(param_3 + 10) & 1));
  FUN_00122a90(param_1,(ulong)((uint)(*(byte *)(param_3 + 10) >> 2) & 1));
  FUN_00122a90(param_1,(ulong)((uint)(*(byte *)(param_3 + 10) >> 1) & 1));
  FUN_00122a90(param_1,(ulong)((uint)(*(byte *)(param_3 + 10) >> 3) & 1));
  FUN_00122a90(param_1,(ulong)((uint)(*(byte *)(param_3 + 10) >> 4) & 1));
  FUN_00122a90(param_1,(ulong)((uint)(*(byte *)(param_3 + 10) >> 5) & 1));
  FUN_00122a90(param_1,(ulong)((uint)(*(ushort *)(param_3 + 10) >> 7) & 3));
  DAT_0033ccd4 = DAT_0033ccd4 + 1;
  puVar1 = param_1 + 1;
  *(int *)puVar1 = *(int *)puVar1 + -1;
  if (*(int *)puVar1 == 0) {
    (*(code *)param_1[0x403])(0,param_1);
  }
  else {
    puVar2 = (undefined *)*param_1;
    *(undefined **)param_1 = puVar2 + 1;
    *puVar2 = 0;
  }
  FUN_00122770(param_1,uVar3,(ulong)(uint)(int)*(short *)(param_3 + 0x40));
  FUN_00122770(param_1,(ulong)param_2,(ulong)(uint)(int)*(short *)(param_3 + 0x42));
  FUN_00122770(param_1,uVar3,(ulong)(uint)(int)*(short *)(param_3 + 0xc));
  FUN_00122a20(param_1,(ulong)param_2,param_3 + 0x1c);
  FUN_00122a20(param_1,(ulong)param_2,param_3 + 0x10);
  if (param_2 >> 8 != 1) {
    return;
  }
  FUN_00122a20(param_1,uVar3,param_3 + 0x34);
  FUN_00122a20(param_1,(ulong)param_2,param_3 + 0x28);
  return;
}



void FUN_00122c20(undefined8 param_1,short *param_2)

{
  FUN_00122a90(param_1,(ulong)((int)*param_2 + 0x80));
  FUN_00122a90(param_1,(ulong)((int)param_2[1] + 0x80));
  FUN_00122a90(param_1,(ulong)((int)param_2[2] + 0x80));
  FUN_00122a90(param_1,(ulong)((int)param_2[3] + 0x80));
  FUN_00122a90(param_1,(ulong)((int)param_2[4] + 0x80));
  return;
}



undefined8 pcfWriteFont(long param_1,long *param_2)

{
  undefined8 *puVar1;
  byte bVar2;
  ushort uVar3;
  ushort uVar4;
  short sVar5;
  long lVar6;
  undefined *puVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  uint uVar11;
  uint *__ptr;
  char *__s;
  size_t sVar12;
  uint *puVar13;
  undefined8 uVar14;
  uint uVar15;
  int iVar16;
  ulong uVar17;
  undefined *puVar18;
  long lVar19;
  uint *puVar20;
  uint *puVar21;
  short *psVar22;
  undefined *puVar23;
  undefined *puVar24;
  uint uVar25;
  long *plVar26;
  long lVar27;
  long in_FS_OFFSET;
  uint local_2a0;
  uint local_284;
  int local_280;
  uint local_27c;
  short *local_270;
  short *local_268;
  short *local_260;
  short *local_258;
  uint local_248 [130];
  long local_40;
  
  lVar6 = *(long *)(param_1 + 0x98);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar19 = *(long *)(lVar6 + 0x38);
  if (lVar19 == 0) {
    local_270 = (short *)(param_1 + 0x24);
    local_260 = (short *)(param_1 + 0x18);
    local_268 = (short *)(param_1 + 0x3c);
    local_258 = (short *)(param_1 + 0x30);
  }
  else {
    local_270 = (short *)(lVar19 + 0x3c);
    local_260 = (short *)(lVar19 + 0x30);
    local_268 = (short *)(lVar19 + 0x54);
    local_258 = (short *)(lVar19 + 0x48);
  }
  iVar9 = *(int *)(param_1 + 0x4c);
  __ptr = (uint *)malloc((long)iVar9 << 4);
  if (__ptr == (uint *)0x0) {
    pcfError("pcfWriteFont(): Couldn\'t allocate offsetProps (%d*%d)",(long)iVar9 & 0xffffffff,0x10)
    ;
    uVar14 = 0x50;
  }
  else {
    if (iVar9 < 1) {
      local_284 = 0;
    }
    else {
      lVar19 = 0;
      local_284 = 0;
      plVar26 = (long *)(__ptr + 2);
      do {
        plVar26[-1] = (long)(int)local_284;
        lVar27 = lVar19 * 0x10;
        __s = (char *)NameForAtom(*(undefined8 *)(*(long *)(param_1 + 0x50) + lVar27));
        sVar12 = strlen(__s);
        local_284 = local_284 + 1 + (int)sVar12;
        if (*(char *)(*(long *)(param_1 + 0x58) + lVar19) == '\0') {
          *plVar26 = *(long *)(*(long *)(param_1 + 0x50) + 8 + lVar27);
        }
        else {
          *plVar26 = (long)(int)local_284;
          __s = (char *)NameForAtom(*(undefined8 *)(*(long *)(param_1 + 0x50) + 8 + lVar27));
          sVar12 = strlen(__s);
          local_284 = local_284 + 1 + (int)sVar12;
        }
        iVar9 = (int)lVar19 + 1;
        plVar26 = plVar26 + 2;
        lVar19 = lVar19 + 1;
      } while (*(int *)(param_1 + 0x4c) != iVar9 && iVar9 <= *(int *)(param_1 + 0x4c));
    }
    uVar10 = 0x20;
    if (*(char *)(param_1 + 99) != '\x04') {
      uVar10 = (uint)(*(char *)(param_1 + 99) == '\x02') << 4;
    }
    if (*(char *)(param_1 + 0x60) == '\x01') {
      uVar10 = uVar10 | 8;
    }
    if (*(char *)(param_1 + 0x61) == '\x01') {
      uVar10 = uVar10 | 4;
    }
    uVar15 = 2;
    if (*(char *)(param_1 + 0x62) != '\x04') {
      uVar15 = (uint)(*(char *)(param_1 + 0x62) == '\x02');
    }
    uVar10 = uVar15 | uVar10;
    puVar20 = local_248;
    local_280 = 0;
    local_27c = 0;
    local_2a0 = uVar10 | 0x100;
    uVar25 = 0xfffffff;
    puVar13 = puVar20;
    do {
      while( true ) {
        uVar11 = -uVar25 & uVar25;
        *puVar13 = uVar11;
        uVar25 = uVar25 & ~uVar11;
        if (uVar11 != 0x10) break;
        if (*(long *)(lVar6 + 0x18) != 0) {
          if ((((ushort)(*local_268 + 0x80U) < 0x100) && ((ushort)(local_268[1] + 0x80U) < 0x100))
             && (((ushort)(local_268[2] + 0x80U) < 0x100 &&
                 (((ushort)(local_268[3] + 0x80U) < 0x100 &&
                  ((ushort)(local_268[4] + 0x80U) < 0x100)))))) {
            sVar5 = local_268[5];
            psVar22 = local_258;
joined_r0x00123b62:
            if (((((sVar5 == 0) && ((ushort)(*psVar22 + 0x80U) < 0x100)) &&
                 ((ushort)(psVar22[1] + 0x80U) < 0x100)) &&
                (((ushort)(psVar22[2] + 0x80U) < 0x100 && ((ushort)(psVar22[3] + 0x80U) < 0x100))))
               && (((ushort)(psVar22[4] + 0x80U) < 0x100 && (psVar22[5] == 0)))) {
              puVar13[1] = local_2a0;
              puVar13[2] = *(int *)(lVar6 + 4) * 5 + 9U & 0xfffffffc;
              goto joined_r0x00123584;
            }
          }
LAB_00123a06:
          puVar13[1] = uVar10;
          puVar13[2] = *(int *)(lVar6 + 4) * 0xc + 8;
joined_r0x00123584:
          puVar13 = puVar13 + 4;
        }
joined_r0x00123584:
        if (uVar25 == 0) goto LAB_00122ea9;
      }
      if (uVar11 < 0x11) {
        if (uVar11 == 2) {
          bVar2 = *(byte *)(*(long *)(lVar6 + 0x38) + 0x2a);
LAB_001232a3:
          uVar11 = uVar10;
          if ((bVar2 & 0x20) != 0) {
            uVar11 = local_2a0;
          }
          puVar13[2] = 100;
          puVar13[1] = uVar11;
          goto joined_r0x00123584;
        }
        if (uVar11 < 3) {
          if (uVar11 == 1) {
            puVar13[1] = uVar10;
            iVar9 = *(int *)(param_1 + 0x4c) * 9;
            uVar11 = iVar9 + 0xbU & 0xfffffffc;
            local_280 = uVar11 - (iVar9 + 8);
            puVar13[2] = uVar11 + 4 + (local_284 + 3 & 0xfffffffc);
            goto joined_r0x00123584;
          }
        }
        else {
          if (uVar11 == 4) {
            if (((((ushort)(*local_270 + 0x80U) < 0x100) && ((ushort)(local_270[1] + 0x80U) < 0x100)
                 ) && ((ushort)(local_270[2] + 0x80U) < 0x100)) &&
               (((ushort)(local_270[3] + 0x80U) < 0x100 && ((ushort)(local_270[4] + 0x80U) < 0x100))
               )) {
              sVar5 = local_270[5];
              psVar22 = local_260;
              goto joined_r0x00123b62;
            }
            goto LAB_00123a06;
          }
          if (uVar11 == 8) {
            puVar13[1] = uVar10;
            puVar13[2] = *(int *)(*(long *)(lVar6 + 0x38) + 0x10 + (ulong)uVar15 * 4) + 0x1b +
                         *(int *)(lVar6 + 4) * 4 & 0xfffffffc;
            puVar13 = puVar13 + 4;
          }
        }
        goto joined_r0x00123584;
      }
      if (uVar11 == 0x40) {
        puVar13[1] = uVar10;
        puVar13[2] = *(int *)(lVar6 + 4) * 4 + 8;
        puVar13 = puVar13 + 4;
        goto joined_r0x00123584;
      }
      if (uVar11 < 0x41) {
        if (uVar11 == 0x20) {
          uVar3 = *(ushort *)(param_1 + 0xe);
          uVar4 = *(ushort *)(param_1 + 8);
          puVar13[1] = uVar10;
          local_27c = (((uint)uVar3 - (uint)*(ushort *)(param_1 + 0xc)) + 1) *
                      (((uint)*(ushort *)(param_1 + 10) - (uint)uVar4) + 1);
          puVar13[2] = local_27c * 2 + 0x11 & 0xfffffffc;
          goto joined_r0x001235db;
        }
        goto joined_r0x00123584;
      }
      if (uVar11 != 0x80) {
        if (uVar11 == 0x100) {
          bVar2 = *(byte *)(param_1 + 0x12);
          goto LAB_001232a3;
        }
        goto joined_r0x00123584;
      }
      puVar13[1] = uVar10;
      iVar9 = *(int *)(lVar6 + 4);
      if (iVar9 < 1) {
        uVar11 = 0;
      }
      else {
        lVar19 = 0;
        iVar16 = 0;
        do {
          __s = (char *)NameForAtom(*(undefined8 *)(**(long **)(lVar6 + 0x38) + lVar19 * 8));
          sVar12 = strlen(__s);
          iVar16 = iVar16 + 1 + (int)sVar12;
          iVar9 = *(int *)(lVar6 + 4);
          iVar8 = (int)lVar19;
          lVar19 = lVar19 + 1;
        } while (iVar8 + 1 < iVar9);
        uVar11 = iVar16 + 3U & 0xfffffffc;
      }
      puVar13[2] = uVar11 + 0xc + iVar9 * 4;
joined_r0x001235db:
      puVar13 = puVar13 + 4;
    } while (uVar25 != 0);
LAB_00122ea9:
    uVar25 = (int)(uint *)((long)puVar13 - (long)puVar20) + 8;
    uVar17 = (long)(uint *)((long)puVar13 - (long)puVar20) >> 4;
    iVar9 = (int)uVar17;
    if (iVar9 < 1) {
      DAT_0033ccd4 = 0;
      FUN_00122690(param_2,0x70636601);
      FUN_00122690(param_2,uVar17 & 0xffffffff);
      free(__ptr);
      uVar14 = 0x55;
    }
    else {
      uVar17 = (ulong)(iVar9 - 1);
      puVar13 = local_248 + 2;
      do {
        puVar13[1] = uVar25;
        uVar25 = uVar25 + *puVar13;
        puVar13 = puVar13 + 4;
      } while (local_248 + uVar17 * 4 + 6 != puVar13);
      DAT_0033ccd4 = 0;
      FUN_00122690(param_2);
      FUN_00122690(param_2);
      do {
        puVar20 = puVar20 + 4;
        FUN_00122690(param_2);
        FUN_00122690(param_2);
        FUN_00122690(param_2);
        FUN_00122690(param_2);
      } while (local_248 + uVar17 * 4 + 4 != puVar20);
      if (DAT_0033ccd4 <= local_248[3]) {
        puVar13 = local_248 + 4;
        uVar25 = DAT_0033ccd4;
        do {
          while (uVar25 < local_248[3]) {
            uVar25 = uVar25 + 1;
            plVar26 = param_2 + 1;
            *(int *)plVar26 = *(int *)plVar26 + -1;
            DAT_0033ccd4 = uVar25;
            if (*(int *)plVar26 == 0) {
              (*(code *)param_2[0x403])(0);
              uVar25 = DAT_0033ccd4;
            }
            else {
              puVar24 = (undefined *)*param_2;
              *(undefined **)param_2 = puVar24 + 1;
              *puVar24 = 0;
            }
            local_248[3] = puVar13[-1];
          }
          FUN_00122690();
          uVar25 = puVar13[-4];
          if (uVar25 == 0x10) {
            if (puVar13[-3] >> 8 == 1) {
              FUN_00122950(param_2,(ulong)uVar10,(ulong)*(uint *)(lVar6 + 4));
              if (0 < *(int *)(lVar6 + 4)) {
                iVar9 = 0;
                do {
                  iVar9 = iVar9 + 1;
                  FUN_00122c20();
                } while (*(int *)(lVar6 + 4) != iVar9 && iVar9 <= *(int *)(lVar6 + 4));
              }
            }
            else {
              FUN_00122770();
              if (0 < *(int *)(lVar6 + 4)) {
                lVar19 = 0;
                iVar9 = 0;
                do {
                  iVar9 = iVar9 + 1;
                  lVar27 = *(long *)(lVar6 + 0x18) + lVar19;
                  lVar19 = lVar19 + 0xc;
                  FUN_00122a20(param_2,(ulong)uVar10,lVar27);
                } while (*(int *)(lVar6 + 4) != iVar9 && iVar9 <= *(int *)(lVar6 + 4));
              }
            }
          }
          else {
            if (uVar25 < 0x11) {
              if (uVar25 == 2) {
                FUN_00122ad0(param_2,(ulong)puVar13[-3],*(long *)(lVar6 + 0x38) + 0x20);
              }
              else {
                if (uVar25 < 3) {
                  if (uVar25 == 1) {
                    FUN_00122770(param_2,(ulong)uVar10,(ulong)*(uint *)(param_1 + 0x4c));
                    if (0 < *(int *)(param_1 + 0x4c)) {
                      iVar9 = 0;
                      puVar21 = __ptr;
                      do {
                        FUN_00122770(param_2,(ulong)uVar10,(ulong)*puVar21);
                        FUN_00122a90(param_2);
                        FUN_00122770(param_2,(ulong)uVar10,(ulong)puVar21[2]);
                        iVar16 = iVar9 + 1;
                        iVar9 = iVar9 + 1;
                        puVar21 = puVar21 + 4;
                      } while (*(int *)(param_1 + 0x4c) != iVar16 &&
                               iVar16 <= *(int *)(param_1 + 0x4c));
                    }
                    if (0 < local_280) {
                      iVar9 = 0;
                      do {
                        DAT_0033ccd4 = DAT_0033ccd4 + 1;
                        plVar26 = param_2 + 1;
                        *(int *)plVar26 = *(int *)plVar26 + -1;
                        if (*(int *)plVar26 == 0) {
                          (*(code *)param_2[0x403])(0);
                        }
                        else {
                          puVar24 = (undefined *)*param_2;
                          *(undefined **)param_2 = puVar24 + 1;
                          *puVar24 = 0;
                        }
                        iVar9 = iVar9 + 1;
                      } while (local_280 != iVar9);
                    }
                    lVar19 = 0;
                    FUN_00122770(param_2,(ulong)uVar10,(ulong)local_284);
                    if (0 < *(int *)(param_1 + 0x4c)) {
                      do {
                        while( true ) {
                          __s = (char *)NameForAtom(*(undefined8 *)
                                                     (*(long *)(param_1 + 0x50) + lVar19 * 0x10));
                          sVar12 = strlen(__s);
                          DAT_0033ccd4 = DAT_0033ccd4 + (int)sVar12 + 1;
                          BufFileWrite();
                          if (*(char *)(*(long *)(param_1 + 0x58) + lVar19) == '\0') break;
                          __s = (char *)NameForAtom(*(undefined8 *)
                                                     (*(long *)(param_1 + 0x50) + 8 + lVar19 * 0x10)
                                                   );
                          sVar12 = strlen(__s);
                          DAT_0033ccd4 = DAT_0033ccd4 + (int)sVar12 + 1;
                          BufFileWrite();
                          iVar9 = (int)lVar19 + 1;
                          lVar19 = lVar19 + 1;
                          if (*(int *)(param_1 + 0x4c) == iVar9 || *(int *)(param_1 + 0x4c) < iVar9)
                          goto joined_r0x00123195;
                        }
                        iVar9 = (int)lVar19 + 1;
                        lVar19 = lVar19 + 1;
                      } while (*(int *)(param_1 + 0x4c) != iVar9 &&
                               iVar9 <= *(int *)(param_1 + 0x4c));
                    }
                  }
                }
                else {
                  if (uVar25 == 4) {
                    if (puVar13[-3] >> 8 == 1) {
                      FUN_00122950(param_2,(ulong)uVar10,(ulong)*(uint *)(lVar6 + 4));
                      if (0 < *(int *)(lVar6 + 4)) {
                        iVar9 = 0;
                        do {
                          iVar9 = iVar9 + 1;
                          FUN_00122c20();
                        } while (*(int *)(lVar6 + 4) != iVar9 && iVar9 <= *(int *)(lVar6 + 4));
                      }
                    }
                    else {
                      FUN_00122770();
                      if (0 < *(int *)(lVar6 + 4)) {
                        lVar19 = 0;
                        iVar9 = 0;
                        do {
                          iVar9 = iVar9 + 1;
                          lVar27 = *(long *)(lVar6 + 0x10) + lVar19;
                          lVar19 = lVar19 + 0x18;
                          FUN_00122a20(param_2,(ulong)uVar10,lVar27);
                        } while (*(int *)(lVar6 + 4) != iVar9 && iVar9 <= *(int *)(lVar6 + 4));
                      }
                    }
                  }
                  else {
                    if (uVar25 == 8) {
                      FUN_00122770(param_2,(ulong)uVar10,(ulong)*(uint *)(lVar6 + 4));
                      if (0 < *(int *)(lVar6 + 4)) {
                        iVar9 = 0;
                        lVar19 = 0;
                        uVar25 = 0;
                        do {
                          FUN_00122770(param_2,(ulong)uVar10,(ulong)uVar25);
                          psVar22 = (short *)(*(long *)(lVar6 + 0x10) + lVar19);
                          if (uVar15 == 0) {
                            uVar11 = ((int)psVar22[1] - (int)*psVar22) + 7 >> 3;
                          }
                          else {
                            iVar16 = (int)psVar22[1] - (int)*psVar22;
                            if (uVar15 == 1) {
                              uVar11 = iVar16 + 0xf >> 3 & 0xfffffffe;
                            }
                            else {
                              if (uVar15 == 2) {
                                uVar11 = iVar16 + 0x1f >> 3 & 0xfffffffc;
                              }
                              else {
                                uVar11 = iVar16 + 0x3f >> 3 & 0xfffffff8;
                              }
                            }
                          }
                          iVar9 = iVar9 + 1;
                          lVar19 = lVar19 + 0x18;
                          uVar25 = uVar25 + uVar11 * ((int)psVar22[3] + (int)psVar22[4]);
                        } while (*(int *)(lVar6 + 4) != iVar9 && iVar9 <= *(int *)(lVar6 + 4));
                      }
                      iVar9 = 0;
                      do {
                        lVar19 = (long)iVar9;
                        iVar9 = iVar9 + 1;
                        FUN_00122770(param_2,(ulong)uVar10,
                                     (ulong)*(uint *)(*(long *)(lVar6 + 0x38) + 0x10 + lVar19 * 4));
                      } while (iVar9 != 4);
                      if (0 < *(int *)(lVar6 + 4)) {
                        lVar19 = 0;
                        iVar9 = 0;
                        do {
                          psVar22 = (short *)(*(long *)(lVar6 + 0x10) + lVar19);
                          puVar24 = *(undefined **)(psVar22 + 8);
                          iVar16 = (int)psVar22[1] - (int)*psVar22;
                          if (uVar15 == 0) {
                            uVar25 = iVar16 + 7 >> 3;
                          }
                          else {
                            if (uVar15 == 1) {
                              uVar25 = iVar16 + 0xf >> 3 & 0xfffffffe;
                            }
                            else {
                              if (uVar15 == 2) {
                                uVar25 = iVar16 + 0x1f >> 3 & 0xfffffffc;
                              }
                              else {
                                uVar25 = iVar16 + 0x3f >> 3 & 0xfffffff8;
                              }
                            }
                          }
                          uVar25 = ((int)psVar22[3] + (int)psVar22[4]) * uVar25;
                          DAT_0033ccd4 = DAT_0033ccd4 + uVar25;
                          puVar18 = puVar24 + uVar25;
                          while (puVar23 = puVar24, puVar24 != puVar18) {
                            while( true ) {
                              iVar16 = *(int *)(param_2 + 1);
                              puVar24 = puVar23 + 1;
                              *(int *)(param_2 + 1) = iVar16 + -1;
                              if (iVar16 + -1 != 0) break;
                              (*(code *)param_2[0x403])();
                              puVar23 = puVar24;
                              if (puVar24 == puVar18) goto LAB_0012316f;
                            }
                            puVar7 = (undefined *)*param_2;
                            *(undefined **)param_2 = puVar7 + 1;
                            *puVar7 = *puVar23;
                          }
LAB_0012316f:
                          iVar9 = iVar9 + 1;
                          lVar19 = lVar19 + 0x18;
                        } while (*(int *)(lVar6 + 4) != iVar9 && iVar9 <= *(int *)(lVar6 + 4));
                      }
                    }
                  }
                }
              }
            }
            else {
              if (uVar25 == 0x40) {
                FUN_00122770(param_2,(ulong)uVar10,(ulong)*(uint *)(lVar6 + 4));
                if (0 < *(int *)(lVar6 + 4)) {
                  lVar19 = 0;
                  iVar9 = 0;
                  do {
                    iVar9 = iVar9 + 1;
                    puVar21 = (uint *)(*(long *)(*(long *)(lVar6 + 0x38) + 8) + lVar19);
                    lVar19 = lVar19 + 4;
                    FUN_00122770(param_2,(ulong)uVar10,(ulong)*puVar21);
                  } while (*(int *)(lVar6 + 4) != iVar9 && iVar9 <= *(int *)(lVar6 + 4));
                }
              }
              else {
                if (uVar25 < 0x41) {
                  if (uVar25 == 0x20) {
                    FUN_00122950(param_2,(ulong)uVar10,(ulong)*(ushort *)(param_1 + 8));
                    FUN_00122950(param_2,(ulong)uVar10,(ulong)*(ushort *)(param_1 + 10));
                    FUN_00122950(param_2,(ulong)uVar10,(ulong)*(ushort *)(param_1 + 0xc));
                    FUN_00122950(param_2,(ulong)uVar10,(ulong)*(ushort *)(param_1 + 0xe));
                    FUN_00122950(param_2,(ulong)uVar10,(ulong)*(ushort *)(param_1 + 0x10));
                    if (0 < (int)local_27c) {
                      uVar25 = 0;
                      do {
                        while ((lVar19 = *(long *)(*(long *)(lVar6 + 0x28) +
                                                  (long)((int)uVar25 >> 7) * 8), lVar19 != 0 &&
                               (lVar19 = *(long *)(lVar19 + (ulong)(uVar25 & 0x7f) * 8), lVar19 != 0
                               ))) {
                          uVar25 = uVar25 + 1;
                          FUN_00122950(param_2,(ulong)uVar10,
                                       (lVar19 - *(long *)(lVar6 + 0x10) >> 3) * -0x5555555555555555
                                      );
                          if (uVar25 == local_27c) goto joined_r0x00123195;
                        }
                        uVar25 = uVar25 + 1;
                        FUN_00122950(param_2,(ulong)uVar10,0xffff);
                      } while (uVar25 != local_27c);
                    }
                  }
                }
                else {
                  if (uVar25 == 0x80) {
                    FUN_00122770(param_2,(ulong)uVar10,(ulong)*(uint *)(lVar6 + 4));
                    if (*(int *)(lVar6 + 4) < 1) {
                      uVar17 = 0;
                    }
                    else {
                      uVar17 = 0;
                      lVar19 = 0;
                      iVar9 = 0;
                      do {
                        FUN_00122770(param_2,(ulong)uVar10,uVar17);
                        iVar9 = iVar9 + 1;
                        puVar1 = (undefined8 *)(**(long **)(lVar6 + 0x38) + lVar19);
                        lVar19 = lVar19 + 8;
                        __s = (char *)NameForAtom(*puVar1);
                        sVar12 = strlen(__s);
                        uVar17 = (ulong)(uint)((int)uVar17 + 1 + (int)sVar12);
                      } while (*(int *)(lVar6 + 4) != iVar9 && iVar9 <= *(int *)(lVar6 + 4));
                    }
                    FUN_00122770(param_2,(ulong)uVar10,uVar17);
                    if (0 < *(int *)(lVar6 + 4)) {
                      lVar19 = 0;
                      do {
                        __s = (char *)NameForAtom(*(undefined8 *)
                                                   (**(long **)(lVar6 + 0x38) + lVar19 * 8));
                        sVar12 = strlen(__s);
                        DAT_0033ccd4 = DAT_0033ccd4 + (int)sVar12 + 1;
                        BufFileWrite();
                        iVar9 = (int)lVar19 + 1;
                        lVar19 = lVar19 + 1;
                      } while (*(int *)(lVar6 + 4) != iVar9 && iVar9 <= *(int *)(lVar6 + 4));
                    }
                  }
                  else {
                    if (uVar25 == 0x100) {
                      FUN_00122ad0(param_2,(ulong)puVar13[-3],param_1 + 8);
                    }
                  }
                }
              }
            }
          }
joined_r0x00123195:
          if (puVar20 == puVar13) {
            free(__ptr);
            uVar14 = 0x55;
            goto LAB_001231d2;
          }
          local_248[3] = puVar13[3];
          puVar13 = puVar13 + 4;
          uVar25 = DAT_0033ccd4;
        } while (DAT_0033ccd4 <= local_248[3]);
      }
      __printf_chk(1,"can\'t go backwards... %d > %d\n");
      free(__ptr);
      uVar14 = 0x53;
    }
  }
LAB_001231d2:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar14;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00123cb0(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,
                 undefined8 param_4_00,undefined8 param_5_00,undefined8 param_6_00)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [8];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined4 local_98;
  undefined4 local_88;
  undefined4 local_78;
  undefined4 local_68;
  undefined4 local_58;
  undefined4 local_48;
  undefined4 local_38;
  undefined4 local_28;
  
  if (in_AL != '\0') {
    local_98 = param_1;
    local_88 = param_2;
    local_78 = param_3;
    local_68 = param_4;
    local_58 = param_5;
    local_48 = param_6;
    local_38 = param_7;
    local_28 = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &stack0x00000008;
  local_d8 = local_c8;
  local_e8 = 8;
  local_e4 = 0x30;
  local_c0 = param_2_00;
  local_b8 = param_3_00;
  local_b0 = param_4_00;
  local_a8 = param_5_00;
  local_a0 = param_6_00;
  fwrite("SNF Error: ",1,0xb,stderr);
  __vfprintf_chk(stderr,1,param_1_00,&local_e8);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong FUN_00123da0(int *param_1,undefined8 param_2)

{
  int iVar1;
  
  iVar1 = BufFileRead(param_2,param_1,0x6c);
  if ((iVar1 == 0x6c) && (*param_1 == 4)) {
    return (ulong)((uint)(param_1[0x1a] == 4) + 0x53 + (uint)(param_1[0x1a] == 4));
  }
  return 0x53;
}



undefined8
FUN_00123de0(uint *param_1,int param_2,undefined8 *param_3,long *param_4,undefined8 param_5)

{
  uint uVar1;
  int iVar2;
  uint *__ptr;
  size_t sVar3;
  undefined8 uVar4;
  uint uVar5;
  uint *puVar6;
  char *__s;
  long lVar7;
  
  uVar5 = param_2 + *param_1 * 0xc;
  __ptr = (uint *)malloc((long)(int)uVar5);
  if (__ptr == (uint *)0x0) {
    FUN_00123cb0("snfReadProps(): Couldn\'t allocate propspace (%d)\n",(ulong)uVar5);
    return 0x50;
  }
  uVar1 = BufFileRead(param_5,__ptr,(ulong)uVar5);
  if (uVar5 == uVar1) {
    uVar5 = *param_1;
    param_3 = (undefined8 *)*param_3;
    if (uVar5 != 0) {
      lVar7 = 0;
      puVar6 = __ptr;
      do {
        __s = (char *)((ulong)*puVar6 + (long)(__ptr + (ulong)uVar5 * 3));
        sVar3 = strlen(__s);
        uVar4 = MakeAtom(__s,sVar3 & 0xffffffff,1);
        *param_3 = uVar4;
        *(undefined *)(*param_4 + lVar7) = (char)puVar6[2];
        if (puVar6[2] == 0) {
          param_3[1] = (long)(int)puVar6[1];
        }
        else {
          __s = (char *)((long)(int)puVar6[1] + (long)(__ptr + (ulong)uVar5 * 3));
          sVar3 = strlen(__s);
          iVar2 = MakeAtom(__s,sVar3 & 0xffffffff,1);
          param_3[1] = (long)iVar2;
        }
        uVar1 = (int)lVar7 + 1;
        param_3 = param_3 + 2;
        puVar6 = puVar6 + 3;
        lVar7 = lVar7 + 1;
      } while (uVar1 <= *param_1 && *param_1 != uVar1);
    }
    free(__ptr);
    return 0x55;
  }
  free(__ptr);
  return 0x53;
}



void SnfSetFormat(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  DAT_0033ccd8 = param_4;
  DAT_0033ccdc = param_3;
  DAT_0033cce0 = param_2;
  DAT_0033cce4 = param_1;
  DAT_0033cce8 = 1;
  return;
}



// WARNING: Could not reconcile some variable overlaps

ulong snfReadFont(long param_1,undefined8 param_2,int param_3,int param_4,uint param_5,int param_6)

{
  void **ppvVar1;
  int iVar2;
  ushort uVar3;
  byte bVar4;
  int iVar5;
  int iVar6;
  ushort uVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  void *__ptr;
  void *__ptr_00;
  long lVar11;
  void *__s;
  ushort uVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  ulong uVar16;
  uint uVar17;
  long lVar18;
  short *psVar19;
  short *psVar20;
  int iVar21;
  undefined8 *puVar22;
  short *psVar23;
  uint uVar24;
  ulong uVar25;
  long in_FS_OFFSET;
  undefined local_110;
  undefined local_10c;
  undefined local_100;
  undefined local_fc;
  uint local_f0;
  undefined8 local_c8;
  undefined4 local_c0;
  uint local_bc;
  byte local_b4;
  ushort local_b0;
  byte local_ac;
  byte local_a8;
  byte local_a4;
  byte local_a0;
  int local_9c;
  int local_98;
  int local_94;
  int local_90;
  int local_8c;
  uint local_88;
  uint local_84;
  undefined4 local_80;
  undefined4 local_7c;
  undefined8 local_78;
  undefined4 local_70;
  undefined8 local_68;
  undefined4 local_60;
  uint local_5c;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar8 = FUN_00123da0();
  uVar25 = (ulong)uVar8;
  if (uVar8 != 0x55) goto LAB_00123fd8;
  if (DAT_0033cce8 == 0) {
    FontDefaultFormat(&DAT_0033cce4,&DAT_0033cce0,&DAT_0033ccdc);
  }
  iVar6 = DAT_0033cce4;
  iVar5 = DAT_0033cce0;
  uVar8 = DAT_0033ccdc;
  iVar15 = DAT_0033ccd8;
  local_f0 = (local_5c & 0xffffff) + 3;
  uVar9 = local_f0 & 0xfffffffc;
  local_f0 = local_f0 & 0xfffffffc;
  iVar14 = ((local_90 + 1) - local_94) * ((local_98 + 1) - local_9c);
  iVar10 = iVar14 + 0xfe;
  if (-1 < iVar14 + 0x7f) {
    iVar10 = iVar14 + 0x7f;
  }
  iVar21 = iVar14 * 0x18 + 0x40;
  iVar2 = iVar21 + (iVar10 >> 7) * 8;
  iVar13 = local_8c * 0x10 + iVar2;
  uVar17 = local_8c + 3 + iVar13 & 0xfffffffc;
  uVar24 = uVar17 + iVar14 * 0xc;
  if ((local_a0 & 8) == 0) {
    uVar24 = uVar17;
  }
  bVar4 = local_a0 & 8;
  __ptr = malloc((ulong)uVar24);
  if (__ptr == (void *)0x0) {
    uVar25 = 0x50;
    FUN_00123cb0("snfReadFont(): Couldn\'t allocate fontspace (%d)\n",(ulong)uVar24);
    goto LAB_00123fd8;
  }
  __ptr_00 = malloc((long)(int)uVar9);
  if (__ptr_00 == (void *)0x0) {
    uVar25 = 0x50;
    FUN_00123cb0("snfReadFont(): Couldn\'t allocate bitmaps (%d)\n",(ulong)uVar9);
    free(__ptr);
    goto LAB_00123fd8;
  }
  __s = (void *)((long)iVar21 + (long)__ptr);
  *(long *)((long)__ptr + 0x10) = (long)__ptr + 0x40;
  lVar18 = (long)(int)uVar17 + (long)__ptr;
  *(void **)((long)__ptr + 0x28) = __s;
  *(undefined8 *)((long)__ptr + 0x30) = 0;
  *(void **)((long)__ptr + 0x20) = __ptr_00;
  *(int *)((long)__ptr + 4) = iVar14;
  *(undefined8 *)((long)__ptr + 0x38) = 0;
  *(long *)(param_1 + 0x50) = (long)iVar2 + (long)__ptr;
  *(long *)(param_1 + 0x58) = (long)iVar13 + (long)__ptr;
  if (bVar4 == 0) {
    lVar18 = 0;
  }
  *(long *)((long)__ptr + 0x18) = lVar18;
  memset(__s,0,(long)(iVar10 >> 7) << 3);
  if (iVar14 < 1) {
LAB_00124328:
    uVar9 = BufFileRead(param_2,__ptr_00,(ulong)uVar9);
    if (uVar9 != local_f0) {
      uVar25 = 0x53;
      free(__ptr_00);
      free(__ptr);
      goto LAB_00123fd8;
    }
    if (param_3 != iVar6) {
      BitOrderInvert();
    }
    if ((iVar6 == iVar5) != (param_3 == param_4)) {
      if (param_3 != param_4) {
        iVar15 = param_6;
      }
      if (iVar15 == 2) {
        TwoByteSwap();
      }
      else {
        if (iVar15 == 4) {
          FourByteSwap();
        }
      }
    }
    if (param_5 != uVar8) {
      psVar19 = *(short **)((long)__ptr + 0x10);
      if (iVar14 < 1) {
        __s = malloc(0);
        if (__s == (void *)0x0) {
          uVar16 = 0;
          goto LAB_00124862;
        }
        *(void **)((long)__ptr + 0x20) = __s;
      }
      else {
        uVar9 = 0;
        psVar23 = psVar19;
        do {
          if (*(long *)(psVar23 + 8) != 0) {
            iVar15 = (int)psVar23[4] + (int)psVar23[3];
            if (param_5 == 1) {
              uVar9 = uVar9 + iVar15 * (((int)psVar23[1] - (int)*psVar23) + 7 >> 3);
            }
            else {
              if (param_5 == 2) {
                uVar9 = uVar9 + iVar15 * (((int)psVar23[1] - (int)*psVar23) + 0xf >> 3 & 0xfffffffeU
                                         );
              }
              else {
                if (param_5 == 4) {
                  uVar9 = uVar9 + iVar15 * (((int)psVar23[1] - (int)*psVar23) + 0x1f >> 3 &
                                           0xfffffffcU);
                }
                else {
                  if (param_5 == 8) {
                    uVar9 = uVar9 + iVar15 * (((int)psVar23[1] - (int)*psVar23) + 0x3f >> 3 &
                                             0xfffffff8U);
                  }
                }
              }
            }
          }
          psVar23 = psVar23 + 0xc;
        } while (psVar23 != psVar19 + ((ulong)(iVar14 - 1) * 3 + 3) * 4);
        uVar16 = (ulong)uVar9;
        __s = malloc((long)(int)uVar9);
        if (__s == (void *)0x0) {
LAB_00124862:
          uVar25 = 0x50;
          FUN_00123cb0("snfReadFont(): Couldn\'t allocate padbitmaps (%d)\n",uVar16);
          free(__ptr_00);
          free(__ptr);
          goto LAB_00123fd8;
        }
        *(void **)((long)__ptr + 0x20) = __s;
        do {
          psVar20 = psVar19 + 0xc;
          iVar15 = RepadBitmap(*(undefined8 *)(psVar19 + 8),__s,(ulong)uVar8,(ulong)param_5,
                               (ulong)(uint)((int)psVar19[1] - (int)*psVar19));
          *(void **)(psVar19 + 8) = __s;
          __s = (void *)((long)__s + (long)iVar15);
          psVar19 = psVar20;
        } while (psVar20 != psVar23);
      }
      free(__ptr_00);
    }
    uVar8 = FUN_00123de0(&local_8c,(ulong)local_88,param_1 + 0x50,param_1 + 0x58,param_2);
    uVar25 = (ulong)uVar8;
    if (uVar8 == 0x55) {
      *(undefined2 *)(param_1 + 8) = (undefined2)local_9c;
      *(undefined2 *)(param_1 + 10) = (undefined2)local_98;
      *(undefined2 *)(param_1 + 0xc) = (undefined2)local_94;
      *(undefined2 *)(param_1 + 0xe) = (undefined2)local_90;
      *(undefined2 *)(param_1 + 0x10) = (short)local_84;
      *(byte *)(param_1 + 0x12) =
           *(byte *)(param_1 + 0x12) & 0x80 | local_ac & 1 | (local_a4 & 1) * '\x02' |
           (byte)(((uint)local_a8 & 1) << 2) | local_a0 * '\x04' & 8 | local_a0 * '\x04' & 0x10 |
           local_a0 * '\x04' & 0x20 | (byte)(((uint)local_b4 & 1) << 6);
      uVar8 = (uint)(*(ushort *)(param_1 + 0x12) & 0xfe7f) | ((uint)local_b0 & 3) << 7;
      *(undefined2 *)(param_1 + 0x12) = (short)uVar8;
      *(undefined2 *)(param_1 + 0x14) = 0;
      *(byte *)(param_1 + 0x13) = (byte)((ulong)uVar8 >> 8) & 0xfb | 2;
      *(undefined8 *)(param_1 + 0x24) = local_78;
      *(undefined4 *)(param_1 + 0x2c) = local_70;
      *(undefined8 *)(param_1 + 0x18) = local_68;
      *(undefined4 *)(param_1 + 0x20) = local_60;
      *(undefined2 *)(param_1 + 0x48) = (undefined2)local_7c;
      *(undefined2 *)(param_1 + 0x4a) = (undefined2)local_80;
      *(int *)(param_1 + 0x4c) = local_8c;
      if ((local_a0 & 8) == 0) {
        *(undefined8 *)(param_1 + 0x3c) = local_78;
        *(undefined4 *)(param_1 + 0x44) = local_70;
        *(undefined8 *)(param_1 + 0x30) = local_68;
        *(undefined4 *)(param_1 + 0x38) = local_60;
      }
      else {
        iVar15 = BufFileRead(param_2,&local_c8,0x10);
        if (iVar15 == 0x10) {
          *(undefined8 *)(param_1 + 0x3c) = local_c8;
          *(undefined4 *)(param_1 + 0x44) = local_c0;
        }
        iVar15 = BufFileRead(param_2,&local_c8,0x10);
        if (iVar15 != 0x10) {
LAB_001246e8:
          uVar25 = 0x53;
          free(__ptr);
          goto LAB_00123fd8;
        }
        *(undefined8 *)(param_1 + 0x30) = local_c8;
        *(undefined4 *)(param_1 + 0x38) = local_c0;
        if (iVar14 < 1) {
          local_84 = (uint)*(ushort *)(param_1 + 0x10);
        }
        else {
          lVar18 = 0;
          do {
            lVar11 = *(long *)((long)__ptr + 0x18);
            iVar15 = BufFileRead(param_2,&local_c8,0x10);
            if (iVar15 != 0x10) goto LAB_001246e8;
            *(undefined8 *)(lVar11 + lVar18) = local_c8;
            *(undefined4 *)(lVar11 + 8 + lVar18) = local_c0;
            lVar18 = lVar18 + 0xc;
          } while (((ulong)(iVar14 - 1) * 3 + 3) * 4 - lVar18 != 0);
          local_84 = (uint)*(ushort *)(param_1 + 0x10);
        }
      }
      uVar25 = 0x55;
      if ((ushort)local_84 != 0xffff) {
        uVar7 = (ushort)local_84 >> 8;
        if ((*(ushort *)(param_1 + 0xc) <= uVar7) &&
           (uVar7 < *(ushort *)(param_1 + 0xe) || uVar7 == *(ushort *)(param_1 + 0xe))) {
          uVar3 = *(ushort *)(param_1 + 8);
          uVar12 = (ushort)(local_84 & 0xff);
          if ((uVar3 <= uVar12) && (uVar12 <= *(ushort *)(param_1 + 10))) {
            *(long *)((long)__ptr + 0x30) =
                 (ulong)(((uint)uVar7 - (uint)*(ushort *)(param_1 + 0xc)) *
                         (((uint)*(ushort *)(param_1 + 10) - (uint)uVar3) + 1) +
                        ((local_84 & 0xff) - (uint)uVar3)) * 0x18 + *(long *)((long)__ptr + 0x10);
          }
        }
      }
      *(undefined8 *)((long)__ptr + 0x38) = 0;
      *(void **)(param_1 + 0x98) = __ptr;
      *(undefined8 *)(param_1 + 0x80) = 0;
      *(code **)(param_1 + 0x68) = bitmapGetGlyphs;
      *(undefined8 *)(param_1 + 0x78) = 0x123c80;
      local_110 = (undefined)param_3;
      *(code **)(param_1 + 0x70) = bitmapGetMetrics;
      *(undefined *)(param_1 + 0x60) = local_110;
      local_100 = (undefined)param_4;
      *(undefined *)(param_1 + 0x61) = local_100;
      local_10c = (undefined)param_5;
      *(undefined *)(param_1 + 0x62) = local_10c;
      local_fc = (undefined)param_6;
      *(undefined *)(param_1 + 99) = local_fc;
      goto LAB_00123fd8;
    }
  }
  else {
    lVar18 = 0;
    uVar24 = 0;
    do {
      lVar11 = *(long *)((long)__ptr + 0x10);
      iVar10 = BufFileRead(param_2,&local_c8,0x10);
      uVar17 = 0x53;
      if (iVar10 == 0x10) {
        puVar22 = (undefined8 *)(lVar11 + lVar18);
        *puVar22 = local_c8;
        *(undefined4 *)(puVar22 + 1) = local_c0;
        if ((local_bc & 0x1000000) == 0) {
          puVar22[2] = 0;
          uVar17 = 0x55;
        }
        else {
          uVar17 = 0x55;
          puVar22[2] = (ulong)(local_bc & 0xffffff) + (long)__ptr_00;
        }
      }
      lVar11 = *(long *)((long)__ptr + 0x10) + lVar18;
      if (*(long *)(lVar11 + 0x10) != 0) {
        ppvVar1 = (void **)(*(long *)((long)__ptr + 0x28) + (long)((int)uVar24 >> 7) * 8);
        __s = *ppvVar1;
        if (__s == (void *)0x0) {
          __s = calloc(0x80,8);
          *ppvVar1 = __s;
          __s = *(void **)(*(long *)((long)__ptr + 0x28) + (long)((int)uVar24 >> 7) * 8);
          if (__s == (void *)0x0) {
            uVar25 = 0x50;
            goto LAB_001242d0;
          }
          lVar11 = *(long *)((long)__ptr + 0x10) + lVar18;
        }
        *(long *)((long)__s + (ulong)(uVar24 & 0x7f) * 8) = lVar11;
      }
      uVar24 = uVar24 + 1;
      lVar18 = lVar18 + 0x18;
    } while ((uVar17 == 0x55) && ((int)uVar24 < iVar14));
    uVar25 = (ulong)uVar17;
    if (uVar17 == 0x55) goto LAB_00124328;
LAB_001242d0:
    free(__ptr_00);
    lVar18 = *(long *)((long)__ptr + 0x28);
    if ((lVar18 != 0) && ((int)uVar24 >> 7 != 0)) {
      iVar15 = 0;
      while( true ) {
        iVar15 = iVar15 + 1;
        free(*(void **)(lVar18 + (long)(int)uVar24 * 8));
        if ((int)uVar24 >> 7 == iVar15) break;
        lVar18 = *(long *)((long)__ptr + 0x28);
      }
    }
  }
  free(__ptr);
LAB_00123fd8:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar25;
}



ulong snfReadFontInfo(undefined2 *param_1,long param_2)

{
  uint uVar1;
  undefined4 uVar2;
  int iVar3;
  void *pvVar4;
  ulong __size;
  ulong uVar5;
  long in_FS_OFFSET;
  undefined8 local_c8;
  undefined4 local_c0;
  undefined local_b8 [4];
  byte local_b4;
  ushort local_b0;
  byte local_ac;
  byte local_a8;
  byte local_a4;
  byte local_a0;
  int local_9c;
  int local_98;
  int local_94;
  int local_90;
  uint local_8c;
  uint local_88;
  undefined2 local_84;
  undefined2 local_80;
  undefined2 local_7c;
  undefined8 local_78;
  undefined4 local_70;
  undefined8 local_68;
  undefined4 local_60;
  uint local_5c;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = FUN_00123da0(local_b8);
  uVar5 = (ulong)uVar1;
  if (uVar1 == 0x55) {
    *param_1 = (short)local_9c;
    param_1[1] = (short)local_98;
    param_1[3] = (short)local_90;
    param_1[2] = (short)local_94;
    param_1[4] = local_84;
    *(byte *)(param_1 + 5) =
         *(byte *)(param_1 + 5) & 0x80 | local_ac & 1 | (local_a4 & 1) * '\x02' |
         (byte)(((uint)local_a8 & 1) << 2) | local_a0 * '\x04' & 8 | local_a0 * '\x04' & 0x10 |
         (byte)(((uint)local_a0 & 8) << 2) | (byte)(((uint)local_b4 & 1) << 6);
    uVar1 = (uint)(param_1[5] & 0xfe7f) | ((uint)local_b0 & 3) << 7;
    param_1[5] = (short)uVar1;
    *(byte *)((long)param_1 + 0xb) = (byte)((ulong)uVar1 >> 8) & 0xfb | 2;
    param_1[6] = 0;
    *(undefined8 *)(param_1 + 0xe) = local_78;
    *(undefined4 *)(param_1 + 0x12) = local_70;
    *(undefined8 *)(param_1 + 8) = local_68;
    *(undefined4 *)(param_1 + 0xc) = local_60;
    __size = (ulong)local_8c;
    param_1[0x20] = local_7c;
    *(uint *)(param_1 + 0x22) = local_8c;
    param_1[0x21] = local_80;
    pvVar4 = malloc(__size << 4);
    *(void **)(param_1 + 0x24) = pvVar4;
    if (pvVar4 == (void *)0x0) {
      uVar5 = 0x50;
      FUN_00123cb0("snfReadFontInfo(): Couldn\'t allocate props (%d*%d)\n",__size,0x10);
    }
    else {
      pvVar4 = malloc(__size);
      *(void **)(param_1 + 0x28) = pvVar4;
      if (pvVar4 == (void *)0x0) {
        uVar5 = 0x50;
        FUN_00123cb0("snfReadFontInfo(): Couldn\'t allocate isStringProp (%d*%d)\n",__size,1);
        free(*(void **)(param_1 + 0x24));
      }
      else {
        uVar2 = (**(code **)(param_2 + 0x2020))
                          (param_2,(ulong)(((local_5c & 0xffffff) + 3 & 0xfffffffc) +
                                          ((local_90 + 1) - local_94) * ((local_98 + 1) - local_9c)
                                          * 0x10));
        *(undefined4 *)(param_2 + 0xc) = uVar2;
        uVar1 = FUN_00123de0(&local_8c,(ulong)local_88,param_1 + 0x24,param_1 + 0x28,param_2);
        uVar5 = (ulong)uVar1;
        if (uVar1 == 0x55) {
          if ((local_a0 & 8) == 0) {
            *(undefined8 *)(param_1 + 0x1a) = *(undefined8 *)(param_1 + 0xe);
            *(undefined4 *)(param_1 + 0x1e) = *(undefined4 *)(param_1 + 0x12);
            *(undefined8 *)(param_1 + 0x14) = *(undefined8 *)(param_1 + 8);
            *(undefined4 *)(param_1 + 0x18) = *(undefined4 *)(param_1 + 0xc);
          }
          else {
            iVar3 = BufFileRead(param_2,&local_c8,0x10);
            if (iVar3 == 0x10) {
              *(undefined8 *)(param_1 + 0x1a) = local_c8;
              *(undefined4 *)(param_1 + 0x1e) = local_c0;
              iVar3 = BufFileRead(param_2,&local_c8,0x10);
              if (iVar3 == 0x10) {
                *(undefined8 *)(param_1 + 0x14) = local_c8;
                *(undefined4 *)(param_1 + 0x18) = local_c0;
                goto LAB_0012496f;
              }
            }
            uVar5 = 0x53;
            free(*(void **)(param_1 + 0x24));
            free(*(void **)(param_1 + 0x28));
          }
        }
        else {
          free(*(void **)(param_1 + 0x24));
          free(*(void **)(param_1 + 0x28));
        }
      }
    }
  }
LAB_0012496f:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Removing unreachable block (ram,0x00124f19)
// WARNING: Removing unreachable block (ram,0x00124f20)

undefined8 BuiltinReadDirectory(undefined8 param_1,undefined8 *param_2)

{
  int iVar1;
  undefined8 uVar2;
  size_t __n;
  char **ppcVar3;
  char *__s;
  void *pvVar4;
  char *pcVar5;
  char **ppcVar6;
  undefined1 *puVar7;
  int iVar8;
  void *pvVar9;
  long lVar10;
  char **ppcVar11;
  
  uVar2 = FontFileMakeDir(0x130abb,2);
  if (DAT_0033ccf8 == (void *)0x0) {
    pvVar4 = calloc(2,0x10);
    if (pvVar4 != (void *)0x0) {
      lVar10 = 0;
      do {
        pcVar5 = strdup(*(char **)(builtin_dir + lVar10));
        __s = *(char **)(builtin_dir + lVar10 + 8);
        *(char **)((long)pvVar4 + lVar10) = pcVar5;
        __s = strdup(__s);
        *(char **)((long)pvVar4 + lVar10 + 8) = __s;
        lVar10 = lVar10 + 0x10;
      } while (lVar10 != 0x20);
    }
  }
  else {
    puVar7 = builtin_dir;
    pvVar9 = DAT_0033ccf8;
    do {
      if ((pvVar9 != (void *)0x0) && (__s = *(char **)((long)pvVar9 + 8), __s != (char *)0x0)) {
        __n = strlen(__s);
        memmove(*(void **)(puVar7 + 8),__s,__n);
      }
      pvVar4 = DAT_0033ccf8;
      if (puVar7 == builtin_dir + 0x10) break;
      pvVar9 = (void *)((long)pvVar9 + 0x10);
      puVar7 = puVar7 + 0x10;
    } while (puVar7 != (undefined1 *)0x0);
  }
  DAT_0033ccf8 = pvVar4;
  if (DAT_0033ccf0 == (char **)0x0) {
    ppcVar3 = (char **)calloc(3,0x10);
    if (ppcVar3 == (char **)0x0) {
      DAT_0033ccf0 = (char **)0x0;
      ppcVar3 = DAT_0033ccf0;
    }
    else {
      lVar10 = 0;
      do {
        __s = strdup(*(char **)(builtin_alias + lVar10 + 8));
        *(char **)((long)ppcVar3 + lVar10 + 8) = __s;
        lVar10 = lVar10 + 0x10;
      } while (lVar10 != 0x30);
    }
  }
  else {
    puVar7 = builtin_alias;
    ppcVar11 = DAT_0033ccf0 + 4;
    ppcVar6 = DAT_0033ccf0;
    do {
      if (ppcVar6 != (char **)0x0) {
        __s = *ppcVar6;
        if (__s != (char *)0x0) {
          __n = strlen(__s);
          memmove(*(void **)puVar7,__s,__n);
        }
        __s = ppcVar6[1];
        if (__s != (char *)0x0) {
          __n = strlen(__s);
          memmove(((void **)puVar7)[1],__s,__n);
        }
      }
      ppcVar3 = DAT_0033ccf0;
      if (ppcVar11 == ppcVar6) break;
      ppcVar6 = ppcVar6 + 2;
      puVar7 = (undefined1 *)((void **)puVar7 + 2);
    } while ((void **)puVar7 != (void **)0x0);
  }
  DAT_0033ccf0 = ppcVar3;
  puVar7 = builtin_dir;
  iVar8 = 0;
  do {
    iVar1 = FontFileAddFontFile(uVar2,((undefined8 *)puVar7)[1],*(undefined8 *)puVar7);
    if (iVar1 == 0) goto LAB_00124dd0;
    iVar8 = iVar8 + 1;
    puVar7 = (undefined1 *)((undefined8 *)puVar7 + 2);
  } while (iVar8 < 2);
  puVar7 = builtin_alias;
  iVar8 = 0;
  while (iVar1 = FontFileAddFontAlias(uVar2,*(undefined8 *)puVar7,((undefined8 *)puVar7)[1]),
        iVar1 != 0) {
    iVar8 = iVar8 + 1;
    puVar7 = (undefined1 *)((undefined8 *)puVar7 + 2);
    if (2 < iVar8) {
      FontFileSortDir(uVar2);
      *param_2 = uVar2;
      return 0x55;
    }
  }
LAB_00124dd0:
  FontFileFreeDir(uVar2);
  return 0x56;
}



// WARNING: Removing unreachable block (ram,0x001251e0)

long * BuiltinFileOpen(char *param_1)

{
  char cVar1;
  long lVar2;
  int iVar3;
  undefined4 *__ptr;
  long *plVar4;
  long *plVar5;
  int iVar6;
  undefined1 *puVar7;
  
  cVar1 = *param_1;
  puVar7 = builtin_files;
  iVar6 = 0;
  while (iVar3 = strcmp(param_1 + (cVar1 == '/'),*(char **)puVar7), iVar3 != 0) {
    iVar6 = iVar6 + 1;
    puVar7 = (undefined1 *)((char **)puVar7 + 3);
    if (iVar6 == 2) {
      return (long *)0;
    }
  }
  if (iVar6 == 2) {
    return (long *)0;
  }
  __ptr = (undefined4 *)malloc(0x10);
  if (__ptr == (undefined4 *)0x0) {
    return (long *)0;
  }
  *__ptr = 0;
  *(undefined1 **)(__ptr + 2) = builtin_files + (long)iVar6 * 0x18;
  plVar4 = (long *)BufFileCreate(__ptr,&LAB_00124fe0,0,&LAB_00124f50,&LAB_00124fc0);
  if (plVar4 == (long *)0x0) {
    free(__ptr);
    return (long *)0;
  }
  plVar5 = (long *)BufFilePushZIP(plVar4);
  if (plVar5 == (long *)0x0) {
    lVar2 = *plVar4;
    *(long **)plVar4 = plVar4 + 2;
    *(int *)(plVar4 + 1) = *(int *)(plVar4 + 1) + ((int)lVar2 - (int)(plVar4 + 2));
    plVar5 = plVar4;
  }
  return plVar5;
}



void BuiltinFileClose(undefined8 param_1)

{
  BufFileClose(param_1,1);
  return;
}



void FUN_00125230(long param_1)

{
  int iVar1;
  long in_FS_OFFSET;
  undefined8 local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = BuiltinReadDirectory(*(undefined8 *)(param_1 + 8),&local_18);
  if (iVar1 == 0x55) {
    *(undefined8 *)(param_1 + 0x18) = local_18;
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void BuiltinRegisterFpeFunctions(void)

{
  undefined8 uVar1;
  
  uVar1 = 0x1252a9;
  BuiltinRegisterFontFileFunctions();
  RegisterFPEFunctions
            (&LAB_00125280,FUN_00125230,&LAB_00125210,&LAB_00125200,FontFileOpenFont,
             FontFileCloseFont,FontFileListFonts,FontFileStartListFontsWithInfo,
             FontFileListNextFontWithInfo,0,0,0,0,0,0,uVar1);
  return;
}



void BuiltinRegisterFontFileFunctions(void)

{
  FontFileRegisterRenderer(&DAT_0033c440);
  return;
}



undefined8
FUN_00125730(long param_1,long param_2,ushort *param_3,uint param_4,long *param_5,long *param_6)

{
  long lVar1;
  byte bVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  long lVar6;
  long lVar7;
  uint uVar8;
  undefined8 uVar9;
  uint uVar10;
  long *plVar11;
  ushort *puVar12;
  ushort *puVar13;
  uint uVar14;
  undefined1 *puVar15;
  long lVar16;
  long *plVar17;
  bool bVar18;
  
  uVar3 = *(ushort *)(param_1 + 8);
  lVar16 = *(long *)(param_1 + 0xa0);
  lVar6 = (*(long **)(param_1 + 0x98))[1];
  lVar7 = **(long **)(param_1 + 0x98);
  uVar14 = ((uint)*(ushort *)(param_1 + 10) + 1) - (uint)uVar3;
  uVar8 = (uint)uVar3;
  plVar17 = param_6;
  if (param_4 == 2) {
    if (((*(byte *)(param_1 + 0x12) & 0x40) != 0) && (lVar7 != 0)) {
      do {
        while( true ) {
          while( true ) {
            param_2 = param_2 + -1;
            if (param_2 == -1) goto LAB_00125810;
            puVar12 = param_3 + 1;
            plVar11 = plVar17 + 1;
            uVar8 = (uint)(ushort)(*param_3 << 8 | *param_3 >> 8) - (uint)uVar3;
            param_3 = puVar12;
            if (uVar8 < uVar14) break;
            *plVar17 = lVar7;
            plVar17 = plVar11;
          }
          lVar1 = lVar6 + (ulong)uVar8 * 0x18;
          if ((*(long *)(lVar16 + 0x10) != 0) &&
             ((*(undefined1 **)(lVar1 + 0x10) == &_fs_glyph_requested ||
              (*(undefined1 **)(lVar1 + 0x10) == &_fs_glyph_undefined)))) break;
          *plVar17 = lVar1;
          plVar17 = plVar11;
        }
        uVar9 = fs_load_all_glyphs(param_1);
        *plVar17 = lVar1;
        plVar17 = plVar11;
      } while ((int)uVar9 == 0x55);
LAB_00125c4c:
      lVar16 = (long)((long)plVar11 - (long)param_6) >> 3;
      goto LAB_00125833;
    }
LAB_00125984:
    do {
      bVar18 = param_2 == 0;
      param_2 = param_2 + -1;
      if (bVar18) goto LAB_00125810;
      uVar3 = *param_3;
      param_3 = param_3 + 1;
      uVar10 = (ushort)(uVar3 << 8 | uVar3 >> 8) - uVar8;
      if (uVar14 <= uVar10) {
        puVar12 = param_3;
        plVar11 = plVar17;
        if (lVar7 == 0) goto LAB_00125984;
        do {
          param_2 = param_2 + -1;
          plVar17 = plVar11 + 1;
          *plVar11 = lVar7;
          if (param_2 == -1) goto LAB_00125810;
          param_3 = puVar12 + 1;
          uVar10 = (ushort)(*puVar12 << 8 | *puVar12 >> 8) - uVar8;
          puVar12 = param_3;
          plVar11 = plVar17;
        } while (uVar14 <= uVar10);
      }
      lVar1 = lVar6 + (ulong)uVar10 * 0x18;
      uVar9 = 0x55;
      puVar15 = *(undefined1 **)(lVar1 + 0x10);
      if ((*(long *)(lVar16 + 0x10) != 0) &&
         ((puVar15 == &_fs_glyph_requested || (puVar15 == &_fs_glyph_undefined)))) {
        uVar9 = fs_load_all_glyphs(param_1);
        puVar15 = *(undefined1 **)(lVar1 + 0x10);
      }
      if (puVar15 == (undefined1 *)0x0) {
        if (lVar7 != 0) {
          *plVar17 = lVar7;
          plVar17 = plVar17 + 1;
        }
      }
      else {
        *plVar17 = lVar1;
        plVar17 = plVar17 + 1;
      }
    } while ((int)uVar9 == 0x55);
LAB_0012586a:
    lVar16 = (long)((long)plVar17 - (long)param_6) >> 3;
  }
  else {
    if (param_4 < 2) {
      if (*(short *)(param_1 + 0xc) == 0) {
        if (((*(byte *)(param_1 + 0x12) & 0x40) != 0) && (plVar11 = param_6, lVar7 != 0)) {
          do {
            puVar12 = (ushort *)((long)param_3 + param_2);
            puVar13 = param_3;
            plVar17 = plVar11;
            while( true ) {
              while( true ) {
                param_2 = param_2 + -1;
                if (puVar12 == puVar13) goto LAB_00125810;
                param_3 = (ushort *)((long)puVar13 + 1);
                plVar11 = plVar17 + 1;
                if (*(byte *)puVar13 - uVar8 < uVar14) break;
                *plVar17 = lVar7;
                puVar13 = param_3;
                plVar17 = plVar11;
              }
              lVar1 = lVar6 + (ulong)(*(byte *)puVar13 - uVar8) * 0x18;
              if ((*(long *)(lVar16 + 0x10) != 0) &&
                 ((*(undefined1 **)(lVar1 + 0x10) == &_fs_glyph_requested ||
                  (*(undefined1 **)(lVar1 + 0x10) == &_fs_glyph_undefined)))) break;
              *plVar17 = lVar1;
              puVar13 = param_3;
              plVar17 = plVar11;
            }
            uVar9 = fs_load_all_glyphs(param_1);
            *plVar17 = lVar1;
          } while ((int)uVar9 == 0x55);
          goto LAB_00125c4c;
        }
LAB_00125a59:
        do {
          bVar18 = param_2 == 0;
          param_2 = param_2 + -1;
          if (bVar18) goto LAB_00125810;
          bVar2 = *(byte *)param_3;
          param_3 = (ushort *)((long)param_3 + 1);
          uVar10 = bVar2 - uVar8;
          if (uVar14 <= uVar10) {
            puVar12 = param_3;
            plVar11 = plVar17;
            if (lVar7 == 0) goto LAB_00125a59;
            do {
              param_2 = param_2 + -1;
              plVar17 = plVar11 + 1;
              *plVar11 = lVar7;
              if (param_2 == -1) goto LAB_00125810;
              param_3 = (ushort *)((long)puVar12 + 1);
              uVar10 = (uint)*(byte *)puVar12 - (uint)uVar3;
              puVar12 = param_3;
              plVar11 = plVar17;
            } while (uVar14 <= uVar10);
          }
          lVar1 = lVar6 + (ulong)uVar10 * 0x18;
          uVar9 = 0x55;
          puVar15 = *(undefined1 **)(lVar1 + 0x10);
          if ((*(long *)(lVar16 + 0x10) != 0) &&
             ((puVar15 == &_fs_glyph_requested || (puVar15 == &_fs_glyph_undefined)))) {
            uVar9 = fs_load_all_glyphs(param_1);
            puVar15 = *(undefined1 **)(lVar1 + 0x10);
          }
          if (puVar15 == (undefined1 *)0x0) {
            if (lVar7 != 0) {
              *plVar17 = lVar7;
              plVar17 = plVar17 + 1;
            }
          }
          else {
            *plVar17 = lVar1;
            plVar17 = plVar17 + 1;
          }
        } while ((int)uVar9 == 0x55);
        goto LAB_0012586a;
      }
    }
    else {
      if (param_4 == 3) {
        uVar4 = *(ushort *)(param_1 + 0xe);
        uVar5 = *(ushort *)(param_1 + 0xc);
joined_r0x0012579b:
        do {
          param_2 = param_2 + -1;
          if (param_2 == -1) goto LAB_00125810;
          puVar12 = param_3 + 1;
          uVar8 = (uint)*(byte *)param_3 - (uint)uVar5;
          uVar10 = (uint)*(byte *)((long)param_3 + 1) - (uint)uVar3;
          param_3 = puVar12;
          if ((uVar8 < ((uint)uVar4 + 1) - (uint)uVar5) && (uVar10 < uVar14)) {
            lVar1 = lVar6 + (ulong)(uVar8 * uVar14 + uVar10) * 0x18;
            puVar15 = *(undefined1 **)(lVar1 + 0x10);
            if ((*(long *)(lVar16 + 0x10) == 0) ||
               ((puVar15 != &_fs_glyph_requested && (puVar15 != &_fs_glyph_undefined)))) {
              if (puVar15 == (undefined1 *)0x0) {
                if (lVar7 != 0) {
                  *plVar17 = lVar7;
                  plVar17 = plVar17 + 1;
                }
              }
              else {
                *plVar17 = lVar1;
                plVar17 = plVar17 + 1;
              }
              goto joined_r0x0012579b;
            }
            uVar9 = fs_load_all_glyphs(param_1);
            if (*(long *)(lVar1 + 0x10) == 0) {
              if (lVar7 != 0) goto LAB_0012585a;
            }
            else {
              *plVar17 = lVar1;
              plVar17 = plVar17 + 1;
            }
          }
          else {
            if (lVar7 == 0) goto joined_r0x0012579b;
            uVar9 = 0x55;
LAB_0012585a:
            *plVar17 = lVar7;
            plVar17 = plVar17 + 1;
          }
        } while ((int)uVar9 == 0x55);
        goto LAB_0012586a;
      }
    }
    lVar16 = 0;
    uVar9 = 0x55;
  }
LAB_00125833:
  *param_5 = lVar16;
  return uVar9;
LAB_00125810:
  uVar9 = 0x55;
  lVar16 = (long)((long)plVar17 - (long)param_6) >> 3;
  goto LAB_00125833;
}



void _fs_convert_char_info(undefined2 *param_1,undefined2 *param_2)

{
  param_2[3] = param_1[3];
  param_2[4] = param_1[4];
  *param_2 = *param_1;
  param_2[1] = param_1[1];
  param_2[2] = param_1[2];
  param_2[5] = param_1[5];
  return;
}



void _fs_init_fontinfo(long param_1,undefined2 *param_2)

{
  ushort *puVar1;
  undefined2 uVar2;
  int iVar3;
  
  if (*(int *)(param_1 + 0x30) == 1) {
    uVar2 = *param_2;
    puVar1 = param_2 + 4;
    *puVar1 = *puVar1 << 8 | *puVar1 >> 8;
    *param_2 = param_2[2];
    param_2[2] = uVar2;
    uVar2 = param_2[1];
    param_2[1] = param_2[3];
    param_2[3] = uVar2;
  }
  iVar3 = FontCouldBeTerminal(param_2);
  if (iVar3 != 0) {
    *(byte *)(param_2 + 5) = *(byte *)(param_2 + 5) | 2;
    param_2[0x11] = param_2[0x20];
    param_2[0x12] = param_2[0x21];
    param_2[0xe] = 0;
    param_2[0xf] = param_2[0x10];
    *(undefined8 *)(param_2 + 8) = *(undefined8 *)(param_2 + 0xe);
    *(undefined4 *)(param_2 + 0xc) = *(undefined4 *)(param_2 + 0x12);
  }
  FontComputeInfoAccelerators(param_2);
  return;
}



ulong _fs_convert_props(uint *param_1,uint *param_2,long param_3,long param_4)

{
  uint *puVar1;
  char cVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  undefined8 uVar6;
  undefined8 *puVar7;
  undefined8 *puVar8;
  uint local_3c;
  
  local_3c = *param_1;
  *(uint *)(param_4 + 0x44) = local_3c;
  if (-1 < (int)local_3c) {
    puVar8 = (undefined8 *)malloc((long)(int)local_3c * 0x11);
    if (puVar8 != (undefined8 *)0x0) {
      puVar7 = puVar8 + (long)(int)local_3c * 2;
      *(undefined8 **)(param_4 + 0x48) = puVar8;
      *(undefined8 **)(param_4 + 0x50) = puVar7;
      if (local_3c != 0) {
        puVar1 = param_2 + (ulong)(local_3c - 1) * 5 + 5;
        do {
          cVar2 = *(char *)(param_2 + 4);
          uVar3 = param_2[2];
          uVar4 = param_2[3];
          uVar6 = MakeAtom((ulong)*param_2 + param_3,(ulong)param_2[1],1);
          *puVar8 = uVar6;
          if (cVar2 == '\0') {
            *(undefined *)puVar7 = 1;
            iVar5 = MakeAtom((ulong)uVar3 + param_3,(ulong)uVar4,1);
            puVar8[1] = (long)iVar5;
          }
          else {
            *(undefined *)puVar7 = 0;
            puVar8[1] = (ulong)uVar3;
          }
          param_2 = param_2 + 5;
          puVar8 = puVar8 + 2;
          puVar7 = (undefined8 *)((long)puVar7 + 1);
        } while (puVar1 != param_2);
      }
      goto LAB_00125e65;
    }
  }
  local_3c = 0xffffffff;
LAB_00125e65:
  return (ulong)local_3c;
}



void _fs_free_props(long param_1)

{
  if (*(void **)(param_1 + 0x48) != (void *)0x0) {
    free(*(void **)(param_1 + 0x48));
    *(undefined4 *)(param_1 + 0x44) = 0;
    *(undefined8 *)(param_1 + 0x48) = 0;
    return;
  }
  return;
}



long _fs_convert_lfwi_reply
               (undefined8 param_1,ushort *param_2,long param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6)

{
  int iVar1;
  
  *(byte *)(param_2 + 5) =
       *(byte *)(param_2 + 5) & 0xbf | (byte)(((uint)*(byte *)(param_3 + 0xc) & 1) << 6);
  param_2[5] = param_2[5] & 0xfe7f | (ushort)(*(char *)(param_3 + 0x14) != '\0') << 7;
  *(byte *)(param_2 + 5) =
       (byte)((*(uint *)(param_3 + 0xc) >> 1 & 1) << 4) | *(byte *)(param_2 + 5) & 0xef;
  param_2[2] = (ushort)*(byte *)(param_3 + 0x10);
  *param_2 = (ushort)*(byte *)(param_3 + 0x11);
  param_2[3] = (ushort)*(byte *)(param_3 + 0x12);
  param_2[1] = (ushort)*(byte *)(param_3 + 0x13);
  param_2[4] = (ushort)*(byte *)(param_3 + 0x16) * 0x100 + (ushort)*(byte *)(param_3 + 0x17);
  param_2[0x21] = *(ushort *)(param_3 + 0x32);
  param_2[0x20] = *(ushort *)(param_3 + 0x30);
  param_2[0xe] = *(ushort *)(param_3 + 0x18);
  param_2[0xf] = *(ushort *)(param_3 + 0x1a);
  param_2[0x10] = *(ushort *)(param_3 + 0x1c);
  param_2[0x11] = *(ushort *)(param_3 + 0x1e);
  param_2[0x12] = *(ushort *)(param_3 + 0x20);
  param_2[0x13] = *(ushort *)(param_3 + 0x22);
  param_2[0x1a] = *(ushort *)(param_3 + 0x18);
  param_2[0x1b] = *(ushort *)(param_3 + 0x1a);
  param_2[0x1c] = *(ushort *)(param_3 + 0x1c);
  param_2[0x1d] = *(ushort *)(param_3 + 0x1e);
  param_2[0x1e] = *(ushort *)(param_3 + 0x20);
  param_2[0x1f] = *(ushort *)(param_3 + 0x22);
  param_2[8] = *(ushort *)(param_3 + 0x24);
  param_2[9] = *(ushort *)(param_3 + 0x26);
  param_2[10] = *(ushort *)(param_3 + 0x28);
  param_2[0xb] = *(ushort *)(param_3 + 0x2a);
  param_2[0xc] = *(ushort *)(param_3 + 0x2c);
  param_2[0xd] = *(ushort *)(param_3 + 0x2e);
  param_2[0x14] = *(ushort *)(param_3 + 0x24);
  param_2[0x15] = *(ushort *)(param_3 + 0x26);
  param_2[0x16] = *(ushort *)(param_3 + 0x28);
  param_2[0x17] = *(ushort *)(param_3 + 0x2a);
  param_2[0x18] = *(ushort *)(param_3 + 0x2c);
  param_2[0x19] = *(ushort *)(param_3 + 0x2e);
  _fs_init_fontinfo();
  iVar1 = _fs_convert_props(param_4,param_5,param_6,param_2);
  return (ulong)(iVar1 != -1) * 5 + 0x50;
}



undefined8
fs_build_range(long param_1,int param_2,ulong param_3,int param_4,byte *param_5,undefined8 param_6,
              undefined8 param_7)

{
  byte *pbVar1;
  byte bVar2;
  byte bVar3;
  ushort uVar4;
  ushort uVar5;
  ushort uVar6;
  ushort uVar7;
  long lVar8;
  undefined1 *puVar9;
  int iVar10;
  undefined8 uVar11;
  long lVar12;
  ulong uVar13;
  uint uVar14;
  ulong uVar15;
  byte *pbVar16;
  ulong uVar17;
  ulong uVar18;
  uint uVar19;
  ulong uVar20;
  ulong uVar21;
  ulong uVar22;
  undefined8 *puVar23;
  long in_FS_OFFSET;
  bool bVar24;
  uint local_c8;
  uint local_ac;
  ulong local_a8;
  uint local_98;
  long local_90;
  ulong local_80;
  uint local_78;
  byte *local_70;
  undefined local_50;
  undefined local_4e;
  char local_48;
  char local_47;
  char local_46;
  char local_45;
  byte local_44;
  char local_43;
  undefined local_42;
  undefined local_41;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(*(long *)(param_1 + 0xa0) + 0x10) != 0) {
    uVar4 = *(ushort *)(param_1 + 0xc);
    uVar18 = (ulong)uVar4;
    param_3 = param_3 & 0xffffffff;
    lVar8 = (*(long **)(param_1 + 0x98))[1];
    lVar12 = **(long **)(param_1 + 0x98);
    uVar5 = *(ushort *)(param_1 + 8);
    uVar15 = (ulong)uVar5;
    uVar6 = *(ushort *)(param_1 + 0xe);
    uVar7 = *(ushort *)(param_1 + 10);
    uVar20 = (ulong)uVar7;
    if (lVar12 == 0) {
      bVar24 = true;
    }
    else {
      if (*(undefined1 **)(lVar12 + 0x10) == &_fs_glyph_undefined) {
        uVar13 = (lVar12 - lVar8 >> 3) * -0x5555555555555555;
        uVar22 = (uVar20 + 1) - uVar15;
        local_48 = (char)(uVar13 / uVar22) + (byte)uVar4;
        local_47 = (char)(uVar13 % uVar22) + (char)uVar5;
        local_46 = local_48;
        local_45 = local_47;
        uVar11 = add_range(&local_48,param_6,param_7);
        if ((int)uVar11 != 0x55) goto LAB_00126230;
        bVar24 = false;
        *(undefined1 **)(lVar12 + 0x10) = &_fs_glyph_requested;
      }
      else {
        bVar24 = *(undefined1 **)(lVar12 + 0x10) != &_fs_glyph_requested;
      }
    }
    if ((param_2 == 0) && (param_4 == 1)) {
      if (uVar4 == 0) {
        pbVar1 = param_5 + param_3;
LAB_001261d0:
        pbVar16 = param_5;
        if (param_5 != pbVar1) {
          while( true ) {
            param_5 = pbVar16 + 1;
            uVar18 = (ulong)*pbVar16;
            if ((uVar18 < uVar15) || (uVar20 < uVar18)) goto LAB_001261d0;
            puVar9 = *(undefined1 **)(lVar8 + 0x10 + (uVar18 - uVar15) * 0x18);
            if (puVar9 == &_fs_glyph_undefined) break;
            bVar24 = (bool)(puVar9 != &_fs_glyph_requested & bVar24);
            pbVar16 = param_5;
            if (param_5 == pbVar1) goto LAB_00126223;
          }
          uVar14 = (uint)*pbVar16 & 0xfffffff0;
          uVar18 = (ulong)uVar14;
          if ((ulong)uVar14 < uVar15) {
            uVar18 = uVar15;
          }
          uVar13 = (long)(int)(uVar14 + 0xf);
          if (uVar20 < (ulong)(long)(int)(uVar14 + 0xf)) {
            uVar13 = uVar20;
          }
          if (uVar18 <= uVar13) {
            puVar23 = (undefined8 *)(lVar8 + 0x10 + (uVar18 - uVar15) * 0x18);
            goto LAB_0012664d;
          }
          goto LAB_001261d0;
        }
        goto LAB_00126223;
      }
    }
    else {
      local_70 = param_5;
      if ((param_2 != 0) && ((int)param_3 == 0)) {
        local_70 = &local_44;
        param_3 = 2;
        local_44 = (byte)uVar4;
        local_43 = (char)uVar5;
        local_4e = (undefined)uVar6;
        local_42 = local_4e;
        local_50 = (undefined)uVar7;
        local_41 = local_50;
      }
      uVar13 = (ulong)uVar6;
      while( true ) {
        iVar10 = (int)param_3;
        local_78 = iVar10 - 1;
        if (iVar10 == 0) break;
        bVar2 = local_70[1];
        pbVar1 = local_70 + 2;
        bVar3 = *local_70;
        uVar22 = (ulong)bVar3;
        uVar14 = (uint)bVar3;
        uVar19 = (uint)bVar2;
        if (param_2 == 0) {
          local_70 = pbVar1;
          if ((((uVar18 <= uVar22) && (uVar22 <= uVar13)) && (uVar15 <= bVar2)) && (bVar2 <= uVar20)
             ) {
            local_c8 = (uint)bVar3;
            local_ac = uVar19;
            local_98 = uVar19;
            local_80 = uVar22;
LAB_00126367:
            lVar12 = (uVar20 + 1) - uVar15;
            local_a8 = SEXT48((int)local_ac);
            local_90 = (uVar22 - uVar18) * lVar12 - uVar15;
            uVar21 = SEXT48((int)local_98);
            do {
LAB_001263c5:
              if (local_a8 <= uVar21) {
                puVar23 = (undefined8 *)(lVar8 + 0x10 + (local_90 + local_a8) * 0x18);
                uVar17 = local_a8;
                do {
                  if ((undefined1 *)*puVar23 == &_fs_glyph_undefined) {
                    if ((local_c8 == uVar14) &&
                       (((((local_ac & 0xf) != 0 && (uVar15 < local_a8)) ||
                         ((local_98 & 0xf) != 0xf)) && (uVar21 < uVar20)))) goto LAB_001266a2;
                    local_47 = (char)uVar17;
                    local_48 = (char)uVar22;
                    local_46 = local_48;
                    local_45 = local_47;
                    uVar11 = add_range(&local_48,param_6,param_7);
                    if ((int)uVar11 != 0x55) goto LAB_00126230;
                    bVar24 = false;
                    *(undefined1 **)puVar23 = &_fs_glyph_requested;
                  }
                  else {
                    bVar24 = (bool)((undefined1 *)*puVar23 != &_fs_glyph_requested & bVar24);
                  }
                  puVar23 = puVar23 + 3;
                  uVar17 = uVar17 + 1;
                  if (uVar21 < uVar17) break;
                } while( true );
              }
              uVar22 = uVar22 + 1;
              local_90 = local_90 + lVar12;
              if (local_80 < uVar22) break;
            } while( true );
          }
        }
        else {
          if (local_78 == 0) {
            local_c8 = (uint)uVar6;
            local_98 = (uint)uVar7;
            uVar21 = uVar20;
            local_80 = uVar13;
            local_70 = pbVar1;
          }
          else {
            local_80 = (ulong)local_70[2];
            local_c8 = (uint)local_70[2];
            uVar21 = (ulong)local_70[3];
            local_98 = (uint)local_70[3];
            local_78 = iVar10 - 2;
            local_70 = local_70 + 4;
          }
          uVar14 = (uint)bVar3;
          if (uVar22 < uVar18) {
            uVar14 = (uint)uVar4;
            uVar22 = uVar18;
          }
          if (uVar13 < local_80) {
            local_c8 = (uint)uVar6;
            local_80 = uVar13;
          }
          local_ac = (uint)uVar5;
          if (uVar15 <= bVar2) {
            local_ac = uVar19;
          }
          uVar19 = (uint)uVar7;
          if (uVar21 <= uVar20) {
            uVar19 = local_98;
          }
          local_98 = uVar19;
          if (uVar22 <= local_80) goto LAB_00126367;
        }
        param_3 = (ulong)local_78;
      }
LAB_00126223:
      if (!bVar24) {
        uVar11 = 0x55;
        goto LAB_00126230;
      }
    }
  }
  uVar11 = 0x400;
LAB_00126230:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar11;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
LAB_001266a2:
  local_ac = local_ac & 0xf0;
  local_98 = (local_98 & 0xf0) + 0xf;
  local_a8 = SEXT48((int)local_ac);
  if (local_a8 < uVar15) {
    local_a8 = (ulong)uVar5;
    local_ac = (uint)uVar5;
  }
  uVar21 = (long)(int)local_98;
  if (uVar20 < (ulong)(long)(int)local_98) {
    uVar21 = (long)(int)(uint)uVar7;
    local_98 = (uint)uVar7;
  }
  goto LAB_001263c5;
LAB_0012664d:
  do {
    if ((undefined1 *)*puVar23 == &_fs_glyph_undefined) {
      local_47 = (char)uVar18;
      local_46 = '\0';
      local_48 = '\0';
      local_45 = local_47;
      uVar11 = add_range(&local_48,param_6,param_7,0);
      if ((int)uVar11 != 0x55) goto LAB_00126230;
      bVar24 = false;
      *(undefined1 **)puVar23 = &_fs_glyph_requested;
    }
    else {
      bVar24 = (bool)((undefined1 *)*puVar23 != &_fs_glyph_requested & bVar24);
    }
    uVar18 = uVar18 + 1;
    puVar23 = puVar23 + 3;
  } while (uVar18 <= uVar13);
  goto LAB_001261d0;
}



void _fs_clean_aborted_loadglyphs(long param_1,int param_2,byte *param_3)

{
  byte bVar1;
  long lVar2;
  uint uVar3;
  ulong uVar4;
  ulong uVar5;
  long lVar6;
  byte *pbVar7;
  ulong uVar8;
  int iVar9;
  long in_FS_OFFSET;
  byte local_24;
  undefined local_23;
  undefined local_22;
  undefined local_21;
  long local_20;
  
  lVar2 = *(long *)(param_1 + 0x98);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(lVar2 + 8) == 0) {
LAB_001268aa:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    return;
  }
  if (param_2 == 0) {
    uVar4 = (ulong)*(ushort *)(param_1 + 0xc);
    param_2 = 1;
    local_23 = (char)*(undefined2 *)(param_1 + 8);
    local_24 = (byte)*(ushort *)(param_1 + 0xc);
    local_21 = (char)*(undefined2 *)(param_1 + 10);
    uVar5 = (ulong)*(ushort *)(param_1 + 0xe);
    local_22 = (char)*(ushort *)(param_1 + 0xe);
    param_3 = &local_24;
  }
  else {
    if (param_2 < 1) goto LAB_001268aa;
    uVar4 = (ulong)*param_3;
    uVar5 = (ulong)param_3[2];
  }
  iVar9 = 0;
  pbVar7 = param_3 + 1;
  do {
    uVar8 = uVar4 & 0xff;
    if ((byte)uVar4 <= (byte)uVar5) {
      uVar4 = (ulong)pbVar7[2];
      do {
        bVar1 = *pbVar7;
        uVar5 = (ulong)bVar1;
        lVar6 = *(long *)(lVar2 + 8) +
                (long)(int)(((((uint)*(ushort *)(param_1 + 10) - (uint)*(ushort *)(param_1 + 8)) + 1
                             ) * ((int)uVar8 - (uint)*(ushort *)(param_1 + 0xc)) + (uint)bVar1) -
                           (uint)*(ushort *)(param_1 + 8)) * 0x18;
        if ((uint)bVar1 == (uint)uVar4 || (uint)bVar1 < (uint)uVar4) {
          do {
            while (*(undefined1 **)(lVar6 + 0x10) != &_fs_glyph_requested) {
              uVar3 = (int)uVar5 + 1;
              uVar5 = (ulong)uVar3;
              lVar6 = lVar6 + 0x18;
              if ((int)uVar4 < (int)uVar3) goto LAB_0012687c;
            }
            uVar3 = (int)uVar5 + 1;
            uVar5 = (ulong)uVar3;
            *(undefined1 **)(lVar6 + 0x10) = &_fs_glyph_undefined;
            uVar4 = (ulong)pbVar7[2];
            lVar6 = lVar6 + 0x18;
          } while ((int)uVar3 <= (int)(uint)pbVar7[2]);
        }
LAB_0012687c:
        uVar3 = (int)uVar8 + 1;
        uVar8 = (ulong)uVar3;
      } while ((int)uVar3 <= (int)(uint)pbVar7[1]);
    }
    iVar9 = iVar9 + 1;
    if (param_2 <= iVar9) goto LAB_001268aa;
    uVar4 = (ulong)pbVar7[3];
    uVar5 = (ulong)pbVar7[5];
    pbVar7 = pbVar7 + 4;
  } while( true );
}



long fs_create_font(undefined8 param_1,void *param_2,int param_3,ulong param_4,undefined4 param_5)

{
  int iVar1;
  long lVar2;
  undefined4 *__ptr;
  long lVar3;
  size_t __n;
  undefined4 uVar4;
  long in_FS_OFFSET;
  undefined8 uVar5;
  undefined local_50 [4];
  undefined local_4c [4];
  undefined local_48 [4];
  undefined local_44 [4];
  long local_40;
  
  __n = SEXT48(param_3);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = CreateFontRec();
  lVar3 = lVar2;
  if (lVar2 != 0) {
    uVar5 = 0x126949;
    __ptr = (undefined4 *)malloc(__n + 0x51);
    if (__ptr != (undefined4 *)0x0) {
      uVar4 = (undefined4)(param_4 & 0xffffffff);
      *__ptr = 0;
      __ptr[1] = 0;
      __ptr[2] = 0;
      __ptr[3] = 0;
      __ptr[4] = 0;
      __ptr[5] = 0;
      __ptr[6] = 0;
      __ptr[7] = 0;
      __ptr[8] = 0;
      __ptr[9] = 0;
      __ptr[10] = 0;
      __ptr[0xb] = 0;
      __ptr[0xc] = 0;
      __ptr[0xd] = 0;
      __ptr[0xe] = 0;
      __ptr[0xf] = 0;
      __ptr[0x10] = 0;
      __ptr[0x11] = 0;
      __ptr[0x12] = 0;
      __ptr[0x13] = 0;
      *(undefined8 *)(lVar2 + 0x88) = param_1;
      *(undefined4 **)(lVar2 + 0x98) = __ptr;
      *(undefined4 **)(lVar2 + 0xa0) = __ptr + 8;
      CheckFSFormat(0,param_4 & 0xffffffff,0x1b,local_50,local_4c,local_48,local_44,0,uVar5);
      *(undefined4 *)(lVar2 + 100) = uVar4;
      *(undefined4 *)(lVar2 + 0x4c) = 0;
      *(undefined8 *)(lVar2 + 0x50) = 0;
      *(undefined8 *)(lVar2 + 0x58) = 0;
      *(undefined *)(lVar2 + 0x60) = local_50[0];
      *(undefined8 *)(lVar2 + 0x80) = 0;
      *(undefined *)(lVar2 + 0x61) = local_4c[0];
      *(undefined *)(lVar2 + 99) = local_48[0];
      *(undefined *)(lVar2 + 0x62) = local_44[0];
      *(undefined8 *)(lVar2 + 0x68) = 0x125730;
      *(undefined8 *)(lVar2 + 0x70) = 0x1254c0;
      *(undefined8 *)(lVar2 + 0x78) = 0x125ec0;
      *(undefined4 **)(__ptr + 0x10) = __ptr + 0x14;
      __ptr[0x12] = uVar4;
      __ptr[0x13] = param_5;
      memcpy(__ptr + 0x14,param_2,__n);
      *(undefined *)((long)__ptr + __n + 0x50) = 0;
      uVar5 = GetNewFontClientID();
      *(undefined8 *)(__ptr + 8) = uVar5;
      iVar1 = StoreFontClientFont(lVar2,uVar5);
      if (iVar1 != 0) goto LAB_00126a52;
      free(__ptr);
    }
    lVar3 = 0;
    DestroyFontRec(lVar2);
  }
LAB_00126a52:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 * fs_alloc_glyphs(long param_1,int param_2)

{
  long lVar1;
  undefined8 *puVar2;
  
  lVar1 = *(long *)(param_1 + 0x98);
  puVar2 = (undefined8 *)malloc((long)param_2 + 8);
  *puVar2 = *(undefined8 *)(lVar1 + 0x18);
  *(undefined8 **)(lVar1 + 0x18) = puVar2;
  return puVar2 + 1;
}



long FUN_00126ad0(long param_1,undefined4 *param_2)

{
  byte bVar1;
  int iVar2;
  long lVar3;
  long in_FS_OFFSET;
  long local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(int *)(param_1 + 8) != -1) {
    lVar3 = __fdelt_chk();
    bVar1 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x37);
    if ((*(ulong *)(_fs_fd_mask + lVar3 * 8) &
        1 << (((char)*(undefined4 *)(param_1 + 8) + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f)) !=
        0) {
      iVar2 = _fs_start_read(param_1,8,&local_28);
      if (iVar2 == 1) {
        iVar2 = _fs_start_read(param_1,(ulong)(uint)(*(int *)(local_28 + 4) << 2),&local_28);
        if (iVar2 == 1) {
          *param_2 = 1;
          goto LAB_00126b70;
        }
      }
    }
  }
  *param_2 = 0;
  local_28 = 0;
LAB_00126b70:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_28;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00126b90(undefined8 *param_1)

{
  undefined8 *__ptr;
  
  __ptr = (undefined8 *)*param_1;
  while (__ptr != (undefined8 *)0x0) {
    *param_1 = __ptr[1];
    ClientSignal(*__ptr);
    free(__ptr);
    __ptr = (undefined8 *)*param_1;
  }
  return;
}



void FUN_00126db0(long param_1)

{
  int iVar1;
  undefined8 uVar2;
  long in_FS_OFFSET;
  int local_28;
  undefined local_24;
  undefined local_23;
  undefined2 local_22;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = GetClientResolutions(&local_28);
  if (local_28 != 0) {
    local_23 = (undefined)local_28;
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_24 = 0xb;
    local_22 = (undefined2)(local_28 * 6 + 7 >> 2);
    iVar1 = _fs_write(param_1,&local_24,4);
    if (iVar1 != -1) {
      _fs_write_pad(param_1,uVar2,(long)(local_28 * 6));
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char * FUN_00126e90(char *param_1)

{
  char *pcVar1;
  
  pcVar1 = strchr(param_1,0x2f);
  if (pcVar1 != (char *)0x0) {
    pcVar1 = strrchr(pcVar1 + 1,0x2f);
    return pcVar1;
  }
  return (char *)0;
}



undefined8 FUN_00126ec0(long param_1)

{
  int iVar1;
  undefined8 uVar2;
  long lVar3;
  char *__s;
  size_t sVar4;
  char *__s_00;
  int iVar5;
  long in_FS_OFFSET;
  char local_3d;
  int local_3c;
  undefined local_38;
  undefined local_37;
  undefined2 local_36;
  undefined local_34;
  char local_33;
  undefined2 local_32;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = GetClientResolutions(&local_3c);
  if (local_3c == 0) {
LAB_00126ef8:
    if (((*(int *)(param_1 + 0x2c) == 0) ||
        (lVar3 = FUN_00126e90(*(undefined8 *)
                               ((long)*(int *)(param_1 + 0x2c) * 0x10 + *(long *)(param_1 + 0x38) +
                               -0x10)), lVar3 == 0)) &&
       (lVar3 = FUN_00126e90(*(undefined8 *)(param_1 + 0x18)), lVar3 == 0)) {
      *(undefined4 *)(param_1 + 0x20) = 0;
      uVar2 = 1;
      goto LAB_001270bd;
    }
    *(undefined4 *)(param_1 + 0x20) = 1;
    __s = (char *)(lVar3 + 1);
    if (*(char *)(lVar3 + 1) == '\0') {
      local_32 = 1;
      local_33 = '\0';
      iVar5 = 0;
    }
    else {
      iVar5 = 0;
      local_33 = '\0';
      __s_00 = __s;
      do {
        local_33 = local_33 + '\x01';
        __s = strchr(__s_00,0x2b);
        if (__s == (char *)0x0) {
          sVar4 = strlen(__s_00);
          __s = __s_00 + sVar4;
        }
        iVar5 = iVar5 + 1 + ((int)__s - (int)__s_00);
        __s_00 = __s;
      } while (*__s != '\0');
      local_32 = (undefined2)(iVar5 + 7 >> 2);
    }
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_34 = 4;
    iVar1 = _fs_write(param_1,&local_34,4);
    if (iVar1 == 1) {
      while (*__s != '\0') {
        __s_00 = strchr(__s,0x2b);
        if (__s_00 == (char *)0x0) {
          sVar4 = strlen(__s);
          __s_00 = __s + sVar4;
        }
        local_3d = (char)__s_00 - (char)__s;
        iVar1 = _fs_write(param_1,&local_3d,1);
        if ((iVar1 != 1) ||
           (iVar1 = _fs_write(param_1,__s,(long)local_3d), __s = __s_00, iVar1 != 1))
        goto LAB_001270b8;
      }
      lVar3 = _fs_pad_length((long)iVar5);
      uVar2 = _fs_write(param_1,&DAT_00133f9a,lVar3 - (long)iVar5);
      if ((int)uVar2 == 1) goto LAB_001270bd;
    }
  }
  else {
    local_37 = (undefined)local_3c;
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_38 = 0xb;
    local_36 = (undefined2)(local_3c * 6 + 7 >> 2);
    iVar5 = _fs_write(param_1,&local_38,4);
    if ((iVar5 == 1) && (iVar5 = _fs_write_pad(param_1,uVar2,(long)(local_3c * 6)), iVar5 == 1))
    goto LAB_00126ef8;
  }
LAB_001270b8:
  uVar2 = 0xffffffff;
LAB_001270bd:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar2;
}



ulong FUN_00127150(long param_1)

{
  byte bVar1;
  long lVar2;
  ulong uVar3;
  
  if (*(int *)(param_1 + 8) == -1) {
    return 0;
  }
  lVar2 = __fdelt_chk((long)*(int *)(param_1 + 8));
  bVar1 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x37);
  if ((*(ulong *)(_fs_fd_mask + lVar2 * 8) &
      1 << (((char)*(undefined4 *)(param_1 + 8) + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f)) != 0)
  {
    uVar3 = *(long *)(param_1 + 0x80) - *(long *)(param_1 + 0x88);
    if (7 < uVar3) {
      return (ulong)((long)(ulong)(uint)(*(int *)(*(long *)(param_1 + 0x70) + 4 +
                                                 *(long *)(param_1 + 0x88)) << 2) <= (long)uVar3);
    }
  }
  return 0;
}



undefined8 FUN_001271d0(long param_1,undefined4 param_2)

{
  long in_FS_OFFSET;
  undefined4 local_18;
  undefined4 local_14;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(byte *)(param_1 + 0x98) & 0x10) == 0) {
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_18 = 0x20015;
    local_14 = param_2;
    _fs_write(param_1,&local_18,8);
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return 0x55;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00127270(long *param_1)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *param_1;
  if (lVar1 == 0) {
    return;
  }
  lVar2 = *(long *)(lVar1 + 0xa0);
  FUN_001271d0(*(undefined8 *)(*(long *)(lVar1 + 0x88) + 0x18),param_1[1]);
  if ((*(byte *)((long)param_1 + 0x14) & 0x20) == 0) {
    if (*(int *)(param_1 + 3) != 0) {
      (**(code **)(*param_1 + 0x78))(*param_1);
    }
    *param_1 = 0;
    return;
  }
  *(undefined4 *)(lVar2 + 8) = 0xffffffff;
  return;
}



void FUN_001272e0(long param_1,undefined8 param_2,int param_3)

{
  long lVar1;
  int *piVar2;
  long lVar3;
  int **ppiVar4;
  
  piVar2 = (int *)malloc((long)*(int *)(&DAT_00133fc0 + (ulong)(param_3 - 1) * 4) + 0x38);
  if (piVar2 != (int *)0x0) {
    lVar1 = *(long *)(param_1 + 0xb0);
    *(undefined8 *)(piVar2 + 2) = param_2;
    piVar2[8] = 0x51;
    *piVar2 = param_3;
    *(int **)(piVar2 + 6) = piVar2 + 0xe;
    *(undefined8 *)(piVar2 + 10) = 0;
    *(undefined2 *)(piVar2 + 4) = 0xffff;
    *(undefined8 *)(piVar2 + 0xc) = 0;
    if (lVar1 == 0) {
      ppiVar4 = (int **)(param_1 + 0xb0);
    }
    else {
      do {
        lVar3 = lVar1;
        lVar1 = *(long *)(lVar3 + 0x30);
      } while (lVar1 != 0);
      ppiVar4 = (int **)(lVar3 + 0x30);
    }
    *ppiVar4 = piVar2;
  }
  return;
}



undefined8 FUN_00127370(undefined8 param_1,int *param_2,long *param_3)

{
  long *plVar1;
  ushort uVar2;
  uint uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  ulong uVar9;
  byte *pbVar10;
  int iVar11;
  uint uVar12;
  char *pcVar13;
  ulong *puVar14;
  int iVar15;
  ulong uVar16;
  undefined8 uVar17;
  ulong uVar18;
  undefined *puVar19;
  byte *pbVar20;
  void *__dest;
  void *pvVar21;
  long lVar22;
  long lVar23;
  long in_FS_OFFSET;
  int local_44;
  
  lVar5 = *param_3;
  lVar6 = *(long *)(in_FS_OFFSET + 0x28);
  lVar7 = *(long *)(lVar5 + 0xa0);
  lVar8 = *(long *)(lVar5 + 0x98);
  pcVar13 = (char *)FUN_00126ad0();
  if (pcVar13 == (char *)0x0) {
    uVar17 = 0x51;
    if (local_44 == 0) goto LAB_00127591;
LAB_00127689:
    uVar17 = 0x50;
  }
  else {
    if (*pcVar13 == '\x01') {
      if (local_44 == 0) {
        uVar17 = 0x51;
        goto LAB_00127591;
      }
      uVar17 = 0x50;
      _fs_done_read(param_1,(ulong)(uint)(*(int *)(pcVar13 + 4) * 4));
    }
    else {
      uVar3 = *(uint *)(pcVar13 + 0xc);
      pbVar20 = (byte *)0x0;
      if (*param_2 == 2) {
        iVar4 = *(int *)(param_3 + 1);
        pbVar10 = (byte *)param_3[2];
        pbVar20 = pbVar10;
        if (iVar4 == 0) goto LAB_001273f1;
        uVar2 = *(ushort *)(lVar5 + 8);
        pbVar20 = pbVar10 + 4;
        iVar15 = ((uint)*(ushort *)(lVar5 + 10) - (uint)uVar2) + 1;
        uVar16 = SEXT48((int)((((uint)*pbVar10 - (uint)*(ushort *)(lVar5 + 0xc)) * iVar15 +
                              (uint)pbVar10[1]) - (uint)uVar2));
        uVar18 = SEXT48((int)((((uint)pbVar10[2] - (uint)*(ushort *)(lVar5 + 0xc)) * iVar15 +
                              (uint)pbVar10[3]) - (uint)uVar2));
      }
      else {
LAB_001273f1:
        uVar18 = (ulong)uVar3;
        iVar4 = 0;
        uVar16 = 0;
      }
      __dest = (void *)fs_alloc_glyphs();
      if (__dest == (void *)0x0) goto LAB_00127689;
      iVar15 = *param_2;
      if (*(int *)(pcVar13 + 0xc) != 0) {
        lVar23 = 0;
        do {
          while( true ) {
            lVar22 = uVar16 * 0x18;
            puVar14 = (ulong *)(*(long *)(lVar8 + 8) + lVar22);
            if ((iVar15 != 1) && ((undefined1 *)puVar14[2] != &_fs_glyph_requested)) break;
            pvVar21 = __dest;
            if (((*puVar14 & 0xffff0000ffffffff) != 0) ||
               ((*(short *)(puVar14 + 1) != 0 ||
                (puVar19 = (undefined *)0x0, *(short *)((long)puVar14 + 4) != 0)))) {
              uVar9 = *(ulong *)(pcVar13 + lVar23 * 8 + 0x14);
              puVar19 = &DAT_0033cd14;
              if ((int)(uVar9 >> 0x20) != 0) {
                pvVar21 = (void *)((long)__dest + (uVar9 >> 0x20));
                puVar19 = (undefined *)
                          memcpy(__dest,pcVar13 + (ulong)(uVar3 * 8) + 0x14 + (uVar9 & 0xffffffff),
                                 uVar9 >> 0x20);
                puVar14 = (ulong *)(lVar22 + *(long *)(lVar8 + 8));
              }
            }
            if ((undefined1 *)puVar14[2] == &_fs_glyph_requested) {
              plVar1 = (long *)(lVar7 + 0x10);
              *plVar1 = *plVar1 + -1;
              puVar14 = (ulong *)(*(long *)(lVar8 + 8) + lVar22);
            }
            *(undefined **)(puVar14 + 2) = puVar19;
            iVar15 = *param_2;
            __dest = pvVar21;
            if (uVar18 != uVar16) goto LAB_0012747b;
LAB_001274f5:
            iVar4 = iVar4 + -1;
            if (iVar4 == 0) goto LAB_00127555;
            uVar2 = *(ushort *)(lVar5 + 8);
            iVar11 = ((uint)*(ushort *)(lVar5 + 10) - (uint)uVar2) + 1;
            uVar16 = SEXT48((int)((((uint)*pbVar20 - (uint)*(ushort *)(lVar5 + 0xc)) * iVar11 +
                                  (uint)pbVar20[1]) - (uint)uVar2));
            uVar12 = (int)lVar23 + 1;
            lVar23 = lVar23 + 1;
            uVar18 = SEXT48((int)(((uint)pbVar20[3] +
                                  iVar11 * ((uint)pbVar20[2] - (uint)*(ushort *)(lVar5 + 0xc))) -
                                 (uint)uVar2));
            pbVar20 = pbVar20 + 4;
            if (*(uint *)(pcVar13 + 0xc) < uVar12 || *(uint *)(pcVar13 + 0xc) == uVar12)
            goto LAB_00127555;
          }
          if (uVar18 == uVar16) goto LAB_001274f5;
LAB_0012747b:
          uVar12 = (int)lVar23 + 1;
          uVar16 = uVar16 + 1;
          lVar23 = lVar23 + 1;
        } while (uVar12 <= *(uint *)(pcVar13 + 0xc) && *(uint *)(pcVar13 + 0xc) != uVar12);
      }
LAB_00127555:
      uVar17 = 0x55;
      if (iVar15 == 1) {
        *(undefined8 *)(lVar7 + 0x10) = 0;
        *(undefined4 *)(param_3 + 2) = 4;
      }
    }
  }
  _fs_done_read(param_1,(ulong)(uint)(*(int *)(pcVar13 + 4) << 2));
LAB_00127591:
  if (lVar6 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar17;
}



void FUN_00127710(long param_1,long param_2)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  long *plVar4;
  long *plVar5;
  long lVar6;
  long *plVar7;
  long in_FS_OFFSET;
  uint local_54;
  undefined4 *local_50;
  undefined local_44;
  char local_43;
  undefined2 local_42;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  long local_30;
  
  plVar7 = *(long **)(param_1 + 0x40);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_34 = 0;
  if (plVar7 == (long *)0x0) {
LAB_00127761:
    plVar5 = (long *)malloc(0x20);
    if (plVar5 == (long *)0x0) goto LAB_001278ae;
    *plVar5 = param_2;
    *(long **)(plVar5 + 1) = plVar7;
    *(long **)(param_1 + 0x40) = plVar5;
    lVar6 = GetNewFontClientID();
    plVar5[2] = lVar6;
    plVar7 = plVar5;
LAB_001277f8:
    local_44 = 8;
    local_43 = set_font_authorizations(&local_50,&local_54,param_2);
    if (local_43 == '\0') {
      local_50 = &local_34;
      local_54 = 4;
      local_42 = 3;
    }
    else {
      local_54 = local_54 + 3 & 0xfffffffc;
      local_42 = (undefined2)((long)(int)local_54 + 8U >> 2);
    }
    lVar6 = plVar7[2];
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_40 = (undefined4)lVar6;
    _fs_write(param_1,&local_44,8);
    _fs_write(param_1,local_50,(long)(int)local_54);
    *(undefined8 *)(param_1 + 0x48) = 0;
    uVar3 = client_auth_generation(param_2);
    *(undefined4 *)(plVar7 + 3) = uVar3;
  }
  else {
    plVar5 = plVar7;
    if (param_2 != *plVar7) {
      do {
        plVar4 = plVar5;
        plVar5 = (long *)plVar4[1];
        if (plVar5 == (long *)0x0) goto LAB_00127761;
      } while (*plVar5 != param_2);
      plVar7 = plVar5;
      if ((long *)(param_1 + 0x40) != plVar4 + 1) {
        plVar4[1] = plVar5[1];
        plVar5[1] = *(long *)(param_1 + 0x40);
        *(long **)(param_1 + 0x40) = plVar5;
      }
    }
    iVar1 = *(int *)(plVar7 + 3);
    iVar2 = client_auth_generation(param_2);
    if (iVar1 != iVar2) {
      lVar6 = plVar7[2];
      *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
      local_3c = 0x20009;
      local_38 = (undefined4)lVar6;
      _fs_write(param_1,&local_3c,8);
      goto LAB_001277f8;
    }
  }
  lVar6 = plVar7[2];
  if (*(long *)(param_1 + 0x48) != lVar6) {
    *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
    local_3c = 0x2000a;
    local_38 = (undefined4)lVar6;
    _fs_write(param_1,&local_3c,8);
    *(long *)(param_1 + 0x48) = plVar7[2];
  }
LAB_001278ae:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void _fs_mark_block(long param_1,uint param_2)

{
  *(uint *)(param_1 + 0x98) = *(uint *)(param_1 + 0x98) | param_2;
  DAT_0033cd18 = DAT_0033cd18 | param_2;
  return;
}



void FUN_00127910(long param_1)

{
  int iVar1;
  
  _fs_mark_block(param_1,8);
  iVar1 = GetTimeInMillis();
  *(int *)(param_1 + 0x9c) = iVar1 + 30000;
  return;
}



void FUN_00127930(long param_1)

{
  if ((*(byte *)(param_1 + 0x98) & 8) == 0) {
    FUN_00127910();
  }
  _fs_flush(param_1);
  return;
}



undefined8 FUN_00127950(undefined8 param_1,long param_2,ulong param_3,undefined *param_4)

{
  undefined uVar1;
  undefined uVar2;
  undefined uVar3;
  undefined uVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  long lVar8;
  undefined *puVar9;
  int iVar10;
  int iVar11;
  uint uVar12;
  long in_FS_OFFSET;
  undefined local_158;
  undefined local_157;
  short local_156;
  undefined4 local_154;
  uint local_150;
  int local_14c;
  undefined local_148 [264];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar5 = *(long *)(*(long *)(param_2 + 0x88) + 0x18);
  uVar7 = 0x57;
  if ((*(byte *)(lVar5 + 0x98) & 0x10) == 0) {
    lVar8 = FUN_001272e0(lVar5,param_1,2);
    uVar7 = 0x50;
    if (lVar8 != 0) {
      plVar6 = *(long **)(lVar8 + 0x18);
      *plVar6 = param_2;
      iVar11 = (int)(param_3 & 0xffffffff);
      *(int *)(plVar6 + 1) = iVar11;
      *(undefined **)(plVar6 + 2) = param_4;
      plVar6[3] = 0;
      if ((*(uint *)(lVar5 + 0x98) & 0x44) == 0) {
        local_158 = 0x14;
        local_154 = (undefined4)**(undefined8 **)(param_2 + 0xa0);
        local_150 = *(uint *)(param_2 + 100);
        if ((*(byte *)(param_2 + 0x12) & 2) != 0) {
          local_150 = local_150 & 0xfffffff3 | 8;
        }
        local_156 = (short)(param_3 & 0xffffffff) + 4;
        *(int *)(lVar5 + 0x10) = *(int *)(lVar5 + 0x10) + 1;
        local_157 = 1;
        local_14c = iVar11 * 2;
        _fs_write(lVar5,&local_158,0x10);
        *(undefined2 *)(lVar8 + 0x10) = (short)*(undefined4 *)(lVar5 + 0x10);
        if ((iVar11 != 0) && (0 < iVar11)) {
          iVar10 = 0;
          puVar9 = local_148;
          do {
            uVar1 = param_4[1];
            uVar2 = *param_4;
            uVar3 = param_4[3];
            uVar4 = param_4[2];
            if (*(int *)(lVar5 + 0x30) < 2) {
              *puVar9 = uVar1;
              puVar9[1] = uVar2;
              puVar9[2] = uVar3;
              puVar9[3] = uVar4;
              uVar12 = iVar10 + 1U & 0x3f;
              if (uVar12 == 0) goto LAB_00127ae7;
LAB_00127aaa:
              puVar9 = puVar9 + 4;
            }
            else {
              *puVar9 = uVar2;
              puVar9[1] = uVar1;
              puVar9[2] = uVar4;
              puVar9[3] = uVar3;
              uVar12 = iVar10 + 1U & 0x3f;
              if (uVar12 != 0) goto LAB_00127aaa;
LAB_00127ae7:
              _fs_write(lVar5,local_148,0x100);
              puVar9 = local_148;
            }
            iVar10 = iVar10 + 1;
            param_4 = param_4 + 4;
          } while (iVar11 != iVar10);
          if (uVar12 != 0) {
            _fs_write(lVar5,local_148,(long)(int)(uVar12 * 4));
          }
        }
        FUN_00127930(lVar5);
        uVar7 = 0x54;
      }
      else {
        uVar7 = 0x54;
        if ((*(uint *)(lVar5 + 0x98) & 8) == 0) {
          FUN_00127910(lVar5);
          uVar7 = 0x54;
        }
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar7;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void _fs_unmark_block(long param_1,uint param_2)

{
  long *plVar1;
  
  plVar1 = DAT_0033cd20;
  if ((*(uint *)(param_1 + 0x98) & param_2) != 0) {
    DAT_0033cd18 = 0;
    *(uint *)(param_1 + 0x98) = ~param_2 & *(uint *)(param_1 + 0x98);
    if (plVar1 != (long *)0x0) {
      DAT_0033cd18 = 0;
      do {
        DAT_0033cd18 = DAT_0033cd18 | *(uint *)(plVar1 + 0x13);
        plVar1 = (long *)*plVar1;
      } while (plVar1 != (long *)0x0);
    }
  }
  return;
}



void FUN_00127d30(long param_1)

{
  byte bVar1;
  long lVar2;
  
  _fs_unmark_block(param_1,0x27);
  if (*(long *)(param_1 + 0xb8) != 0) {
    _FontTransClose();
    *(undefined8 *)(param_1 + 0xb8) = 0;
    _fs_io_reinit(param_1);
  }
  if (-1 < *(int *)(param_1 + 8)) {
    lVar2 = __fdelt_chk();
    bVar1 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x37);
    bVar1 = ((char)*(undefined4 *)(param_1 + 8) + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f;
    *(ulong *)(_fs_fd_mask + lVar2 * 8) =
         *(ulong *)(_fs_fd_mask + lVar2 * 8) & (-2 << bVar1 | 0xfffffffffffffffeU >> 0x40 - bVar1);
    *(undefined4 *)(param_1 + 8) = 0xffffffff;
  }
  *(undefined4 *)(param_1 + 0xc) = 0;
  return;
}



ulong FUN_00127db0(long param_1)

{
  undefined4 *puVar1;
  byte bVar2;
  uint uVar3;
  short *psVar4;
  int iVar5;
  ulong uVar6;
  undefined8 *puVar7;
  long lVar8;
  char *pcVar9;
  ulong uVar10;
  undefined8 uVar11;
  undefined8 *puVar12;
  undefined8 *puVar13;
  undefined8 *puVar14;
  short *psVar15;
  undefined8 *puVar16;
  long in_FS_OFFSET;
  byte bVar17;
  int iStack120;
  undefined local_50;
  undefined uStack79;
  undefined2 uStack78;
  undefined4 uStack76;
  undefined2 uStack72;
  undefined2 uStack70;
  long local_40;
  
  bVar17 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar5 = *(int *)(param_1 + 0xc);
  do {
    switch(iVar5) {
    case 0:
      if (*(int *)(param_1 + 0x2c) == 0) {
        uVar11 = *(undefined8 *)(param_1 + 0x18);
      }
      else {
        uVar11 = *(undefined8 *)
                  ((long)*(int *)(param_1 + 0x2c) * 0x10 + *(long *)(param_1 + 0x38) + -0x10);
      }
      uVar11 = func_0x00108330(uVar11);
      *(undefined8 *)(param_1 + 0xb8) = uVar11;
      iVar5 = GetTimeInMillis();
      *(int *)(param_1 + 0xa4) = iVar5 + 5000;
      uVar3 = CONCAT22(uStack78,CONCAT11(uStack79,local_50));
      uVar6 = (ulong)uVar3;
      if (uVar3 == 0) {
        *(undefined4 *)(param_1 + 0xc) = 1;
code_r0x0012801a:
        iVar5 = GetTimeInMillis();
        if (-1 < iVar5 - *(int *)(param_1 + 0xa4)) break;
        uVar6 = 0;
        goto LAB_00127e25;
      }
code_r0x00127e13:
      if ((int)uVar6 == 1) {
code_r0x00127ee9:
        iVar5 = *(int *)(param_1 + 0xc);
        goto LAB_00127f25;
      }
      if ((int)uVar6 != -1) goto LAB_00127e25;
      break;
    case 1:
      uVar6 = _fs_poll_connect(*(undefined8 *)(param_1 + 0xb8));
      if ((int)uVar6 != 1) {
code_r0x00127e0b:
        if ((int)uVar6 == 0) goto code_r0x0012801a;
        goto code_r0x00127e13;
      }
      iVar5 = _FontTransGetConnectionNumber(*(undefined8 *)(param_1 + 0xb8));
      *(int *)(param_1 + 8) = iVar5;
      lVar8 = __fdelt_chk((long)iVar5);
      bVar2 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x37);
      *(ulong *)(_fs_fd_mask + lVar8 * 8) =
           *(ulong *)(_fs_fd_mask + lVar8 * 8) |
           1 << (((char)*(undefined4 *)(param_1 + 8) + (bVar2 >> 2) & 0x3f) - (bVar2 >> 2) & 0x3f);
      iVar5 = *(int *)(param_1 + 0xc);
    default:
LAB_00127f25:
      if (iVar5 < 6) {
LAB_00127fc3:
        iVar5 = iVar5 + 1;
        *(int *)(param_1 + 0xc) = iVar5;
      }
      goto LAB_00127f2e;
    case 2:
      local_50 = 0x6c;
      uStack79 = 0;
      uStack78 = 2;
      uVar11 = 8;
      goto code_r0x00127efe;
    case 3:
      uVar6 = _fs_start_read(param_1,0xc,&local_50);
      if ((int)uVar6 != 1) goto code_r0x00127e0b;
      psVar4 = (short *)CONCAT44(uStack76,CONCAT22(uStack78,CONCAT11(uStack79,local_50)));
      if (2 < (ushort)psVar4[1]) break;
      iVar5 = (uint)(ushort)psVar4[5] * 4 + 0xc + (uint)(ushort)psVar4[4] * 4;
      if (*psVar4 == 0) {
        uVar6 = _fs_start_read(param_1,(long)(iVar5 + 0xc),&local_50);
        if ((int)uVar6 != 1) goto code_r0x00127e0b;
        iVar5 = iVar5 + *(int *)(CONCAT44(uStack76,CONCAT22(uStack78,CONCAT11(uStack79,local_50))) +
                                (long)iVar5) * 4;
      }
      uVar6 = _fs_start_read(param_1,(long)iVar5,&local_50);
      if ((int)uVar6 != 1) goto code_r0x00127e0b;
      psVar4 = (short *)CONCAT44(uStack76,CONCAT22(uStack78,CONCAT11(uStack79,local_50)));
      if (psVar4 != (short *)0x0) {
        *(undefined4 *)(param_1 + 0x10) = 0;
        iStack120 = *(int *)(param_1 + 0x2c);
        *(uint *)(param_1 + 0x30) = (uint)(ushort)psVar4[1];
        if (iStack120 == 0) {
          if (*(void **)(param_1 + 0x38) != (void *)0x0) {
            free(*(void **)(param_1 + 0x38));
            iStack120 = 0;
            *(undefined8 *)(param_1 + 0x38) = 0;
            *(undefined4 *)(param_1 + 0x28) = 0;
          }
          bVar2 = *(byte *)(psVar4 + 3);
          if (bVar2 != 0) {
            puVar7 = (undefined8 *)
                     malloc((long)(int)((uint)(ushort)psVar4[4] << 2) + (ulong)bVar2 * 0x10);
            if (puVar7 != (undefined8 *)0x0) {
              psVar15 = psVar4 + 6;
              puVar16 = puVar7 + (ulong)bVar2 * 2;
              puVar14 = puVar7;
              do {
                puVar1 = (undefined4 *)(psVar15 + 1);
                *(int *)(puVar14 + 1) = (int)*(char *)psVar15;
                bVar2 = *(byte *)((long)psVar15 + 1);
                uVar6 = SEXT18((char)bVar2);
                *(undefined8 **)puVar14 = puVar16;
                if (uVar6 < 8) {
                  if ((uVar6 & 4) == 0) {
                    if ((uVar6 != 0) && (*(char *)puVar16 = *(char *)puVar1, (bVar2 & 2) != 0)) {
                      *(undefined2 *)((long)puVar16 + (uVar6 - 2)) =
                           *(undefined2 *)((long)psVar15 + uVar6);
                    }
                  }
                  else {
                    *(undefined4 *)puVar16 = *puVar1;
                    *(undefined4 *)((long)puVar16 + (uVar6 - 4)) =
                         *(undefined4 *)((long)psVar15 + (uVar6 - 2));
                  }
                }
                else {
                  *puVar16 = *(undefined8 *)(psVar15 + 1);
                  *(undefined8 *)((long)puVar16 + (uVar6 - 8)) =
                       *(undefined8 *)((long)psVar15 + (uVar6 - 6));
                  puVar12 = (undefined8 *)
                            ((long)puVar16 -
                            (long)(undefined8 *)((ulong)(puVar16 + 1) & 0xfffffffffffffff8));
                  uVar10 = (long)puVar12 + uVar6 >> 3;
                  puVar12 = (undefined8 *)((long)puVar1 - (long)puVar12);
                  puVar13 = (undefined8 *)((ulong)(puVar16 + 1) & 0xfffffffffffffff8);
                  while (uVar10 != 0) {
                    uVar10 = uVar10 - 1;
                    *puVar13 = *puVar12;
                    puVar12 = puVar12 + (ulong)bVar17 * 0x1ffffffffffffffe + 1;
                    puVar13 = puVar13 + (ulong)bVar17 * 0x1ffffffffffffffe + 1;
                  }
                }
                *(undefined *)((long)puVar16 + uVar6) = 0;
                puVar16 = (undefined8 *)((long)puVar16 + uVar6 + 1);
                iStack120 = iStack120 + 1;
                puVar14 = puVar14 + 2;
                lVar8 = _fs_pad_length((long)((int)(char)bVar2 + 2));
                psVar15 = (short *)((long)psVar15 + lVar8);
              } while (iStack120 < (int)(uint)*(byte *)(psVar4 + 3));
              *(uint *)(param_1 + 0x28) = (uint)*(byte *)(psVar4 + 3);
              *(undefined8 **)(param_1 + 0x38) = puVar7;
            }
          }
        }
        _fs_done_read(param_1);
        if (*psVar4 != 0) break;
        goto code_r0x00127ee9;
      }
      break;
    case 4:
      uVar6 = FUN_00126ec0(param_1);
      if (*(int *)(param_1 + 0x20) == 0) goto code_r0x00127e0b;
      local_50 = 3;
      uStack78 = 3;
      uStack72 = 0;
      uStack70 = 0;
      *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
      uVar11 = 0xc;
code_r0x00127efe:
      uStack76 = 0;
      iVar5 = _fs_write(param_1,&local_50,uVar11);
      if (iVar5 == 1) {
        iVar5 = GetTimeInMillis();
        *(int *)(param_1 + 0xa4) = iVar5 + 30000;
        iVar5 = *(int *)(param_1 + 0xc);
        goto LAB_00127f25;
      }
      break;
    case 5:
      if (*(int *)(param_1 + 0x20) != 0) {
        pcVar9 = (char *)FUN_00126ad0(param_1);
        if (pcVar9 == (char *)0x0) {
          uVar6 = (ulong)CONCAT22(uStack78,CONCAT11(uStack79,local_50));
          goto code_r0x00127e0b;
        }
        if ((*pcVar9 == '\x01') && (pcVar9[0xc] == '\x04')) {
          _fs_done_read(param_1);
          break;
        }
        _fs_done_read(param_1);
        iVar5 = *(int *)(param_1 + 0xc);
        goto LAB_00127f25;
      }
      goto LAB_00127fc3;
    }
    FUN_00127d30(param_1);
    if (*(int *)(param_1 + 0x28) <= *(int *)(param_1 + 0x2c)) {
      *(undefined4 *)(param_1 + 0x2c) = 0;
      uVar6 = 0xffffffff;
      goto LAB_00127e25;
    }
    *(int *)(param_1 + 0x2c) = *(int *)(param_1 + 0x2c) + 1;
    iVar5 = *(int *)(param_1 + 0xc);
LAB_00127f2e:
  } while (iVar5 != 6);
  DAT_0033cd10 = DAT_0033cd10 + 1;
  *(int *)(param_1 + 0x24) = DAT_0033cd10;
  uVar6 = 1;
LAB_00127e25:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar6;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_001282b0(void *param_1)

{
  FUN_00127d30();
  _fs_io_fini(param_1);
  if (*(void **)((long)param_1 + 0x38) != (void *)0x0) {
    free(*(void **)((long)param_1 + 0x38));
  }
  free(param_1);
  return;
}



void FUN_001282e0(long param_1,int *param_2)

{
  int *piVar1;
  long lVar2;
  int iVar3;
  int *piVar4;
  undefined8 *puVar5;
  
  piVar1 = *(int **)(param_1 + 0xb0);
  if (piVar1 == (int *)0x0) {
LAB_00128311:
    iVar3 = *param_2;
  }
  else {
    if (piVar1 == param_2) {
      puVar5 = (undefined8 *)(param_1 + 0xb0);
    }
    else {
      do {
        piVar4 = piVar1;
        piVar1 = *(int **)(piVar4 + 0xc);
        if (piVar1 == (int *)0x0) goto LAB_00128311;
      } while (param_2 != piVar1);
      puVar5 = (undefined8 *)(piVar4 + 0xc);
    }
    *puVar5 = *(undefined8 *)(param_2 + 0xc);
    iVar3 = *param_2;
  }
  if ((iVar3 == 2) && (*(int *)(*(long *)(param_2 + 6) + 8) != 0)) {
    free(*(void **)(*(long *)(param_2 + 6) + 0x10));
  }
  free(param_2);
  lVar2 = *(long *)(param_1 + 0xb0);
  while( true ) {
    if (lVar2 == 0) {
      _fs_unmark_block(param_1,8);
      return;
    }
    if (*(int *)(lVar2 + 0x20) == 0x51) break;
    lVar2 = *(long *)(lVar2 + 0x30);
  }
  iVar3 = GetTimeInMillis();
  *(int *)(param_1 + 0x9c) = iVar3 + 30000;
  _fs_mark_block(param_1,8);
  return;
}



void FUN_001283d0(long param_1,int *param_2)

{
  int iVar1;
  int *piVar2;
  undefined8 *puVar3;
  byte bVar4;
  long lVar5;
  
  iVar1 = *param_2;
  if (iVar1 == 2) {
    puVar3 = *(undefined8 **)(param_2 + 6);
    _fs_clean_aborted_loadglyphs(*puVar3,(ulong)*(uint *)(puVar3 + 1),puVar3[2]);
    FUN_00126b90(puVar3 + 3);
    FUN_001282e0(param_1,param_2);
    return;
  }
  if (iVar1 != 4) {
    if (iVar1 != 1) {
      FUN_001282e0(param_1,param_2);
      return;
    }
    lVar5 = *(long *)(param_2 + 6);
    FUN_00127270(lVar5);
    FUN_00126b90(lVar5 + 0x28);
    FUN_001282e0(param_1,param_2);
    return;
  }
  piVar2 = *(int **)(param_2 + 6);
  if (*piVar2 == 1) {
    lVar5 = __fdelt_chk((long)*(int *)(param_1 + 8));
    bVar4 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x37);
    *(ulong *)(_fs_fd_mask + lVar5 * 8) =
         *(ulong *)(_fs_fd_mask + lVar5 * 8) |
         1 << (((char)*(undefined4 *)(param_1 + 8) + (bVar4 >> 2) & 0x3f) - (bVar4 >> 2) & 0x3f);
  }
  _fs_free_props(piVar2 + 2);
  FUN_001282e0(param_1,param_2);
  return;
}



void FUN_001284c0(long param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long *__ptr;
  long lVar3;
  long *plVar4;
  long in_FS_OFFSET;
  undefined2 local_38;
  undefined2 local_36;
  undefined4 local_34;
  long local_30;
  
  lVar1 = *(long *)(param_2 + 0x18);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  __ptr = *(long **)(lVar1 + 0x40);
  if (__ptr != (long *)0x0) {
    if (param_1 == *__ptr) {
      plVar4 = (long *)(lVar1 + 0x40);
    }
    else {
      do {
        plVar4 = __ptr;
        __ptr = (long *)plVar4[1];
        if (__ptr == (long *)0x0) goto LAB_00128509;
      } while (*__ptr != param_1);
      plVar4 = plVar4 + 1;
    }
    local_38 = 9;
    lVar3 = __ptr[2];
    *(int *)(lVar1 + 0x10) = *(int *)(lVar1 + 0x10) + 1;
    local_36 = 2;
    local_34 = (undefined4)lVar3;
    _fs_write(lVar1,&local_38,8);
    *plVar4 = __ptr[1];
    free(__ptr);
  }
LAB_00128509:
  lVar3 = *(long *)(lVar1 + 0xb0);
  if (lVar3 != 0) {
    lVar2 = *(long *)(lVar3 + 8);
    while (param_1 != lVar2) {
      lVar3 = *(long *)(lVar3 + 0x30);
      if (lVar3 == 0) goto LAB_0012852f;
      lVar2 = *(long *)(lVar3 + 8);
    }
    lVar2 = *(long *)(lVar3 + 0x28);
    if (lVar2 != 0) {
      *(undefined8 *)(lVar3 + 8) = *(undefined8 *)(lVar2 + 8);
      *(undefined8 *)(lVar3 + 0x28) = *(undefined8 *)(lVar2 + 0x28);
      lVar3 = lVar2;
    }
    FUN_001283d0(lVar1,lVar3);
  }
LAB_0012852f:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Could not reconcile some variable overlaps

void FUN_001288d0(long param_1,long param_2)

{
  long lVar1;
  byte bVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  ushort uVar6;
  int iVar7;
  undefined4 uVar8;
  long lVar9;
  undefined4 *puVar10;
  undefined8 uVar11;
  long *plVar12;
  long lVar13;
  void **ppvVar14;
  short sVar15;
  undefined2 uVar16;
  int iVar17;
  uint uVar18;
  short *psVar19;
  byte *pbVar20;
  ulong *puVar21;
  char *pcVar22;
  short sVar23;
  ulong uVar24;
  undefined4 *puVar25;
  long *plVar26;
  short sVar27;
  int *piVar28;
  long lVar29;
  int *piVar30;
  ulong *puVar31;
  undefined8 *puVar32;
  uint uVar33;
  long *plVar34;
  uint uVar35;
  undefined8 *puVar36;
  int *piVar37;
  long lVar38;
  uint uVar39;
  ulong *puVar40;
  long *plVar41;
  long in_FS_OFFSET;
  byte bVar42;
  void *local_e8;
  undefined local_b0 [4];
  int local_ac;
  int local_a8;
  undefined4 local_a4;
  undefined4 local_a0;
  undefined4 local_9c;
  undefined8 local_98;
  undefined4 local_90;
  long local_40;
  
  bVar42 = 0;
  lVar9 = *(long *)(param_1 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  psVar19 = (short *)FUN_00126ad0(lVar9,local_b0);
  if (psVar19 == (short *)0x0) goto LAB_0012897d;
  piVar30 = *(int **)(lVar9 + 0xb0);
  if (piVar30 == (int *)0x0) {
LAB_0012893f:
    if (*psVar19 == 2) {
      local_98._0_4_ = CONCAT22(1,(ushort)local_98 & 0xff00);
      local_98 = local_98 & 0xffffffff00000000 | (ulong)(uint)local_98;
      *(int *)(lVar9 + 0x10) = *(int *)(lVar9 + 0x10) + 1;
      _fs_write(lVar9,&local_98,4);
    }
    _fs_done_read(lVar9,(ulong)(uint)(*(int *)(psVar19 + 2) << 2));
  }
  else {
    sVar23 = *(short *)(piVar30 + 4);
    while (sVar23 != psVar19[1]) {
      piVar30 = *(int **)(piVar30 + 0xc);
      if (piVar30 == (int *)0x0) goto LAB_0012893f;
      sVar23 = *(short *)(piVar30 + 4);
    }
    iVar17 = *piVar30;
    if (iVar17 == 2) {
      local_98._0_4_ =
           FUN_00127370(*(undefined8 *)(param_1 + 0x18),piVar30,*(undefined8 *)(piVar30 + 6));
      piVar30[8] = (uint)local_98;
LAB_00128bc6:
      if ((uint)local_98 == 0x51) goto LAB_00128960;
    }
    else {
      if (iVar17 < 3) {
        if (iVar17 != 1) {
LAB_00128c78:
          local_98._0_4_ = piVar30[8];
          goto LAB_00128bc6;
        }
        plVar12 = *(long **)(piVar30 + 6);
        iVar7 = *(int *)(plVar12 + 2);
        if (iVar7 == 1) {
          lVar29 = *(long *)(param_1 + 0x18);
          pcVar22 = (char *)FUN_00126ad0(lVar29,&local_ac);
          iVar7 = local_ac;
          if (pcVar22 == (char *)0x0) {
joined_r0x001296ad:
            if (iVar7 == 0) goto LAB_00128cd0;
          }
          else {
            if (*pcVar22 != '\x01') {
              plVar41 = &local_98;
              if ((*(byte *)((long)plVar12 + 0x14) & 0x20) == 0) {
                plVar41 = (long *)(*plVar12 + 8);
              }
              *(byte *)((long)plVar41 + 10) =
                   *(byte *)((long)plVar41 + 10) & 0xbf | (byte)(((uint)(byte)pcVar22[8] & 1) << 6);
              *(ushort *)((long)plVar41 + 10) =
                   *(ushort *)((long)plVar41 + 10) & 0xfe7f | (ushort)(pcVar22[0x10] != '\0') << 7;
              *(byte *)((long)plVar41 + 10) =
                   (byte)((*(uint *)(pcVar22 + 8) >> 1 & 1) << 4) |
                   *(byte *)((long)plVar41 + 10) & 0xef;
              *(ushort *)((long)plVar41 + 4) = (ushort)(byte)pcVar22[0xc];
              *(ushort *)plVar41 = (ushort)(byte)pcVar22[0xd];
              *(ushort *)((long)plVar41 + 6) = (ushort)(byte)pcVar22[0xe];
              *(ushort *)((long)plVar41 + 2) = (ushort)(byte)pcVar22[0xf];
              *(ushort *)(plVar41 + 1) =
                   (ushort)(byte)pcVar22[0x12] * 0x100 + (ushort)(byte)pcVar22[0x13];
              *(undefined2 *)((long)plVar41 + 0x42) = *(undefined2 *)(pcVar22 + 0x2e);
              *(undefined2 *)(plVar41 + 8) = *(undefined2 *)(pcVar22 + 0x2c);
              *(undefined2 *)((long)plVar41 + 0x1c) = *(undefined2 *)(pcVar22 + 0x14);
              *(undefined2 *)((long)plVar41 + 0x1e) = *(undefined2 *)(pcVar22 + 0x16);
              *(undefined2 *)(plVar41 + 4) = *(undefined2 *)(pcVar22 + 0x18);
              *(undefined2 *)((long)plVar41 + 0x22) = *(undefined2 *)(pcVar22 + 0x1a);
              *(undefined2 *)((long)plVar41 + 0x24) = *(undefined2 *)(pcVar22 + 0x1c);
              *(undefined2 *)((long)plVar41 + 0x26) = *(undefined2 *)(pcVar22 + 0x1e);
              *(undefined2 *)((long)plVar41 + 0x34) = *(undefined2 *)(pcVar22 + 0x14);
              *(undefined2 *)((long)plVar41 + 0x36) = *(undefined2 *)(pcVar22 + 0x16);
              *(undefined2 *)(plVar41 + 7) = *(undefined2 *)(pcVar22 + 0x18);
              *(undefined2 *)((long)plVar41 + 0x3a) = *(undefined2 *)(pcVar22 + 0x1a);
              *(undefined2 *)((long)plVar41 + 0x3c) = *(undefined2 *)(pcVar22 + 0x1c);
              *(undefined2 *)((long)plVar41 + 0x3e) = *(undefined2 *)(pcVar22 + 0x1e);
              *(undefined2 *)(plVar41 + 2) = *(undefined2 *)(pcVar22 + 0x20);
              *(undefined2 *)((long)plVar41 + 0x12) = *(undefined2 *)(pcVar22 + 0x22);
              *(undefined2 *)((long)plVar41 + 0x14) = *(undefined2 *)(pcVar22 + 0x24);
              *(undefined2 *)((long)plVar41 + 0x16) = *(undefined2 *)(pcVar22 + 0x26);
              *(undefined2 *)(plVar41 + 3) = *(undefined2 *)(pcVar22 + 0x28);
              *(undefined2 *)((long)plVar41 + 0x1a) = *(undefined2 *)(pcVar22 + 0x2a);
              *(undefined2 *)(plVar41 + 5) = *(undefined2 *)(pcVar22 + 0x20);
              *(undefined2 *)((long)plVar41 + 0x2a) = *(undefined2 *)(pcVar22 + 0x22);
              *(undefined2 *)((long)plVar41 + 0x2c) = *(undefined2 *)(pcVar22 + 0x24);
              *(undefined2 *)((long)plVar41 + 0x2e) = *(undefined2 *)(pcVar22 + 0x26);
              *(undefined2 *)(plVar41 + 6) = *(undefined2 *)(pcVar22 + 0x28);
              *(undefined2 *)((long)plVar41 + 0x32) = *(undefined2 *)(pcVar22 + 0x2a);
              _fs_init_fontinfo(lVar29,plVar41);
              local_ac = _fs_convert_props(pcVar22 + 0x30,pcVar22 + 0x38,
                                           pcVar22 + 0x38 + (uint)(*(int *)(pcVar22 + 0x30) * 0x14))
              ;
              _fs_done_read(lVar29,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
              if (local_ac != -1) {
                uVar39 = *(uint *)((long)plVar12 + 0x14);
                lVar38 = *plVar12;
                if ((uVar39 & 0x20) == 0) {
                  if ((*(byte *)(lVar38 + 0x12) & 2) != 0) {
                    *(uint *)((long)plVar12 + 0x24) =
                         *(uint *)((long)plVar12 + 0x24) & 0xfffffff3 | 8;
                  }
                  if ((glyphCachingMode == 0) ||
                     ((glyphCachingMode == 1 && (*(short *)(lVar38 + 0xe) == 0)))) {
                    uVar39 = uVar39 | 0xf;
                    *(uint *)((long)plVar12 + 0x14) = uVar39;
                  }
                  if ((uVar39 & 8) != 0) {
                    lVar38 = *(long *)(piVar30 + 6);
                    lVar13 = *(long *)(param_1 + 0x18);
                    local_a4 = (undefined4)*(undefined8 *)(lVar38 + 8);
                    local_a0 = *(undefined4 *)(lVar38 + 0x24);
                    local_a8 = 0x40114;
                    local_9c = 0;
                    *(short *)(lVar38 + 0x20) = *(short *)(lVar13 + 0x10) + 1;
                    *(int *)(lVar13 + 0x10) = *(int *)(lVar13 + 0x10) + 1;
                    _fs_write(lVar13,&local_a8,0x10);
                    _fs_flush(lVar29);
                  }
                  *(undefined4 *)(plVar12 + 2) = 2;
                  *(undefined2 *)(piVar30 + 4) = *(undefined2 *)((long)plVar12 + 0x1e);
                  iVar17 = GetTimeInMillis();
                  *(int *)(lVar29 + 0x9c) = iVar17 + 30000;
                  piVar30[8] = 0x51;
                  goto LAB_00128960;
                }
                if ((((((((*plVar41 == *(long *)(lVar38 + 8)) &&
                         (*(short *)(plVar41 + 1) == *(short *)(lVar38 + 0x10))) &&
                        (((*(byte *)((long)plVar41 + 10) ^ *(byte *)(lVar38 + 0x12)) & 0x7f) == 0))
                       && ((((*(ushort *)((long)plVar41 + 10) ^ *(ushort *)(lVar38 + 0x12)) & 0x180)
                            == 0 && (((*(byte *)((long)plVar41 + 0xb) ^ *(byte *)(lVar38 + 0x13)) &
                                     6) == 0)))) &&
                      (*(short *)((long)plVar41 + 0xc) == *(short *)(lVar38 + 0x14))) &&
                     (((plVar41[8] == *(long *)(lVar38 + 0x48) &&
                       (plVar41[2] == *(long *)(lVar38 + 0x18))) &&
                      ((*(int *)(plVar41 + 3) == *(int *)(lVar38 + 0x20) &&
                       (((*(int *)((long)plVar41 + 0x1c) == *(int *)(lVar38 + 0x24) &&
                         (plVar41[4] == *(long *)(lVar38 + 0x28))) &&
                        (plVar41[5] == *(long *)(lVar38 + 0x30))))))))) &&
                    ((*(int *)(plVar41 + 6) == *(int *)(lVar38 + 0x38) &&
                     (*(int *)((long)plVar41 + 0x34) == *(int *)(lVar38 + 0x3c))))) &&
                   (plVar41[7] == *(long *)(lVar38 + 0x40))) {
                  lVar29 = 0;
                  while( true ) {
                    if (*(int *)((long)plVar41 + 0x44) <= (int)lVar29) {
                      *(undefined4 *)(plVar12 + 2) = 4;
                      _fs_free_props(plVar41);
                      goto LAB_00129422;
                    }
                    if (*(char *)(plVar41[10] + lVar29) !=
                        *(char *)(*(long *)(lVar38 + 0x58) + lVar29)) break;
                    plVar34 = (long *)(plVar41[9] + lVar29 * 0x10);
                    plVar26 = (long *)(lVar29 * 0x10 + *(long *)(lVar38 + 0x50));
                    if ((*plVar34 != *plVar26) || (lVar29 = lVar29 + 1, plVar34[1] != plVar26[1]))
                    break;
                  }
                }
                FUN_00127270(plVar12);
                _fs_free_props(plVar41);
                goto LAB_00128c36;
              }
LAB_00129909:
              local_98._0_4_ = 0x50;
              FUN_00127270(plVar12);
              *(undefined4 *)(plVar12 + 2) = 4;
              lVar29 = *(long *)(piVar30 + 10);
              if (lVar29 == 0) {
                piVar30[8] = 0x50;
                goto LAB_00128bd0;
              }
              goto LAB_00128c58;
            }
            if (local_ac == 0) goto LAB_00128cd0;
            _fs_done_read(lVar29,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
          }
LAB_001296b3:
          FUN_00127270(plVar12);
LAB_00128c36:
          *(undefined4 *)(plVar12 + 2) = 4;
          lVar29 = *(long *)(piVar30 + 10);
          local_98._0_4_ = 0x53;
          if (lVar29 == 0) {
            piVar30[8] = 0x53;
            goto LAB_00128bd0;
          }
        }
        else {
          if (iVar7 < 2) {
            if (iVar7 == 0) {
              lVar29 = *(long *)(param_1 + 0x18);
              pcVar22 = (char *)FUN_00126ad0(lVar29);
              if (pcVar22 == (char *)0x0) {
                if ((uint)local_98 != 0) {
LAB_001296d9:
                  local_98._0_4_ = 0x53;
                  FUN_00127270(plVar12);
LAB_00129008:
                  if (*(int *)(plVar12 + 2) == 4) goto LAB_0012942a;
                  if (*(int *)(plVar12 + 2) != 5) {
LAB_0012901e:
                    *(undefined4 *)(plVar12 + 2) = 4;
                    lVar29 = *(long *)(piVar30 + 10);
                    goto joined_r0x0012902d;
                  }
                }
              }
              else {
                if (*pcVar22 == '\x01') {
                  if ((uint)local_98 != 0) {
                    _fs_done_read(lVar29,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
                    goto LAB_001296d9;
                  }
                }
                else {
                  if ((*(int *)(pcVar22 + 8) == 0) ||
                     ((*(byte *)((long)plVar12 + 0x14) & 0x20) != 0)) {
                    *(byte *)(*plVar12 + 0x13) =
                         *(byte *)(*plVar12 + 0x13) & 0xfd | (pcVar22[0xc] != '\0') * '\x02';
                    *(undefined4 *)(plVar12 + 2) = 1;
                    *(undefined2 *)(piVar30 + 4) = *(undefined2 *)((long)plVar12 + 0x1c);
                    iVar17 = GetTimeInMillis();
                    *(int *)(lVar29 + 0x9c) = iVar17 + 30000;
                    local_98 = CONCAT44(local_98._4_4_,0x51);
                  }
                  else {
                    FUN_00127270(plVar12);
                    lVar38 = find_old_font((ulong)*(uint *)(pcVar22 + 8));
                    *plVar12 = lVar38;
                    *(undefined4 *)(plVar12 + 3) = 0;
                    uVar39 = *(uint *)(pcVar22 + 8);
                    *(undefined4 *)(plVar12 + 2) = 4;
                    plVar12[1] = (ulong)uVar39;
                    piVar28 = *(int **)(lVar29 + 0xb0);
                    while (piVar28 != (int *)0x0) {
                      if (((piVar30 != piVar28) && (*piVar28 == 1)) &&
                         (plVar41 = *(long **)(piVar28 + 6),
                         plVar41[1] == (ulong)*(uint *)(pcVar22 + 8))) {
                        *(undefined8 *)(piVar30 + 10) = *(undefined8 *)(piVar28 + 10);
                        *(int **)(piVar28 + 10) = piVar30;
                        *(undefined4 *)(plVar12 + 2) = 5;
                        lVar38 = *plVar41;
                        *plVar12 = lVar38;
                        break;
                      }
                      piVar28 = *(int **)(piVar28 + 0xc);
                    }
                    local_98 = CONCAT44(local_98._4_4_,(-(uint)(lVar38 == 0) & 0xfffffc53) + 0x400);
                  }
                  _fs_done_read(lVar29,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
                  if ((uint)local_98 != 0x51) goto LAB_00129008;
                }
              }
              goto LAB_00128cd0;
            }
            goto LAB_00128c36;
          }
          if (iVar7 != 2) {
            if ((iVar7 == 3) && ((*(byte *)((long)plVar12 + 0x14) & 8) != 0)) {
              local_98._0_4_ = FUN_00127370(*(undefined8 *)(param_1 + 0x18),piVar30,plVar12);
              if ((uint)local_98 != 0x51) goto LAB_0012901e;
              goto LAB_00128cd0;
            }
            goto LAB_00128c36;
          }
          lVar29 = *plVar12;
          lVar38 = *(long *)(param_1 + 0x18);
          lVar13 = *(long *)(lVar29 + 0xa0);
          ppvVar14 = *(void ***)(lVar29 + 0x98);
          puVar31 = (ulong *)FUN_00126ad0();
          iVar7 = local_a8;
          if (puVar31 == (ulong *)0x0) goto joined_r0x001296ad;
          if (*(char *)puVar31 == '\x01') {
            if (local_a8 != 0) {
              _fs_done_read(lVar38,(ulong)(uint)(*(int *)((long)puVar31 + 4) << 2));
              goto LAB_001296b3;
            }
            goto LAB_00128cd0;
          }
          iVar7 = *(int *)(puVar31 + 1);
          if (((*(byte *)(*plVar12 + 0x12) & 2) == 0) || (*(int *)(lVar38 + 0x30) < 2)) {
            local_e8 = malloc((long)iVar7 * 0x18);
            if (local_e8 == (void *)0x0) goto LAB_001298ea;
            iVar17 = 0;
            ppvVar14[1] = local_e8;
            ppvVar14[2] = local_e8;
          }
          else {
            local_e8 = malloc((long)(iVar7 * 2) * 0x18);
            if (local_e8 == (void *)0x0) {
LAB_001298ea:
              _fs_done_read(lVar38,(ulong)(uint)(*(int *)((long)puVar31 + 4) << 2));
              goto LAB_00129909;
            }
            ppvVar14[1] = local_e8;
            ppvVar14[2] = (void *)((long)local_e8 + (long)iVar7 * 0x18);
          }
          *(undefined8 *)(lVar13 + 0x10) = 0;
          puVar40 = (ulong *)ppvVar14[2];
          if (iVar7 < 1) {
            _fs_done_read(lVar38);
          }
          else {
            puVar32 = (undefined8 *)((long)local_e8 + 0x10);
            lVar1 = (ulong)(iVar7 - 1) * 3 + 3;
            puVar21 = puVar40 + lVar1;
            do {
              local_98 = *(ulong *)((long)puVar31 + 0xc);
              local_90 = *(undefined4 *)((long)puVar31 + 0x14);
              _fs_convert_char_info(&local_98);
              if (*(short *)(lVar29 + 0x1e) < *(short *)((long)puVar40 + 6)) {
                ErrorF("fserve: warning: %s %s ascent (%d) > maxascent (%d)\n",
                       *(undefined8 *)(param_1 + 8),*(undefined8 *)(lVar13 + 0x20));
                *(short *)((long)puVar40 + 6) = *(short *)(lVar29 + 0x1e);
              }
              if (*(short *)(lVar29 + 0x20) < *(short *)(puVar40 + 1)) {
                ErrorF("fserve: warning: %s %s descent (%d) > maxdescent (%d)\n",
                       *(undefined8 *)(param_1 + 8),*(undefined8 *)(lVar13 + 0x20));
                *(short *)(puVar40 + 1) = *(short *)(lVar29 + 0x20);
              }
              if ((((*puVar40 & 0xffff0000ffffffff) == 0) && (*(short *)(puVar40 + 1) == 0)) &&
                 (*(short *)((long)puVar40 + 4) == 0)) {
                *puVar32 = 0;
              }
              else {
                if ((iVar17 == 0) &&
                   ((*(short *)puVar40 == *(short *)((long)puVar40 + 2) ||
                    ((int)*(short *)((long)puVar40 + 6) + (int)*(short *)(puVar40 + 1) == 0)))) {
                  *puVar32 = 0x33cd14;
                }
                else {
                  *(undefined1 **)puVar32 = &_fs_glyph_undefined;
                  *(long *)(lVar13 + 0x10) = *(long *)(lVar13 + 0x10) + 1;
                }
              }
              puVar40 = puVar40 + 3;
              puVar32 = puVar32 + 3;
              puVar31 = (ulong *)((long)puVar31 + 0xc);
            } while (puVar40 != puVar21);
            _fs_done_read(lVar38);
            if (iVar17 != 0) {
              puVar31 = (ulong *)ppvVar14[2];
              puVar40 = (ulong *)ppvVar14[1];
              puVar21 = puVar31 + lVar1;
              do {
                if ((((*puVar31 & 0xffff0000ffffffff) == 0) && (*(short *)(puVar31 + 1) == 0)) &&
                   (*(short *)((long)puVar31 + 4) == 0)) {
                  *puVar40 = *puVar31;
                  *(undefined4 *)(puVar40 + 1) = *(undefined4 *)(puVar31 + 1);
                  sVar15 = *(short *)((long)puVar40 + 6);
                }
                else {
                  sVar23 = 0;
                  uVar16 = 0;
                  if (*(short *)(lVar29 + 0x3c) < 1) {
                    uVar16 = *(undefined2 *)(lVar29 + 0x3c);
                  }
                  *(undefined2 *)puVar40 = uVar16;
                  sVar15 = *(short *)(lVar29 + 0x32);
                  if (sVar15 <= *(short *)(lVar29 + 0x34)) {
                    sVar15 = *(short *)(lVar29 + 0x34);
                  }
                  *(short *)((long)puVar40 + 2) = sVar15;
                  sVar15 = *(short *)(lVar29 + 0x48);
                  if (sVar15 <= *(short *)(lVar29 + 0x36)) {
                    sVar15 = *(short *)(lVar29 + 0x36);
                  }
                  *(short *)((long)puVar40 + 6) = sVar15;
                  sVar27 = *(short *)(lVar29 + 0x4a);
                  if (sVar27 <= *(short *)(lVar29 + 0x38)) {
                    sVar27 = *(short *)(lVar29 + 0x38);
                  }
                  *(short *)(puVar40 + 1) = sVar27;
                  sVar27 = *(short *)(lVar29 + 0x32);
                  if (sVar27 <= *(short *)(lVar29 + 0x34)) {
                    sVar27 = *(short *)(lVar29 + 0x34);
                  }
                  if (*(short *)(lVar29 + 0x3c) < 1) {
                    sVar23 = *(short *)(lVar29 + 0x3c);
                  }
                  *(short *)((long)puVar40 + 4) = sVar27 - sVar23;
                  *(undefined2 *)((long)puVar40 + 10) = *(undefined2 *)((long)puVar31 + 10);
                }
                if (*(short *)(lVar29 + 0x1e) < sVar15) {
                  ErrorF("fserve: warning: %s %s ascent (%d) > maxascent (%d)\n",
                         *(undefined8 *)(param_1 + 8),*(undefined8 *)(lVar13 + 0x20));
                  *(undefined2 *)((long)puVar40 + 6) = *(undefined2 *)(lVar29 + 0x1e);
                }
                if (*(short *)(lVar29 + 0x20) < *(short *)(puVar40 + 1)) {
                  ErrorF("fserve: warning: %s %s descent (%d) > maxdescent (%d)\n",
                         *(undefined8 *)(param_1 + 8),*(undefined8 *)(lVar13 + 0x20));
                  *(undefined2 *)(puVar40 + 1) = *(undefined2 *)(lVar29 + 0x20);
                }
                puVar40 = puVar40 + 3;
                puVar31 = puVar31 + 3;
              } while (puVar31 != puVar21);
            }
          }
          lVar29 = *plVar12;
          uVar3 = *(ushort *)(lVar29 + 8);
          uVar4 = *(ushort *)(lVar29 + 10);
          uVar5 = *(ushort *)(lVar29 + 0x10);
          *ppvVar14 = (void *)0x0;
          uVar6 = *(ushort *)(*plVar12 + 0xe);
          uVar39 = ((uint)uVar4 + 1) - (uint)uVar3;
          if (uVar6 == 0) {
            uVar18 = (uint)uVar5 - (uint)uVar3;
            if (uVar18 < uVar39) {
              *ppvVar14 = (void *)((long)local_e8 + (ulong)uVar18 * 0x18);
            }
          }
          else {
            uVar33 = ((uint)uVar5 & 0xff) - (uint)uVar3;
            uVar35 = (uint)*(ushort *)(*plVar12 + 0xc);
            uVar18 = (uVar5 >> 8) - uVar35;
            if ((uVar18 < (uVar6 - uVar35) + 1) && (uVar33 < uVar39)) {
              *ppvVar14 = (void *)((long)local_e8 + (ulong)(uVar18 * uVar39 + uVar33) * 0x18);
            }
          }
          *(undefined4 *)(plVar12 + 2) = 3;
          if ((*(byte *)((long)plVar12 + 0x14) & 8) != 0) {
            *(undefined2 *)(piVar30 + 4) = *(undefined2 *)(plVar12 + 4);
            iVar17 = GetTimeInMillis();
            *(int *)(lVar38 + 0x9c) = iVar17 + 30000;
            piVar30[8] = 0x51;
            goto LAB_00128960;
          }
LAB_00129422:
          *(undefined4 *)(plVar12 + 2) = 4;
LAB_0012942a:
          lVar29 = *(long *)(piVar30 + 10);
          local_98._0_4_ = 0x55;
          if (lVar29 == 0) {
            piVar30[8] = 0x55;
            goto LAB_00128bd0;
          }
        }
LAB_00128c58:
        do {
          *(undefined4 *)(*(long *)(lVar29 + 0x18) + 0x10) = 4;
          lVar29 = *(long *)(lVar29 + 0x28);
joined_r0x0012902d:
        } while (lVar29 != 0);
LAB_00128ae9:
        piVar30[8] = (uint)local_98;
        goto LAB_00128bc6;
      }
      if (iVar17 == 3) {
        uVar11 = *(undefined8 *)(param_1 + 0x18);
        puVar32 = *(undefined8 **)(piVar30 + 6);
        pcVar22 = (char *)FUN_00126ad0(uVar11,&local_98);
        if (pcVar22 == (char *)0x0) {
          if ((uint)local_98 != 0) goto LAB_00128ca9;
LAB_00128cd0:
          piVar30[8] = 0x51;
          goto LAB_00128960;
        }
        if (*pcVar22 == '\x01') {
          if ((uint)local_98 == 0) goto LAB_00128cd0;
          local_98._0_4_ = 0x50;
          _fs_done_read(uVar11,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
          piVar30[8] = 0x50;
        }
        else {
          pbVar20 = (byte *)(pcVar22 + 0x10);
          if (*(int *)(pcVar22 + 0xc) != 0) {
            uVar39 = 0;
            do {
              bVar42 = *pbVar20;
              local_98._0_4_ = AddFontNamesName(*puVar32,pbVar20 + 1);
              if ((uint)local_98 != 0x55) {
                _fs_done_read(uVar11,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
                piVar30[8] = (uint)local_98;
                goto LAB_00128bc6;
              }
              uVar39 = uVar39 + 1;
              pbVar20 = pbVar20 + 1 + bVar42;
            } while (uVar39 <= *(uint *)(pcVar22 + 0xc) && *(uint *)(pcVar22 + 0xc) != uVar39);
          }
          local_98._0_4_ = 0x55;
          _fs_done_read(uVar11,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
          piVar30[8] = 0x55;
        }
      }
      else {
        if (iVar17 != 4) goto LAB_00128c78;
        puVar10 = *(undefined4 **)(piVar30 + 6);
        lVar29 = *(long *)(param_1 + 0x18);
        _fs_free_props(puVar10 + 2);
        pcVar22 = (char *)FUN_00126ad0();
        if ((pcVar22 == (char *)0x0) || (*pcVar22 == '\x01')) {
          if ((uint)local_98 == 0) goto LAB_00128cd0;
          *puVar10 = 2;
          _fs_done_read(lVar29,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
LAB_00128ca9:
          piVar30[8] = 0x50;
          local_98._0_4_ = 0x50;
          goto LAB_00128bd0;
        }
        bVar2 = pcVar22[1];
        if (bVar2 == 0) {
          *puVar10 = 2;
          local_98._0_4_ = 0x53;
          _fs_done_read(lVar29,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
          piVar30[8] = 0x53;
          goto LAB_00128bd0;
        }
        piVar28 = (int *)(pcVar22 + 0x34);
        if (*(int *)(lVar29 + 0x30) < 2) {
          uVar39 = (uint)bVar2;
          uVar24 = (ulong)uVar39;
          if (bVar2 < 8) {
            if ((bVar2 & 4) == 0) {
              if ((bVar2 != 0) && (*(char *)(puVar10 + 0x18) = *(char *)piVar28, (bVar2 & 2) != 0))
              {
                *(undefined2 *)((long)puVar10 + uVar24 + 0x5e) =
                     *(undefined2 *)(pcVar22 + uVar24 + 0x32);
              }
            }
            else {
              puVar10[0x18] = *piVar28;
              *(undefined4 *)((long)puVar10 + uVar24 + 0x5c) =
                   *(undefined4 *)(pcVar22 + uVar24 + 0x30);
            }
          }
          else {
            *(undefined8 *)(puVar10 + 0x18) = *(undefined8 *)(pcVar22 + 0x34);
            *(undefined8 *)((long)puVar10 + (ulong)uVar39 + 0x58) =
                 *(undefined8 *)(pcVar22 + (ulong)uVar39 + 0x2c);
            puVar25 = (undefined4 *)
                      ((long)(puVar10 + 0x18) -
                      (long)(undefined8 *)((ulong)(puVar10 + 0x1a) & 0xfffffffffffffff8));
            uVar24 = (ulong)((int)puVar25 + uVar39 >> 3);
            puVar32 = (undefined8 *)((long)piVar28 - (long)puVar25);
            puVar36 = (undefined8 *)((ulong)(puVar10 + 0x1a) & 0xfffffffffffffff8);
            while (uVar24 != 0) {
              uVar24 = uVar24 - 1;
              *puVar36 = *puVar32;
              puVar32 = puVar32 + (ulong)bVar42 * 0x1ffffffffffffffe + 1;
              puVar36 = puVar36 + (ulong)bVar42 * 0x1ffffffffffffffe + 1;
            }
          }
          lVar38 = _fs_pad_length((ulong)(byte)pcVar22[1]);
          piVar28 = (int *)((long)piVar28 + lVar38);
          piVar37 = piVar28 + 2;
          lVar38 = (ulong)(uint)(*piVar28 * 0x14) + (long)piVar37;
          if (1 < *(int *)(lVar29 + 0x30)) {
            bVar2 = pcVar22[1];
            puVar32 = (undefined8 *)((ulong)(uint)piVar28[1] + lVar38);
            goto LAB_00128a53;
          }
        }
        else {
          piVar37 = (int *)(pcVar22 + 0x3c);
          lVar38 = (ulong)(uint)(*(int *)(pcVar22 + 0x34) * 0x14) + (long)piVar37;
          puVar32 = (undefined8 *)((ulong)*(uint *)(pcVar22 + 0x38) + lVar38);
LAB_00128a53:
          uVar39 = (uint)bVar2;
          uVar24 = (ulong)uVar39;
          if (bVar2 < 8) {
            if ((bVar2 & 4) == 0) {
              if ((bVar2 != 0) &&
                 (*(undefined *)(puVar10 + 0x18) = *(undefined *)puVar32, (bVar2 & 2) != 0)) {
                *(undefined2 *)((long)puVar10 + uVar24 + 0x5e) =
                     *(undefined2 *)((long)puVar32 + (uVar24 - 2));
              }
            }
            else {
              puVar10[0x18] = *(undefined4 *)puVar32;
              *(undefined4 *)((long)puVar10 + uVar24 + 0x5c) =
                   *(undefined4 *)((long)puVar32 + (uVar24 - 4));
            }
          }
          else {
            *(undefined8 *)(puVar10 + 0x18) = *puVar32;
            *(undefined8 *)((long)puVar10 + (ulong)uVar39 + 0x58) =
                 *(undefined8 *)((long)puVar32 + ((ulong)uVar39 - 8));
            puVar25 = (undefined4 *)
                      ((long)(puVar10 + 0x18) -
                      (long)(undefined8 *)((ulong)(puVar10 + 0x1a) & 0xfffffffffffffff8));
            uVar24 = (ulong)((int)puVar25 + uVar39 >> 3);
            puVar32 = (undefined8 *)((long)puVar32 - (long)puVar25);
            puVar36 = (undefined8 *)((ulong)(puVar10 + 0x1a) & 0xfffffffffffffff8);
            while (uVar24 != 0) {
              uVar24 = uVar24 - 1;
              *puVar36 = *puVar32;
              puVar32 = puVar32 + (ulong)bVar42 * 0x1ffffffffffffffe + 1;
              puVar36 = puVar36 + (ulong)bVar42 * 0x1ffffffffffffffe + 1;
            }
          }
          _fs_pad_length((ulong)(byte)pcVar22[1]);
        }
        local_98._0_4_ = _fs_convert_lfwi_reply(lVar29,puVar10 + 2,pcVar22,piVar28,piVar37,lVar38);
        if ((uint)local_98 != 0x55) {
          *puVar10 = 2;
          _fs_done_read(lVar29,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
          goto LAB_00128ae9;
        }
        puVar10[1] = (uint)(byte)pcVar22[1];
        uVar8 = *(undefined4 *)(pcVar22 + 8);
        *puVar10 = 1;
        puVar10[0x58] = uVar8;
        _fs_unmark_block(lVar29);
        lVar38 = __fdelt_chk((long)*(int *)(lVar29 + 8));
        bVar42 = (byte)((int)*(undefined4 *)(lVar29 + 8) >> 0x37);
        bVar42 = ((char)*(undefined4 *)(lVar29 + 8) + (bVar42 >> 2) & 0x3f) - (bVar42 >> 2) & 0x3f;
        *(ulong *)(_fs_fd_mask + lVar38 * 8) =
             *(ulong *)(_fs_fd_mask + lVar38 * 8) &
             (-2 << bVar42 | 0xfffffffffffffffeU >> 0x40 - bVar42);
        _fs_done_read(lVar29,(ulong)(uint)(*(int *)(pcVar22 + 4) << 2));
        piVar30[8] = 0x55;
      }
    }
LAB_00128bd0:
    do {
      piVar30[8] = (uint)local_98;
      if (*(long *)(piVar30 + 2) != param_2) {
        ClientSignal();
      }
      piVar30 = *(int **)(piVar30 + 10);
    } while (piVar30 != (int *)0x0);
    _fs_unmark_block(lVar9,8);
  }
LAB_00128960:
  iVar17 = FUN_00127150(lVar9);
  if (iVar17 == 0) {
    _fs_unmark_block();
  }
  else {
    _fs_mark_block(lVar9,0x20);
  }
LAB_0012897d:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_00129cc0(long param_1)

{
  long lVar1;
  int iVar2;
  
  iVar2 = FUN_00127db0();
  if (iVar2 == -1) {
    iVar2 = GetTimeInMillis();
    *(int *)(param_1 + 0xa8) = iVar2 + 1000;
    return;
  }
  if (iVar2 != 1) {
    return;
  }
  _fs_unmark_block(param_1,0x50);
  _fs_unmark_block(param_1,0x10);
  do {
    lVar1 = *(long *)(param_1 + 0xb0);
    do {
      if (lVar1 == 0) {
        return;
      }
    } while (*(int *)(lVar1 + 0x20) != 0x51);
    ClientSignal(*(undefined8 *)(lVar1 + 8));
    FUN_001283d0(param_1,lVar1);
  } while( true );
}



undefined8 FUN_00129d50(long param_1)

{
  undefined8 *puVar1;
  void *pvVar2;
  void *__ptr;
  undefined8 *puVar3;
  undefined8 *puVar4;
  bool bVar5;
  
  puVar1 = *(undefined8 **)(param_1 + 0x18);
  if (DAT_0033cd20 != (undefined8 *)0x0) {
    puVar3 = DAT_0033cd20;
    if (DAT_0033cd20 == puVar1) {
      puVar4 = &DAT_0033cd20;
    }
    else {
      do {
        puVar4 = puVar3;
        puVar3 = (undefined8 *)*puVar4;
        if (puVar3 == (undefined8 *)0x0) goto LAB_00129d8c;
      } while (puVar1 != puVar3);
    }
    *puVar4 = *puVar1;
  }
LAB_00129d8c:
  _fs_unmark_block(puVar1,(ulong)*(uint *)(puVar1 + 0x13));
  FUN_00127d30(puVar1);
  __ptr = (void *)puVar1[8];
  while (__ptr != (void *)0x0) {
    pvVar2 = *(void **)((long)__ptr + 8);
    free(__ptr);
    __ptr = pvVar2;
  }
  bVar5 = DAT_0033cd20 == (undefined8 *)0x0;
  puVar1[8] = 0;
  remove_fs_handlers(param_1,&LAB_00126bd0,(ulong)bVar5);
  FUN_001282b0(puVar1);
  *(undefined8 *)(param_1 + 0x18) = 0;
  return 0x55;
}



void _fs_connection_died(long param_1)

{
  void *pvVar1;
  void *__ptr;
  undefined4 uVar2;
  
  if ((*(byte *)(param_1 + 0x98) & 4) != 0) {
    return;
  }
  FUN_00127d30();
  __ptr = *(void **)(param_1 + 0x40);
  while (__ptr != (void *)0x0) {
    pvVar1 = *(void **)((long)__ptr + 8);
    free(__ptr);
    __ptr = pvVar1;
  }
  *(undefined8 *)(param_1 + 0x40) = 0;
  uVar2 = GetTimeInMillis();
  *(undefined4 *)(param_1 + 0xa8) = uVar2;
  _fs_mark_block(param_1,4);
  _fs_unmark_block(param_1,0x43);
  return;
}



ulong FUN_00129fe0(undefined8 param_1)

{
  int iVar1;
  long lVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  uint local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  do {
    lVar2 = FUN_00126ad0(param_1,&local_24);
    if (lVar2 != 0) {
      uVar3 = 1;
      goto LAB_0012a02f;
    }
    uVar3 = (ulong)local_24;
    if (local_24 != 0) goto LAB_0012a02f;
    iVar1 = _fs_wait_for_readable(param_1,30000);
  } while (iVar1 == 1);
  _fs_connection_died(param_1);
  uVar3 = 0xffffffff;
LAB_0012a02f:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong FUN_0012a070(undefined8 param_1,long param_2,uint param_3,char *param_4,uint param_5,
                  uint param_6,uint param_7,long *param_8)

{
  undefined4 uVar1;
  long lVar2;
  int iVar3;
  ulong uVar4;
  long lVar5;
  size_t sVar6;
  long lVar7;
  long *plVar8;
  long lVar9;
  long *plVar10;
  long in_FS_OFFSET;
  char *local_498;
  long local_490;
  undefined2 local_46c;
  undefined2 local_46a;
  undefined4 local_468;
  undefined2 local_464;
  undefined2 local_462;
  undefined4 local_460;
  undefined4 local_45c;
  undefined2 local_458;
  undefined2 local_456;
  undefined4 local_454;
  undefined4 local_450;
  undefined4 local_44c;
  undefined local_448;
  undefined local_447 [1031];
  long local_40;
  
  lVar2 = *(long *)(param_2 + 0x18);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar4 = 0x53;
  if (((*(byte *)(lVar2 + 0x98) & 0x10) != 0) || (0x3fe < param_5 - 1)) goto LAB_0012a1f0;
  if ((param_3 & 0x20) == 0) {
    lVar7 = fs_create_font(param_2,param_4,(ulong)param_5,(ulong)param_6,(ulong)param_7);
    if (lVar7 != 0) {
      plVar10 = *(long **)(lVar7 + 0xa0);
      local_490 = FUN_001272e0(*(undefined8 *)(*(long *)(lVar7 + 0x88) + 0x18),param_1,1);
      local_498 = param_4;
      if (local_490 != 0) goto LAB_0012a250;
      (**(code **)(lVar7 + 0x78))(lVar7);
    }
  }
  else {
    lVar7 = *param_8;
    plVar10 = *(long **)(lVar7 + 0xa0);
    lVar5 = MakeAtom(0x130a43,4,0);
    if ((lVar5 != 0) && (0 < *(int *)(lVar7 + 0x4c))) {
      plVar8 = *(long **)(lVar7 + 0x50);
      lVar9 = 0;
      do {
        if ((lVar5 == *plVar8) && (*(char *)(*(long *)(lVar7 + 0x58) + lVar9) != '\0')) {
          if ((plVar8[1] != 0) && (local_498 = (char *)NameForAtom(), local_498 != (char *)0x0)) {
            sVar6 = strlen(local_498);
            param_5 = (uint)sVar6;
            goto LAB_0012a22e;
          }
          break;
        }
        lVar9 = lVar9 + 1;
        plVar8 = plVar8 + 2;
      } while ((ulong)(*(int *)(lVar7 + 0x4c) - 1) + 1 != lVar9);
    }
    local_498 = (char *)plVar10[4];
    param_5 = *(uint *)(plVar10 + 3);
LAB_0012a22e:
    local_490 = FUN_001272e0(*(undefined8 *)(*(long *)(lVar7 + 0x88) + 0x18),param_1,1);
    if (local_490 != 0) {
LAB_0012a250:
      if ((*(uint *)(lVar2 + 0x98) & 0x44) == 0) {
        *(undefined4 *)(plVar10 + 1) = *(undefined4 *)(lVar2 + 0x24);
        plVar8 = *(long **)(local_490 + 0x18);
        lVar5 = *plVar10;
        *(uint *)((long)plVar8 + 0x14) = param_3;
        plVar8[1] = lVar5;
        *plVar8 = lVar7;
        *(undefined4 *)(plVar8 + 2) = 0;
        uVar1 = *(undefined4 *)(plVar10 + 5);
        plVar8[5] = 0;
        *(undefined4 *)((long)plVar8 + 0x24) = uVar1;
        *(uint *)(plVar8 + 3) = (uint)((param_3 & 0x20) == 0);
        FUN_00127710(lVar2,param_1);
        FUN_00126db0(lVar2);
        local_448 = (undefined)param_5;
        __memcpy_chk(local_447,local_498,(long)(int)param_5,0x3ff);
        local_458 = 0xf;
        local_454 = (undefined4)*plVar10;
        local_44c = *(undefined4 *)(plVar10 + 5);
        local_450 = *(undefined4 *)((long)plVar10 + 0x2c);
        *(int *)(lVar2 + 0x10) = *(int *)(lVar2 + 0x10) + 1;
        local_456 = (undefined2)((int)(param_5 + 0x14) >> 2);
        _fs_write(lVar2,&local_458,0x10);
        _fs_write_pad(lVar2,&local_448,(long)(int)(param_5 + 1));
        *(undefined2 *)(local_490 + 0x10) = (short)*(undefined4 *)(lVar2 + 0x10);
        local_46c = 0x10;
        local_46a = 2;
        local_468 = (undefined4)*plVar10;
        *(short *)((long)plVar8 + 0x1c) = *(short *)(lVar2 + 0x10) + 1;
        *(int *)(lVar2 + 0x10) = *(int *)(lVar2 + 0x10) + 1;
        _fs_write(lVar2,&local_46c,8);
        if ((*(byte *)((long)plVar8 + 0x14) & 0x20) == 0) {
          local_464 = 0x112;
          local_462 = 3;
          local_45c = 0;
          local_460 = (undefined4)*plVar10;
          *(short *)((long)plVar8 + 0x1e) = *(short *)(lVar2 + 0x10) + 1;
          *(int *)(lVar2 + 0x10) = *(int *)(lVar2 + 0x10) + 1;
          _fs_write(lVar2,&local_464,0xc);
        }
        FUN_00127930(lVar2);
        uVar4 = (ulong)*(uint *)(local_490 + 0x20);
        if ((*(byte *)((long)plVar8 + 0x14) & 0x10) != 0) {
          while ((int)uVar4 == 0x51) {
            if (((*(byte *)(lVar2 + 0x98) & 0x20) == 0) && (iVar3 = FUN_00129fe0(lVar2), iVar3 != 1)
               ) {
              *(undefined4 *)(local_490 + 0x20) = 0x53;
              FUN_00127270(plVar8);
              *(undefined4 *)(plVar8 + 3) = 0;
              FUN_001282e0(lVar2,local_490);
              uVar4 = 0x53;
              goto LAB_0012a1f0;
            }
            FUN_001288d0(*(undefined8 *)(lVar7 + 0x88),param_1);
            uVar4 = (ulong)*(uint *)(local_490 + 0x20);
          }
          if ((int)uVar4 == 0x55) {
            *param_8 = *plVar8;
          }
          else {
            FUN_00127270(plVar8);
          }
          *(undefined4 *)(plVar8 + 3) = 0;
          FUN_001282e0(lVar2,local_490);
          goto LAB_0012a1f0;
        }
        if (*(uint *)(local_490 + 0x20) != 0x51) goto LAB_0012a1f0;
      }
      else {
        if ((*(uint *)(lVar2 + 0x98) & 8) == 0) {
          FUN_00127910(lVar2);
        }
      }
      uVar4 = 0x54;
      goto LAB_0012a1f0;
    }
  }
  uVar4 = 0x50;
LAB_0012a1f0:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar4;
}



ulong FUN_0012a4f0(long param_1,long param_2,uint param_3,uint param_4,ulong param_5,
                  undefined8 param_6)

{
  uint uVar1;
  long lVar2;
  int *piVar3;
  long *plVar4;
  ulong uVar5;
  long *plVar6;
  long **pplVar7;
  long in_FS_OFFSET;
  long local_50 [2];
  uint local_3c;
  void *local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_3c = 0;
  local_38 = (void *)0x0;
  lVar2 = *(long *)(*(long *)(param_2 + 0x88) + 0x18);
  piVar3 = *(int **)(lVar2 + 0xb0);
  while (local_50[0] = param_2, piVar3 != (int *)0x0) {
    if (*piVar3 == 2) {
      if (param_2 == **(long **)(piVar3 + 6)) {
        pplVar7 = (long **)(*(long **)(piVar3 + 6) + 3);
        if (*(long *)(piVar3 + 2) == param_1) {
          uVar1 = piVar3[8];
          if (uVar1 == 0x51) goto LAB_0012a5e5;
          FUN_00126b90(pplVar7);
          FUN_001282e0(lVar2,piVar3);
          uVar5 = (ulong)uVar1;
          goto LAB_0012a5f0;
        }
LAB_0012a584:
        uVar5 = fs_build_range(param_2,(ulong)param_3);
        if ((int)uVar5 != 0x55) goto LAB_0012a6b2;
        if (local_3c != 0) {
          _fs_clean_aborted_loadglyphs(local_50[0],(ulong)local_3c,local_38);
          free(local_38);
        }
        plVar4 = *pplVar7;
        if (*pplVar7 == (long *)0x0) goto LAB_0012a5bf;
        goto LAB_0012a6dc;
      }
    }
    else {
      if ((*piVar3 == 1) && (plVar4 = *(long **)(piVar3 + 6), param_2 == *plVar4)) {
        uVar1 = piVar3[8];
        if (*(long *)(piVar3 + 2) == param_1) {
          if (uVar1 == 0x51) goto LAB_0012a5e5;
          FUN_00126b90(plVar4 + 5);
          FUN_001282e0(lVar2,piVar3);
          uVar5 = (ulong)uVar1;
          if (uVar1 != 0x55) goto LAB_0012a5f0;
          break;
        }
        if (uVar1 == 0x51) {
          pplVar7 = (long **)(plVar4 + 5);
          goto LAB_0012a584;
        }
      }
    }
    piVar3 = *(int **)(piVar3 + 0xc);
  }
  uVar5 = fs_build_range(local_50[0],(ulong)param_3,(ulong)param_4,param_5 & 0xffffffff,param_6,
                         &local_3c,&local_38);
  if ((int)uVar5 == 0x55) {
    if (*(int *)(*(long *)(local_50[0] + 0xa0) + 8) == *(int *)(lVar2 + 0x24)) {
      uVar5 = FUN_00127950(param_1,local_50[0],(ulong)local_3c,local_38);
    }
    else {
      _fs_clean_aborted_loadglyphs();
      free(local_38);
      uVar5 = FUN_0012a070(param_1,*(undefined8 *)(local_50[0] + 0x88),0x20,0,0,0,0,local_50);
    }
  }
  else {
LAB_0012a6b2:
    if ((int)uVar5 == 0x400) {
      uVar5 = 0x55;
    }
  }
  goto LAB_0012a5f0;
  while (plVar4 = (long *)plVar6[1], (long *)plVar6[1] != (long *)0x0) {
LAB_0012a6dc:
    plVar6 = plVar4;
    if (param_1 == *plVar6) {
      uVar5 = 0x54;
      goto LAB_0012a5f0;
    }
  }
  pplVar7 = (long **)(plVar6 + 1);
LAB_0012a5bf:
  plVar4 = (long *)malloc(0x10);
  uVar5 = 0xb;
  if (plVar4 != (long *)0x0) {
    *plVar4 = param_1;
    plVar4[1] = 0;
    *pplVar7 = plVar4;
LAB_0012a5e5:
    uVar5 = 0x54;
  }
LAB_0012a5f0:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 fs_load_all_glyphs(long param_1)

{
  long lVar1;
  int iVar2;
  undefined8 uVar3;
  
  lVar1 = *(long *)(*(long *)(param_1 + 0x88) + 0x18);
  do {
    uVar3 = FUN_0012a4f0(serverClient,param_1,1,0,0,0);
    if ((int)uVar3 != 0x54) {
      return uVar3;
    }
    if ((*(byte *)(lVar1 + 0x98) & 0x20) == 0) {
      iVar2 = FUN_00129fe0(lVar1);
      if (iVar2 != 1) {
        FUN_001284c0(serverClient,*(undefined8 *)(param_1 + 0x88));
        return 0x57;
      }
    }
    FUN_001288d0(*(undefined8 *)(param_1 + 0x88),serverClient);
  } while( true );
}



void fs_register_fpe_functions(void)

{
  RegisterFPEFunctions
            (&LAB_00126e50,&LAB_00129e20,FUN_00129d50,&LAB_00127130,&LAB_0012a7c0,&LAB_00127230,
             &LAB_00128730,&LAB_00127b60,&LAB_001285e0,&LAB_0012a860,FUN_001284c0,FUN_0012a4f0,0,0,0
            );
  return;
}



undefined8 FUN_0012aae0(void **param_1,long param_2)

{
  void *pvVar1;
  void *__n;
  ulong uVar2;
  undefined8 uVar3;
  
  pvVar1 = param_1[3];
  if (pvVar1 != (void *)0x0) {
    __n = (void *)((long)param_1[2] - (long)pvVar1);
    if (pvVar1 != param_1[2]) {
      memmove(*param_1,(void *)((long)pvVar1 + (long)*param_1),(size_t)__n);
      __n = (void *)((long)param_1[2] - (long)param_1[3]);
    }
    param_1[2] = __n;
    param_1[3] = (void *)0x0;
  }
  uVar3 = 1;
  if ((long)param_1[1] < param_2) {
    uVar2 = param_2 + 0x400U;
    if ((long)(param_2 + 0x400U) < 0) {
      uVar2 = param_2 + 0x7ff;
    }
    pvVar1 = realloc(*param_1,(size_t)(void *)(uVar2 & 0xfffffffffffffc00));
    if (pvVar1 != (void *)0x0) {
      *param_1 = pvVar1;
      param_1[1] = (void *)(uVar2 & 0xfffffffffffffc00);
      return 1;
    }
    uVar3 = 0xffffffff;
  }
  return uVar3;
}



ulong _fs_poll_connect(undefined8 param_1,int param_2)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  ulong uVar5;
  long lVar6;
  fd_set *pfVar7;
  long in_FS_OFFSET;
  timeval local_d8;
  __fd_mask local_c8 [17];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar2 = _FontTransGetConnectionNumber();
  bVar1 = (byte)(iVar2 >> 0x37);
  while( true ) {
    local_d8.tv_usec = 0;
    lVar6 = 0x10;
    pfVar7 = (fd_set *)local_c8;
    while (lVar6 != 0) {
      lVar6 = lVar6 + -1;
      pfVar7->fds_bits[0] = 0;
      pfVar7 = (fd_set *)(pfVar7->fds_bits + 1);
    }
    local_d8.tv_sec = (long)param_2;
    lVar6 = __fdelt_chk();
    *(ulong *)(local_c8 + lVar6 * 8) =
         *(ulong *)(local_c8 + lVar6 * 8) |
         1 << (((char)iVar2 + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f);
    iVar3 = select(iVar2 + 1,(fd_set *)0x0,(fd_set *)local_c8,(fd_set *)0x0,&local_d8);
    if (-1 < iVar3) break;
    piVar4 = __errno_location();
    if (*piVar4 != 4) {
      uVar5 = 0xffffffff;
LAB_0012ac26:
      if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
        return uVar5;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
  }
  uVar5 = (ulong)(iVar3 != 0);
  goto LAB_0012ac26;
}



long _fs_connect(undefined8 param_1,undefined4 *param_2)

{
  int iVar1;
  long lVar2;
  undefined4 uVar3;
  int iVar4;
  
  lVar2 = _FontTransOpenCOTSClient();
  if (lVar2 == 0) {
    *param_2 = 0xffffffff;
  }
  else {
    iVar4 = 6;
    _FontTransSetOption(lVar2,1,1);
    do {
      iVar1 = _FontTransConnect(lVar2,param_1);
      if (iVar1 != -2) {
        if (-1 < iVar1) {
          uVar3 = 1;
          goto LAB_0012acc9;
        }
        uVar3 = 0;
        if (iVar1 == -3) goto LAB_0012acc9;
        break;
      }
      iVar4 = iVar4 + -1;
    } while (iVar4 != 0);
    _FontTransClose(lVar2);
    uVar3 = 0xffffffff;
    lVar2 = 0;
LAB_0012acc9:
    *param_2 = uVar3;
  }
  return lVar2;
}



void _fs_done_read(long param_1,long param_2)

{
  long lVar1;
  void *pvVar2;
  
  if (param_2 <= *(long *)(param_1 + 0x80) - *(long *)(param_1 + 0x88)) {
    lVar1 = *(long *)(param_1 + 0x88) + param_2;
    *(long *)(param_1 + 0x90) = *(long *)(param_1 + 0x90) - param_2;
    *(long *)(param_1 + 0x88) = lVar1;
    if (*(long *)(param_1 + 0x80) == lVar1) {
      *(undefined8 *)(param_1 + 0x88) = 0;
      *(undefined8 *)(param_1 + 0x80) = 0;
      if (0x8000 < *(long *)(param_1 + 0x78)) {
        pvVar2 = realloc(*(void **)(param_1 + 0x70),0x8000);
        *(undefined8 *)(param_1 + 0x78) = 0x8000;
        *(void **)(param_1 + 0x70) = pvVar2;
        return;
      }
    }
  }
  return;
}



long _fs_pad_length(long param_1)

{
  return *(int *)(&DAT_00134040 + (ulong)((uint)param_1 & 3) * 4) + param_1;
}



undefined8 _fs_flush(long param_1)

{
  long lVar1;
  int iVar2;
  int *piVar3;
  void *pvVar4;
  long lVar5;
  long lVar6;
  
  if (*(int *)(param_1 + 8) < 0) {
    return 0xffffffff;
  }
  lVar6 = *(long *)(param_1 + 0x68);
  while( true ) {
    lVar1 = *(long *)(param_1 + 0x60);
    lVar5 = lVar1 - lVar6;
    while( true ) {
      if (lVar5 < 1) {
        if (lVar6 != lVar1) {
          return 1;
        }
        goto LAB_0012ae57;
      }
      iVar2 = _FontTransWrite(*(undefined8 *)(param_1 + 0xb8),lVar6 + *(long *)(param_1 + 0x50));
      lVar6 = (long)iVar2;
      if (lVar6 < 1) break;
      lVar6 = lVar6 + *(long *)(param_1 + 0x68);
      lVar1 = *(long *)(param_1 + 0x60);
      lVar5 = lVar1 - lVar6;
      *(long *)(param_1 + 0x68) = lVar6;
    }
    if (lVar6 == 0) break;
    piVar3 = __errno_location();
    if (*piVar3 == 0xb) break;
    if (*piVar3 != 4) {
      _fs_connection_died(param_1);
      return 0xffffffff;
    }
    lVar6 = *(long *)(param_1 + 0x68);
  }
  iVar2 = GetTimeInMillis();
  *(int *)(param_1 + 0xa0) = iVar2 + 1000;
  _fs_mark_block(param_1,2);
  if (*(long *)(param_1 + 0x68) != *(long *)(param_1 + 0x60)) {
    return 1;
  }
LAB_0012ae57:
  _fs_unmark_block(param_1,3);
  if (0x400 < *(long *)(param_1 + 0x58)) {
    pvVar4 = realloc(*(void **)(param_1 + 0x50),0x400);
    *(void **)(param_1 + 0x50) = pvVar4;
  }
  *(undefined8 *)(param_1 + 0x60) = 0;
  *(undefined8 *)(param_1 + 0x68) = 0;
  return 1;
}



void _fs_io_reinit(long param_1)

{
  void *pvVar1;
  
  *(undefined8 *)(param_1 + 0x68) = 0;
  *(undefined8 *)(param_1 + 0x60) = 0;
  if (0x400 < *(long *)(param_1 + 0x58)) {
    pvVar1 = realloc(*(void **)(param_1 + 0x50),0x400);
    *(undefined8 *)(param_1 + 0x58) = 0x400;
    *(void **)(param_1 + 0x50) = pvVar1;
  }
  *(undefined8 *)(param_1 + 0x88) = 0;
  *(undefined8 *)(param_1 + 0x80) = 0;
  if (*(long *)(param_1 + 0x78) < 0x8001) {
    return;
  }
  pvVar1 = realloc(*(void **)(param_1 + 0x70),0x8000);
  *(undefined8 *)(param_1 + 0x78) = 0x8000;
  *(void **)(param_1 + 0x70) = pvVar1;
  return;
}



undefined8 _fs_io_init(long param_1)

{
  void *__ptr;
  void *pvVar1;
  undefined8 uVar2;
  
  uVar2 = 0;
  *(undefined8 *)(param_1 + 0x68) = 0;
  *(undefined8 *)(param_1 + 0x60) = 0;
  __ptr = malloc(0x400);
  *(void **)(param_1 + 0x50) = __ptr;
  if (__ptr != (void *)0x0) {
    *(undefined8 *)(param_1 + 0x58) = 0x400;
    *(undefined8 *)(param_1 + 0x88) = 0;
    *(undefined8 *)(param_1 + 0x80) = 0;
    pvVar1 = malloc(0x400);
    *(void **)(param_1 + 0x70) = pvVar1;
    if (pvVar1 == (void *)0x0) {
      free(__ptr);
      *(undefined8 *)(param_1 + 0x50) = 0;
    }
    else {
      *(undefined8 *)(param_1 + 0x78) = 0x400;
      uVar2 = 1;
    }
  }
  return uVar2;
}



void _fs_io_fini(long param_1)

{
  if (*(void **)(param_1 + 0x50) != (void *)0x0) {
    free(*(void **)(param_1 + 0x50));
  }
  if (*(void **)(param_1 + 0x70) != (void *)0x0) {
    free(*(void **)(param_1 + 0x70));
    return;
  }
  return;
}



ulong _fs_write(long param_1,void *param_2,size_t param_3)

{
  int iVar1;
  ulong uVar2;
  
  if (param_3 == 0) {
    uVar2 = 1;
  }
  else {
    uVar2 = (ulong)*(uint *)(param_1 + 8);
    if (*(uint *)(param_1 + 8) != 0xffffffff) {
      while( true ) {
        if ((long)(param_3 + *(long *)(param_1 + 0x60)) <= *(long *)(param_1 + 0x58)) {
          memcpy((void *)(*(long *)(param_1 + 0x60) + *(long *)(param_1 + 0x50)),param_2,param_3);
          memset((void *)(*(long *)(param_1 + 0x60) + param_3 + *(long *)(param_1 + 0x50)),0,0);
          *(long *)(param_1 + 0x60) = *(long *)(param_1 + 0x60) + param_3;
          _fs_mark_block(param_1,1);
          return 1;
        }
        iVar1 = _fs_flush(param_1);
        if (iVar1 < 0) break;
        iVar1 = FUN_0012aae0(param_1 + 0x50,param_3);
        if (iVar1 < 0) {
          _fs_connection_died(param_1);
          return 0xffffffff;
        }
      }
      return 0xffffffff;
    }
  }
  return uVar2;
}



ulong _fs_write_pad(long param_1,void *param_2,size_t param_3)

{
  int iVar1;
  ulong uVar2;
  long lVar3;
  
  lVar3 = (long)*(int *)(&DAT_00134040 + (ulong)((uint)param_3 & 3) * 4) + param_3;
  if (lVar3 == 0) {
    uVar2 = 1;
  }
  else {
    uVar2 = (ulong)*(uint *)(param_1 + 8);
    if (*(uint *)(param_1 + 8) != 0xffffffff) {
      while( true ) {
        if (lVar3 + *(long *)(param_1 + 0x60) <= *(long *)(param_1 + 0x58)) {
          memcpy((void *)(*(long *)(param_1 + 0x60) + *(long *)(param_1 + 0x50)),param_2,param_3);
          memset((void *)(*(long *)(param_1 + 0x60) + param_3 + *(long *)(param_1 + 0x50)),0,
                 lVar3 - param_3);
          *(long *)(param_1 + 0x60) = *(long *)(param_1 + 0x60) + lVar3;
          _fs_mark_block(param_1,1);
          return 1;
        }
        iVar1 = _fs_flush(param_1);
        if (iVar1 < 0) break;
        iVar1 = FUN_0012aae0(param_1 + 0x50,lVar3);
        if (iVar1 < 0) {
          _fs_connection_died(param_1);
          return 0xffffffff;
        }
      }
      return 0xffffffff;
    }
  }
  return uVar2;
}



undefined8 _fs_wait_for_readable(long param_1,int param_2)

{
  byte bVar1;
  int iVar2;
  undefined4 extraout_var;
  int *piVar3;
  undefined8 uVar4;
  long lVar5;
  fd_set *pfVar6;
  long in_FS_OFFSET;
  timeval local_158;
  __fd_mask local_148 [16];
  __fd_mask local_c8 [17];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  do {
    if (*(int *)(param_1 + 8) < 0) break;
    lVar5 = 0x10;
    pfVar6 = (fd_set *)local_148;
    while (lVar5 != 0) {
      lVar5 = lVar5 + -1;
      pfVar6->fds_bits[0] = 0;
      pfVar6 = (fd_set *)(pfVar6->fds_bits + 1);
    }
    lVar5 = 0x10;
    pfVar6 = (fd_set *)(local_148 + 0x80);
    while (lVar5 != 0) {
      lVar5 = lVar5 + -1;
      pfVar6->fds_bits[0] = 0;
      pfVar6 = (fd_set *)(pfVar6->fds_bits + 1);
    }
    local_158.tv_sec = (long)(param_2 / 1000);
    local_158.tv_usec = (long)((param_2 % 1000) * 1000);
    lVar5 = __fdelt_chk((long)*(int *)(param_1 + 8));
    bVar1 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x37);
    *(ulong *)(local_148 + lVar5 * 8) =
         *(ulong *)(local_148 + lVar5 * 8) |
         1 << (((char)*(undefined4 *)(param_1 + 8) + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f);
    lVar5 = __fdelt_chk();
    iVar2 = *(int *)(param_1 + 8);
    bVar1 = (byte)(iVar2 >> 0x37);
    *(ulong *)(local_148 + lVar5 * 8 + 0x80) =
         *(ulong *)(local_148 + lVar5 * 8 + 0x80) |
         1 << (((char)iVar2 + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f);
    iVar2 = select(iVar2 + 1,(fd_set *)local_148,(fd_set *)0x0,(fd_set *)(local_148 + 0x80),
                   &local_158);
    uVar4 = CONCAT44(extraout_var,iVar2);
    if (-1 < iVar2) {
      if (iVar2 == 0) goto LAB_0012b24b;
      lVar5 = __fdelt_chk((long)*(int *)(param_1 + 8));
      bVar1 = (byte)((int)*(undefined4 *)(param_1 + 8) >> 0x37);
      if ((*(ulong *)(local_148 + lVar5 * 8) &
          1 << (((char)*(undefined4 *)(param_1 + 8) + (bVar1 >> 2) & 0x3f) - (bVar1 >> 2) & 0x3f))
          != 0) {
        uVar4 = 1;
        goto LAB_0012b24b;
      }
      break;
    }
    piVar3 = __errno_location();
  } while ((*piVar3 == 4) || (*piVar3 == 0xb));
  uVar4 = 0xffffffff;
LAB_0012b24b:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 _fs_start_read(long param_1,long param_2,long *param_3)

{
  bool bVar1;
  int iVar2;
  int *piVar3;
  long lVar4;
  long lVar5;
  
  *(long *)(param_1 + 0x90) = param_2;
  if (*(long *)(param_1 + 0x80) - *(long *)(param_1 + 0x88) < param_2) {
    iVar2 = FUN_0012aae0(param_1 + 0x70);
    if (iVar2 != 1) {
LAB_0012b420:
      _fs_connection_died(param_1);
      return 0xffffffff;
    }
    iVar2 = _fs_flush(param_1);
    if (iVar2 < 0) {
      return 0xffffffff;
    }
    lVar4 = *(long *)(param_1 + 0x80);
    bVar1 = false;
    while (lVar5 = lVar4 - *(long *)(param_1 + 0x88),
          *(long *)(param_1 + 0x90) != lVar5 && -1 < *(long *)(param_1 + 0x90) - lVar5) {
      lVar5 = *(long *)(param_1 + 0x78);
      piVar3 = __errno_location();
      *piVar3 = 0;
      iVar2 = _FontTransRead(*(undefined8 *)(param_1 + 0xb8),
                             *(long *)(param_1 + 0x80) + *(long *)(param_1 + 0x70),
                             lVar5 - lVar4 & 0xffffffff);
      lVar4 = (long)iVar2;
      if (lVar4 < 1) {
        if (lVar4 == 0) {
          if (!bVar1) goto LAB_0012b3e5;
          iVar2 = *piVar3;
LAB_0012b3ba:
          if (iVar2 != 4) goto LAB_0012b420;
          lVar4 = *(long *)(param_1 + 0x80);
        }
        else {
          iVar2 = *piVar3;
          if (iVar2 != 0xb) goto LAB_0012b3ba;
          if (bVar1) goto LAB_0012b420;
LAB_0012b3e5:
          iVar2 = _fs_wait_for_readable(param_1,0);
          if (iVar2 == 0) {
            return 0;
          }
          lVar4 = *(long *)(param_1 + 0x80);
          bVar1 = true;
        }
      }
      else {
        lVar4 = lVar4 + *(long *)(param_1 + 0x80);
        bVar1 = false;
        *(long *)(param_1 + 0x80) = lVar4;
      }
    }
    if (lVar5 < param_2) {
      return 0;
    }
  }
  if (param_3 != (long *)0x0) {
    *param_3 = *(long *)(param_1 + 0x88) + *(long *)(param_1 + 0x70);
  }
  return 1;
}



void FUN_0012b450(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_1_00,undefined8 param_2_00,undefined8 param_3_00,
                 undefined8 param_4_00,undefined8 param_5_00,undefined8 param_6_00)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [8];
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined4 local_88;
  undefined4 local_78;
  undefined4 local_68;
  undefined4 local_58;
  undefined4 local_48;
  undefined4 local_38;
  undefined4 local_28;
  undefined4 local_18;
  
  if (in_AL != '\0') {
    local_88 = param_1;
    local_78 = param_2;
    local_68 = param_3;
    local_58 = param_4;
    local_48 = param_5;
    local_38 = param_6;
    local_28 = param_7;
    local_18 = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &stack0x00000008;
  local_c8 = local_b8;
  local_d8 = 8;
  local_d4 = 0x30;
  local_b0 = param_2_00;
  local_a8 = param_3_00;
  local_a0 = param_4_00;
  local_98 = param_5_00;
  local_90 = param_6_00;
  __vfprintf_chk(stderr,1,0x130914,&local_d8);
  fflush(stderr);
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_0012b530(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 int param_1_00,undefined8 param_2_00,undefined8 param_3_00,undefined8 param_4_00,
                 undefined8 param_5_00,undefined8 param_6_00)

{
  int iVar1;
  char in_AL;
  int *piVar2;
  long in_FS_OFFSET;
  undefined4 local_f8;
  undefined4 local_f4;
  undefined *local_f0;
  undefined *local_e8;
  long local_e0;
  undefined local_d8 [16];
  undefined8 local_c8;
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined4 local_a8;
  undefined4 local_98;
  undefined4 local_88;
  undefined4 local_78;
  undefined4 local_68;
  undefined4 local_58;
  undefined4 local_48;
  undefined4 local_38;
  
  if (in_AL != '\0') {
    local_a8 = param_1;
    local_98 = param_2;
    local_88 = param_3;
    local_78 = param_4;
    local_68 = param_5;
    local_58 = param_6;
    local_48 = param_7;
    local_38 = param_8;
  }
  local_e0 = *(long *)(in_FS_OFFSET + 0x28);
  local_f0 = &stack0x00000008;
  local_e8 = local_d8;
  local_f8 = 0x10;
  local_f4 = 0x30;
  local_c8 = param_3_00;
  local_c0 = param_4_00;
  local_b8 = param_5_00;
  local_b0 = param_6_00;
  if (param_1_00 == 1) {
    piVar2 = __errno_location();
    iVar1 = *piVar2;
    FUN_0012b450(0x130914,"_FontTrans");
    __vfprintf_chk(stderr,1,param_2_00,&local_f8);
    fflush(stderr);
    *piVar2 = iVar1;
  }
  if (local_e0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_0012b640(long param_1)

{
  FUN_0012b530(2,"SocketINETClose(%p,%d)\n",param_1,(ulong)*(uint *)(param_1 + 0x1c));
  close(*(int *)(param_1 + 0x1c));
  return;
}



ulong FUN_0012b840(int param_1,char *param_2)

{
  int iVar1;
  uint uVar2;
  char **ppcVar3;
  
  uVar2 = param_1 + 1;
  FUN_0012b530(3,"SocketSelectFamily(%s)\n",param_2);
  if (uVar2 < 6) {
    ppcVar3 = &PTR_DAT_0033ab40 + (long)(int)uVar2 * 3;
    do {
      iVar1 = strcmp(param_2,*ppcVar3);
      if (iVar1 == 0) {
        return (ulong)uVar2;
      }
      uVar2 = uVar2 + 1;
      ppcVar3 = ppcVar3 + 3;
    } while (uVar2 != 6);
  }
  return (ulong)((uint)(param_1 != -1) - 2);
}



void * FUN_0012b8e0(int param_1,uint param_2)

{
  uint __domain;
  int iVar1;
  void *__ptr;
  long lVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  socklen_t local_38;
  int local_34;
  long local_30;
  
  uVar3 = SEXT48(param_1);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_0012b530(3,"SocketOpen(%d,%d)\n",uVar3 & 0xffffffff,(ulong)param_2);
  __ptr = calloc(1,0x60);
  if (__ptr == (void *)0x0) {
    FUN_0012b530(1,"SocketOpen: malloc failed\n");
  }
  else {
    __domain = *(uint *)(&DAT_0033ab48 + uVar3 * 0x18);
    iVar1 = socket(__domain,param_2,*(int *)(&DAT_0033ab54 + uVar3 * 0x18));
    *(int *)((long)__ptr + 0x1c) = iVar1;
    if (-1 < iVar1) {
      lVar2 = sysconf(4);
      if (iVar1 < lVar2) {
        if ((__domain & 0xfffffff7) == 2) {
          local_34 = 1;
          setsockopt(*(int *)((long)__ptr + 0x1c),6,1,&local_34,4);
        }
        else {
          if (__domain == 1) {
            local_38 = 4;
            iVar1 = getsockopt(*(int *)((long)__ptr + 0x1c),1,7,&local_34,&local_38);
            if ((iVar1 == 0) && (local_34 < 0x10000)) {
              local_34 = 0x10000;
              setsockopt(*(int *)((long)__ptr + 0x1c),1,7,&local_34,4);
            }
          }
        }
        goto LAB_0012b985;
      }
    }
    FUN_0012b530(2,"SocketOpen: socket() failed for %s\n",(&PTR_DAT_0033ab40)[uVar3 * 3]);
    free(__ptr);
    __ptr = (void *)0x0;
  }
LAB_0012b985:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return __ptr;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long FUN_0012baa0(undefined8 param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,
                 uint param_5)

{
  long lVar1;
  
  FUN_0012b530(2,"SocketOpenCOTSClient(%s,%s,%s)\n",param_2,param_3,param_4);
  while( true ) {
    param_5 = FUN_0012b840((ulong)param_5,param_1);
    if ((int)param_5 < 0) break;
    lVar1 = FUN_0012b8e0((ulong)param_5,(ulong)*(uint *)(&DAT_0033ab4c + (long)(int)param_5 * 0x18))
    ;
    if (lVar1 != 0) {
      *(uint *)(lVar1 + 8) = param_5;
      return lVar1;
    }
  }
  if (param_5 != 0xffffffff) {
    FUN_0012b530(1,"SocketOpenCOTSClient: Unable to determine socket type for %s\n",param_1);
    return 0;
  }
  FUN_0012b530(1,"SocketOpenCOTSClient: Unable to open socket for %s\n",param_1);
  return 0;
}



void FUN_0012bb50(undefined8 *param_1)

{
  FUN_0012baa0(*param_1);
  return;
}



long FUN_0012bb60(undefined8 *param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4)

{
  uint uVar1;
  long lVar2;
  
  uVar1 = 0xffffffff;
  FUN_0012b530(2,"SocketOpenCLTSClient(%s,%s,%s)\n",param_2,param_3,param_4);
  while( true ) {
    uVar1 = FUN_0012b840((ulong)uVar1,*param_1);
    if ((int)uVar1 < 0) break;
    lVar2 = FUN_0012b8e0((ulong)uVar1,(ulong)*(uint *)(&DAT_0033ab4c + (long)(int)uVar1 * 0x18));
    if (lVar2 != 0) {
      *(uint *)(lVar2 + 8) = uVar1;
      return lVar2;
    }
  }
  if (uVar1 != 0xffffffff) {
    FUN_0012b530(1,"SocketOpenCLTSClient: Unable to determine socket type for %s\n",*param_1);
    return 0;
  }
  FUN_0012b530(1,"SocketOpenCLTSClient: Unable to open socket for %s\n",*param_1);
  return 0;
}



void _FontTransFreeConnInfo(void *param_1)

{
  FUN_0012b530(3,"FreeConnInfo(%p)\n",param_1);
  if (*(void **)((long)param_1 + 0x30) != (void *)0x0) {
    free(*(void **)((long)param_1 + 0x30));
  }
  if (*(void **)((long)param_1 + 0x40) != (void *)0x0) {
    free(*(void **)((long)param_1 + 0x40));
  }
  if (*(void **)((long)param_1 + 0x20) != (void *)0x0) {
    free(*(void **)((long)param_1 + 0x20));
  }
  free(param_1);
  return;
}



undefined8 _FontTransSetOption(long param_1,uint param_2,uint param_3)

{
  uint __fd;
  int __cmd;
  uint uVar1;
  undefined4 extraout_var;
  undefined4 extraout_var_00;
  ulong uVar2;
  
  __fd = *(uint *)(param_1 + 0x1c);
  FUN_0012b530(2,0x13408f,(ulong)__fd,(ulong)param_2,(ulong)param_3);
  if (param_2 == 1) {
    if (param_3 == 1) {
      uVar1 = fcntl(__fd,3,0);
      if (uVar1 == 0xffffffff) {
        return CONCAT44(extraout_var_00,uVar1);
      }
      __cmd = 4;
      uVar2 = (ulong)(uVar1 | 0x800);
      goto LAB_0012bd0a;
    }
  }
  else {
    if (param_2 == 2) {
      uVar2 = 1;
      __cmd = 2;
LAB_0012bd0a:
      __cmd = fcntl(__fd,__cmd,uVar2);
      return CONCAT44(extraout_var,__cmd);
    }
  }
  return 0;
}



void _FontTransBytesReadable(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012bd63. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x30))();
  return;
}



void _FontTransRead(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012bd73. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x38))();
  return;
}



void _FontTransWrite(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012bd83. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x40))();
  return;
}



void _FontTransReadv(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012bd93. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x48))();
  return;
}



void _FontTransWritev(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012bda3. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x50))();
  return;
}



void _FontTransDisconnect(long *param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012bdb3. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(*param_1 + 0x58))();
  return;
}



ulong _FontTransClose(long *param_1)

{
  uint uVar1;
  
  FUN_0012b530(2,"Close(%d)\n",(ulong)*(uint *)((long)param_1 + 0x1c));
  uVar1 = (**(code **)(*param_1 + 0x60))(param_1);
  _FontTransFreeConnInfo(param_1);
  return (ulong)uVar1;
}



ulong _FontTransCloseForCloning(long *param_1)

{
  uint uVar1;
  
  FUN_0012b530(2,"CloseForCloning(%d)\n",(ulong)*(uint *)((long)param_1 + 0x1c));
  uVar1 = (**(code **)(*param_1 + 0x68))(param_1);
  _FontTransFreeConnInfo(param_1);
  return (ulong)uVar1;
}



ulong _FontTransIsLocal(long param_1)

{
  return (ulong)(*(int *)(param_1 + 0x28) == 1);
}



undefined8 _FontTransGetMyAddr(long param_1,undefined4 *param_2,undefined4 *param_3,void **param_4)

{
  void *__dest;
  undefined8 uVar1;
  
  FUN_0012b530(2,"GetMyAddr(%d)\n",(ulong)*(uint *)(param_1 + 0x1c));
  *param_2 = *(undefined4 *)(param_1 + 0x28);
  *param_3 = *(undefined4 *)(param_1 + 0x38);
  __dest = malloc((long)*(int *)(param_1 + 0x38));
  *param_4 = __dest;
  if (__dest == (void *)0x0) {
    FUN_0012b530(1,"GetMyAddr: malloc failed\n");
    uVar1 = 0xffffffff;
  }
  else {
    memcpy(__dest,*(void **)(param_1 + 0x30),(long)*(int *)(param_1 + 0x38));
    uVar1 = 0;
  }
  return uVar1;
}



undefined8
_FontTransGetPeerAddr(long param_1,undefined4 *param_2,undefined4 *param_3,void **param_4)

{
  void *__dest;
  undefined8 uVar1;
  
  FUN_0012b530(2,"GetPeerAddr(%d)\n",(ulong)*(uint *)(param_1 + 0x1c));
  *param_2 = *(undefined4 *)(param_1 + 0x28);
  *param_3 = *(undefined4 *)(param_1 + 0x48);
  __dest = malloc((long)*(int *)(param_1 + 0x48));
  *param_4 = __dest;
  if (__dest == (void *)0x0) {
    FUN_0012b530(1,"GetPeerAddr: malloc failed\n");
    uVar1 = 0xffffffff;
  }
  else {
    memcpy(__dest,*(void **)(param_1 + 0x40),(long)*(int *)(param_1 + 0x48));
    uVar1 = 0;
  }
  return uVar1;
}



ulong _FontTransGetConnectionNumber(long param_1)

{
  return (ulong)*(uint *)(param_1 + 0x1c);
}



ulong _FontTransGetHostname(char *param_1,int param_2)

{
  long lVar1;
  size_t sVar2;
  uint uVar3;
  long in_FS_OFFSET;
  utsname uStack440;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uname(&uStack440);
  sVar2 = strlen(uStack440.nodename);
  uVar3 = param_2 - 1;
  if ((int)(uint)sVar2 < param_2) {
    uVar3 = (uint)sVar2;
  }
  strncpy(param_1,uStack440.nodename,(long)(int)uVar3);
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  param_1[(long)(int)uVar3] = '\0';
  if (local_30 == lVar1) {
    return (ulong)uVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 FUN_0012cca0(char *param_1,char **param_2,char **param_3,char **param_4)

{
  uint uVar1;
  int iVar2;
  byte *__ptr;
  byte *pbVar3;
  char *pcVar4;
  size_t sVar5;
  char *pcVar6;
  char *__s;
  undefined8 uVar7;
  long lVar8;
  byte *__s_00;
  byte *pbVar9;
  long in_FS_OFFSET;
  bool bVar10;
  bool bVar11;
  bool bVar12;
  byte bVar13;
  undefined local_168 [32];
  byte local_148 [264];
  long local_40;
  
  bVar13 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_0012b530(3,"ParseAddress(%s)\n",param_1);
  __ptr = (byte *)strdup(param_1);
  pbVar3 = (byte *)strchr((char *)__ptr,0x2f);
  if ((pbVar3 != (byte *)0x0) ||
     (pbVar3 = (byte *)strrchr((char *)__ptr,0x3a), pbVar3 != (byte *)0x0)) {
    if (*pbVar3 == 0x3a) {
      __s = "local";
      __s_00 = __ptr;
      if (pbVar3 != __ptr) {
        __s = &DAT_00134206;
      }
    }
    else {
      *pbVar3 = 0;
      __s_00 = pbVar3 + 1;
      __s = (char *)__ptr;
      if ((*__ptr == 0) && (__s = &DAT_00134206, pbVar3[1] == 0x3a)) {
        __s = "local";
      }
    }
    pcVar4 = strrchr((char *)__s_00,0x3a);
    if (pcVar4 != (char *)0x0) {
      *pcVar4 = '\0';
      sVar5 = strlen((char *)__s_00);
      uVar1 = (uint)sVar5;
      if (uVar1 == 0) {
        __s_00 = local_148;
        _FontTransGetHostname(__s_00,0x100);
      }
      else {
        bVar10 = uVar1 < 3;
        bVar12 = uVar1 == 3;
        if (3 < (int)uVar1) {
          lVar8 = 4;
          pbVar3 = (byte *)__s;
          pbVar9 = &DAT_00134206;
          do {
            if (lVar8 == 0) break;
            lVar8 = lVar8 + -1;
            bVar10 = *pbVar3 < *pbVar9;
            bVar12 = *pbVar3 == *pbVar9;
            pbVar3 = pbVar3 + (ulong)bVar13 * -2 + 1;
            pbVar9 = pbVar9 + (ulong)bVar13 * -2 + 1;
          } while (bVar12);
          bVar11 = false;
          bVar10 = (!bVar10 && !bVar12) == bVar10;
          if (!bVar10) {
            lVar8 = 6;
            pbVar3 = (byte *)__s;
            pbVar9 = (byte *)"inet6";
            do {
              if (lVar8 == 0) break;
              lVar8 = lVar8 + -1;
              bVar11 = *pbVar3 < *pbVar9;
              bVar10 = *pbVar3 == *pbVar9;
              pbVar3 = pbVar3 + (ulong)bVar13 * -2 + 1;
              pbVar9 = pbVar9 + (ulong)bVar13 * -2 + 1;
            } while (bVar10);
            if ((!bVar11 && !bVar10) != bVar11) goto LAB_0012cd5c;
          }
          if ((*__s_00 == 0x5b) && (pbVar3 = __s_00 + (long)(int)uVar1 + -1, *pbVar3 == 0x5d)) {
            *pbVar3 = 0;
            iVar2 = inet_pton(10,(char *)(__s_00 + 1),local_168);
            if (iVar2 == 1) {
              __s = "inet6";
              __s_00 = __s_00 + 1;
            }
            else {
              *pbVar3 = 0x5d;
            }
          }
        }
      }
LAB_0012cd5c:
      pcVar6 = strchr(pcVar4 + 1,0x2f);
      if (pcVar6 != (char *)0x0) {
        *pcVar6 = '\0';
      }
      __s = strdup(__s);
      *param_2 = __s;
      if (__s == (char *)0x0) {
        *param_4 = (char *)0x0;
        *param_3 = (char *)0x0;
        *param_2 = (char *)0x0;
        free(__ptr);
        uVar7 = 0;
      }
      else {
        __s = strdup((char *)__s_00);
        *param_3 = __s;
        if (__s == (char *)0x0) {
          *param_4 = (char *)0x0;
        }
        else {
          __s = strdup(pcVar4 + 1);
          *param_4 = __s;
          if (__s != (char *)0x0) {
            free(__ptr);
            uVar7 = 1;
            goto LAB_0012cdbf;
          }
          free(*param_3);
        }
        *param_3 = (char *)0x0;
        free(*param_2);
        *param_2 = (char *)0x0;
        free(__ptr);
        uVar7 = 0;
      }
      goto LAB_0012cdbf;
    }
  }
  *param_2 = (char *)0x0;
  *param_3 = (char *)0x0;
  *param_4 = (char *)0x0;
  free(__ptr);
  uVar7 = 0;
LAB_0012cdbf:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar7;
}



// WARNING: Removing unreachable block (ram,0x0012d188)

char ** _FontTransOpenCOTSClient(undefined8 param_1)

{
  byte bVar1;
  char *__src;
  int iVar2;
  ushort **ppuVar3;
  __int32_t **pp_Var4;
  char **ppcVar5;
  undefined **ppuVar6;
  byte *pbVar7;
  undefined1 *puVar8;
  long in_FS_OFFSET;
  char *local_60;
  void *local_58;
  char *local_50;
  byte local_48 [20];
  byte local_34 [4];
  long local_30;
  
  FUN_0012b530(2,"OpenCOTSClient(%s)\n",param_1);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_60 = (char *)0x0;
  local_58 = (void *)0x0;
  local_50 = (char *)0x0;
  FUN_0012b530(2,"Open(%d,%s)\n",1,param_1);
  iVar2 = FUN_0012cca0(param_1,&local_60,&local_58,&local_50);
  __src = local_60;
  if (iVar2 == 0) {
    FUN_0012b530(1,"Open: Unable to Parse address %s\n",param_1);
    ppcVar5 = (char **)0x0;
  }
  else {
    FUN_0012b530(3,"SelectTransport(%s)\n",local_60);
    strncpy((char *)local_48,__src,0x13);
    local_48[19] = 0;
    pbVar7 = local_48;
    do {
      bVar1 = *pbVar7;
      if (bVar1 == 0) break;
      ppuVar3 = __ctype_b_loc();
      if ((*(byte *)((long)*ppuVar3 + (ulong)bVar1 * 2 + 1) & 1) != 0) {
        pp_Var4 = __ctype_tolower_loc();
        *pbVar7 = (byte)(*pp_Var4)[(ulong)bVar1];
      }
      pbVar7 = pbVar7 + 1;
    } while (local_34 != pbVar7);
    puVar8 = _FontTransSocketTCPFuncs;
    ppuVar6 = &PTR__FontTransSocketTCPFuncs_0033ac80;
    iVar2 = strcmp((char *)local_48,_FontTransSocketTCPFuncs._0_8_);
    while (iVar2 != 0) {
      ppuVar6 = (undefined **)((Elf64_Dyn *)ppuVar6 + 1);
      if ((Elf64_Dyn *)ppuVar6 == _DYNAMIC) {
        FUN_0012b530(1,"Open: Unable to find transport for %s\n",local_60);
        goto LAB_0012d14d;
      }
      puVar8 = (undefined1 *)((Elf64_Dyn *)ppuVar6)->d_tag;
      iVar2 = strcmp((char *)local_48,*(char **)puVar8);
    }
    ppcVar5 = (char **)(*(code *)((char **)puVar8)[2])(puVar8,local_60,local_58,local_50);
    if (ppcVar5 == (char **)0x0) {
      if ((*(byte *)((char **)puVar8 + 1) & 4) == 0) {
        FUN_0012b530(1,"Open: transport open failed for %s/%s:%s\n",local_60,local_58,local_50);
      }
LAB_0012d14d:
      free(local_60);
      free(local_58);
      free(local_50);
      ppcVar5 = (char **)0x0;
    }
    else {
      *ppcVar5 = puVar8;
      ppcVar5[4] = local_50;
      free(local_60);
      free(local_58);
    }
  }
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return ppcVar5;
}



// WARNING: Removing unreachable block (ram,0x0012d0e5)

char ** _FontTransOpenCLTSClient(undefined8 param_1)

{
  byte bVar1;
  char *__src;
  int iVar2;
  ushort **ppuVar3;
  __int32_t **pp_Var4;
  char **ppcVar5;
  undefined **ppuVar6;
  byte *pbVar7;
  undefined1 *puVar8;
  long in_FS_OFFSET;
  char *pcStack96;
  void *pvStack88;
  char *pcStack80;
  byte abStack72 [20];
  byte abStack52 [4];
  long lStack48;
  
  FUN_0012b530(2,"OpenCLTSClient(%s)\n",param_1);
  lStack48 = *(long *)(in_FS_OFFSET + 0x28);
  pcStack96 = (char *)0x0;
  pvStack88 = (void *)0x0;
  pcStack80 = (char *)0x0;
  FUN_0012b530(2,"Open(%d,%s)\n",3,param_1);
  iVar2 = FUN_0012cca0(param_1,&pcStack96,&pvStack88,&pcStack80);
  __src = pcStack96;
  if (iVar2 == 0) {
    FUN_0012b530(1,"Open: Unable to Parse address %s\n",param_1);
    ppcVar5 = (char **)0x0;
  }
  else {
    FUN_0012b530(3,"SelectTransport(%s)\n",pcStack96);
    strncpy((char *)abStack72,__src,0x13);
    abStack72[19] = 0;
    pbVar7 = abStack72;
    do {
      bVar1 = *pbVar7;
      if (bVar1 == 0) break;
      ppuVar3 = __ctype_b_loc();
      if ((*(byte *)((long)*ppuVar3 + (ulong)bVar1 * 2 + 1) & 1) != 0) {
        pp_Var4 = __ctype_tolower_loc();
        *pbVar7 = (byte)(*pp_Var4)[(ulong)bVar1];
      }
      pbVar7 = pbVar7 + 1;
    } while (abStack52 != pbVar7);
    puVar8 = _FontTransSocketTCPFuncs;
    ppuVar6 = &PTR__FontTransSocketTCPFuncs_0033ac80;
    iVar2 = strcmp((char *)abStack72,_FontTransSocketTCPFuncs._0_8_);
    while (iVar2 != 0) {
      ppuVar6 = (undefined **)((Elf64_Dyn *)ppuVar6 + 1);
      if ((Elf64_Dyn *)ppuVar6 == _DYNAMIC) {
        FUN_0012b530(1,"Open: Unable to find transport for %s\n",pcStack96);
        goto LAB_0012d14d;
      }
      puVar8 = (undefined1 *)((Elf64_Dyn *)ppuVar6)->d_tag;
      iVar2 = strcmp((char *)abStack72,*(char **)puVar8);
    }
    ppcVar5 = (char **)(*(code *)((char **)puVar8)[3])(puVar8,pcStack96,pvStack88,pcStack80);
    if (ppcVar5 == (char **)0x0) {
      if ((*(byte *)((char **)puVar8 + 1) & 4) == 0) {
        FUN_0012b530(1,"Open: transport open failed for %s/%s:%s\n",pcStack96,pvStack88,pcStack80);
      }
LAB_0012d14d:
      free(pcStack96);
      free(pvStack88);
      free(pcStack80);
      ppcVar5 = (char **)0x0;
    }
    else {
      *ppcVar5 = puVar8;
      ppcVar5[4] = pcStack80;
      free(pcStack96);
      free(pvStack88);
    }
  }
  if (lStack48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return ppcVar5;
}



ulong _FontTransConnect(long *param_1,undefined8 param_2)

{
  int iVar1;
  uint uVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  void *local_38;
  char *local_30;
  char *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  FUN_0012b530(2,"Connect(%d,%s)\n",(ulong)*(uint *)((long)param_1 + 0x1c),param_2);
  iVar1 = FUN_0012cca0(param_2,&local_38,&local_30,&local_28);
  if (iVar1 == 0) {
    uVar3 = 0xffffffff;
    FUN_0012b530(1,"Connect: Unable to Parse address %s\n",param_2);
  }
  else {
    if ((local_28 == (char *)0x0) || (*local_28 == '\0')) {
      FUN_0012b530(1,"Connect: Missing port specification in %s\n",param_2);
      if (local_38 != (void *)0x0) {
        free(local_38);
      }
      uVar3 = 0xffffffff;
      local_28 = local_30;
    }
    else {
      uVar2 = (**(code **)(*param_1 + 0x28))(param_1,local_30);
      uVar3 = (ulong)uVar2;
      if (local_38 != (void *)0x0) {
        free(local_38);
      }
      if (local_30 != (char *)0x0) {
        free(local_30);
      }
    }
    if (local_28 != (char *)0x0) {
      free(local_28);
    }
  }
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



char * MakeAtom(char *param_1,uint param_2,int param_3)

{
  long lVar1;
  int iVar2;
  long *__ptr;
  uint uVar3;
  long *plVar4;
  char **ppcVar5;
  void *pvVar6;
  uint uVar7;
  ulong __n;
  char *pcVar8;
  char *pcVar9;
  uint uVar10;
  int iVar11;
  size_t __size;
  char **ppcVar12;
  long *plVar13;
  long *plVar14;
  int iVar15;
  int iVar16;
  
  __ptr = DAT_0033cd58;
  if (param_2 == 0) {
    uVar3 = 0;
  }
  else {
    uVar3 = 0;
    pcVar8 = param_1;
    do {
      pcVar9 = pcVar8 + 1;
      uVar3 = uVar3 << 3 ^ (int)*pcVar8;
      pcVar8 = pcVar9;
    } while (pcVar9 != param_1 + (ulong)(param_2 - 1) + 1);
    uVar3 = (uVar3 ^ (int)uVar3 >> 0x1f) - ((int)uVar3 >> 0x1f);
  }
  if (DAT_0033cd58 == (long *)0x0) {
    uVar10 = 0;
  }
  else {
    uVar10 = DAT_0033cd4c & uVar3;
    plVar4 = (long *)DAT_0033cd58[(int)uVar10];
    if (plVar4 != (long *)0x0) {
      if ((*(uint *)((long)plVar4 + 0xc) == uVar3) && (*(uint *)(plVar4 + 1) == param_2)) {
        __n = 0;
        do {
          if ((ulong)param_2 == __n) {
LAB_0012d446:
            return (char *)plVar4[2];
          }
          pcVar8 = (char *)(*plVar4 + __n);
          pcVar9 = param_1 + __n;
          __n = __n + 1;
        } while (*pcVar8 == *pcVar9);
      }
      while( true ) {
        uVar10 = uVar10 + ((int)uVar3 % DAT_0033cd48 | 1U);
        if (DAT_0033cd54 <= (int)uVar10) {
          uVar10 = uVar10 - DAT_0033cd54;
        }
        plVar4 = (long *)DAT_0033cd58[(int)uVar10];
        if (plVar4 == (long *)0x0) break;
        if ((*(uint *)((long)plVar4 + 0xc) == uVar3) && (*(uint *)(plVar4 + 1) == param_2)) {
          __n = 0;
          do {
            if ((ulong)param_2 == __n) goto LAB_0012d446;
            pcVar9 = (char *)(*plVar4 + __n);
            pcVar8 = param_1 + __n;
            __n = __n + 1;
          } while (*pcVar9 == *pcVar8);
        }
      }
    }
  }
  if (param_3 == 0) {
    return (char *)0;
  }
  __n = (ulong)param_2;
  ppcVar5 = (char **)malloc(__n + 0x19);
  if (ppcVar5 == (char **)0x0) {
    __fprintf_chk(stderr,1,"MakeAtom(): Error: Couldn\'t allocate AtomListRec (%ld)\n");
    return (char *)0;
  }
  *(uint *)(ppcVar5 + 1) = param_2;
  *(char ***)ppcVar5 = ppcVar5 + 3;
  strncpy((char *)(ppcVar5 + 3),param_1,__n);
  iVar2 = DAT_0033cd54;
  *(undefined *)((long)ppcVar5 + __n + 0x18) = 0;
  iVar11 = DAT_0033cd50;
  *(uint *)((long)ppcVar5 + 0xc) = uVar3;
  DAT_0033cd30 = (char *)((long)DAT_0033cd30 + 1);
  ppcVar5[2] = DAT_0033cd30;
  if (iVar11 < iVar2 / 2) {
    ppcVar12 = (char **)(__ptr + (int)uVar10);
    DAT_0033cd50 = iVar11;
    goto LAB_0012d4fb;
  }
  if (iVar2 == 0) {
    plVar4 = (long *)calloc(0x400,8);
    if (plVar4 == (long *)0x0) goto LAB_0012d714;
    iVar15 = 0x3fd;
    uVar10 = 0x3ff;
    iVar16 = 0x400;
LAB_0012d5ce:
    free(__ptr);
    DAT_0033cd50 = iVar11;
    DAT_0033cd48 = iVar15;
    DAT_0033cd4c = uVar10;
    DAT_0033cd54 = iVar16;
    DAT_0033cd58 = plVar4;
  }
  else {
    iVar16 = iVar2 * 2;
    plVar4 = (long *)calloc((long)iVar16,8);
    if (plVar4 != (long *)0x0) {
      uVar10 = iVar16 - 1;
      iVar15 = iVar16 + -3;
      if (0 < iVar2) {
        plVar14 = __ptr;
        do {
          lVar1 = *plVar14;
          if (lVar1 != 0) {
            uVar7 = uVar10 & *(uint *)(lVar1 + 0xc);
            plVar13 = plVar4 + (int)uVar7;
            if (*plVar13 != 0) {
              do {
                uVar7 = uVar7 + ((int)*(uint *)(lVar1 + 0xc) % iVar15 | 1U);
                if (iVar16 <= (int)uVar7) {
                  uVar7 = uVar7 + iVar2 * -2;
                }
                plVar13 = plVar4 + (int)uVar7;
              } while (*plVar13 != 0);
            }
            *plVar13 = lVar1;
          }
          plVar14 = plVar14 + 1;
        } while (__ptr + (ulong)(iVar2 - 1) + 1 != plVar14);
      }
      goto LAB_0012d5ce;
    }
LAB_0012d714:
    __fprintf_chk(stderr,1,"ResizeHashTable(): Error: Couldn\'t allocate newHashTable (%ld)\n");
  }
  uVar10 = DAT_0033cd4c & uVar3;
  ppcVar12 = (char **)(DAT_0033cd58 + (int)uVar10);
  if (*ppcVar12 != (char *)0x0) {
    do {
      uVar10 = uVar10 + ((int)uVar3 % DAT_0033cd48 | 1U);
      if (DAT_0033cd54 <= (int)uVar10) {
        uVar10 = uVar10 - DAT_0033cd54;
      }
      ppcVar12 = (char **)(DAT_0033cd58 + (int)uVar10);
    } while (*ppcVar12 != (char *)0x0);
  }
LAB_0012d4fb:
  *(char ***)ppcVar12 = ppcVar5;
  DAT_0033cd50 = DAT_0033cd50 + 1;
  pcVar8 = ppcVar5[2];
  if ((char *)(long)DAT_0033cd38 <= pcVar8) {
    if (DAT_0033cd38 == 0) {
      __size = 8000;
      iVar11 = 1000;
    }
    else {
      iVar11 = DAT_0033cd38 * 2;
      __size = (long)iVar11 << 3;
    }
    pvVar6 = realloc(DAT_0033cd40,__size);
    if (pvVar6 == (void *)0x0) {
      __fprintf_chk(stderr,1,"ResizeReverseMap(): Error: Couldn\'t reallocate reverseMap (%ld)\n",
                    __size);
      return (char *)0;
    }
    pcVar8 = ppcVar5[2];
    DAT_0033cd38 = iVar11;
    DAT_0033cd40 = pvVar6;
  }
  *(char ***)((long)DAT_0033cd40 + (long)pcVar8 * 8) = ppcVar5;
  return ppcVar5[2];
}



ulong ValidAtom(ulong param_1)

{
  ulong uVar1;
  
  uVar1 = 0;
  if (param_1 != 0) {
    uVar1 = (ulong)(param_1 <= DAT_0033cd30);
  }
  return uVar1;
}



undefined8 NameForAtom(ulong param_1)

{
  if ((param_1 != 0) && (param_1 <= DAT_0033cd30)) {
    return **(undefined8 **)(DAT_0033cd40 + param_1 * 8);
  }
  return 0;
}



void FontComputeInfoAccelerators(long param_1)

{
  short sVar1;
  short sVar2;
  byte bVar3;
  
  sVar1 = *(short *)(param_1 + 0x1c);
  bVar3 = *(byte *)(param_1 + 10) & 0xfe;
  *(byte *)(param_1 + 10) = bVar3;
  if (*(short *)(param_1 + 0xc) == sVar1 || *(short *)(param_1 + 0xc) < sVar1) {
    *(byte *)(param_1 + 10) = bVar3 | 1;
  }
  sVar2 = *(short *)(param_1 + 0x20);
  if (((*(short *)(param_1 + 0x22) == *(short *)(param_1 + 0x16)) &&
      (*(short *)(param_1 + 0x24) == *(short *)(param_1 + 0x18))) &&
     (*(int *)(param_1 + 0x1c) == *(int *)(param_1 + 0x10))) {
    if (sVar2 == *(short *)(param_1 + 0x14)) {
      if (*(short *)(param_1 + 0x26) == *(short *)(param_1 + 0x1a)) {
        bVar3 = *(byte *)(param_1 + 10);
        *(byte *)(param_1 + 10) = bVar3 | 4;
        if (((*(short *)(param_1 + 0x10) == 0) && (*(short *)(param_1 + 0x12) == sVar2)) &&
           ((*(short *)(param_1 + 0x22) == *(short *)(param_1 + 0x40) &&
            (*(short *)(param_1 + 0x24) == *(short *)(param_1 + 0x42))))) {
          *(byte *)(param_1 + 10) = bVar3 | 6;
        }
        else {
          *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xfd;
        }
      }
      else {
        *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xf9;
      }
      goto LAB_0012d890;
    }
    *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xf9;
  }
  else {
    *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xf9;
    if (sVar2 == *(short *)(param_1 + 0x14)) {
LAB_0012d890:
      *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) | 8;
      goto LAB_0012d82d;
    }
  }
  *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xf7;
LAB_0012d82d:
  if (((-1 < sVar1) && (*(short *)(param_1 + 0xc) < 1)) &&
     (sVar1 = *(short *)(param_1 + 0x42),
     SBORROW4((int)*(short *)(param_1 + 0x22),-(int)sVar1) ==
     (int)*(short *)(param_1 + 0x22) + (int)sVar1 < 0)) {
    sVar2 = *(short *)(param_1 + 0x40);
    if (((*(short *)(param_1 + 0x16) == sVar2 || *(short *)(param_1 + 0x16) < sVar2) &&
        (-(int)*(short *)(param_1 + 0x24) <= (int)sVar2)) && (*(short *)(param_1 + 0x18) <= sVar1))
    {
      *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) | 0x10;
      return;
    }
  }
  *(byte *)(param_1 + 10) = *(byte *)(param_1 + 10) & 0xef;
  return;
}



ulong FontCouldBeTerminal(long param_1)

{
  short sVar1;
  
  if ((((*(short *)(param_1 + 0x1c) < 0) ||
       (sVar1 = *(short *)(param_1 + 0x14),
       *(short *)(param_1 + 0x12) != sVar1 && sVar1 <= *(short *)(param_1 + 0x12))) ||
      (sVar1 != *(short *)(param_1 + 0x20))) ||
     ((*(short *)(param_1 + 0x40) < (short)*(ushort *)(param_1 + 0x16) ||
      (*(short *)(param_1 + 0x42) < (short)*(ushort *)(param_1 + 0x18))))) {
    return 0;
  }
  if ((*(short *)(param_1 + 0x10) == 0) &&
     ((sVar1 == *(short *)(param_1 + 0x1e) && (*(int *)(param_1 + 0x40) == *(int *)(param_1 + 0x22))
      ))) {
    return 0;
  }
  return (ulong)((*(ushort *)(param_1 + 0x16) | *(ushort *)(param_1 + 0x18)) != 0);
}



void FreeFontNames(int *param_1)

{
  void **ppvVar1;
  int iVar2;
  long lVar3;
  
  if (param_1 != (int *)0x0) {
    if (0 < *param_1) {
      lVar3 = 0;
      iVar2 = 0;
      do {
        iVar2 = iVar2 + 1;
        ppvVar1 = (void **)(*(long *)(param_1 + 4) + lVar3);
        lVar3 = lVar3 + 8;
        free(*ppvVar1);
      } while (*param_1 != iVar2 && iVar2 <= *param_1);
    }
    free(*(void **)(param_1 + 4));
    free(*(void **)(param_1 + 2));
    free(param_1);
    return;
  }
  return;
}



undefined4 * MakeFontNamesRecord(ulong param_1)

{
  undefined4 *__ptr;
  void *__ptr_00;
  void *__ptr_01;
  undefined4 *puVar1;
  
  param_1 = param_1 & 0xffffffff;
  __ptr = (undefined4 *)malloc(0x18);
  puVar1 = __ptr;
  if (__ptr != (undefined4 *)0x0) {
    *__ptr = 0;
    __ptr[1] = (int)param_1;
    if ((int)param_1 == 0) {
      *(undefined8 *)(__ptr + 2) = 0;
      *(undefined8 *)(__ptr + 4) = 0;
    }
    else {
      __ptr_00 = malloc(param_1 * 4);
      *(void **)(__ptr + 2) = __ptr_00;
      __ptr_01 = malloc(param_1 * 8);
      *(void **)(__ptr + 4) = __ptr_01;
      if ((__ptr_00 == (void *)0x0) || (__ptr_01 == (void *)0x0)) {
        free(__ptr_00);
        free(__ptr_01);
        puVar1 = (undefined4 *)0x0;
        free(__ptr);
      }
    }
  }
  return puVar1;
}



undefined8 AddFontNamesName(int *param_1,char *param_2,int param_3)

{
  int iVar1;
  char *__dest;
  undefined8 uVar2;
  void *__ptr;
  void *__ptr_00;
  int iVar3;
  size_t __size;
  size_t __size_00;
  
  iVar1 = *param_1;
  __dest = (char *)malloc((long)(param_3 + 1));
  uVar2 = 0x50;
  if (__dest != (char *)0x0) {
    __ptr = *(void **)(param_1 + 2);
    if (param_1[1] <= iVar1) {
      iVar3 = param_1[1] * 2;
      if (iVar3 == 0) {
        __size_00 = 0x40;
        __size = 0x20;
        iVar3 = 8;
      }
      else {
        __size = (long)iVar3 * 4;
        __size_00 = (long)iVar3 << 3;
      }
      __ptr = realloc(__ptr,__size);
      __ptr_00 = realloc(*(void **)(param_1 + 4),__size_00);
      if ((__ptr == (void *)0x0) || (__ptr_00 == (void *)0x0)) {
        free(__dest);
        free(__ptr);
        free(__ptr_00);
        return 0x50;
      }
      *(void **)(param_1 + 2) = __ptr;
      *(void **)(param_1 + 4) = __ptr_00;
      param_1[1] = iVar3;
    }
    *(int *)((long)__ptr + (long)iVar1 * 4) = param_3;
    *(char **)(*(long *)(param_1 + 4) + (long)iVar1 * 8) = __dest;
    strncpy(__dest,param_2,(long)param_3);
    *param_1 = *param_1 + 1;
    __dest[(long)param_3] = '\0';
    uVar2 = 0x55;
  }
  return uVar2;
}



void GetGlyphs(long param_1)

{
                    // WARNING: Could not recover jumptable at 0x0012dba0. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(param_1 + 0x68))();
  return;
}



void QueryGlyphExtents(long param_1,short **param_2,ulong param_3,uint *param_4)

{
  uint uVar1;
  short *psVar2;
  uint uVar3;
  ulong uVar4;
  
  *param_4 = (uint)(*(ushort *)(param_1 + 0x12) >> 7) & 3;
  param_4[1] = (int)*(short *)(param_1 + 0x48);
  param_4[2] = (int)*(short *)(param_1 + 0x4a);
  if (param_3 == 0) {
    *(undefined8 *)(param_4 + 3) = 0;
    *(undefined8 *)(param_4 + 5) = 0;
    param_4[7] = 0;
    return;
  }
  psVar2 = *param_2;
  if ((((psVar2[2] != 0) || (psVar2[1] != 0)) || (*psVar2 != 0)) ||
     ((psVar2[3] != 0 || (psVar2[4] != 0)))) {
    param_4[3] = (int)psVar2[3];
    param_4[4] = (int)psVar2[4];
    param_4[6] = (int)*psVar2;
    param_4[7] = (int)psVar2[1];
    param_4[5] = (int)psVar2[2];
  }
  if ((*(byte *)(param_1 + 0x12) & 5) != 5) {
    uVar4 = 1;
    if (1 < param_3) {
      do {
        psVar2 = param_2[uVar4];
        uVar3 = SEXT24(psVar2[3]);
        if (((psVar2[2] != 0) || (psVar2[1] != 0)) ||
           ((*psVar2 != 0 || ((psVar2[3] != 0 || (psVar2[4] != 0)))))) {
          if ((int)uVar3 <= (int)param_4[3]) {
            uVar3 = param_4[3];
          }
          param_4[3] = uVar3;
          uVar3 = (int)psVar2[4];
          if ((int)psVar2[4] < (int)param_4[4]) {
            uVar3 = param_4[4];
          }
          uVar1 = param_4[5];
          param_4[4] = uVar3;
          uVar3 = (int)*psVar2 + uVar1;
          if ((int)param_4[6] < (int)((int)*psVar2 + uVar1)) {
            uVar3 = param_4[6];
          }
          param_4[6] = uVar3;
          uVar3 = (int)psVar2[1] + uVar1;
          if ((int)((int)psVar2[1] + uVar1) < (int)param_4[7]) {
            uVar3 = param_4[7];
          }
          param_4[7] = uVar3;
          param_4[5] = (int)psVar2[2] + uVar1;
        }
        uVar4 = uVar4 + 1;
      } while (param_3 != uVar4);
      return;
    }
    return;
  }
  uVar3 = (int)param_3 * param_4[5];
  param_4[5] = uVar3;
  param_4[7] = param_4[7] + (uVar3 - (int)psVar2[2]);
  return;
}



undefined8 QueryTextExtents(long param_1,long param_2,undefined8 param_3,undefined8 param_4)

{
  byte bVar1;
  short *psVar2;
  void *__ptr;
  undefined8 uVar3;
  ulong uVar4;
  ulong uVar5;
  int iVar6;
  ulong uVar7;
  uint uVar8;
  long in_FS_OFFSET;
  ulong local_60;
  undefined local_58 [8];
  short *local_50;
  undefined local_42;
  undefined local_41;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_50 = (short *)0x0;
  __ptr = malloc(param_2 * 8);
  uVar3 = 0;
  if (__ptr == (void *)0x0) goto LAB_0012dea8;
  uVar8 = (uint)(*(short *)(param_1 + 0xe) != 0) + 2;
  (**(code **)(param_1 + 0x70))(param_1,param_2,param_3,(ulong)uVar8,&local_60,__ptr);
  iVar6 = (int)local_60;
  uVar7 = local_60 & 0xffffffff;
  local_41 = (undefined)*(undefined2 *)(param_1 + 0x10);
  local_42 = (undefined)((ushort)*(undefined2 *)(param_1 + 0x10) >> 8);
  (**(code **)(param_1 + 0x70))(param_1,1,&local_42,(ulong)uVar8,local_58,&local_50);
  if ((local_50 == (short *)0x0) ||
     ((((local_50[3] == 0 && (local_50[4] == 0)) && (*local_50 == 0)) &&
      ((local_50[1] == 0 && (local_50[2] == 0)))))) {
    local_50 = (short *)0x0;
    if (local_60 == 0) goto LAB_0012df4f;
LAB_0012de17:
    uVar5 = 0;
    do {
      psVar2 = *(short **)((long)__ptr + uVar5 * 8);
      uVar4 = SEXT48((int)uVar7);
      if ((psVar2 == (short *)0x0) ||
         (((psVar2[3] == 0 && (psVar2[4] == 0)) &&
          ((*psVar2 == 0 && ((psVar2[1] == 0 && (psVar2[2] == 0)))))))) {
        if (local_50 != (short *)0x0) {
          *(short **)((long)__ptr + uVar5 * 8) = local_50;
          goto LAB_0012de50;
        }
      }
      else {
LAB_0012de50:
        if (local_60 == uVar4) {
          uVar4 = uVar5;
          uVar7 = uVar5 & 0xffffffff;
        }
      }
      uVar5 = uVar5 + 1;
    } while (local_60 != uVar5);
  }
  else {
    if (local_60 != 0) goto LAB_0012de17;
LAB_0012df4f:
    uVar4 = SEXT48(iVar6);
    uVar5 = 0;
  }
  bVar1 = *(byte *)(param_1 + 0x12);
  *(byte *)(param_1 + 0x12) = bVar1 & 0xfb;
  QueryGlyphExtents(param_1,(void *)((long)__ptr + uVar4 * 8),uVar5 - uVar4,param_4);
  *(byte *)(param_1 + 0x12) =
       *(byte *)(param_1 + 0x12) & 0xfb | (byte)(((uint)(bVar1 >> 2) & 1) << 2);
  free(__ptr);
  uVar3 = 1;
LAB_0012dea8:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



ulong ParseGlyphCachingMode(byte *param_1)

{
  long lVar1;
  byte *pbVar2;
  byte *pbVar3;
  bool in_CF;
  bool bVar4;
  bool bVar5;
  bool in_ZF;
  bool bVar6;
  
  lVar1 = 5;
  pbVar2 = param_1;
  pbVar3 = &DAT_00134ae0;
  do {
    if (lVar1 == 0) break;
    lVar1 = lVar1 + -1;
    in_CF = *pbVar2 < *pbVar3;
    in_ZF = *pbVar2 == *pbVar3;
    pbVar2 = pbVar2 + 1;
    pbVar3 = pbVar3 + 1;
  } while (in_ZF);
  bVar4 = false;
  bVar6 = (!in_CF && !in_ZF) == in_CF;
  if (bVar6) {
    DAT_0033c6f4 = 0;
    return 1;
  }
  lVar1 = 4;
  pbVar2 = param_1;
  pbVar3 = &DAT_00134ae5;
  do {
    if (lVar1 == 0) break;
    lVar1 = lVar1 + -1;
    bVar4 = *pbVar2 < *pbVar3;
    bVar6 = *pbVar2 == *pbVar3;
    pbVar2 = pbVar2 + 1;
    pbVar3 = pbVar3 + 1;
  } while (bVar6);
  bVar5 = false;
  bVar4 = (!bVar4 && !bVar6) == bVar4;
  if (bVar4) {
    DAT_0033c6f4 = 2;
    return 1;
  }
  lVar1 = 3;
  pbVar2 = &DAT_00134ae9;
  do {
    if (lVar1 == 0) break;
    lVar1 = lVar1 + -1;
    bVar5 = *param_1 < *pbVar2;
    bVar4 = *param_1 == *pbVar2;
    param_1 = param_1 + 1;
    pbVar2 = pbVar2 + 1;
  } while (bVar4);
  bVar4 = (!bVar5 && !bVar4) == bVar5;
  if (bVar4) {
    DAT_0033c6f4 = 1;
  }
  return (ulong)bVar4;
}



void InitGlyphCaching(void)

{
  glyphCachingMode = DAT_0033c6f4;
  return;
}



void SetGlyphCachingMode(int param_1)

{
  if ((param_1 < glyphCachingMode) && (-1 < param_1)) {
    glyphCachingMode = param_1;
  }
  return;
}



undefined8 add_range(byte *param_1,uint *param_2,byte **param_3,int param_4)

{
  byte bVar1;
  byte bVar2;
  int iVar3;
  undefined8 uVar4;
  ulong uVar5;
  ulong uVar6;
  void *pvVar7;
  int iVar8;
  byte bVar9;
  undefined2 uVar10;
  ulong uVar11;
  ulong uVar12;
  int iVar13;
  byte *pbVar14;
  byte *__src;
  int iVar15;
  ulong uVar16;
  char cVar17;
  undefined2 uVar18;
  byte *__src_00;
  byte *pbVar19;
  byte *__dest;
  byte bVar20;
  uint uVar21;
  ulong uVar22;
  long in_FS_OFFSET;
  uint local_50;
  undefined local_44;
  byte local_43;
  undefined local_42;
  byte local_41;
  long local_40;
  
  bVar1 = *param_1;
  uVar6 = (ulong)bVar1;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar21 = (uint)param_1[2];
  if (param_4 == 0) {
    if (bVar1 != param_1[2]) {
      if (uVar21 < bVar1) {
        uVar4 = 0;
      }
      else {
        do {
          local_43 = param_1[1];
          local_44 = (undefined)uVar6;
          local_41 = param_1[3];
          local_42 = local_44;
          uVar4 = add_range(&local_44,param_2,param_3,0);
          if ((int)uVar4 != 0x55) break;
          uVar21 = (int)uVar6 + 1;
          uVar6 = (ulong)uVar21;
        } while ((int)uVar21 <= (int)(uint)param_1[2]);
      }
      goto LAB_0012e0b0;
    }
    uVar6 = (long)(int)((uint)bVar1 * 0x100 + (uint)param_1[1]);
    uVar22 = (long)(int)((uint)param_1[3] + uVar21 * 0x100);
  }
  else {
    uVar22 = SEXT48((int)((uint)bVar1 * 0x100 + (uint)param_1[1]));
    uVar11 = SEXT48((int)((uint)param_1[3] + uVar21 * 0x100));
    uVar6 = uVar11;
    if (uVar22 <= uVar11) {
      uVar6 = uVar22;
      uVar22 = uVar11;
    }
  }
  local_50 = *param_2;
  iVar8 = local_50 - 1;
  bVar9 = (byte)(uVar6 >> 8);
  bVar20 = (byte)(uVar22 >> 8);
  if (iVar8 < 0) {
    uVar11 = 0;
    iVar13 = 0;
  }
  else {
    iVar15 = 0;
    do {
      while( true ) {
        iVar13 = (iVar8 + iVar15) / 2;
        __src = *param_3 + (long)iVar13 * 4;
        bVar2 = *__src;
        uVar12 = (ulong)bVar2;
        uVar16 = (ulong)(uint)__src[1];
        iVar3 = (uint)bVar2 * 0x100 + (uint)__src[1];
        uVar11 = SEXT48(iVar3);
        if ((iVar3 != 0) && (uVar22 < uVar11 - 1)) break;
        iVar15 = (uint)__src[2] * 0x100 + (uint)__src[3];
        uVar5 = SEXT48(iVar15);
        if (uVar6 <= uVar5 + 1) {
          if ((bVar2 == bVar1) || (param_4 != 0)) {
            if (uVar6 < uVar11) {
              uVar16 = uVar6 & 0xff;
              __src[1] = (byte)uVar6;
              uVar12 = uVar6 >> 8;
              *__src = bVar9;
              uVar11 = SEXT48((int)((int)(uVar6 >> 8) * 0x100 + ((uint)uVar6 & 0xff)));
            }
            uVar10 = (undefined2)uVar11;
            if (uVar5 < uVar22) {
              __src[3] = (byte)uVar22;
              __src[2] = bVar20;
              iVar15 = (int)(uVar22 >> 8) * 0x100 + ((uint)uVar22 & 0xff);
              uVar5 = SEXT48(iVar15);
            }
            uVar18 = (undefined2)uVar5;
            pbVar14 = *param_3;
            __src_00 = pbVar14 + (long)(int)*param_2 * 4;
            cVar17 = (char)uVar12;
            __dest = __src;
            if ((__src < pbVar14) ||
               (uVar6 = uVar12, pbVar19 = __src, (ulong)(long)(iVar15 + 1) < uVar11))
            goto LAB_0012e2e6;
            goto LAB_0012e2bd;
          }
          goto LAB_0012e18c;
        }
        iVar15 = iVar13 + 1;
        if (iVar8 < iVar15) goto LAB_0012e18c;
      }
      iVar8 = iVar13 + -1;
    } while (iVar15 <= iVar8);
  }
LAB_0012e18c:
  if ((local_50 == 0) || (__src = *param_3, __src == (byte *)0x0)) {
    __src = (byte *)malloc(0x40);
    *param_3 = __src;
    *param_2 = 0;
    __src = *param_3;
LAB_0012e3ab:
    if (__src == (byte *)0x0) {
      *param_2 = 0;
      uVar4 = 0x50;
      goto LAB_0012e0b0;
    }
    local_50 = *param_2;
  }
  else {
    if ((local_50 & 0xf) == 0) {
      __src = (byte *)realloc(__src,(long)(int)(local_50 * 4 + 0x40));
      *param_3 = __src;
      goto LAB_0012e3ab;
    }
  }
  __src_00 = __src + (long)iVar13 * 4;
  pbVar14 = __src_00 + 4;
  __dest = pbVar14;
  if ((iVar13 < (int)local_50) && (uVar11 < uVar6)) {
    __dest = __src_00 + 8;
    __src_00 = pbVar14;
  }
  memmove(__dest,__src_00,(size_t)(__src + ((long)(int)local_50 * 4 - (long)__src_00)));
  __src_00[1] = (byte)uVar6;
  __src_00[3] = (byte)uVar22;
  *__src_00 = bVar9;
  uVar4 = 0x55;
  __src_00[2] = bVar20;
  *param_2 = *param_2 + 1;
LAB_0012e0b0:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar4;
LAB_0012e2bd:
  uVar10 = (undefined2)uVar11;
  if ((param_4 == 0) && (__dest = pbVar19, cVar17 != (char)uVar6)) goto LAB_0012e2e6;
  uVar6 = SEXT48((int)(((uint)uVar6 & 0xff) * 0x100 + (uint)pbVar19[1]));
  if (uVar6 < uVar11) {
    uVar11 = uVar6;
  }
  uVar10 = (undefined2)uVar11;
  __dest = pbVar19 + -4;
  if ((__dest < pbVar14) ||
     ((ulong)(long)(int)((uint)pbVar19[-2] * 0x100 + 1 + (uint)pbVar19[-1]) < uVar11))
  goto LAB_0012e2e6;
  uVar6 = (ulong)*__dest;
  pbVar19 = __dest;
  goto LAB_0012e2bd;
LAB_0012e2e6:
  pbVar14 = __src;
  if (__src < __src_00) {
    while( true ) {
      uVar18 = (undefined2)uVar5;
      __src = pbVar14;
      if (((((char)uVar16 != '\0') || ((char)uVar12 != '\0')) &&
          (uVar5 < (ulong)(long)(int)(((uint)uVar12 & 0xff) * 0x100 + -1 + (int)uVar16))) ||
         ((param_4 == 0 && (cVar17 != (char)uVar12)))) break;
      uVar6 = SEXT48((int)((uint)pbVar14[2] * 0x100 + (uint)pbVar14[3]));
      if (uVar5 < uVar6) {
        uVar5 = uVar6;
      }
      uVar18 = (undefined2)uVar5;
      __src = pbVar14 + 4;
      if (__src_00 <= __src) break;
      uVar16 = (ulong)pbVar14[5];
      uVar12 = (ulong)*__src;
      pbVar14 = __src;
    }
  }
  __src = __src + -4;
  if (__dest + 4 != __src) {
    pvVar7 = memmove(__dest + 4,__src,(size_t)(__src_00 + -(long)__src));
    *param_2 = *param_2 - (int)((long)(__src + -(long)pvVar7) >> 2);
  }
  __dest[5] = (byte)uVar10;
  __dest[7] = (byte)uVar18;
  __dest[4] = (byte)((ushort)uVar10 >> 8);
  uVar4 = 0x55;
  __dest[6] = (byte)((ushort)uVar18 >> 8);
  goto LAB_0012e0b0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

char * FUN_0012e480(char *param_1,double *param_2)

{
  char *pcVar1;
  char cVar2;
  char *pcVar3;
  char *pcVar4;
  long in_FS_OFFSET;
  double dVar5;
  char *local_80;
  char local_78 [88];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (_DAT_0033cd60 == (lconv *)0x0) {
    _DAT_0033cd60 = localeconv();
    pcVar3 = _DAT_0033cd60->decimal_point;
    if ((pcVar3 != (char *)0x0) && (*pcVar3 != '\0')) {
      PTR_DAT_0033c708 = pcVar3;
    }
    pcVar3 = _DAT_0033cd60->positive_sign;
    if ((pcVar3 != (char *)0x0) && (*pcVar3 != '\0')) {
      PTR_DAT_0033c700 = pcVar3;
    }
    pcVar3 = _DAT_0033cd60->negative_sign;
    if ((pcVar3 != (char *)0x0) && (*pcVar3 != '\0')) {
      PTR_DAT_0033c6f8 = pcVar3;
    }
  }
  cVar2 = *param_1;
  pcVar3 = local_78;
  local_80 = param_1;
  if (cVar2 != '\0') {
    pcVar1 = param_1 + 1;
    pcVar4 = local_78;
    do {
      local_80 = pcVar1;
      if (cVar2 == '.') {
        *pcVar4 = *PTR_DAT_0033c708;
        cVar2 = *local_80;
      }
      else {
        if (cVar2 == '~') {
          *pcVar4 = *PTR_DAT_0033c6f8;
        }
        else {
          if (cVar2 == '+') {
            *pcVar4 = *PTR_DAT_0033c700;
          }
          else {
            *pcVar4 = cVar2;
          }
        }
        cVar2 = *local_80;
      }
      pcVar3 = pcVar4 + 1;
      if (cVar2 == '\0') break;
      pcVar4 = pcVar4 + 1;
      pcVar1 = local_80 + 1;
      pcVar3 = pcVar4;
    } while (pcVar4 + -(long)local_78 < (char *)0x4f);
  }
  *pcVar3 = '\0';
  dVar5 = strtod(local_78,&local_80);
  *param_2 = dVar5;
  pcVar3 = (char *)0x0;
  if (local_80 != local_78) {
    pcVar3 = param_1 + (long)(local_80 + -(long)local_78);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return pcVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char * FUN_0012e610(char *param_1,uint *param_2,uint param_3)

{
  char cVar1;
  byte bVar2;
  ushort *puVar3;
  ushort **ppuVar4;
  long lVar5;
  int iVar6;
  ulong uVar7;
  uint uVar8;
  char *pcVar9;
  undefined8 *puVar10;
  
  puVar10 = (undefined8 *)(param_2 + 2);
  if ((param_3 == 3) || (puVar10 = (undefined8 *)(param_2 + 10), param_3 == 0xc)) {
    ppuVar4 = __ctype_b_loc();
    while( true ) {
      cVar1 = *param_1;
      uVar7 = SEXT18(cVar1);
      if ((*(byte *)((long)*ppuVar4 + uVar7 * 2 + 1) & 0x20) == 0) break;
      param_1 = param_1 + 1;
    }
    if (cVar1 == '[') {
      lVar5 = FUN_0012e480(param_1 + 1,puVar10);
      if ((((lVar5 != 0) && (lVar5 = FUN_0012e480(lVar5,puVar10 + 1), lVar5 != 0)) &&
          (lVar5 = FUN_0012e480(lVar5,puVar10 + 2), lVar5 != 0)) &&
         (pcVar9 = (char *)FUN_0012e480(lVar5,puVar10 + 3), pcVar9 != (char *)0x0)) {
        cVar1 = *pcVar9;
        puVar3 = *ppuVar4;
        bVar2 = *(byte *)((long)puVar3 + (long)cVar1 * 2 + 1);
        while ((bVar2 & 0x20) != 0) {
          pcVar9 = pcVar9 + 1;
          cVar1 = *pcVar9;
          bVar2 = *(byte *)((long)puVar3 + (long)cVar1 * 2 + 1);
        }
        if (cVar1 == ']') {
          cVar1 = pcVar9[1];
          pcVar9 = pcVar9 + 1;
          bVar2 = *(byte *)((long)puVar3 + (long)cVar1 * 2 + 1);
          while ((bVar2 & 0x20) != 0) {
            pcVar9 = pcVar9 + 1;
            cVar1 = *pcVar9;
            bVar2 = *(byte *)((long)puVar3 + (long)cVar1 * 2 + 1);
          }
          if (cVar1 == '-') {
            uVar8 = *param_2 | 8;
            if (param_3 != 0xc) {
              uVar8 = *param_2 | 2;
            }
            *param_2 = uVar8;
            return pcVar9;
          }
        }
      }
    }
    else {
      if (cVar1 == '*') {
        if (param_1[1] == '-') {
          uVar8 = ~param_3 & *param_2 | 0x10;
          if (param_3 == 0xc) {
            uVar8 = ~param_3 & *param_2 | 0x20;
          }
          *param_2 = uVar8;
          return param_1 + 1;
        }
      }
      else {
        iVar6 = 0;
        if ((byte)(cVar1 - 0x30U) < 10) {
          do {
            param_1 = param_1 + 1;
            iVar6 = (int)uVar7 + -0x30 + iVar6 * 10;
            cVar1 = *param_1;
            uVar7 = (ulong)(uint)(int)cVar1;
          } while ((byte)(cVar1 - 0x30U) < 10);
          if (cVar1 == '-') {
            *param_2 = *param_2 & ~param_3;
            if (iVar6 != 0) {
              *(double *)(puVar10 + 3) = (double)iVar6;
              if (param_3 == 0xc) {
                *(double *)(puVar10 + 3) = (double)iVar6 / 10.00000000;
                *param_2 = *param_2 | 4;
              }
              else {
                *param_2 = *param_2 | 1;
              }
              puVar10[2] = 0;
              puVar10[1] = 0;
              *puVar10 = puVar10[3];
            }
            return param_1;
          }
        }
        else {
          if (cVar1 == '-') {
            *param_2 = *param_2 & ~param_3;
            return param_1;
          }
        }
      }
    }
  }
  return (char *)0;
}



double xlfd_round_double(double param_1)

{
  uint uVar1;
  ulong uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  long in_FS_OFFSET;
  double local_20;
  
  local_20 = param_1;
  if (param_1 != 0.00000000) {
    uVar2 = (ulong)param_1 & 0xffff00ffffffffff;
    uVar1 = (uint)((ulong)param_1 >> 0x20);
    uVar3 = (uVar1 >> 0x18) << 4;
    uVar4 = (uint)((byte)((ulong)param_1 >> 0x34) & 0xf);
    if (((uVar1 >> 8 & 0xff) + 8 & 0x100) != 0) {
      uVar5 = (uVar1 >> 0x10) + 1;
      uVar2 = (ulong)param_1 & 0xff0000ffffffffff | (ulong)(byte)uVar5 << 0x30;
      if (((char)((ulong)((uVar1 >> 0x10 & 0xff) + 1) >> 8) != '\0') &&
         ((uVar5 & 0xf0) != uVar4 << 4)) {
        uVar3 = (uVar3 & 0x7ff | uVar4) + 1 | uVar3 & 0x800;
        uVar2 = ((ulong)(uVar5 & 0xf | uVar3 << 4) & 0xff) << 0x30 |
                (ulong)(uint)((int)uVar3 >> 4) << 0x38;
      }
    }
    local_20 = (double)(uVar2 & 0xfffff80000000000 | (ulong)((uVar1 >> 8) + 8 & 0xf8) << 0x28);
  }
  if (*(long *)(in_FS_OFFSET + 0x28) != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return local_20;
}



undefined8 FontParseXLFDName(char *param_1,undefined8 *param_2,int param_3)

{
  undefined *puVar1;
  char cVar2;
  byte bVar3;
  uint uVar4;
  char cVar5;
  uint uVar6;
  char *local_558;
  char *__src;
  char *__s;
  char *pcVar7;
  char *__s_00;
  void *pvVar8;
  undefined2 *puVar9;
  uint uVar10;
  long lVar11;
  ulong uVar12;
  size_t __n;
  long lVar13;
  undefined8 *puVar14;
  char *pcVar15;
  char *pcVar16;
  int iVar17;
  long in_FS_OFFSET;
  byte bVar18;
  double dVar19;
  undefined8 uVar20;
  undefined8 uVar21;
  int local_538;
  undefined8 local_518 [4];
  double local_4f8;
  undefined8 local_4f0;
  undefined8 local_4e8;
  undefined8 local_4e0;
  double local_4d8;
  int local_4d0;
  int local_4cc;
  uint local_4c8;
  uint local_4c4;
  uint local_4c0;
  undefined local_498 [79];
  char acStack1097 [1033];
  long local_40;
  
  bVar18 = 0;
  lVar11 = 0xf;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  puVar14 = (undefined8 *)local_518;
  while (lVar11 != 0) {
    lVar11 = lVar11 + -1;
    *puVar14 = 0;
    puVar14 = puVar14 + 1;
  }
  if (param_3 != 3) {
    lVar11 = 0xf;
    puVar14 = param_2;
    while (lVar11 != 0) {
      lVar11 = lVar11 + -1;
      *puVar14 = 0;
      puVar14 = puVar14 + 1;
    }
  }
  local_558 = param_1 + 1;
  if (*param_1 == '-') {
LAB_0012ea2a:
    local_558 = strchr(local_558,0x2d);
    if ((local_558 != (char *)0x0) &&
       (local_558 = strchr(local_558 + 1,0x2d), local_558 != (char *)0x0)) {
      __s_00 = local_558 + 1;
      __src = strchr(__s_00,0x2d);
      if ((__src != (char *)0x0) &&
         ((((__src = strchr(__src + 1,0x2d), __src != (char *)0x0 &&
            (__src = strchr(__src + 1,0x2d), __src != (char *)0x0)) &&
           (__src = strchr(__src + 1,0x2d), __src != (char *)0x0)) &&
          ((lVar11 = FUN_0012e610(__src + 1,local_518,3), lVar11 != 0 &&
           (lVar11 = FUN_0012e610(lVar11 + 1,local_518,0xc), lVar11 != 0)))))) {
        if (*(char *)(lVar11 + 1) == '*') {
          local_4c8 = 0xffffffff;
          __src = (char *)(lVar11 + 2);
          cVar5 = *(char *)(lVar11 + 2);
        }
        else {
          __src = (char *)(lVar11 + 1);
          local_4c8 = 0;
          cVar5 = *(char *)(lVar11 + 1);
          if ((byte)(cVar5 - 0x30U) < 10) {
            local_4c8 = 0;
            do {
              __src = __src + 1;
              local_4c8 = (int)cVar5 + -0x30 + local_4c8 * 10;
              cVar5 = *__src;
            } while ((byte)(cVar5 - 0x30U) < 10);
          }
        }
        if (cVar5 == '-') {
          if (__src[1] == '*') {
            local_4c4 = 0xffffffff;
            pcVar15 = __src + 2;
            cVar5 = __src[2];
          }
          else {
            local_4c4 = 0;
            cVar5 = __src[1];
            pcVar15 = __src + 1;
            if ((byte)(cVar5 - 0x30U) < 10) {
              local_4c4 = 0;
              do {
                pcVar15 = pcVar15 + 1;
                local_4c4 = (int)cVar5 + -0x30 + local_4c4 * 10;
                cVar5 = *pcVar15;
              } while ((byte)(cVar5 - 0x30U) < 10);
            }
          }
          if ((cVar5 == '-') && (__src = strchr(pcVar15 + 1,0x2d), __src != (char *)0x0)) {
            if (__src[1] == '*') {
              local_4c0 = 0xffffffff;
              pcVar16 = __src + 2;
              cVar5 = __src[2];
            }
            else {
              pcVar16 = __src + 1;
              local_4c0 = 0;
              cVar5 = __src[1];
              if ((byte)(cVar5 - 0x30U) < 10) {
                local_4c0 = 0;
                do {
                  pcVar16 = pcVar16 + 1;
                  local_4c0 = (int)cVar5 + -0x30 + local_4c0 * 10;
                  cVar5 = *pcVar16;
                } while ((byte)(cVar5 - 0x30U) < 10);
              }
            }
            if (((cVar5 == '-') && (__s = strchr(pcVar16 + 1,0x2d), __s != (char *)0x0)) &&
               (__s = strchr(__s + 1,0x2d), __s == (char *)0x0)) {
              if (param_3 != 0) {
                __s = strrchr(param_1,0x2d);
                __s = strchr(__s,0x5b);
                if (__s != (char *)0x0) {
                  local_518[0]._0_4_ = (uint)local_518[0] | 0x40;
                  *__s = '\0';
                }
              }
              if (local_4f8 < 0.00000000) {
                dVar19 = local_4f8 - 0.50000000;
              }
              else {
                dVar19 = local_4f8 + 0.50000000;
              }
              local_4d0 = (int)dVar19;
              if (local_4d8 < 0.00000000) {
                dVar19 = local_4d8 * 10.00000000 - 0.50000000;
              }
              else {
                dVar19 = local_4d8 * 10.00000000 + 0.50000000;
              }
              local_4cc = (int)dVar19;
              uVar6 = ((int)__src - (int)pcVar15) + 1;
              if (param_3 == 1) {
                cVar5 = '*';
LAB_0012f219:
                puVar1 = acStack1097 + 1;
                __strcpy_chk(dVar19,0x3fe0000000000000,0,puVar1,lVar11,0x400);
                local_558 = strchr(__s_00,0x2d);
                local_558 = strchr(local_558 + 1,0x2d);
                local_558 = strchr(local_558 + 1,0x2d);
                __s_00 = strchr(local_558 + 1,0x2d);
                uVar12 = 0xffffffffffffffff;
                local_558 = pcVar16 + (long)(puVar1 + -lVar11);
                do {
                  if (uVar12 == 0) break;
                  uVar12 = uVar12 - 1;
                  cVar2 = *local_558;
                  local_558 = local_558 + (ulong)bVar18 * -2 + 1;
                } while (cVar2 != '\0');
                __n = SEXT48((int)uVar6);
                if ((char *)0x3ff < __s_00 + ~uVar12 + __n + (10 - (long)param_1))
                goto LAB_0012e9ec;
                __s_00[1] = cVar5;
                __s_00[2] = '-';
                __s_00[3] = cVar5;
                *(undefined4 *)(__s_00 + 4) = 0x2a2d2a2d;
                if ((int)uVar6 < 3) {
                  local_558 = __s_00 + 0xb;
                  *(undefined2 *)(__s_00 + 8) = 0x2a2d;
                  __s_00[10] = '-';
                }
                else {
                  pvVar8 = memcpy(__s_00 + 8,pcVar15 + (long)(puVar1 + -lVar11),__n);
                  local_558 = (char *)((long)pvVar8 + __n);
                }
                *local_558 = cVar5;
                memcpy(local_558 + 1,pcVar16 + (long)(puVar1 + -lVar11),~uVar12);
LAB_0012f1e2:
                lVar11 = 0x1e;
                puVar14 = (undefined8 *)local_518;
                while (lVar11 != 0) {
                  lVar11 = lVar11 + -1;
                  *(undefined4 *)param_2 = *(undefined4 *)puVar14;
                  puVar14 = (undefined8 *)((long)puVar14 + (ulong)bVar18 * -8 + 4);
                  param_2 = (undefined8 *)((long)param_2 + (ulong)bVar18 * -8 + 4);
                }
              }
              else {
                if (param_3 < 2) {
                  if (param_3 == 0) goto LAB_0012f1e2;
                }
                else {
                  if (param_3 == 2) {
                    cVar5 = '0';
                    goto LAB_0012f219;
                  }
                  if (param_3 == 3) {
                    uVar10 = *(uint *)param_2 & 3;
                    if (uVar10 != 0) {
                      local_518[1] = param_2[1];
                      local_518[2] = param_2[2];
                      local_518[0]._0_4_ = (uint)local_518[0] & 0xfffffffc | uVar10;
                      local_518[3] = param_2[3];
                      local_4f8 = (double)param_2[4];
                    }
                    uVar10 = *(uint *)param_2 & 0xc;
                    if (uVar10 != 0) {
                      local_4f0 = param_2[5];
                      local_4e8 = param_2[6];
                      local_518[0]._0_4_ = uVar10 | (uint)local_518[0] & 0xfffffff3;
                      local_4e0 = param_2[7];
                      local_4d8 = (double)param_2[8];
                    }
                    if (-1 < (int)*(uint *)(param_2 + 10)) {
                      local_4c8 = *(uint *)(param_2 + 10);
                    }
                    if (-1 < (int)*(uint *)((long)param_2 + 0x54)) {
                      local_4c4 = *(uint *)((long)param_2 + 0x54);
                    }
                    uVar10 = *(uint *)(param_2 + 0xb);
                    uVar4 = uVar10;
                    if (((int)uVar10 < 0) && (uVar4 = local_4c0, uVar10 != 0xffffffff)) {
                      uVar4 = -uVar10;
                    }
                    local_4c0 = uVar4;
                    __src = acStack1097 + 1;
                    uVar20 = 0x12edf9;
                    __s = strchr(__s_00,0x2d);
                    __s = __s + -(long)__s_00;
                    local_558 = local_558 + (long)(int)__s + 2;
                    __sprintf_chk(__src,1,0x400,"%*.*s",(ulong)__s & 0xffffffff,
                                  (ulong)__s & 0xffffffff,__s_00,uVar20);
                    pcVar7 = strchr(local_558,0x2d);
                    pcVar7 = pcVar7 + -(long)local_558;
                    uVar12 = 0xffffffffffffffff;
                    __s = __src;
                    do {
                      if (uVar12 == 0) break;
                      uVar12 = uVar12 - 1;
                      cVar5 = *__s;
                      __s = __s + (ulong)bVar18 * -2 + 1;
                    } while (cVar5 != '\0');
                    __sprintf_chk(acStack1097 + ~uVar12,1,0xffffffffffffffff,&DAT_00134af8,
                                  (ulong)pcVar7 & 0xffffffff,(ulong)pcVar7 & 0xffffffff,local_558,
                                  uVar20);
                    local_538 = (int)pcVar7;
                    local_558 = local_558 + (long)local_538 + 1;
                    pcVar7 = strchr(local_558,0x2d);
                    uVar12 = 0xffffffffffffffff;
                    pcVar7 = pcVar7 + -(long)local_558;
                    __s = __src;
                    do {
                      if (uVar12 == 0) break;
                      uVar12 = uVar12 - 1;
                      cVar5 = *__s;
                      __s = __s + (ulong)bVar18 * -2 + 1;
                    } while (cVar5 != '\0');
                    __sprintf_chk(acStack1097 + ~uVar12,1,0xffffffffffffffff,&DAT_00134af8,
                                  (ulong)pcVar7 & 0xffffffff,(ulong)pcVar7 & 0xffffffff,local_558);
                    local_538 = (int)pcVar7;
                    local_558 = local_558 + (long)local_538 + 1;
                    pcVar7 = strchr(local_558,0x2d);
                    uVar12 = 0xffffffffffffffff;
                    __s = __src;
                    do {
                      if (uVar12 == 0) break;
                      uVar12 = uVar12 - 1;
                      cVar5 = *__s;
                      __s = __s + (ulong)bVar18 * -2 + 1;
                    } while (cVar5 != '\0');
                    __sprintf_chk(acStack1097 + ~uVar12,1,0xffffffffffffffff,&DAT_00134af8,
                                  pcVar7 + -(long)local_558,
                                  (ulong)(pcVar7 + -(long)local_558) & 0xffffffff);
                    uVar12 = 0xffffffffffffffff;
                    __s = __src;
                    do {
                      if (uVar12 == 0) break;
                      uVar12 = uVar12 - 1;
                      cVar5 = *__s;
                      __s = __s + (ulong)bVar18 * -2 + 1;
                    } while (cVar5 != '\0');
                    uVar12 = ~uVar12;
                    *(undefined2 *)(acStack1097 + uVar12) = 0x2d;
                    if (((uint)local_518[0] & 3) == 2) {
                      *(undefined2 *)(acStack1097 + uVar12 + 1) = 0x5b;
                      uVar20 = entry(local_518[1],local_498,0,(ulong)((uint)local_518[0] & 3),
                                     local_558);
                      __strcat_chk(__src,uVar20,0x400);
                      uVar20 = entry(local_518[2],local_498,1);
                      __strcat_chk(__src,uVar20,0x400);
                      uVar20 = entry(local_518[3],local_498,1);
                      __strcat_chk(__src,uVar20,0x400);
                      uVar20 = entry(local_4f8,local_498,1);
                      uVar12 = 0xffffffffffffffff;
                      local_558 = __src;
                      do {
                        if (uVar12 == 0) break;
                        uVar12 = uVar12 - 1;
                        cVar5 = *local_558;
                        local_558 = local_558 + (ulong)bVar18 * -2 + 1;
                      } while (cVar5 != '\0');
                      puVar9 = (undefined2 *)
                               __stpcpy_chk(acStack1097 + ~uVar12,uVar20,0x400,~uVar12);
                      *puVar9 = 0x5d;
                    }
                    else {
                      __sprintf_chk(acStack1097 + uVar12 + 1,1,0xffffffffffffffff,0x130b3b);
                    }
                    uVar12 = 0xffffffffffffffff;
                    local_558 = __src;
                    do {
                      if (uVar12 == 0) break;
                      uVar12 = uVar12 - 1;
                      cVar5 = *local_558;
                      local_558 = local_558 + (ulong)bVar18 * -2 + 1;
                    } while (cVar5 != '\0');
                    uVar12 = ~uVar12;
                    *(undefined2 *)(acStack1097 + uVar12) = 0x2d;
                    if (((uint)local_518[0] & 0xc) == 8) {
                      *(undefined2 *)(acStack1097 + uVar12 + 1) = 0x5b;
                      uVar20 = entry(local_4f0,0x3fe0000000000000,local_498,0);
                      __strcat_chk(__src,uVar20,0x400);
                      uVar20 = entry(local_4e8,local_498,1);
                      __strcat_chk(__src,uVar20,0x400);
                      uVar20 = entry(local_4e0,local_498,1);
                      __strcat_chk(__src,uVar20,0x400);
                      uVar20 = entry(local_4d8,local_498,1);
                      uVar12 = 0xffffffffffffffff;
                      local_558 = __src;
                      do {
                        if (uVar12 == 0) break;
                        uVar12 = uVar12 - 1;
                        cVar5 = *local_558;
                        local_558 = local_558 + (ulong)bVar18 * -2 + 1;
                      } while (cVar5 != '\0');
                      uVar21 = 0x12f514;
                      puVar9 = (undefined2 *)
                               __stpcpy_chk(acStack1097 + ~uVar12,uVar20,0x400,~uVar12);
                      *puVar9 = 0x5d;
                    }
                    else {
                      uVar21 = 0x12f002;
                      __sprintf_chk(acStack1097 + uVar12 + 1,1,0xffffffffffffffff,0x130b3b,
                                    (ulong)(uint)(int)(local_4d8 * 10.00000000 + 0.50000000));
                    }
                    uVar12 = 0xffffffffffffffff;
                    local_558 = __src;
                    do {
                      if (uVar12 == 0) break;
                      uVar12 = uVar12 - 1;
                      cVar5 = *local_558;
                      local_558 = local_558 + (ulong)bVar18 * -2 + 1;
                    } while (cVar5 != '\0');
                    __sprintf_chk(acStack1097 + ~uVar12,1,0xffffffffffffffff,"-%d-%d%*.*s%d%s",
                                  (ulong)local_4c8,(ulong)local_4c4,(ulong)uVar6,(ulong)uVar6,
                                  pcVar15,(ulong)local_4c0,pcVar16,uVar21);
                    strcpy(__s_00,__src);
                    if ((*(byte *)param_2 & 0x40) == 0) {
                      iVar17 = *(int *)(param_2 + 0xd);
                      lVar11 = param_2[0xe];
                      uVar20 = 1;
                      if (iVar17 == 0) goto LAB_0012e9ee;
                    }
                    else {
                      iVar17 = *(int *)(param_2 + 0xd);
                      if (iVar17 == 0) {
                        strcat(param_1,"[]");
                        uVar20 = 1;
                        goto LAB_0012e9ee;
                      }
                      lVar11 = param_2[0xe];
                    }
                    lVar13 = 0;
                    strcat(param_1,"[");
                    while ((int)lVar13 < iVar17) {
                      uVar12 = 0xffffffffffffffff;
                      local_558 = param_1;
                      do {
                        if (uVar12 == 0) break;
                        uVar12 = uVar12 - 1;
                        cVar5 = *local_558;
                        local_558 = local_558 + (ulong)bVar18 * -2 + 1;
                      } while (cVar5 != '\0');
                      if (0x3f1 < ~uVar12 - 1) break;
                      if ((int)lVar13 != 0) {
                        *(undefined2 *)(param_1 + (~uVar12 - 1)) = 0x20;
                      }
                      uVar12 = 0xffffffffffffffff;
                      local_558 = param_1;
                      do {
                        if (uVar12 == 0) break;
                        uVar12 = uVar12 - 1;
                        cVar5 = *local_558;
                        local_558 = local_558 + (ulong)bVar18 * -2 + 1;
                      } while (cVar5 != '\0');
                      __sprintf_chk(param_1 + (~uVar12 - 1),1,0xffffffffffffffff,0x130b3b,
                                    (ulong)((uint)*(byte *)(lVar11 + lVar13 * 4) * 0x100 +
                                           (uint)*(byte *)(lVar11 + 1 + lVar13 * 4)));
                      bVar3 = *(byte *)(lVar11 + 3 + lVar13 * 4);
                      if ((*(byte *)(lVar11 + 1 + lVar13 * 4) != bVar3) ||
                         (*(char *)(lVar11 + lVar13 * 4) != *(char *)(lVar11 + 2 + lVar13 * 4))) {
                        uVar12 = 0xffffffffffffffff;
                        local_558 = param_1;
                        do {
                          if (uVar12 == 0) break;
                          uVar12 = uVar12 - 1;
                          cVar5 = *local_558;
                          local_558 = local_558 + (ulong)bVar18 * -2 + 1;
                        } while (cVar5 != '\0');
                        __sprintf_chk(param_1 + (~uVar12 - 1),1,0xffffffffffffffff,&DAT_00134b14,
                                      (ulong)((uint)*(byte *)(lVar11 + 2 + lVar13 * 4) * 0x100 +
                                             (uint)bVar3));
                      }
                      lVar13 = lVar13 + 1;
                    }
                    strcat(param_1,"]");
                    uVar20 = 1;
                    goto LAB_0012e9ee;
                  }
                }
              }
              uVar20 = 1;
              goto LAB_0012e9ee;
            }
          }
        }
      }
    }
  }
  else {
    if ((*param_1 == '*') && (param_1[1] == '-')) {
      local_558 = param_1 + 2;
      goto LAB_0012ea2a;
    }
  }
LAB_0012e9ec:
  uVar20 = 0;
LAB_0012e9ee:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar20;
}



undefined8 FontParseRanges(char *param_1,undefined4 *param_2)

{
  char cVar1;
  char *__s;
  ulong uVar2;
  undefined8 uVar3;
  int iVar4;
  char *__nptr;
  long in_FS_OFFSET;
  undefined local_54;
  undefined local_53;
  undefined local_52;
  undefined local_51;
  char *local_50;
  undefined8 local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_48 = 0;
  __s = strchr(param_1,0x2d);
  if (__s == (char *)0x0) {
    *param_2 = 0;
  }
  else {
    iVar4 = 1;
    do {
      iVar4 = iVar4 + 1;
      __s = strchr(__s + 1,0x2d);
      if (__s == (char *)0x0) break;
    } while (iVar4 < 0xe);
    *param_2 = 0;
    if ((__s != (char *)0x0) && (__s = strchr(__s,0x5b), __s != (char *)0x0)) {
      __nptr = __s + 1;
      if ((__s[1] != ']') && (__s[1] != '\0')) {
        while ((uVar2 = strtol(__nptr,&local_50,0), uVar3 = local_48, uVar2 < 0x10000 &&
               (local_50 != __nptr))) {
          local_53 = (undefined)uVar2;
          local_54 = (undefined)(uVar2 >> 8);
          cVar1 = *local_50;
          __nptr = local_50;
          local_52 = local_54;
          local_51 = local_53;
          if ((cVar1 == ']') || (cVar1 == ' ')) {
            while (cVar1 == ' ') {
              cVar1 = __nptr[1];
              __nptr = __nptr + 1;
            }
LAB_0012f6a1:
            iVar4 = add_range(&local_54,param_2,&local_48,1);
            uVar3 = local_48;
            if (iVar4 != 0x55) break;
          }
          else {
            if (((cVar1 != '_') ||
                (__s = local_50 + 1, uVar2 = strtol(__s,&local_50,0), uVar3 = local_48,
                local_50 == __s)) || (0xffff < uVar2)) break;
            local_51 = (undefined)uVar2;
            local_52 = (undefined)(uVar2 >> 8);
            cVar1 = *local_50;
            __nptr = local_50;
            if ((cVar1 == ']') || (cVar1 == ' ')) {
              while (cVar1 == ' ') {
                cVar1 = __nptr[1];
                __nptr = __nptr + 1;
              }
              goto LAB_0012f6a1;
            }
          }
          uVar3 = local_48;
          if ((*__nptr == '\0') || (*__nptr == ']')) break;
        }
        goto LAB_0012f6c5;
      }
    }
  }
  uVar3 = 0;
LAB_0012f6c5:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



undefined8
CheckFSFormat(ulong param_1,ulong param_2,uint *param_3,uint *param_4,uint *param_5,uint *param_6,
             uint *param_7)

{
  uint uVar1;
  uint uVar2;
  
  if ((param_2 & 2) != 0) {
    *param_3 = (uint)((param_1 & 0xffffffff) >> 1) & 1;
  }
  uVar1 = (uint)param_1;
  if ((param_2 & 1) != 0) {
    *param_4 = uVar1 & 1;
  }
  if ((param_2 & 0x10) != 0) {
    uVar2 = uVar1 & 0x3000;
    if (uVar2 == 0x1000) {
      *param_5 = 2;
    }
    else {
      if (uVar2 == 0x2000) {
        *param_5 = 4;
      }
      else {
        if ((param_1 & 0x3000) != 0) {
          *param_5 = uVar2;
          return 0x58;
        }
        *param_5 = 1;
      }
    }
  }
  if ((param_2 & 8) != 0) {
    uVar2 = uVar1 & 0x300;
    if (uVar2 == 0x100) {
      *param_6 = 2;
    }
    else {
      if (uVar2 == 0x200) {
        *param_6 = 4;
      }
      else {
        if ((param_1 & 0x300) != 0) {
          *param_6 = uVar2;
          return 0x58;
        }
        *param_6 = 1;
      }
    }
  }
  if ((param_2 & 4) != 0) {
    *param_7 = uVar1 & 0xc;
    if (((param_1 & 8) != 0) && ((uVar1 & 0xc) != 8)) {
      return 0x58;
    }
  }
  return 0x55;
}



void register_fpe_functions(void)

{
  BuiltinRegisterFpeFunctions();
  FontFileRegisterFpeFunctions();
                    // WARNING: Treating indirect jump as call
  fs_register_fpe_functions();
  return;
}



void EmptyFontPatternCache(undefined8 *param_1)

{
  undefined8 *puVar1;
  undefined8 *puVar2;
  
  puVar1 = param_1;
  do {
    *puVar1 = 0;
    puVar1 = puVar1 + 1;
  } while (puVar1 != param_1 + 0x10);
  puVar1 = param_1 + 0x16;
  do {
    puVar1[-5] = 0;
    puVar1[-1] = 0;
    *(undefined8 **)(puVar1 + -6) = puVar1;
    puVar2 = puVar1 + 6;
    free((void *)puVar1[-3]);
    puVar1[-3] = 0;
    *(undefined2 *)(puVar1 + -4) = 0;
    puVar1 = puVar2;
  } while (puVar2 != param_1 + 0x196);
  *(undefined8 **)(param_1 + 400) = param_1 + 0x10;
  param_1[0x18a] = 0;
  return;
}



void * MakeFontPatternCache(void)

{
  void *pvVar1;
  undefined2 *puVar2;
  
  pvVar1 = malloc(0xc88);
  if (pvVar1 != (void *)0x0) {
    puVar2 = (undefined2 *)((long)pvVar1 + 0x90);
    do {
      *(undefined8 *)(puVar2 + 4) = 0;
      *(undefined8 *)(puVar2 + 0xc) = 0;
      *puVar2 = 0;
      puVar2 = puVar2 + 0x18;
    } while (puVar2 != (undefined2 *)((long)pvVar1 + 0xc90));
    EmptyFontPatternCache(pvVar1);
  }
  return pvVar1;
}



void FreeFontPatternCache(void *param_1)

{
  void *__ptr;
  void **ppvVar1;
  
  ppvVar1 = (void **)((long)param_1 + 0x98);
  do {
    __ptr = *ppvVar1;
    ppvVar1 = ppvVar1 + 6;
    free(__ptr);
  } while (ppvVar1 != (void **)((long)param_1 + 0xc98));
  free(param_1);
  return;
}



void CacheFontPattern(long param_1,char *param_2,uint param_3,long param_4)

{
  long **pplVar1;
  long *plVar2;
  void *__dest;
  ulong uVar3;
  long lVar4;
  long lVar5;
  uint uVar6;
  char *pcVar7;
  long *plVar8;
  
  __dest = malloc((long)(int)param_3);
  if (__dest != (void *)0x0) {
    plVar8 = *(long **)(param_1 + 0xc80);
    if (plVar8 == (long *)0x0) {
      uVar6 = rand();
      uVar3 = (ulong)((uVar6 ^ (int)uVar6 >> 0x1f) - ((int)uVar6 >> 0x1f) & 0x3f);
      lVar5 = uVar3 * 0x30;
      plVar8 = (long *)(param_1 + 0x80 + lVar5);
      lVar5 = lVar5 + param_1;
      lVar4 = *(long *)(lVar5 + 0x80);
      if (lVar4 != 0) {
        *(undefined8 *)(lVar4 + 8) = *(undefined8 *)(lVar5 + 0x88);
        lVar4 = *(long *)(lVar5 + 0x80);
      }
      lVar5 = uVar3 * 0x30 + param_1;
      **(long **)(lVar5 + 0x88) = lVar4;
      free(*(void **)(lVar5 + 0x98));
    }
    else {
      *(long *)(param_1 + 0xc80) = *plVar8;
    }
    memcpy(__dest,param_2,(long)(int)param_3);
    *(void **)(plVar8 + 3) = __dest;
    *(short *)(plVar8 + 2) = (short)param_3;
    if (param_3 == 0) {
      uVar3 = 0;
      lVar4 = param_1;
    }
    else {
      uVar6 = 0;
      pcVar7 = param_2;
      do {
        pcVar7 = pcVar7 + 1;
        uVar6 = uVar6 * 2 ^ (int)*pcVar7;
        pcVar7 = pcVar7;
      } while (pcVar7 != param_2 + (ulong)(param_3 - 1) + 1);
      param_3 = (uVar6 ^ (int)uVar6 >> 0x1f) - ((int)uVar6 >> 0x1f);
      uVar3 = (ulong)(param_3 & 0xf);
      lVar4 = param_1 + uVar3 * 8;
    }
    pplVar1 = (long **)(param_1 + uVar3 * 8);
    *(uint *)(plVar8 + 4) = param_3;
    plVar2 = *pplVar1;
    *(long **)plVar8 = plVar2;
    if (plVar2 != (long *)0x0) {
      *(long **)(plVar2 + 1) = plVar8;
    }
    *pplVar1 = plVar8;
    plVar8[1] = lVar4;
    plVar8[5] = param_4;
  }
  return;
}



undefined8 FindCachedFontPattern(long param_1,char *param_2,int param_3)

{
  undefined8 *puVar1;
  uint uVar2;
  int iVar3;
  char *pcVar4;
  uint uVar5;
  
  if (param_3 == 0) {
    uVar5 = 0;
    uVar2 = 0;
  }
  else {
    uVar2 = 0;
    pcVar4 = param_2;
    do {
      pcVar4 = pcVar4 + 1;
      uVar2 = uVar2 * 2 ^ (int)*pcVar4;
      pcVar4 = pcVar4;
    } while (pcVar4 != param_2 + (ulong)(param_3 - 1) + 1);
    uVar5 = (uVar2 ^ (int)uVar2 >> 0x1f) - ((int)uVar2 >> 0x1f);
    uVar2 = uVar5 & 0xf;
  }
  puVar1 = *(undefined8 **)(param_1 + (long)(int)uVar2 * 8);
  while( true ) {
    if (puVar1 == (undefined8 *)0x0) {
      return 0;
    }
    if ((((int)*(short *)(puVar1 + 2) == param_3) && (*(uint *)(puVar1 + 4) == uVar5)) &&
       (iVar3 = memcmp((void *)puVar1[3],param_2,(long)*(short *)(puVar1 + 2)), iVar3 == 0)) break;
    puVar1 = (undefined8 *)*puVar1;
  }
  return puVar1[5];
}



void RemoveCachedFontPattern(long param_1,long param_2)

{
  long lVar1;
  long *plVar2;
  long *plVar3;
  
  plVar2 = (long *)(param_1 + 0x80);
  do {
    while (plVar2[5] != param_2) {
      plVar2 = plVar2 + 6;
      if (plVar2 == (long *)(param_1 + 0xc80)) {
        return;
      }
    }
    lVar1 = *plVar2;
    plVar2[5] = 0;
    if (lVar1 != 0) {
      *(long *)(lVar1 + 8) = plVar2[1];
      lVar1 = *plVar2;
    }
    *(long *)plVar2[1] = lVar1;
    *plVar2 = *(long *)(param_1 + 0xc80);
    *(long **)(param_1 + 0xc80) = plVar2;
    plVar3 = plVar2 + 6;
    free((void *)plVar2[3]);
    plVar2[3] = 0;
    plVar2 = plVar3;
  } while (plVar3 != (long *)(param_1 + 0xc80));
  return;
}



void AllocateFontPrivateIndex(void)

{
  DAT_0033cd68 = DAT_0033cd68 + 1;
  return;
}



void CreateFontRec(void)

{
  int iVar1;
  void *pvVar2;
  
  iVar1 = DAT_0033cd68;
  pvVar2 = calloc((long)(DAT_0033cd68 * 8 + 0xb8),1);
  if ((pvVar2 != (void *)0x0) && (*(int *)((long)pvVar2 + 0xa8) = iVar1 + -1, iVar1 != 0)) {
    *(long *)((long)pvVar2 + 0xb0) = (long)pvVar2 + 0xb8;
  }
  return;
}



void DestroyFontRec(void *param_1)

{
  void *__ptr;
  
  __ptr = *(void **)((long)param_1 + 0xb0);
  if ((__ptr != (void *)0x0) && (__ptr != (void *)((long)param_1 + 0xb8))) {
    free(__ptr);
  }
  free(param_1);
  return;
}



void ResetFontPrivateIndex(void)

{
  DAT_0033cd68 = 0;
  return;
}



undefined8 _FontSetNewPrivate(long param_1,int param_2,undefined8 param_3)

{
  void *__dest;
  int iVar1;
  size_t __size;
  
  iVar1 = *(int *)(param_1 + 0xa8);
  __dest = *(void **)(param_1 + 0xb0);
  if (iVar1 < param_2) {
    __size = (long)(param_2 + 1) << 3;
    if (__dest == (void *)0x0) {
      __dest = malloc(__size);
      if (__dest == (void *)0x0) {
        return 0;
      }
      iVar1 = iVar1 + 1;
    }
    else {
      if ((void *)(param_1 + 0xb8) == __dest) {
        __dest = malloc(__size);
        if (__dest == (void *)0x0) {
          return 0;
        }
        iVar1 = iVar1 + 1;
        __dest = memcpy(__dest,(void *)(param_1 + 0xb8),(long)iVar1 << 3);
      }
      else {
        __dest = realloc(__dest,__size);
        if (__dest == (void *)0x0) {
          return 0;
        }
        iVar1 = *(int *)(param_1 + 0xa8) + 1;
      }
    }
    *(void **)(param_1 + 0xb0) = __dest;
    *(int *)(param_1 + 0xa8) = iVar1;
    while (iVar1 < param_2) {
      *(undefined8 *)((long)__dest + (long)iVar1 * 8) = 0;
      __dest = *(void **)(param_1 + 0xb0);
      iVar1 = *(int *)(param_1 + 0xa8) + 1;
      *(int *)(param_1 + 0xa8) = iVar1;
    }
  }
  *(undefined8 *)((long)__dest + (long)param_2 * 8) = param_3;
  return 1;
}



void BitOrderInvert(byte *param_1,int param_2)

{
  byte *pbVar1;
  byte *pbVar2;
  
  if (0 < param_2) {
    pbVar1 = param_1;
    do {
      pbVar2 = pbVar1 + 1;
      *pbVar1 = (&DAT_00134b20)[*pbVar1];
      pbVar1 = pbVar2;
    } while (param_1 + (ulong)(param_2 - 1) + 1 != pbVar2);
  }
  return;
}



void TwoByteSwap(undefined *param_1,int param_2)

{
  undefined uVar1;
  undefined *puVar2;
  undefined *puVar3;
  
  if (0 < param_2) {
    puVar2 = param_1;
    do {
      uVar1 = *puVar2;
      puVar3 = puVar2 + 2;
      *puVar2 = puVar2[1];
      puVar2[1] = uVar1;
      puVar2 = puVar3;
    } while (puVar3 != param_1 + (ulong)(param_2 - 1U >> 1) * 2 + 2);
  }
  return;
}



void FourByteSwap(undefined *param_1,int param_2)

{
  undefined uVar1;
  undefined *puVar2;
  undefined *puVar3;
  
  if (0 < param_2) {
    puVar2 = param_1;
    do {
      uVar1 = *puVar2;
      puVar3 = puVar2 + 4;
      *puVar2 = puVar2[3];
      puVar2[3] = uVar1;
      uVar1 = puVar2[1];
      puVar2[1] = puVar2[2];
      puVar2[2] = uVar1;
      puVar2 = puVar3;
    } while (puVar3 != param_1 + (ulong)(param_2 - 1U >> 2) * 4 + 4);
  }
  return;
}



ulong RepadBitmap(undefined *param_1,undefined *param_2,uint param_3,uint param_4,int param_5,
                 int param_6)

{
  undefined *puVar1;
  undefined *puVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  long lVar6;
  int iVar7;
  int iVar8;
  undefined *puVar9;
  
  if (param_3 == 2) {
    iVar8 = (param_5 + 0xf >> 4) * 2;
  }
  else {
    if (param_3 < 3) {
      iVar8 = param_5 + 7 >> 3;
      if (param_3 != 1) {
        return 0;
      }
    }
    else {
      if (param_3 == 4) {
        iVar8 = (param_5 + 0x1f >> 5) << 2;
      }
      else {
        if (param_3 != 8) {
          return 0;
        }
        iVar8 = (param_5 + 0x3f >> 6) << 3;
      }
    }
  }
  if (param_4 == 2) {
    iVar3 = (param_5 + 0xf >> 4) * 2;
  }
  else {
    if (param_4 < 3) {
      iVar3 = param_5 + 7 >> 3;
      if (param_4 != 1) {
        return 0;
      }
    }
    else {
      if (param_4 == 4) {
        iVar3 = (param_5 + 0x1f >> 5) * 4;
      }
      else {
        if (param_4 != 8) {
          return 0;
        }
        iVar3 = (param_5 + 0x3f >> 6) * 8;
      }
    }
  }
  iVar7 = iVar3;
  if (iVar8 <= iVar3) {
    iVar7 = iVar8;
  }
  if (0 < param_6) {
    iVar4 = 0;
    lVar6 = (ulong)(iVar7 - 1) + 1;
    do {
      puVar1 = param_1 + lVar6;
      puVar9 = param_2;
      if (iVar7 < 1) {
        iVar5 = 0;
      }
      else {
        do {
          puVar2 = param_1 + 1;
          *puVar9 = *param_1;
          puVar9 = puVar9 + 1;
          param_1 = puVar2;
        } while (puVar2 != puVar1);
        param_2 = param_2 + lVar6;
        iVar5 = iVar7;
      }
      if (iVar5 < iVar3) {
        puVar1 = param_2 + (ulong)(uint)((iVar3 + -1) - iVar5) + 1;
        puVar9 = param_2;
        do {
          param_2 = puVar9 + 1;
          *puVar9 = 0;
          puVar9 = param_2;
        } while (param_2 != puVar1);
      }
      iVar4 = iVar4 + 1;
      param_1 = param_1 + (iVar8 - iVar7);
    } while (param_6 != iVar4);
  }
  return (ulong)(uint)(iVar3 * param_6);
}



undefined8 client_auth_generation(void)

{
  return 0;
}



undefined8 ClientSignal(void)

{
  return 0xffffffff;
}



void DeleteFontClientID(void)

{
  return;
}



void ErrorF(void)

{
  return;
}



void FatalError(void)

{
  return;
}



undefined8 find_old_font(void)

{
  return 0;
}



undefined8 GetClientResolutions(void)

{
  return 0;
}



undefined8 GetDefaultPointSize(void)

{
  return 0;
}



undefined8 GetNewFontClientID(void)

{
  return 0;
}



undefined8 GetTimeInMillis(void)

{
  return 0;
}



undefined8 init_fs_handlers(void)

{
  return 0x55;
}



undefined8 RegisterFPEFunctions(void)

{
  return 0;
}



void remove_fs_handlers(void)

{
  return;
}



undefined8 set_font_authorizations(void)

{
  return 0;
}



undefined8 StoreFontClientFont(void)

{
  return 0;
}



void _fini(void)

{
  return;
}


